import{a as Tn,b as pd}from"./chunk-DNOPPQAV.js";import{a as Jo,b as ld}from"./chunk-AEZOZC6Z.js";import{a as bl,b as mi,c as gi,d as vo}from"./chunk-PRQOG5TK.js";import{a as ud,c as _d,e as Cd,f as xd,g as Md,h as Pd,i as vd,j as ra,k as Dn,l as Od,m as yd,n as wd,o as Sd,p as kd,q as sa,r as Dd}from"./chunk-UEOTX5DO.js";import{b as vi}from"./chunk-VB7LVLZV.js";import{a as gd,b as hd,c as fd}from"./chunk-FMKU7UOR.js";import{a as Id,b as Td}from"./chunk-UOT7FRBJ.js";import{a as qe,b as Xe,c as Ze,d as Ko}from"./chunk-NRMGPXUI.js";import{c as bd,d as oa,e as aa,f as wi}from"./chunk-N5M4XZID.js";import{$ as Fl,$a as yc,Aa as tc,Ab as Pi,Ba as ec,Bb as Uc,Ca as nc,Cb as Hc,Da as ic,Db as Wc,Ea as oc,Eb as Gc,Fa as ac,Fb as Sn,Gb as xr,Ha as rc,Hb as Yc,Ia as Cr,Ib as Ro,Ja as sc,Jb as qc,K as wn,Ka as lc,Kb as Xc,L as Sl,La as cc,Lb as Zc,M as kl,Ma as dc,Mb as Qc,N as Il,Na as pc,Nb as Kc,O as Tl,Oa as mc,Ob as Jc,P as Dl,Pa as gc,Pb as td,Q as El,Qa as hc,R as jl,Ra as fc,Sa as uc,Sb as id,T as ke,Ta as _c,Ua as Cc,Ub as od,V as ko,Va as xc,W as Io,Wa as Mc,Wb as sd,X as To,Xa as bc,Y as Do,Ya as Pc,Z as Eo,Za as vc,_ as jo,_a as Oc,_b as Mr,aa as Al,ab as wc,ba as zl,bb as Sc,ca as Vl,cb as kc,cc as Gi,da as Ll,db as Ic,dc as kn,e as Be,ea as xi,eb as Tc,fa as Rl,fb as Dc,fc as Ie,g as ml,ga as fr,gb as Ec,h as gl,ha as Bl,hb as jc,hc as In,i as bo,ia as ur,ib as Fc,ja as Nl,jb as Ac,ka as _r,kb as bi,la as $l,lc as Qe,ma as Fo,mc as ea,md as na,n as xl,na as Ul,nd as ia,oa as Mi,ob as zc,pa as Hl,pb as Vc,q as Ml,qa as Wl,qb as Lc,ra as Gl,rb as Rc,sa as Yl,sb as Bc,sd as md,ta as ql,tb as Nc,ua as Xl,ub as $c,va as Ao,wa as Zl,wb as zo,xa as Ql,xb as Vo,ya as Kl,yb as ln,za as Jl,zb as Lo}from"./chunk-BAOJ77MB.js";import{$a as j,A as Gs,Aa as T,Ae as On,B as Oe,Bb as z,Cb as V,Cc as pl,Da as A,Db as si,Df as se,E as ri,Ea as fe,Ee as _e,Ef as ad,F as rt,Fa as sr,Fb as li,Fe as Se,Ff as Qo,Ge as Oo,Hb as ge,He as yn,Hf as rd,I as xo,Ia as y,Ie as yo,If as Oi,Ja as et,Jb as sn,Jf as cd,Ka as f,Kb as gr,Kf as yi,La as K,Le as Mt,Lf as dd,Ma as $,Mf as ta,N as Ys,Na as de,O as q,Oa as lr,Ob as Q,Oe as fi,P as ce,Pb as N,Pc as hl,Pd as $t,Pe as kt,Qb as rl,Qd as di,Qe as ui,Rb as sl,Rc as fl,Rd as pt,Re as _i,Sd as mt,T as qs,Tb as ll,Td as re,Te as Ye,U as ye,Ud as Po,Ue as yl,V as he,Va as l,Vb as Vt,Vd as xt,Ve as Wi,W as or,Wa as c,Wd as ht,X as Ht,Xa as k,Xb as cl,Xd as yt,Xe as wo,Y as ie,Ya as vt,Yd as pi,Ye as Ci,Za as Ot,Zd as nt,Ze as wl,_b as Mo,_c as hr,_d as Mn,ac as Cn,ae as jt,ba as oe,bb as P,be as bn,c as Ct,ca as M,cb as C,ce as W,da as b,db as cr,de as Pn,df as So,ea as ar,eb as dr,fe as Pl,ff as ed,gc as dl,ge as Lt,ha as Xs,hb as pr,hf as Bo,ia as Zs,ib as ve,ie as qt,if as No,ja as H,jb as pe,jf as $o,ka as Qs,kb as me,kc as Re,kf as Uo,l as ir,lb as gt,ld as ul,le as Ft,lf as Ho,m as ai,ma as rr,mb as p,me as Ne,mf as Wo,nb as D,nd as _l,nf as Go,ob as E,od as at,oe as vl,of as Yo,pb as ue,pe as we,pf as qo,q as Gn,qa as Ks,qe as $e,qf as Xo,r as Yn,ra as Js,rb as nl,rd as ci,rf as Zo,sb as il,sd as Cl,se as Ol,sf as nd,ta as ae,tb as Wt,td as Z,te as Ue,ub as Gt,ue as He,v as Hs,va as tl,vb as Yt,wa as g,wb as mr,we as hi,xb as ol,xd as xn,xe as We,y as Ws,yb as Le,ye as Ge,yf as Zt,za as el,zb as al,zc as St,ze as vn}from"./chunk-NJA2VFCC.js";import{a as _t,b as ne,d as Us,g as _n}from"./chunk-TSRGIXR5.js";var Ed=(()=>{class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=fe({type:n});static \u0275inj=he({imports:[Mr,ci,Mr,ci]})}return n})();var lh=["input"],ch=["formField"],dh=["*"],la=class{source;value;constructor(o,t){this.source=o,this.value=t}},ph={provide:Pl,useExisting:qs(()=>br),multi:!0},jd=new or("MatRadioGroup"),mh=new or("mat-radio-default-options",{providedIn:"root",factory:gh});function gh(){return{color:"accent",disabledInteractive:!1}}var br=(()=>{class n{_changeDetector=ie(ge);_value=null;_name=ie(hr).getId("mat-radio-group-");_selected=null;_isInitialized=!1;_labelPosition="after";_disabled=!1;_required=!1;_buttonChanges;_controlValueAccessorChangeFn=()=>{};onTouched=()=>{};change=new H;_radios;color;get name(){return this._name}set name(t){this._name=t,this._updateRadioButtonNames()}get labelPosition(){return this._labelPosition}set labelPosition(t){this._labelPosition=t==="before"?"before":"after",this._markRadiosForCheck()}get value(){return this._value}set value(t){this._value!==t&&(this._value=t,this._updateSelectedRadioFromValue(),this._checkSelectedRadioButton())}_checkSelectedRadioButton(){this._selected&&!this._selected.checked&&(this._selected.checked=!0)}get selected(){return this._selected}set selected(t){this._selected=t,this.value=t?t.value:null,this._checkSelectedRadioButton()}get disabled(){return this._disabled}set disabled(t){this._disabled=t,this._markRadiosForCheck()}get required(){return this._required}set required(t){this._required=t,this._markRadiosForCheck()}get disabledInteractive(){return this._disabledInteractive}set disabledInteractive(t){this._disabledInteractive=t,this._markRadiosForCheck()}_disabledInteractive=!1;constructor(){}ngAfterContentInit(){this._isInitialized=!0,this._buttonChanges=this._radios.changes.subscribe(()=>{this.selected&&!this._radios.find(t=>t===this.selected)&&(this._selected=null)})}ngOnDestroy(){this._buttonChanges?.unsubscribe()}_touch(){this.onTouched&&this.onTouched()}_updateRadioButtonNames(){this._radios&&this._radios.forEach(t=>{t.name=this.name,t._markForCheck()})}_updateSelectedRadioFromValue(){let t=this._selected!==null&&this._selected.value===this._value;this._radios&&!t&&(this._selected=null,this._radios.forEach(e=>{e.checked=this.value===e.value,e.checked&&(this._selected=e)}))}_emitChangeEvent(){this._isInitialized&&this.change.emit(new la(this._selected,this._value))}_markRadiosForCheck(){this._radios&&this._radios.forEach(t=>t._markForCheck())}writeValue(t){this.value=t,this._changeDetector.markForCheck()}registerOnChange(t){this._controlValueAccessorChangeFn=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t,this._changeDetector.markForCheck()}static \u0275fac=function(e){return new(e||n)};static \u0275dir=sr({type:n,selectors:[["mat-radio-group"]],contentQueries:function(e,i,a){if(e&1&&pr(a,ca,5),e&2){let r;pe(r=me())&&(i._radios=r)}},hostAttrs:["role","radiogroup",1,"mat-mdc-radio-group"],inputs:{color:"color",name:"name",labelPosition:"labelPosition",value:"value",selected:"selected",disabled:[2,"disabled","disabled",sn],required:[2,"required","required",sn],disabledInteractive:[2,"disabledInteractive","disabledInteractive",sn]},outputs:{change:"change"},exportAs:["matRadioGroup"],features:[mr([ph,{provide:jd,useExisting:n}])]})}return n})(),ca=(()=>{class n{_elementRef=ie(rr);_changeDetector=ie(ge);_focusMonitor=ie(hl);_radioDispatcher=ie(ed);_defaultOptions=ie(mh,{optional:!0});_ngZone=ie(Qs);_renderer=ie(el);_uniqueId=ie(hr).getId("mat-radio-");_cleanupClick;id=this._uniqueId;name;ariaLabel;ariaLabelledby;ariaDescribedby;disableRipple=!1;tabIndex=0;get checked(){return this._checked}set checked(t){this._checked!==t&&(this._checked=t,t&&this.radioGroup&&this.radioGroup.value!==this.value?this.radioGroup.selected=this:!t&&this.radioGroup&&this.radioGroup.value===this.value&&(this.radioGroup.selected=null),t&&this._radioDispatcher.notify(this.id,this.name),this._changeDetector.markForCheck())}get value(){return this._value}set value(t){this._value!==t&&(this._value=t,this.radioGroup!==null&&(this.checked||(this.checked=this.radioGroup.value===t),this.checked&&(this.radioGroup.selected=this)))}get labelPosition(){return this._labelPosition||this.radioGroup&&this.radioGroup.labelPosition||"after"}set labelPosition(t){this._labelPosition=t}_labelPosition;get disabled(){return this._disabled||this.radioGroup!==null&&this.radioGroup.disabled}set disabled(t){this._setDisabled(t)}get required(){return this._required||this.radioGroup&&this.radioGroup.required}set required(t){t!==this._required&&this._changeDetector.markForCheck(),this._required=t}get color(){return this._color||this.radioGroup&&this.radioGroup.color||this._defaultOptions&&this._defaultOptions.color||"accent"}set color(t){this._color=t}_color;get disabledInteractive(){return this._disabledInteractive||this.radioGroup!==null&&this.radioGroup.disabledInteractive}set disabledInteractive(t){this._disabledInteractive=t}_disabledInteractive;change=new H;radioGroup;get inputId(){return`${this.id||this._uniqueId}-input`}_checked=!1;_disabled;_required;_value=null;_removeUniqueSelectionListener=()=>{};_previousTabIndex;_inputElement;_rippleTrigger;_noopAnimations;_injector=ie(Xs);constructor(){ie(fl).load(_l);let t=ie(jd,{optional:!0}),e=ie(Ks,{optional:!0}),i=ie(new Zs("tabindex"),{optional:!0});this.radioGroup=t,this._noopAnimations=e==="NoopAnimations",this._disabledInteractive=this._defaultOptions?.disabledInteractive??!1,i&&(this.tabIndex=gr(i,0))}focus(t,e){e?this._focusMonitor.focusVia(this._inputElement,e,t):this._inputElement.nativeElement.focus(t)}_markForCheck(){this._changeDetector.markForCheck()}ngOnInit(){this.radioGroup&&(this.checked=this.radioGroup.value===this._value,this.checked&&(this.radioGroup.selected=this),this.name=this.radioGroup.name),this._removeUniqueSelectionListener=this._radioDispatcher.listen((t,e)=>{t!==this.id&&e===this.name&&(this.checked=!1)})}ngDoCheck(){this._updateTabIndex()}ngAfterViewInit(){this._updateTabIndex(),this._focusMonitor.monitor(this._elementRef,!0).subscribe(t=>{!t&&this.radioGroup&&this.radioGroup._touch()}),this._ngZone.runOutsideAngular(()=>{this._cleanupClick=this._renderer.listen(this._inputElement.nativeElement,"click",this._onInputClick)})}ngOnDestroy(){this._cleanupClick?.(),this._focusMonitor.stopMonitoring(this._elementRef),this._removeUniqueSelectionListener()}_emitChangeEvent(){this.change.emit(new la(this,this._value))}_isRippleDisabled(){return this.disableRipple||this.disabled}_onInputInteraction(t){if(t.stopPropagation(),!this.checked&&!this.disabled){let e=this.radioGroup&&this.value!==this.radioGroup.value;this.checked=!0,this._emitChangeEvent(),this.radioGroup&&(this.radioGroup._controlValueAccessorChangeFn(this.value),e&&this.radioGroup._emitChangeEvent())}}_onTouchTargetClick(t){this._onInputInteraction(t),(!this.disabled||this.disabledInteractive)&&this._inputElement?.nativeElement.focus()}_setDisabled(t){this._disabled!==t&&(this._disabled=t,this._changeDetector.markForCheck())}_onInputClick=t=>{this.disabled&&this.disabledInteractive&&t.preventDefault()};_updateTabIndex(){let t=this.radioGroup,e;if(!t||!t.selected||this.disabled?e=this.tabIndex:e=t.selected===this?this.tabIndex:-1,e!==this._previousTabIndex){let i=this._inputElement?.nativeElement;i&&(i.setAttribute("tabindex",e+""),this._previousTabIndex=e,Js(()=>{queueMicrotask(()=>{t&&t.selected&&t.selected!==this&&document.activeElement===i&&(t.selected?._inputElement.nativeElement.focus(),document.activeElement===i&&this._inputElement.nativeElement.blur())})},{injector:this._injector}))}}static \u0275fac=function(e){return new(e||n)};static \u0275cmp=A({type:n,selectors:[["mat-radio-button"]],viewQuery:function(e,i){if(e&1&&(ve(lh,5),ve(ch,7,rr)),e&2){let a;pe(a=me())&&(i._inputElement=a.first),pe(a=me())&&(i._rippleTrigger=a.first)}},hostAttrs:[1,"mat-mdc-radio-button"],hostVars:19,hostBindings:function(e,i){e&1&&P("focus",function(){return i._inputElement.nativeElement.focus()}),e&2&&(et("id",i.id)("tabindex",null)("aria-label",null)("aria-labelledby",null)("aria-describedby",null),$("mat-primary",i.color==="primary")("mat-accent",i.color==="accent")("mat-warn",i.color==="warn")("mat-mdc-radio-checked",i.checked)("mat-mdc-radio-disabled",i.disabled)("mat-mdc-radio-disabled-interactive",i.disabledInteractive)("_mat-animation-noopable",i._noopAnimations))},inputs:{id:"id",name:"name",ariaLabel:[0,"aria-label","ariaLabel"],ariaLabelledby:[0,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[0,"aria-describedby","ariaDescribedby"],disableRipple:[2,"disableRipple","disableRipple",sn],tabIndex:[2,"tabIndex","tabIndex",t=>t==null?0:gr(t)],checked:[2,"checked","checked",sn],value:"value",labelPosition:"labelPosition",disabled:[2,"disabled","disabled",sn],required:[2,"required","required",sn],color:"color",disabledInteractive:[2,"disabledInteractive","disabledInteractive",sn]},outputs:{change:"change"},exportAs:["matRadioButton"],ngContentSelectors:dh,decls:13,vars:17,consts:[["formField",""],["input",""],["mat-internal-form-field","",3,"labelPosition"],[1,"mdc-radio"],[1,"mat-mdc-radio-touch-target",3,"click"],["type","radio","aria-invalid","false",1,"mdc-radio__native-control",3,"change","id","checked","disabled","required"],[1,"mdc-radio__background"],[1,"mdc-radio__outer-circle"],[1,"mdc-radio__inner-circle"],["mat-ripple","",1,"mat-radio-ripple","mat-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mat-ripple-element","mat-radio-persistent-ripple"],[1,"mdc-label",3,"for"]],template:function(e,i){if(e&1){let a=j();cr(),l(0,"div",2,0)(2,"div",3)(3,"div",4),P("click",function(s){return M(a),b(i._onTouchTargetClick(s))}),c(),l(4,"input",5,1),P("change",function(s){return M(a),b(i._onInputInteraction(s))}),c(),l(6,"div",6),k(7,"div",7)(8,"div",8),c(),l(9,"div",9),k(10,"div",10),c()(),l(11,"label",11),dr(12),c()()}e&2&&(f("labelPosition",i.labelPosition),g(2),$("mdc-radio--disabled",i.disabled),g(2),f("id",i.inputId)("checked",i.checked)("disabled",i.disabled&&!i.disabledInteractive)("required",i.required),et("name",i.name)("value",i.value)("aria-label",i.ariaLabel)("aria-labelledby",i.ariaLabelledby)("aria-describedby",i.ariaDescribedby)("aria-disabled",i.disabled&&i.disabledInteractive?"true":null),g(5),f("matRippleTrigger",i._rippleTrigger.nativeElement)("matRippleDisabled",i._isRippleDisabled())("matRippleCentered",!0),g(2),f("for",i.inputId))},dependencies:[ul,sd],styles:[`.mat-mdc-radio-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-radio-button .mdc-radio{display:inline-block;position:relative;flex:0 0 auto;box-sizing:content-box;width:20px;height:20px;cursor:pointer;will-change:opacity,transform,border-color,color;padding:calc((var(--mdc-radio-state-layer-size, 40px) - 20px)/2)}.mat-mdc-radio-button .mdc-radio:hover>.mdc-radio__native-control:not([disabled]):not(:focus)~.mdc-radio__background::before{opacity:.04;transform:scale(1)}.mat-mdc-radio-button .mdc-radio:hover>.mdc-radio__native-control:not([disabled])~.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-hover-icon-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button .mdc-radio:hover>.mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio:hover>.mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-hover-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio:active>.mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-pressed-icon-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button .mdc-radio:active>.mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio:active>.mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-pressed-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio__background{display:inline-block;position:relative;box-sizing:border-box;width:20px;height:20px}.mat-mdc-radio-button .mdc-radio__background::before{position:absolute;transform:scale(0, 0);border-radius:50%;opacity:0;pointer-events:none;content:"";transition:opacity 90ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms cubic-bezier(0.4, 0, 0.6, 1);width:var(--mdc-radio-state-layer-size, 40px);height:var(--mdc-radio-state-layer-size, 40px);top:calc(-1*(var(--mdc-radio-state-layer-size, 40px) - 20px)/2);left:calc(-1*(var(--mdc-radio-state-layer-size, 40px) - 20px)/2)}.mat-mdc-radio-button .mdc-radio__outer-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;border-width:2px;border-style:solid;border-radius:50%;transition:border-color 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-radio-button .mdc-radio__inner-circle{position:absolute;top:0;left:0;box-sizing:border-box;width:100%;height:100%;transform:scale(0, 0);border-width:10px;border-style:solid;border-radius:50%;transition:transform 90ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms cubic-bezier(0.4, 0, 0.6, 1)}.mat-mdc-radio-button .mdc-radio__native-control{position:absolute;margin:0;padding:0;opacity:0;top:0;right:0;left:0;cursor:inherit;z-index:1;width:var(--mdc-radio-state-layer-size, 40px);height:var(--mdc-radio-state-layer-size, 40px)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background{transition:opacity 90ms cubic-bezier(0, 0, 0.2, 1),transform 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__outer-circle{transition:border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__inner-circle{transition:transform 90ms cubic-bezier(0, 0, 0.2, 1),border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:focus+.mdc-radio__background::before{transform:scale(1);opacity:.12;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 1),transform 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button .mdc-radio__native-control:disabled:not(:checked)+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-unselected-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-radio-disabled-unselected-icon-opacity, 0.38)}.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background{cursor:default}.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio__native-control:disabled+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-selected-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-radio-button .mdc-radio__native-control:enabled:not(:checked)+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-icon-color, var(--mat-sys-on-surface-variant))}.mat-mdc-radio-button .mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button .mdc-radio__native-control:enabled:checked+.mdc-radio__background>.mdc-radio__inner-circle{border-color:var(--mdc-radio-selected-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio__native-control:enabled:focus:checked+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button .mdc-radio__native-control:enabled:focus:checked+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-selected-focus-icon-color, var(--mat-sys-primary))}.mat-mdc-radio-button .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__inner-circle{transform:scale(0.5);transition:transform 90ms cubic-bezier(0, 0, 0.2, 1),border-color 90ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled{pointer-events:auto}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control:not(:checked)+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-unselected-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-radio-disabled-unselected-icon-opacity, 0.38)}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled:hover .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled:hover .mdc-radio__native-control:checked+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control:checked:focus+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control:checked:focus+.mdc-radio__background>.mdc-radio__outer-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control+.mdc-radio__background>.mdc-radio__inner-circle,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__native-control+.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-disabled-selected-icon-color, var(--mat-sys-on-surface));opacity:var(--mdc-radio-disabled-selected-icon-opacity, 0.38)}.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__background::before,.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__outer-circle,.mat-mdc-radio-button._mat-animation-noopable .mdc-radio__inner-circle{transition:none !important}.mat-mdc-radio-button .mdc-radio__background::before{background-color:var(--mat-radio-ripple-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button.mat-mdc-radio-checked .mat-ripple-element,.mat-mdc-radio-button.mat-mdc-radio-checked .mdc-radio__background::before{background-color:var(--mat-radio-checked-ripple-color, var(--mat-sys-primary))}.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mat-ripple-element,.mat-mdc-radio-button.mat-mdc-radio-disabled-interactive .mdc-radio--disabled .mdc-radio__background::before{background-color:var(--mat-radio-ripple-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button .mat-internal-form-field{color:var(--mat-radio-label-text-color, var(--mat-sys-on-surface));font-family:var(--mat-radio-label-text-font, var(--mat-sys-body-medium-font));line-height:var(--mat-radio-label-text-line-height, var(--mat-sys-body-medium-line-height));font-size:var(--mat-radio-label-text-size, var(--mat-sys-body-medium-size));letter-spacing:var(--mat-radio-label-text-tracking, var(--mat-sys-body-medium-tracking));font-weight:var(--mat-radio-label-text-weight, var(--mat-sys-body-medium-weight))}.mat-mdc-radio-button .mdc-radio--disabled+label{color:var(--mat-radio-disabled-label-color, color-mix(in srgb, var(--mat-sys-on-surface) 38%, transparent))}.mat-mdc-radio-button .mat-radio-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:50%}.mat-mdc-radio-button .mat-radio-ripple>.mat-ripple-element{opacity:.14}.mat-mdc-radio-button .mat-radio-ripple::before{border-radius:50%}.mat-mdc-radio-button .mdc-radio>.mdc-radio__native-control:focus:enabled:not(:checked)~.mdc-radio__background>.mdc-radio__outer-circle{border-color:var(--mdc-radio-unselected-focus-icon-color, var(--mat-sys-on-surface))}.mat-mdc-radio-button.cdk-focused .mat-focus-indicator::before{content:""}.mat-mdc-radio-disabled{cursor:default;pointer-events:none}.mat-mdc-radio-disabled.mat-mdc-radio-disabled-interactive{pointer-events:auto}.mat-mdc-radio-touch-target{position:absolute;top:50%;left:50%;height:48px;width:48px;transform:translate(-50%, -50%);display:var(--mat-radio-touch-target-display, block)}[dir=rtl] .mat-mdc-radio-touch-target{left:auto;right:50%;transform:translate(50%, -50%)}
`],encapsulation:2,changeDetection:0})}return n})(),Fd=(()=>{class n{static \u0275fac=function(e){return new(e||n)};static \u0275mod=fe({type:n});static \u0275inj=he({imports:[ci,Cl,ca,ci]})}return n})();function fh(n,o){n&1&&(l(0,"mat-error"),p(1," Project name is required "),c())}function uh(n,o){n&1&&(l(0,"mat-error"),p(1," Project name must be at least 3 characters "),c())}function _h(n,o){if(n&1&&(l(0,"mat-option",7),p(1),c()),n&2){let t=o.$implicit;f("value",t),g(),E(" ",t," ")}}function Ch(n,o){if(n&1&&(l(0,"mat-option",7),p(1),c()),n&2){let t=o.$implicit;f("value",t),g(),E(" ",t," ")}}var Ad=(()=>{class n{constructor(t,e,i){this.fb=t,this.dialogRef=e,this.data=i,this.availableModels=["RtmDet-[9M]","RepPoints-[20M]","RepPoints-[37M]","ODEmbedded-[23M]"],this.availableGroups=["WT","FE","BE","QA","AT"],this.editForm=this.fb.group({name:[i.project.name||"",[qt.required,qt.minLength(3)]],modelName:[i.project.modelName||null],groupName:[i.project.groupName||null]}),console.log("Edit dialog - Initial modelName:",i.project.modelName),console.log("Edit dialog - Initial groupName:",i.project.groupName)}get nameControl(){return this.editForm.get("name")}get modelNameControl(){return this.editForm.get("modelName")}get groupNameControl(){return this.editForm.get("groupName")}onCancel(){this.dialogRef.close()}onSave(){if(this.editForm.valid){let t={name:this.editForm.value.name,modelName:this.editForm.value.modelName||"",groupName:this.editForm.value.groupName||void 0};this.dialogRef.close(t)}}static{this.\u0275fac=function(e){return new(e||n)(T(Ge),T(pt),T(mt))}}static{this.\u0275cmp=A({type:n,selectors:[["app-project-edit-dialog"]],standalone:!1,decls:36,vars:8,consts:[["mat-dialog-title",""],[1,"edit-form",3,"formGroup"],[1,"form-section"],["appearance","fill",1,"half-width"],["aria-label","Project name input","formControlName","name","matInput","","placeholder","Enter a unique project name","required",""],[4,"ngIf"],["aria-label","Model name select","formControlName","modelName","placeholder","Select model"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["aria-label","Group name select","formControlName","groupName","placeholder","Select group"],["align","end"],["mat-button","",3,"click"],["color","primary","mat-raised-button","",3,"click","disabled"]],template:function(e,i){e&1&&(l(0,"h2",0),p(1,"Edit Project"),c(),l(2,"mat-dialog-content")(3,"form",1)(4,"div",2)(5,"mat-form-field",3)(6,"mat-label"),p(7,"Project Name"),c(),k(8,"input",4),l(9,"mat-hint"),p(10,"Mandatory: Specify a custom project name"),c(),y(11,fh,2,0,"mat-error",5)(12,uh,2,0,"mat-error",5),c(),l(13,"mat-form-field",3)(14,"mat-label"),p(15,"Model Name"),c(),l(16,"mat-select",6)(17,"mat-option",7),p(18,"-- No Model --"),c(),y(19,_h,2,2,"mat-option",8),c(),l(20,"mat-hint"),p(21,"Specify the model name in databricks"),c()(),l(22,"mat-form-field",3)(23,"mat-label"),p(24,"Group"),c(),l(25,"mat-select",9)(26,"mat-option",7),p(27,"-- No Group --"),c(),y(28,Ch,2,2,"mat-option",8),c(),l(29,"mat-hint"),p(30,"Optional: Assign project to a group"),c()()()()(),l(31,"mat-dialog-actions",10)(32,"button",11),P("click",function(){return i.onCancel()}),p(33,"Cancel"),c(),l(34,"button",12),P("click",function(){return i.onSave()}),p(35," Save "),c()()),e&2&&(g(3),f("formGroup",i.editForm),g(8),f("ngIf",i.nameControl==null?null:i.nameControl.hasError("required")),g(),f("ngIf",i.nameControl==null?null:i.nameControl.hasError("minlength")),g(5),f("value",null),g(2),f("ngForOf",i.availableModels),g(7),f("value",null),g(2),f("ngForOf",i.availableGroups),g(6),f("disabled",!i.editForm.valid))},dependencies:[Q,N,$e,Lt,Ft,Ne,hi,Ue,He,Z,Mt,_e,Oo,Se,kt,se,Zt,xt,yt,ht],styles:[".edit-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:500px;padding:0}.edit-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]{margin-bottom:1rem}.edit-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .half-width[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}  .mat-mdc-form-field .mat-mdc-text-field-wrapper{background-color:#fff!important}  .mat-mdc-form-field .mat-mdc-form-field-flex{background-color:#fff!important}  .mat-mdc-form-field .mdc-text-field--filled{background-color:#fff!important}mat-dialog-content[_ngcontent-%COMP%]{overflow:visible;min-height:200px;padding:1.5rem}mat-dialog-actions[_ngcontent-%COMP%]{padding:1rem 1.5rem;margin:0}h2[mat-dialog-title][_ngcontent-%COMP%]{margin:0;padding:1.5rem 1.5rem .5rem;font-size:1.5rem;font-weight:500}  mat-dialog-container .mat-mdc-form-field .mdc-text-field{background-color:#fff!important}  mat-dialog-container .mat-mdc-form-field .mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:#fff!important}"]})}}return n})();var zd=(()=>{class n{constructor(t,e){this.dialogRef=t,this.data=e}onCancel(){this.dialogRef.close(!1)}onConfirm(){this.dialogRef.close(!0)}static{this.\u0275fac=function(e){return new(e||n)(T(pt),T(mt))}}static{this.\u0275cmp=A({type:n,selectors:[["app-project-delete-dialog"]],standalone:!1,decls:19,vars:1,consts:[["mat-dialog-title",""],[1,"warning-container"],["color","warn",1,"warning-icon"],[1,"warning-text"],[1,"warning-message"],["align","end"],["mat-button","",3,"click"],["color","warn","mat-raised-button","",3,"click"]],template:function(e,i){e&1&&(l(0,"h2",0),p(1,"Delete Project"),c(),l(2,"mat-dialog-content")(3,"div",1)(4,"mat-icon",2),p(5,"warning"),c(),l(6,"div",3)(7,"p"),p(8," Are you sure you want to delete the project "),l(9,"strong"),p(10),c(),p(11,"? "),c(),l(12,"p",4),p(13," This action cannot be undone. All images, labels, and associated data will be permanently deleted. "),c()()()(),l(14,"mat-dialog-actions",5)(15,"button",6),P("click",function(){return i.onCancel()}),p(16,"Cancel"),c(),l(17,"button",7),P("click",function(){return i.onConfirm()}),p(18,"Delete"),c()()),e&2&&(g(10),D(i.data.project.name))},dependencies:[Z,W,xt,yt,ht],styles:[".warning-container[_ngcontent-%COMP%]{display:flex;gap:16px;padding:16px 0;min-width:400px}.warning-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;flex-shrink:0}.warning-text[_ngcontent-%COMP%]{flex:1}.warning-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 12px;line-height:1.5}.warning-text[_ngcontent-%COMP%]   .warning-message[_ngcontent-%COMP%]{color:#666;font-size:14px}.warning-text[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#d32f2f}"]})}}return n})();var Ld=(()=>{class n{constructor(){this.cardClick=new H,this.editClick=new H,this.deleteClick=new H}getThumbnailUrl(){return this.project?.thumbnailUrl?this.project.thumbnailUrl:this.getDefaultImageUrl()}getDefaultImageUrl(){return"assets/factory.svg"}onCardClick(){this.project?.id&&this.cardClick.emit(this.project.id)}onMenuClick(t){t.stopPropagation()}onEditClick(){this.editClick.emit(this.project)}onDeleteClick(){this.deleteClick.emit(this.project)}getTypeIcon(){switch(this.project?.type){case"Object Detection":return"check_box_outline_blank";case"Segmentation":return"gradient";case"Classification":return"category";default:return"folder"}}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=A({type:n,selectors:[["app-project-card"]],inputs:{project:"project"},outputs:{cardClick:"cardClick",editClick:"editClick",deleteClick:"deleteClick"},standalone:!1,decls:50,vars:20,consts:[["projectMenu","matMenu"],["role","button","tabindex","0",1,"project-card",3,"click","keydown.enter","keydown.space"],[1,"project-thumbnail"],["loading","lazy",1,"thumbnail-image",3,"alt","src"],[1,"project-info"],[1,"project-header"],["aria-hidden","true","matTooltipPosition","above",1,"type-icon",3,"matTooltip"],[1,"project-name",3,"title"],[1,"image-count-badge"],["aria-label","Project options","mat-icon-button","",1,"menu-button",3,"click","matMenuTriggerFor"],[1,"three-dots"],[1,"dot"],["mat-menu-item","",3,"click"],[1,"project-meta"],[1,"creator-name",3,"title"],["aria-hidden","true",1,"creator-icon"],[1,"project-stats"],["matTooltipPosition","above",1,"stat-item",3,"matTooltip"],["aria-hidden","true"]],template:function(e,i){if(e&1){let a=j();l(0,"mat-card",1),P("click",function(){return M(a),b(i.onCardClick())})("keydown.enter",function(){return M(a),b(i.onCardClick())})("keydown.space",function(){return M(a),b(i.onCardClick())}),l(1,"div",2),k(2,"img",3),c(),l(3,"mat-card-content",4)(4,"div",5)(5,"mat-icon",6),p(6),c(),l(7,"h3",7),p(8),l(9,"span",8),p(10),c()(),l(11,"button",9),P("click",function(s){return M(a),b(i.onMenuClick(s))}),l(12,"span",10),k(13,"span",11)(14,"span",11)(15,"span",11),c()()(),l(16,"mat-menu",null,0)(18,"button",12),P("click",function(){return M(a),b(i.onEditClick())}),l(19,"mat-icon"),p(20,"edit"),c(),l(21,"span"),p(22,"Edit"),c()(),l(23,"button",12),P("click",function(){return M(a),b(i.onDeleteClick())}),l(24,"mat-icon"),p(25,"delete"),c(),l(26,"span"),p(27,"Delete"),c()()(),l(28,"div",13)(29,"p",14)(30,"mat-icon",15),p(31,"person"),c(),l(32,"span"),p(33),c()(),l(34,"div",16)(35,"div",17)(36,"mat-icon",18),p(37,"image"),c(),l(38,"span"),p(39),c()(),l(40,"div",17)(41,"mat-icon",18),p(42,"label"),c(),l(43,"span"),p(44),c()(),l(45,"div",17)(46,"mat-icon",18),p(47,"view_in_ar"),c(),l(48,"span"),p(49),c()()()()()()}if(e&2){let a=gt(17);et("aria-label","Open project "+i.project.name),g(2),f("alt",i.project.name+" thumbnail")("src",i.getThumbnailUrl(),ae),g(3),f("matTooltip",i.project.type),g(),E(" ",i.getTypeIcon()," "),g(),f("title",i.project.name),g(),E(" ",i.project.name," "),g(2),E("",i.project.imageCount," images"),g(),f("matMenuTriggerFor",a),g(18),f("title","Created by "+i.project.createdBy),g(4),D(i.project.createdBy),g(2),f("matTooltip",i.project.imageCount+" image"+(i.project.imageCount!==1?"s":"")),et("aria-label",i.project.imageCount+" images"),g(4),D(i.project.imageCount),g(),f("matTooltip",i.project.labelCount+" labeled image"+(i.project.labelCount!==1?"s":"")),et("aria-label",i.project.labelCount+" labeled images"),g(4),D(i.project.labelCount),g(),f("matTooltip",i.project.modelCount+" model"+(i.project.modelCount!==1?"s":"")),et("aria-label",i.project.modelCount+" models"),g(4),D(i.project.modelCount)}},dependencies:[Oi,yi,at,W,jt,Xe,qe,Ze],styles:[".project-card[_ngcontent-%COMP%]{cursor:pointer;height:100%;display:flex;flex-direction:column;overflow:hidden;border-radius:8px;box-shadow:0 1px 3px #0000001f,0 1px 2px #00000014;background-color:#fff;border:1px solid #e0e0e0;transition:transform .2s ease-in-out,box-shadow .2s ease-in-out}.project-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 4px 8px #00000026,0 2px 4px #0000001f;border-color:#1976d2}.project-card[_ngcontent-%COMP%]:focus{outline:2px solid #1976d2;outline-offset:2px}.project-thumbnail[_ngcontent-%COMP%]{width:100%;height:160px;overflow:hidden;background-color:#f8f8f8;display:flex;align-items:center;justify-content:center;position:relative}.project-thumbnail[_ngcontent-%COMP%]   .thumbnail-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.project-info[_ngcontent-%COMP%]{padding:8px 12px;flex:1;display:flex;flex-direction:column;gap:4px}.project-header[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}.type-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;color:#1976d2;flex-shrink:0;cursor:help}.project-name[_ngcontent-%COMP%]{margin:0;font-size:15px;font-weight:500;color:#1a1a1a;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;line-height:1.5;flex:1;min-width:0;display:flex;align-items:center;gap:8px}.project-name[_ngcontent-%COMP%]   .image-count-badge[_ngcontent-%COMP%]{font-size:12px;font-weight:400;color:#757575;white-space:nowrap;flex-shrink:0}.menu-button[_ngcontent-%COMP%]{width:32px;height:32px;flex-shrink:0;color:#666;display:flex;align-items:center;justify-content:center}.menu-button[_ngcontent-%COMP%]   .three-dots[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:3px}.menu-button[_ngcontent-%COMP%]   .three-dots[_ngcontent-%COMP%]   .dot[_ngcontent-%COMP%]{width:4px;height:4px;border-radius:50%;background-color:#666}.menu-button[_ngcontent-%COMP%]:hover{background-color:#0000000a}.menu-button[_ngcontent-%COMP%]:hover   .dot[_ngcontent-%COMP%]{background-color:#333}.project-meta[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;gap:8px}.creator-name[_ngcontent-%COMP%]{margin:0;font-size:12px;color:#757575;display:flex;align-items:center;gap:4px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;flex:1;min-width:0}.creator-name[_ngcontent-%COMP%]   .creator-icon[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px;color:#999;flex-shrink:0}.creator-name[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis}.project-stats[_ngcontent-%COMP%]{display:flex;gap:8px;flex-shrink:0}.project-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:3px;font-size:12px;color:#757575}.project-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px;color:#999}.project-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-weight:500;color:#616161}@media (max-width: 768px){.project-thumbnail[_ngcontent-%COMP%]{height:140px}.project-info[_ngcontent-%COMP%]{padding:10px 12px}.project-name[_ngcontent-%COMP%]{font-size:14px}.creator-name[_ngcontent-%COMP%]{font-size:12px}.project-stats[_ngcontent-%COMP%]{gap:8px}.project-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{font-size:12px}.project-stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px}}@media (prefers-contrast: high){.project-card[_ngcontent-%COMP%]{border:2px solid #000}.project-card[_ngcontent-%COMP%]:hover{border-color:#1976d2}.project-name[_ngcontent-%COMP%], .creator-name[_ngcontent-%COMP%], .stat-item[_ngcontent-%COMP%]{color:#000}}@media (prefers-color-scheme: dark){.project-card[_ngcontent-%COMP%]{background-color:#2d2d2d;box-shadow:0 2px 4px #0000004d;border-color:#444}.project-card[_ngcontent-%COMP%]:hover{box-shadow:0 6px 12px #0006;border-color:#555}.project-thumbnail[_ngcontent-%COMP%]{background-color:#1a1a1a}.project-name[_ngcontent-%COMP%]{color:#e0e0e0}.creator-name[_ngcontent-%COMP%], .stat-item[_ngcontent-%COMP%]{color:#b0b0b0}.project-stats[_ngcontent-%COMP%]{border-top-color:#444}}"]})}}return n})();function Ph(n,o){n&1&&(l(0,"div",8),k(1,"mat-spinner",9),l(2,"p"),p(3,"Loading projects..."),c()())}function vh(n,o){if(n&1){let t=j();l(0,"div",10)(1,"mat-icon",11),p(2,"error"),c(),l(3,"div",12)(4,"p",13),p(5),c(),l(6,"p",14),p(7,"Please check your connection and try again."),c()(),l(8,"button",15),P("click",function(){M(t);let i=C();return b(i.retryLoadProjects())}),l(9,"mat-icon"),p(10,"refresh"),c(),p(11," Retry "),c()()}if(n&2){let t=o.ngIf;g(5),D(t)}}function Oh(n,o){n&1&&(l(0,"div",10)(1,"mat-icon",11),p(2,"lock"),c(),l(3,"div",12)(4,"p",13),p(5," You don't have the required permissions to view project data for this location. "),c(),l(6,"p",14),p(7," Please contact your administrator to request access. "),c()()())}function yh(n,o){n&1&&(l(0,"p"),p(1,"You haven't created any projects yet."),c())}function wh(n,o){n&1&&(l(0,"p"),p(1,"No projects available in this location."),c())}function Sh(n,o){if(n&1){let t=j();l(0,"div",20)(1,"mat-icon"),p(2,"folder_open"),c(),l(3,"h2"),p(4,"No projects found"),c(),y(5,yh,2,0,"p",17)(6,wh,2,0,"p",17),l(7,"button",15),P("click",function(){M(t);let i=C(3);return b(i.navigateToCreate())}),p(8," Create Your First Project "),c()()}if(n&2){let t=C(3);g(5),f("ngIf",!t.viewAll),g(),f("ngIf",t.viewAll)}}function kh(n,o){if(n&1){let t=j();l(0,"app-project-card",29),P("cardClick",function(i){M(t);let a=C(5);return b(a.navigateToProject(i))})("deleteClick",function(i){M(t);let a=C(5);return b(a.onDeleteProject(i))})("editClick",function(i){M(t);let a=C(5);return b(a.onEditProject(i))}),c()}if(n&2){let t=o.$implicit;f("project",t)}}function Ih(n,o){if(n&1&&(l(0,"div",27),y(1,kh,1,1,"app-project-card",28),c()),n&2){let t=C().$implicit;f("@slideDown",void 0),g(),f("ngForOf",t.projects)}}function Th(n,o){if(n&1){let t=j();l(0,"div",21)(1,"div",22),P("click",function(){let i=M(t).$implicit,a=C(3);return b(a.toggleGroup(i))}),l(2,"div",23)(3,"mat-icon",24),p(4),c(),l(5,"h2"),p(6),c(),l(7,"span",25),p(8),c()()(),y(9,Ih,2,2,"div",26),c()}if(n&2){let t=o.$implicit;g(3),$("expanded",t.expanded),g(),E(" ",t.expanded?"expand_more":"chevron_right"," "),g(2),D(t.groupName),g(2),E("(",t.projects.length,")"),g(),f("ngIf",t.expanded)}}function Dh(n,o){if(n&1&&(vt(0),y(1,Sh,9,2,"div",18)(2,Th,10,6,"div",19),Ot()),n&2){let t=o.ngIf;g(),f("ngIf",t.length===0),g(),f("ngForOf",t)}}function Eh(n,o){if(n&1&&(l(0,"div",16),y(1,Dh,3,2,"ng-container",17),z(2,"async"),c()),n&2){let t=C();g(),f("ngIf",V(2,1,t.projectGroups$))}}var Rd=(()=>{class n{constructor(t,e,i,a,r){this.store=t,this.router=e,this.dialog=i,this.snackBar=a,this.authorizationService=r,this.viewAll=!1,this.isAuthorized=!0,this.destroy$=new Ct,this.projects$=this.store.select(ko),this.loading$=this.store.select(Io),this.error$=this.store.select(To),this.currentLocation$=this.store.select(So),this.projectGroups$=this.projects$.pipe(Gn(s=>this.groupProjects(s)))}ngOnInit(){this.currentLocation$.pipe(q(this.destroy$)).subscribe(t=>{if(!t)return;if(this.authorizationService.doesCurrentUserHaveRoleForCurrentLocation(0,vi.ADMINISTRATOR_SYSTEM))this.isAuthorized=!0;else{let i=this.authorizationService.getLinkedLocationAcronymsForRole(vi.ADC_ENGINEER);this.isAuthorized=i.has("*")||i.has(t.acronym)||i.has(t.sapCode)}this.isAuthorized&&this.store.dispatch(wn({viewAll:this.viewAll}))})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}toggleGroup(t){t.expanded=!t.expanded}toggleViewAll(){this.viewAll=!this.viewAll,this.isAuthorized&&this.store.dispatch(wn({viewAll:this.viewAll}))}navigateToCreate(){this.router.navigate(["/landingai/projects/create"])}navigateToProject(t){this.router.navigate(["/landingai/projects",t])}retryLoadProjects(){this.store.dispatch(wn({viewAll:this.viewAll}))}onEditProject(t){let e={project:t};this.dialog.open(Ad,{width:"550px",data:e}).afterClosed().subscribe(a=>{a&&this.store.dispatch(El({id:t.id,name:a.name,modelName:a.modelName,groupName:a.groupName}))})}onDeleteProject(t){let e={project:t};this.dialog.open(zd,{width:"500px",data:e}).afterClosed().subscribe(a=>{a&&this.store.dispatch(jl({id:t.id}))})}groupProjects(t){let e=["WT","FE","BE","QA","AT","Ungrouped"],i=new Map;e.forEach(s=>i.set(s,[])),t.forEach(s=>{let d=s.groupName||"Ungrouped",m=i.get(d);m?m.push(s):i.set(d,[s])});let a=[],r=!0;return e.forEach(s=>{let d=i.get(s)||[];d.length>0&&(a.push({groupName:s,projects:d,expanded:r}),r=!1)}),a}static{this.\u0275fac=function(e){return new(e||n)(T(St),T(Ye),T(re),T($t),T(bo))}}static{this.\u0275cmp=A({type:n,selectors:[["app-project-list"]],standalone:!1,decls:21,vars:16,consts:[[1,"project-list-container"],[1,"header"],[1,"header-actions"],["aria-label","Create new project","color","primary","mat-raised-button","",1,"create-button",3,"click"],["aria-label","Toggle view all projects","mat-stroked-button","",1,"view-all-button",3,"click"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],["class","projects-container",4,"ngIf"],[1,"loading-container"],["diameter","50"],[1,"error-container"],["color","warn"],[1,"error-content"],[1,"error-message"],[1,"error-hint"],["color","primary","mat-raised-button","",3,"click"],[1,"projects-container"],[4,"ngIf"],["class","empty-state",4,"ngIf"],["class","project-group",4,"ngFor","ngForOf"],[1,"empty-state"],[1,"project-group"],[1,"group-header",3,"click"],[1,"group-title"],[1,"expand-icon"],[1,"project-count"],["class","projects-grid",4,"ngIf"],[1,"projects-grid"],[3,"project","cardClick","deleteClick","editClick",4,"ngFor","ngForOf"],[3,"cardClick","deleteClick","editClick","project"]],template:function(e,i){e&1&&(l(0,"div",0)(1,"div",1)(2,"h1"),p(3,"All Projects"),c(),l(4,"div",2)(5,"button",3),P("click",function(){return i.navigateToCreate()}),l(6,"mat-icon"),p(7,"add"),c(),p(8," Create Project "),c(),l(9,"button",4),P("click",function(){return i.toggleViewAll()}),l(10,"mat-icon"),p(11),c(),p(12),c()()(),y(13,Ph,4,0,"div",5),z(14,"async"),y(15,vh,12,1,"div",6),z(16,"async"),y(17,Oh,8,0,"div",6)(18,Eh,3,3,"div",7),z(19,"async"),z(20,"async"),c()),e&2&&(g(9),$("active",i.viewAll),g(2),D(i.viewAll?"person":"people"),g(),E(" ",i.viewAll?"My Projects":"View All"," "),g(),f("ngIf",V(14,8,i.loading$)),g(2),f("ngIf",V(16,10,i.error$)),g(2),f("ngIf",!i.isAuthorized),g(),f("ngIf",i.isAuthorized&&!V(19,12,i.loading$)&&!V(20,14,i.error$)))},dependencies:[Q,N,Z,W,nt,Ld,Vt],styles:[".project-list-container[_ngcontent-%COMP%]{padding:0;margin:0;width:100%;min-height:calc(100vh - 64px);background-color:#e5f5e0}.project-list-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:32px;padding:32px 48px 0;flex-wrap:wrap;gap:16px}.project-list-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:600;color:#1a1a1a;letter-spacing:-.5px}.project-list-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.project-list-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .create-button[_ngcontent-%COMP%]{background-color:#1976d2;color:#fff;font-weight:500;padding:0 24px;height:40px;border-radius:4px}.project-list-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .create-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px;font-size:20px;width:20px;height:20px}.project-list-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .create-button[_ngcontent-%COMP%]:hover{background-color:#1565c0}.project-list-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .view-all-button[_ngcontent-%COMP%]{height:40px;padding:0 20px;border-radius:4px;background-color:#ff9800!important;color:#fff!important;border:none}.project-list-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .view-all-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px;font-size:20px;width:20px;height:20px}.project-list-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .view-all-button.active[_ngcontent-%COMP%]{background-color:#fb8c00!important;color:#fff!important}.project-list-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .view-all-button[_ngcontent-%COMP%]:hover{background-color:#fb8c00!important}.project-list-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:120px 20px;gap:20px;background-color:#fff;border-radius:8px}.project-list-container[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:16px;margin:0}.project-list-container[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;gap:16px;background-color:#ffebee;border-radius:8px;margin:20px 0;border-left:4px solid #f44336}.project-list-container[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px}.project-list-container[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]{text-align:center;max-width:600px}.project-list-container[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#c62828;font-size:16px;font-weight:500;margin:0 0 8px}.project-list-container[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   .error-hint[_ngcontent-%COMP%]{color:#d32f2f;font-size:14px;margin:0}.project-list-container[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:8px}.project-list-container[_ngcontent-%COMP%]   .error-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;margin-right:8px}.project-list-container[_ngcontent-%COMP%]   .projects-container[_ngcontent-%COMP%]{padding:0 48px 32px}.project-list-container[_ngcontent-%COMP%]   .projects-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:100px 20px;text-align:center;background-color:#fff;border-radius:8px;margin:20px 0}.project-list-container[_ngcontent-%COMP%]   .projects-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:72px;width:72px;height:72px;color:#bbb;margin-bottom:20px}.project-list-container[_ngcontent-%COMP%]   .projects-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 12px;font-size:20px;font-weight:500;color:#333}.project-list-container[_ngcontent-%COMP%]   .projects-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 28px;font-size:14px;color:#777}.project-list-container[_ngcontent-%COMP%]   .projects-container[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#1976d2;color:#fff;font-weight:500}.project-list-container[_ngcontent-%COMP%]   .projects-container[_ngcontent-%COMP%]   .project-group[_ngcontent-%COMP%]{margin-bottom:32px;background-color:#fff;border-radius:8px;overflow:hidden;box-shadow:0 1px 3px #0000001a}.project-list-container[_ngcontent-%COMP%]   .projects-container[_ngcontent-%COMP%]   .project-group[_ngcontent-%COMP%]   .group-header[_ngcontent-%COMP%]{padding:16px 24px;background-color:#f5f5f5;border-bottom:1px solid #e0e0e0;cursor:pointer;-webkit-user-select:none;user-select:none;transition:background-color .2s ease}.project-list-container[_ngcontent-%COMP%]   .projects-container[_ngcontent-%COMP%]   .project-group[_ngcontent-%COMP%]   .group-header[_ngcontent-%COMP%]:hover{background-color:#eee}.project-list-container[_ngcontent-%COMP%]   .projects-container[_ngcontent-%COMP%]   .project-group[_ngcontent-%COMP%]   .group-header[_ngcontent-%COMP%]   .group-title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.project-list-container[_ngcontent-%COMP%]   .projects-container[_ngcontent-%COMP%]   .project-group[_ngcontent-%COMP%]   .group-header[_ngcontent-%COMP%]   .group-title[_ngcontent-%COMP%]   .expand-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px;color:#666;transition:transform .3s ease}.project-list-container[_ngcontent-%COMP%]   .projects-container[_ngcontent-%COMP%]   .project-group[_ngcontent-%COMP%]   .group-header[_ngcontent-%COMP%]   .group-title[_ngcontent-%COMP%]   .expand-icon.expanded[_ngcontent-%COMP%]{transform:rotate(0)}.project-list-container[_ngcontent-%COMP%]   .projects-container[_ngcontent-%COMP%]   .project-group[_ngcontent-%COMP%]   .group-header[_ngcontent-%COMP%]   .group-title[_ngcontent-%COMP%]   .expand-icon[_ngcontent-%COMP%]:not(.expanded){transform:rotate(0)}.project-list-container[_ngcontent-%COMP%]   .projects-container[_ngcontent-%COMP%]   .project-group[_ngcontent-%COMP%]   .group-header[_ngcontent-%COMP%]   .group-title[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:600;color:#333}.project-list-container[_ngcontent-%COMP%]   .projects-container[_ngcontent-%COMP%]   .project-group[_ngcontent-%COMP%]   .group-header[_ngcontent-%COMP%]   .group-title[_ngcontent-%COMP%]   .project-count[_ngcontent-%COMP%]{font-size:14px;color:#999;font-weight:400}.project-list-container[_ngcontent-%COMP%]   .projects-container[_ngcontent-%COMP%]   .project-group[_ngcontent-%COMP%]   .projects-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(240px,1fr));gap:20px;padding:24px}@media (min-width: 1400px){.project-list-container[_ngcontent-%COMP%]   .projects-container[_ngcontent-%COMP%]   .project-group[_ngcontent-%COMP%]   .projects-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(5,1fr)}}@media (max-width: 1200px){.project-list-container[_ngcontent-%COMP%]   .projects-container[_ngcontent-%COMP%]   .project-group[_ngcontent-%COMP%]   .projects-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(220px,1fr))}}@media (max-width: 768px){.project-list-container[_ngcontent-%COMP%]   .projects-container[_ngcontent-%COMP%]   .project-group[_ngcontent-%COMP%]   .projects-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:16px;padding:16px}}@media (max-width: 480px){.project-list-container[_ngcontent-%COMP%]   .projects-container[_ngcontent-%COMP%]   .project-group[_ngcontent-%COMP%]   .projects-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(2,1fr);gap:12px}}"],data:{animation:[Gi("slideDown",[In(":enter",[Ie({height:0,opacity:0,overflow:"hidden"}),kn("300ms ease-out",Ie({height:"*",opacity:1}))]),In(":leave",[Ie({height:"*",opacity:1,overflow:"hidden"}),kn("300ms ease-in",Ie({height:0,opacity:0}))])])]}})}}return n})();function Fh(n,o){n&1&&(l(0,"div",32),k(1,"mat-spinner"),l(2,"p"),p(3,"Creating project..."),c()())}function Ah(n,o){if(n&1){let t=j();l(0,"button",37),P("click",function(){M(t);let i=C(2);return b(i.createProject())}),l(1,"mat-icon"),p(2,"refresh"),c(),p(3," Retry "),c()}}function zh(n,o){if(n&1&&(l(0,"div",33)(1,"mat-icon"),p(2,"error"),c(),l(3,"div",34)(4,"span",35),p(5),c(),y(6,Ah,4,0,"button",36),c()()),n&2){let t=o.ngIf,e=C();g(5),D(t),g(),f("ngIf",e.projectForm.valid)}}function Vh(n,o){n&1&&(l(0,"span",41),p(1,"Coming Soon"),c())}function Lh(n,o){n&1&&(l(0,"div",42)(1,"mat-icon"),p(2,"check_circle"),c()())}function Rh(n,o){if(n&1){let t=j();l(0,"mat-card",38),P("click",function(){let i=M(t).$implicit,a=C();return b(a.onTypeSelect(i.type))}),l(1,"mat-card-header")(2,"mat-icon"),p(3),c(),l(4,"mat-card-title"),p(5),c()(),l(6,"mat-card-content")(7,"p"),p(8),c(),y(9,Vh,2,0,"span",39),c(),y(10,Lh,3,0,"div",40),c()}if(n&2){let t=o.$implicit,e=C();$("disabled",!t.enabled)("selected",e.isTypeSelected(t.type)),et("aria-disabled",!t.enabled)("aria-label",t.type+" project type"),g(2),$("disabled-icon",!t.enabled),g(),E("",t.icon," "),g(2),D(t.type),g(3),D(t.description),g(),f("ngIf",!t.enabled),g(),f("ngIf",e.isTypeSelected(t.type))}}function Bh(n,o){n&1&&(l(0,"div",43)(1,"mat-icon"),p(2,"warning"),c(),l(3,"span"),p(4,"Please select a project type"),c()())}function Nh(n,o){n&1&&(l(0,"mat-error"),p(1," Project name is required "),c())}function $h(n,o){n&1&&(l(0,"mat-error"),p(1," Project name must be at least 1 character "),c())}function Uh(n,o){if(n&1&&(l(0,"mat-option",15),p(1),c()),n&2){let t=o.$implicit;f("value",t),g(),E(" ",t," ")}}function Hh(n,o){if(n&1&&(l(0,"mat-option",15),p(1),c()),n&2){let t=o.$implicit;f("value",t),g(),E(" ",t," ")}}function Wh(n,o){if(n&1&&(l(0,"div",44)(1,"mat-icon"),p(2,"warning"),c(),l(3,"span"),p(4),c()()),n&2){let t=C();g(4),D(t.fileValidationError)}}function Gh(n,o){if(n&1){let t=j();l(0,"mat-card",48)(1,"div",49)(2,"mat-icon",50),p(3,"image"),c(),l(4,"div",51)(5,"span",52),p(6),c(),l(7,"span",53),p(8),c()()(),l(9,"button",54),P("click",function(){let i=M(t).index,a=C(2);return b(a.removeFile(i))}),l(10,"mat-icon"),p(11,"close"),c()()()}if(n&2){let t=o.$implicit,e=C(2);g(6),D(t.name),g(2),D(e.formatFileSize(t.size)),g(),et("aria-label","Remove "+t.name)}}function Yh(n,o){if(n&1&&(l(0,"div",45)(1,"h3"),p(2),c(),l(3,"div",46),y(4,Gh,12,3,"mat-card",47),c()()),n&2){let t=C();g(2),E("Selected Files (",t.selectedFiles.length,")"),g(2),f("ngForOf",t.selectedFiles)}}var Bd=(()=>{class n{constructor(t,e,i,a,r){this.formBuilder=t,this.store=e,this.router=i,this.actions$=a,this.snackBar=r,this.selectedFiles=[],this.fileValidationError=null,this.availableModels=["RtmDet-[9M]","RepPoints-[20M]","RepPoints-[37M]","ODEmbedded-[23M]"],this.availableGroups=["WT","FE","BE","QA","AT"],this.projectTypes=[{type:"Object Detection",icon:"check_box_outline_blank",description:"Identify and locate objects within images",enabled:!0},{type:"Classification",icon:"category",description:"Categorize entire images into classes",enabled:!0},{type:"Segmentation",icon:"gradient",description:"Pixel-level classification of image regions",enabled:!1}],this.destroy$=new Ct,this.createdProjectId=null,this.projectForm=this.formBuilder.group({name:["",[qt.required,qt.minLength(1)]],type:["Object Detection",qt.required],modelName:[""],groupName:[""]}),this.loading$=this.store.select(Io),this.error$=this.store.select(To)}ngOnInit(){this.actions$.pipe(Ci(kl),q(this.destroy$)).subscribe(({project:t})=>{this.createdProjectId=t.id,this.selectedFiles.length>0?this.store.dispatch(Il({files:this.selectedFiles,projectId:t.id})):this.router.navigate(["/landingai/projects",t.id])}),this.actions$.pipe(Ci(Tl),q(this.destroy$)).subscribe(()=>{this.createdProjectId&&this.router.navigate(["/landingai/projects",this.createdProjectId])}),this.actions$.pipe(Ci(Dl),q(this.destroy$)).subscribe(()=>{this.createdProjectId&&this.router.navigate(["/landingai/projects",this.createdProjectId])})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onTypeSelect(t){let e=this.projectTypes.find(i=>i.type===t);e&&e.enabled&&this.projectForm.patchValue({type:t})}isTypeSelected(t){return this.projectForm.get("type")?.value===t}onFileSelect(t){let e=t.target;if(e.files&&e.files.length>0){let i=Array.from(e.files),a=[],r=[],s=[],d=10*1024*1024;i.forEach(m=>{let h=m.name.toLowerCase().split(".").pop(),u=h==="png"||h==="jpg"||h==="jpeg",_=m.size<=d;u?_?a.push(m):s.push(m.name):r.push(m.name)}),r.length>0&&(this.fileValidationError=`${r.length} file(s) rejected: Invalid format. Only PNG, JPG, and JPEG are supported.`,this.snackBar.open(this.fileValidationError,"Close",{duration:5e3,verticalPosition:"top",panelClass:"snackbar-warning"})),s.length>0&&(this.fileValidationError=`${s.length} file(s) rejected: File size exceeds 10MB limit.`,this.snackBar.open(this.fileValidationError,"Close",{duration:5e3,verticalPosition:"top",panelClass:"snackbar-warning"})),a.length>0&&(this.selectedFiles=[...this.selectedFiles,...a],this.fileValidationError=null),e.value=""}}onFileDrop(t){if(t.preventDefault(),t.stopPropagation(),t.dataTransfer?.files&&t.dataTransfer.files.length>0){let e=Array.from(t.dataTransfer.files),i=[],a=[],r=[],s=10*1024*1024;e.forEach(d=>{let m=d.name.toLowerCase().split(".").pop(),h=m==="png"||m==="jpg"||m==="jpeg",u=d.size<=s;h?u?i.push(d):r.push(d.name):a.push(d.name)}),a.length>0&&(this.fileValidationError=`${a.length} file(s) rejected: Invalid format. Only PNG, JPG, and JPEG are supported.`,this.snackBar.open(this.fileValidationError,"Close",{duration:5e3,verticalPosition:"top",panelClass:"snackbar-warning"})),r.length>0&&(this.fileValidationError=`${r.length} file(s) rejected: File size exceeds 10MB limit.`,this.snackBar.open(this.fileValidationError,"Close",{duration:5e3,verticalPosition:"top",panelClass:"snackbar-warning"})),i.length>0&&(this.selectedFiles=[...this.selectedFiles,...i],this.fileValidationError=null)}}onDragOver(t){t.preventDefault(),t.stopPropagation()}removeFile(t){this.selectedFiles=this.selectedFiles.filter((e,i)=>i!==t)}formatFileSize(t){if(t===0)return"0 Bytes";let e=1024,i=["Bytes","KB","MB","GB"],a=Math.floor(Math.log(t)/Math.log(e));return Math.round(t/Math.pow(e,a)*100)/100+" "+i[a]}createProject(){if(this.projectForm.valid){let t={name:this.projectForm.get("name")?.value,type:this.projectForm.get("type")?.value,modelName:this.projectForm.get("modelName")?.value||void 0,groupName:this.projectForm.get("groupName")?.value||void 0};this.store.dispatch(Sl({request:t}))}}cancel(){this.router.navigate(["/landingai/projects"])}static{this.\u0275fac=function(e){return new(e||n)(T(Ge),T(St),T(Ye),T(wo),T($t))}}static{this.\u0275cmp=A({type:n,selectors:[["app-project-create"]],standalone:!1,decls:78,vars:25,consts:[["fileInput",""],[1,"project-create-container"],[1,"header"],["class","loading-overlay",4,"ngIf"],["class","error-message",4,"ngIf"],[1,"project-form",3,"ngSubmit","formGroup"],[1,"form-section"],[1,"project-types"],["class","type-card",3,"disabled","selected","click",4,"ngFor","ngForOf"],["class","validation-error",4,"ngIf"],[1,"form-row"],["appearance","fill",1,"half-width"],["aria-label","Project name input","formControlName","name","matInput","","placeholder","Enter a unique project name","required",""],[4,"ngIf"],["aria-label","Model name select","formControlName","modelName","placeholder","Select model"],[3,"value"],[3,"value",4,"ngFor","ngForOf"],["aria-label","Group name select","formControlName","groupName","placeholder","Select group"],[1,"section-description"],["class","validation-error file-validation-error",4,"ngIf"],[1,"drop-zone",3,"dragover","drop"],[1,"upload-icon"],[1,"drop-text"],[1,"drop-text-or"],["for","file-input",1,"file-input-label"],["color","primary","mat-raised-button","","type","button",3,"click"],["accept",".png,.jpg,.jpeg","aria-label","File upload input","id","file-input","multiple","","type","file",1,"file-input",3,"change"],[1,"file-format-hint"],["class","selected-files",4,"ngIf"],[1,"form-actions"],["mat-raised-button","","type","button",1,"cancel-btn",3,"click","disabled"],["color","primary","mat-raised-button","","type","submit",3,"disabled"],[1,"loading-overlay"],[1,"error-message"],[1,"error-content"],[1,"error-text"],["class","retry-button","color","primary","mat-button","",3,"click",4,"ngIf"],["color","primary","mat-button","",1,"retry-button",3,"click"],[1,"type-card",3,"click"],["class","coming-soon",4,"ngIf"],["class","selected-indicator",4,"ngIf"],[1,"coming-soon"],[1,"selected-indicator"],[1,"validation-error"],[1,"validation-error","file-validation-error"],[1,"selected-files"],[1,"files-list"],["class","file-item",4,"ngFor","ngForOf"],[1,"file-item"],[1,"file-info"],[1,"file-icon"],[1,"file-details"],[1,"file-name"],[1,"file-size"],["mat-icon-button","","type","button",1,"remove-button",3,"click"]],template:function(e,i){if(e&1){let a=j();l(0,"div",1)(1,"div",2)(2,"h1"),p(3,"Create New Project"),c()(),y(4,Fh,4,0,"div",3),z(5,"async"),y(6,zh,7,2,"div",4),z(7,"async"),l(8,"form",5),P("ngSubmit",function(){return M(a),b(i.createProject())}),l(9,"section",6)(10,"h2"),p(11,"Step 1: Select Project Type"),c(),l(12,"div",7),y(13,Rh,11,13,"mat-card",8),c(),y(14,Bh,5,0,"div",9),c(),l(15,"section",6)(16,"h2"),p(17,"Step 2: Configure Your Project"),c(),l(18,"div",10)(19,"mat-form-field",11)(20,"mat-label"),p(21,"Project Name"),c(),k(22,"input",12),l(23,"mat-hint"),p(24,"Mandatory: Specify a custom project name"),c(),y(25,Nh,2,0,"mat-error",13)(26,$h,2,0,"mat-error",13),c(),l(27,"mat-form-field",11)(28,"mat-label"),p(29,"Model Name"),c(),l(30,"mat-select",14)(31,"mat-option",15),p(32,"-- No Model --"),c(),y(33,Uh,2,2,"mat-option",16),c(),l(34,"mat-hint"),p(35,"Specify the model name in databricks"),c()()(),l(36,"div",10)(37,"mat-form-field",11)(38,"mat-label"),p(39,"Group"),c(),l(40,"mat-select",17)(41,"mat-option",15),p(42,"-- No Group --"),c(),y(43,Hh,2,2,"mat-option",16),c(),l(44,"mat-hint"),p(45,"Optional: Assign project to a group"),c()()()(),l(46,"section",6)(47,"h2"),p(48,"Step 3: Upload Training Images (Optional)"),c(),l(49,"p",18),p(50," Upload images in PNG, JPG, or JPEG format. You can also add images later. "),c(),y(51,Wh,5,1,"div",19),l(52,"div",20),P("dragover",function(s){return M(a),b(i.onDragOver(s))})("drop",function(s){return M(a),b(i.onFileDrop(s))}),l(53,"mat-icon",21),p(54,"cloud_upload"),c(),l(55,"p",22),p(56,"Drag and drop images here"),c(),l(57,"p",23),p(58,"or"),c(),l(59,"label",24)(60,"button",25),P("click",function(){M(a);let s=gt(65);return b(s.click())}),l(61,"mat-icon"),p(62,"add_photo_alternate"),c(),p(63," Browse Files "),c()(),l(64,"input",26,0),P("change",function(s){return M(a),b(i.onFileSelect(s))}),c(),l(66,"p",27),p(67," Supported formats: PNG, JPG, JPEG (Max 10MB per file) "),c()(),y(68,Yh,5,2,"div",28),c(),l(69,"section",29)(70,"button",30),z(71,"async"),P("click",function(){return M(a),b(i.cancel())}),p(72," Cancel "),c(),l(73,"button",31),z(74,"async"),l(75,"mat-icon"),p(76,"add"),c(),p(77," Create Project "),c()()()()}if(e&2){let a,r,s;g(4),f("ngIf",V(5,17,i.loading$)),g(2),f("ngIf",V(7,19,i.error$)),g(2),f("formGroup",i.projectForm),g(5),f("ngForOf",i.projectTypes),g(),f("ngIf",((a=i.projectForm.get("type"))==null?null:a.invalid)&&((a=i.projectForm.get("type"))==null?null:a.touched)),g(11),f("ngIf",(r=i.projectForm.get("name"))==null?null:r.hasError("required")),g(),f("ngIf",(s=i.projectForm.get("name"))==null?null:s.hasError("minlength")),g(5),f("value",null),g(2),f("ngForOf",i.availableModels),g(8),f("value",null),g(2),f("ngForOf",i.availableGroups),g(8),f("ngIf",i.fileValidationError),g(),$("has-files",i.selectedFiles.length>0),g(16),f("ngIf",i.selectedFiles.length>0),g(2),f("disabled",V(71,21,i.loading$)||!1),g(3),f("disabled",i.projectForm.invalid||V(74,23,i.loading$)||!1)}},dependencies:[Q,N,$e,Lt,Ft,Ne,hi,Ue,He,Oi,yi,dd,cd,Z,at,W,Mt,_e,Oo,Se,kt,se,Zt,nt,Vt],styles:["[_nghost-%COMP%]{display:block;background-color:#e5f5e0;min-height:100vh}.project-create-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:.5rem 2rem;position:relative}.project-create-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{margin-bottom:.5rem;text-align:center}.project-create-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:500;margin-bottom:0;color:#333}.project-create-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:.875rem;color:#666;margin:0}.project-create-container[_ngcontent-%COMP%]   .loading-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:#ffffffe6;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:1000}.project-create-container[_ngcontent-%COMP%]   .loading-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:1rem;font-size:1.1rem;color:#666}.project-create-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:.5rem;padding:1rem;margin-bottom:1.5rem;background-color:#ffebee;border-left:4px solid #f44336;border-radius:4px}.project-create-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#f44336;flex-shrink:0}.project-create-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:.5rem}.project-create-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   .error-text[_ngcontent-%COMP%]{color:#c62828;font-weight:500}.project-create-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   .retry-button[_ngcontent-%COMP%]{align-self:flex-start;margin-top:.25rem}.project-create-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]   .error-content[_ngcontent-%COMP%]   .retry-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:.25rem;font-size:1rem;width:1rem;height:1rem}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]{margin-bottom:1rem}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;margin-bottom:.5rem;color:#333}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .section-description[_ngcontent-%COMP%]{color:#666;margin-bottom:.5rem;font-size:.875rem}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%;max-width:600px;margin-bottom:.5rem}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{display:flex;gap:1rem;max-width:100%}@media (max-width: 768px){.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .form-row[_ngcontent-%COMP%]{flex-direction:column}}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .half-width[_ngcontent-%COMP%]{flex:1;min-width:0;margin-bottom:.5rem}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]     .mat-mdc-form-field .mat-mdc-text-field-wrapper{background-color:#fff!important}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]     .mat-mdc-form-field .mat-mdc-form-field-flex{background-color:#fff!important}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]     .mat-mdc-form-field .mdc-text-field--filled{background-color:#fff!important}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .validation-error[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;margin-top:.5rem;color:#f44336;font-size:.875rem}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .validation-error[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.2rem;width:1.2rem;height:1.2rem}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .file-validation-error[_ngcontent-%COMP%]{margin-top:0;margin-bottom:1rem;padding:.75rem 1rem;background-color:#fff3e0;border-left:4px solid #ff9800;border-radius:4px;color:#e65100}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .file-validation-error[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ff9800}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .project-types[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:.75rem;margin-bottom:.5rem}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .project-types[_ngcontent-%COMP%]   .type-card[_ngcontent-%COMP%]{cursor:pointer;transition:all .3s ease;position:relative;border:2px solid transparent;min-height:120px;background-color:#fff!important}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .project-types[_ngcontent-%COMP%]   .type-card[_ngcontent-%COMP%]     .mat-mdc-card{background-color:#fff!important}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .project-types[_ngcontent-%COMP%]   .type-card[_ngcontent-%COMP%]:hover:not(.disabled){transform:translateY(-4px);box-shadow:0 8px 16px #00000026}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .project-types[_ngcontent-%COMP%]   .type-card.selected[_ngcontent-%COMP%]{border-color:#1976d2;background-color:#e3f2fd!important}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .project-types[_ngcontent-%COMP%]   .type-card.selected[_ngcontent-%COMP%]     .mat-mdc-card{background-color:#e3f2fd!important}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .project-types[_ngcontent-%COMP%]   .type-card.disabled[_ngcontent-%COMP%]{cursor:not-allowed;opacity:.6;background-color:#f5f5f5!important}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .project-types[_ngcontent-%COMP%]   .type-card.disabled[_ngcontent-%COMP%]     .mat-mdc-card{background-color:#f5f5f5!important}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .project-types[_ngcontent-%COMP%]   .type-card.disabled[_ngcontent-%COMP%]   .disabled-icon[_ngcontent-%COMP%]{color:#999}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .project-types[_ngcontent-%COMP%]   .type-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:1rem}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .project-types[_ngcontent-%COMP%]   .type-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:2rem;width:2rem;height:2rem;color:#1976d2}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .project-types[_ngcontent-%COMP%]   .type-card[_ngcontent-%COMP%]   mat-card-header[_ngcontent-%COMP%]   mat-card-title[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:500;margin:0}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .project-types[_ngcontent-%COMP%]   .type-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;margin:0 0 .5rem;line-height:1.5}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .project-types[_ngcontent-%COMP%]   .type-card[_ngcontent-%COMP%]   mat-card-content[_ngcontent-%COMP%]   .coming-soon[_ngcontent-%COMP%]{display:inline-block;padding:.25rem .75rem;background-color:#ff9800;color:#fff;border-radius:12px;font-size:.75rem;font-weight:500;text-transform:uppercase}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .project-types[_ngcontent-%COMP%]   .type-card[_ngcontent-%COMP%]   .selected-indicator[_ngcontent-%COMP%]{position:absolute;top:1rem;right:1rem}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .project-types[_ngcontent-%COMP%]   .type-card[_ngcontent-%COMP%]   .selected-indicator[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#1976d2;font-size:1.5rem;width:1.5rem;height:1.5rem}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]{border:2px dashed #ccc;border-radius:8px;padding:1rem;text-align:center;background-color:#fff;transition:all .3s ease;margin-bottom:.5rem}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]:hover{border-color:#1976d2;background-color:#f5f5f5}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .drop-zone.has-files[_ngcontent-%COMP%]{border-color:#4caf50;background-color:#f1f8f4}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]{font-size:2.5rem;width:2.5rem;height:2.5rem;color:#1976d2;margin-bottom:.25rem}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]   .drop-text[_ngcontent-%COMP%]{font-size:.875rem;color:#666;margin:.25rem 0}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]   .drop-text-or[_ngcontent-%COMP%]{font-size:.75rem;color:#999;margin:.25rem 0}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]   .file-input-label[_ngcontent-%COMP%]{display:inline-block;margin:.25rem 0}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]   .file-input-label[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:.5rem}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]   .file-input[_ngcontent-%COMP%]{display:none}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]   .file-format-hint[_ngcontent-%COMP%]{font-size:.7rem;color:#999;margin-top:.25rem}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .selected-files[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1rem;font-weight:500;margin-bottom:.5rem;color:#333}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .selected-files[_ngcontent-%COMP%]   .files-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.5rem;max-height:300px;overflow-y:auto}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .selected-files[_ngcontent-%COMP%]   .files-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:.5rem .75rem;transition:background-color .2s ease}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .selected-files[_ngcontent-%COMP%]   .files-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .selected-files[_ngcontent-%COMP%]   .files-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;flex:1;min-width:0}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .selected-files[_ngcontent-%COMP%]   .files-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%]{color:#1976d2;flex-shrink:0}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .selected-files[_ngcontent-%COMP%]   .files-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-details[_ngcontent-%COMP%]{display:flex;flex-direction:column;min-width:0}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .selected-files[_ngcontent-%COMP%]   .files-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-details[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{font-weight:500;color:#333;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .selected-files[_ngcontent-%COMP%]   .files-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-details[_ngcontent-%COMP%]   .file-size[_ngcontent-%COMP%]{font-size:.875rem;color:#666}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .selected-files[_ngcontent-%COMP%]   .files-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .remove-button[_ngcontent-%COMP%]{flex-shrink:0;color:#f44336}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .selected-files[_ngcontent-%COMP%]   .files-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .remove-button[_ngcontent-%COMP%]:hover{background-color:#ffebee}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;margin-top:1rem;padding-top:1rem;border-top:1px solid #e0e0e0}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:140px}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:.5rem}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{background-color:#ff9800!important;color:#fff!important;border:none}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]:hover:not([disabled]){background-color:#fb8c00!important}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   .cancel-btn[disabled][_ngcontent-%COMP%]{background-color:#ffcc80!important;color:#fff9!important}@media (max-width: 768px){.project-create-container[_ngcontent-%COMP%]{padding:1rem}.project-create-container[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .project-types[_ngcontent-%COMP%]{grid-template-columns:1fr}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]{padding:2rem 1rem}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]{font-size:3rem;width:3rem;height:3rem}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]{flex-direction:column}.project-create-container[_ngcontent-%COMP%]   .project-form[_ngcontent-%COMP%]   .form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}  .project-create-container .mat-mdc-form-field .mat-mdc-text-field-wrapper{background-color:#fff!important}  .project-create-container .mat-mdc-form-field .mat-mdc-form-field-flex{background-color:#fff!important}  .project-create-container .mat-mdc-form-field .mdc-text-field{background-color:#fff!important}  .project-create-container .mat-mdc-form-field .mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:#fff!important}  .project-create-container .mat-mdc-card{background-color:#fff!important}  .project-create-container mat-card{background-color:#fff!important}  .project-create-container .type-card mat-card{background-color:#fff!important}"]})}}return n})();var Nd=(()=>{class n{constructor(t,e){this.http=t,this.configuration=e;let i=this.configuration.Server.replace(":8080",":8083");i=i.replace(/\/$/,""),this.apiUrl=`${i}/infc/databricks/model/download`}downloadModel(t,e,i){console.log("DownloadModelService: Calling API with params:",{modelName:t,version:e,trackId:i});let a=new dl().set("model_name",t).set("version",e.toString()).set("track_id",i);return this.http.get(this.apiUrl,{params:a}).pipe(ce(r=>{console.log("DownloadModelService: Received response:",{modelFullName:r.modelFullName,version:r.version,hasDownloadUrl:!!r.artifact?.downloadUrl,downloadUrl:r.artifact?.downloadUrl})}),Oe(this.handleError))}handleError(t){let e="An error occurred while downloading the model.";if(t.error instanceof ErrorEvent)console.error("DownloadModelService: Client-side error:",t.error.message),e=`Network error: ${t.error.message}`;else switch(console.error(`DownloadModelService: Backend error: ${t.status}, body: ${JSON.stringify(t.error)}`),t.status){case 400:e="Invalid request. Please check the model information and try again.";break;case 401:e="Authentication failed. Please log in and try again.";break;case 404:e="Model not found. Please verify the model exists.";break;case 429:e="Too many requests. Please try again later.";break;case 500:case 502:case 503:e="Server error. Please try again later.";break;case 504:e="Request timed out. Please try again.";break;default:e=`Error ${t.status}: ${t.message}`}return ai(()=>new Error(e))}static{this.\u0275fac=function(e){return new(e||n)(Ht(Re),Ht(Be))}}static{this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var $d=(()=>{class n{constructor(t,e){this.http=t,this.configuration=e;let i=this.configuration.Server.replace(":8080",":8083");i=i.replace(/\/$/,""),this.apiUrl=`${i}/infc/databricks/model/test`}testModel(t){return console.log("TestModelService: Calling API with request:",{trackId:t.trackId,zipFilenames:t.zipFilenames,zipPath:t.zipPath}),this.http.post(this.apiUrl,t).pipe(ce(e=>{console.log("TestModelService: Received response:",{trackId:e.trackId,runId:e.runId,errorMessage:e.errorMessage})}),Oe(this.handleError))}getTestResults(t,e){let i=`${this.apiUrl}/results/files`,a={trackId:t,runId:e.toString()};return console.log("TestModelService: Fetching test results:",{trackId:t,runId:e}),this.http.get(i,{params:a}).pipe(ce(r=>{console.log("TestModelService: Test results response:",{status:r.status,testPredictions:r.test_predictions})}),Oe(this.handleError))}loadPredictionsFile(t){console.log("TestModelService: Loading predictions file:",t);let e=this.configuration.Server.replace(":8080",":8083");e=e.replace(/\/$/,"");let i=`${e}/infc/databricks/file/content`,a={path:t};return console.log("TestModelService: Calling file content endpoint:",i),this.http.get(i,{params:a}).pipe(ce(r=>{console.log("TestModelService: Loaded predictions:",Array.isArray(r)?r.length:"not an array")}),Oe(this.handleError))}handleError(t){let e="An error occurred while testing the model.";if(t.error instanceof ErrorEvent)console.error("TestModelService: Client-side error:",t.error.message),e=`Network error: ${t.error.message}`;else switch(console.error(`TestModelService: Backend error: ${t.status}, body: ${JSON.stringify(t.error)}`),t.status){case 400:e="Invalid request. Please check your input and try again.";break;case 401:e="Authentication failed. Please log in and try again.";break;case 404:e="Model not found. Please verify the model exists.";break;case 429:e="Too many requests. Please try again later.";break;case 500:case 502:case 503:e="Server error. Please try again later.";break;case 504:e="Request timed out. Please try again.";break;default:e=`Error ${t.status}: ${t.message}`}return ai(()=>new Error(e))}static{this.\u0275fac=function(e){return new(e||n)(Ht(Re),Ht(Be))}}static{this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var Ud=(()=>{class n{constructor(t,e){this.http=t,this.configuration=e;let i=this.configuration.Server.replace(":8080",":8081");i=i.replace(/\/$/,""),this.uploadUrl=`${i}/operational/landingai/files/upload`,this.deleteUrl=`${i}/operational/landingai/files/delete`}uploadZipFile(t,e){let i=new FormData;return i.append("file",t),i.append("trackId",e),console.log("FileUploadService: Uploading file:",{filename:t.name,size:t.size,trackId:e}),this.http.post(this.uploadUrl,i)}deleteFile(t,e){let i={trackId:t,filename:e};return console.log("FileUploadService: Deleting file:",i),this.http.delete(this.deleteUrl,{params:i})}static{this.\u0275fac=function(e){return new(e||n)(Ht(Re),Ht(Be))}}static{this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var qi=["image/jpeg","image/jpg","image/bmp","image/png",".mpo"];function Qh(n){let o=qi.some(e=>e.startsWith(".")?n.name.toLowerCase().endsWith(e):n.type===e),t=n.size<=10485760;return o&&t}function Hd(n){let o=[],t=[];return n.forEach(e=>{Qh(e)?o.push(e):e.size>10485760?t.push(`${e.name}: File size exceeds 10MB limit`):t.push(`${e.name}: Unsupported file format. Please upload JPEG, BMP, PNG, or MPO images.`)}),{validFiles:o,errors:t}}function Kh(n){return URL.createObjectURL(n)}function Jh(n,o=200,t=200){return new Promise((e,i)=>{let a=new FileReader;a.onload=r=>{let s=new Image;s.onload=()=>{let d=s.width,m=s.height;d>m?d>o&&(m=m*o/d,d=o):m>t&&(d=d*t/m,m=t);let h=document.createElement("canvas");h.width=d,h.height=m;let u=h.getContext("2d");if(!u){i(new Error("Failed to get canvas context"));return}u.drawImage(s,0,0,d,m),h.toBlob(_=>{_?e(URL.createObjectURL(_)):i(new Error("Failed to create thumbnail blob"))},n.type)},s.onerror=()=>{i(new Error("Failed to load image"))},s.src=r.target?.result},a.onerror=()=>{i(new Error("Failed to read file"))},a.readAsDataURL(n)})}function tf(n){return _n(this,null,function*(){let o=Kh(n),t=yield Jh(n);return{id:ef(),file:n,blobUrl:o,thumbnailUrl:t,uploadedAt:new Date}})}function Wd(n){return _n(this,null,function*(){return Promise.all(n.map(o=>tf(o)))})}function Gd(n){n.forEach(o=>{URL.revokeObjectURL(o.blobUrl),URL.revokeObjectURL(o.thumbnailUrl)})}function ef(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,n=>{let o=Math.random()*16|0;return(n==="x"?o:o&3|8).toString(16)})}var Yd=(()=>{class n{constructor(){this.filesUploaded=new H,this.isDragOver=!1,this.acceptedFormats=qi.join(",")}onDragOver(t){t.preventDefault(),t.stopPropagation(),this.isDragOver=!0}onDragLeave(t){t.preventDefault(),t.stopPropagation(),this.isDragOver=!1}onDrop(t){if(t.preventDefault(),t.stopPropagation(),this.isDragOver=!1,t.dataTransfer?.files&&t.dataTransfer.files.length>0){let e=Array.from(t.dataTransfer.files);this.filesUploaded.emit(e)}}triggerFileInput(){let t=document.getElementById("file-input");t&&t.click()}onFileInputChange(t){let e=t.target;if(e.files&&e.files.length>0){let i=Array.from(e.files);this.filesUploaded.emit(i),e.value=""}}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=A({type:n,selectors:[["app-test-model-upload-zone"]],outputs:{filesUploaded:"filesUploaded"},standalone:!1,decls:6,vars:3,consts:[[1,"upload-zone",3,"dragover","dragleave","drop","click"],[1,"upload-icon"],[1,"upload-text"],["type","file","id","file-input","multiple","",2,"display","none",3,"change","accept"]],template:function(e,i){e&1&&(l(0,"div",0),P("dragover",function(r){return i.onDragOver(r)})("dragleave",function(r){return i.onDragLeave(r)})("drop",function(r){return i.onDrop(r)})("click",function(){return i.triggerFileInput()}),l(1,"mat-icon",1),p(2,"cloud_upload"),c(),l(3,"p",2),p(4,"Drop images here"),c(),l(5,"input",3),P("change",function(r){return i.onFileInputChange(r)}),c()()),e&2&&($("drag-over",i.isDragOver),g(5),f("accept",i.acceptedFormats))},dependencies:[W],styles:[".upload-zone[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:300px;border:2px dashed #ccc;border-radius:8px;padding:48px;cursor:pointer;transition:all .3s ease;background-color:#fafafa}.upload-zone[_ngcontent-%COMP%]:hover{border-color:#0056fe;background-color:#f5f8ff}.upload-zone.drag-over[_ngcontent-%COMP%]{border-color:#0056fe;background-color:#e8f0ff;transform:scale(1.02)}.upload-zone[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#666;margin-bottom:16px}.upload-zone[_ngcontent-%COMP%]   .upload-text[_ngcontent-%COMP%]{font-size:18px;color:#333;margin:0 0 16px;font-weight:500}.upload-zone[_ngcontent-%COMP%]   .credit-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;color:#666;font-size:14px}.upload-zone[_ngcontent-%COMP%]   .credit-info[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}"]})}}return n})();function of(n,o){if(n&1&&(ar(),l(0,"g"),k(1,"rect")(2,"rect",12),l(3,"text",13),p(4),c()()),n&2){let t=o.$implicit;g(),et("x",t.x)("y",t.y)("width",t.width)("height",t.height)("stroke",t.color)("stroke-width",t.strokeWidth)("fill",t.color)("fill-opacity",t.fillOpacity),g(),et("x",t.labelX)("y",t.labelY)("width",t.labelWidth)("height",t.labelHeight)("fill",t.color)("opacity",.9),g(),et("x",t.labelX+4)("y",t.labelY+t.labelHeight-6)("font-size",t.fontSize),g(),E(" ",t.labelText," ")}}function af(n,o){if(n&1&&(ar(),l(0,"svg",10),y(1,of,5,18,"g",11),c()),n&2){let t=C();et("viewBox","0 0 "+t.imageWidth+" "+t.imageHeight),g(),f("ngForOf",t.boundingBoxes)}}var qd=(()=>{class n{constructor(t){this.projectClassService=t,this.boundingBoxes=[],this.imageWidth=0,this.imageHeight=0,this.imageLoaded=!1,this.projectClasses=[],this.zoomLevel=1,this.isDragging=!1,this.dragStartX=0,this.dragStartY=0,this.scrollLeft=0,this.scrollTop=0}ngOnInit(){this.projectId&&this.loadProjectClasses()}ngOnChanges(t){(t.predictions||t.imageUrl)&&(this.imageLoaded=!1),t.projectId&&this.projectId&&this.loadProjectClasses()}loadProjectClasses(){console.log("=== Loading project classes ==="),console.log("ProjectId:",this.projectId),this.projectClassService.getClassesByProjectId(this.projectId).subscribe({next:t=>{this.projectClasses=t.sort((e,i)=>e.id-i.id),console.log("=== Project Classes Loaded ==="),console.log("Total classes:",this.projectClasses.length),console.log("Classes detail:"),this.projectClasses.forEach((e,i)=>{console.log(`  [${i}] ID: ${e.id}, Name: ${e.className}, Color: ${e.colorCode}`)}),this.imageLoaded&&(console.log("Image already loaded, recalculating bounding boxes..."),this.calculateBoundingBoxes())},error:t=>{console.error("=== Failed to load project classes ==="),console.error("Error:",t)}})}onImageLoad(t){let e=t.target;this.imageWidth=e.naturalWidth,this.imageHeight=e.naturalHeight,this.imageLoaded=!0,this.calculateBoundingBoxes()}calculateBoundingBoxes(){if(!this.predictions||!this.predictions.predictions){this.boundingBoxes=[];return}console.log("=== Calculating Bounding Boxes ==="),console.log("Predictions count:",this.predictions.predictions.length),console.log("Project classes available:",this.projectClasses.length),this.boundingBoxes=this.predictions.predictions.map((t,e)=>{let[i,a,r,s]=t.bbox,d=(i-r/2)*this.imageWidth,m=(a-s/2)*this.imageHeight,h=r*this.imageWidth,u=s*this.imageHeight,_=t.className||t.class_name,x=t.classId!==void 0?t.classId:t.class_id;x===void 0&&(x=-1),console.log(`
--- Prediction ${e+1} ---`),console.log("Label from API (stringified):",JSON.stringify(t)),console.log("Label keys:",Object.keys(t)),console.log("ClassId (from classId):",t.classId),console.log("ClassId (from class_id):",t.class_id),console.log("Final ClassId:",x),console.log("ClassName from API:",_),!_&&this.projectClasses.length>0&&x>=0?(console.log("Mapping classId to projectClasses["+x+"]"),x<this.projectClasses.length?(_=this.projectClasses[x].className,console.log("\u2705 Mapped to className:",_)):(_=`Class ${x}`,console.log("\u26A0\uFE0F ClassId out of range, using fallback:",_))):!_&&x>=0?(_=`Class ${x}`,console.log("\u26A0\uFE0F No projectClasses available, using fallback:",_)):_?console.log("\u2705 Using className from API:",_):(_="Unknown",console.log("\u26A0\uFE0F No classId available, using fallback: Unknown")),_||(_="Unknown");let v="#FF5C9A";this.projectClasses.length>0&&x>=0&&x<this.projectClasses.length?(v=this.projectClasses[x].colorCode,console.log(`\u2705 Mapped classId ${x} to color:`,v)):console.log(`\u26A0\uFE0F Using default color for classId ${x}`);let O=`${_}(${(t.confidence*100).toFixed(0)}%)`;console.log("Final labelText:",O);let w=40,S=w+16,I=this.estimateTextWidth(O,w)+16,L=d,R=m-S;return{x:d,y:m,width:h,height:u,classId:x,className:_,confidence:t.confidence,color:v,strokeWidth:3,fillOpacity:.2,labelText:O,labelX:L,labelY:R,labelWidth:I,labelHeight:S,fontSize:w}}),console.log(`
=== Bounding Boxes Calculated ===`),console.log("Total boxes:",this.boundingBoxes.length)}estimateTextWidth(t,e){return t.length*e*.6}zoomIn(){this.zoomLevel<3&&(this.zoomLevel=Math.min(this.zoomLevel+.25,3))}zoomOut(){this.zoomLevel>.5&&(this.zoomLevel=Math.max(this.zoomLevel-.25,.5))}resetZoom(){this.zoomLevel=1}onMouseWheel(t){t.preventDefault(),t.deltaY<0?this.zoomIn():this.zoomOut()}onMouseDown(t,e){this.isDragging=!0,this.dragStartX=t.clientX,this.dragStartY=t.clientY,this.scrollLeft=e.scrollLeft,this.scrollTop=e.scrollTop,t.preventDefault()}onMouseMove(t,e){if(!this.isDragging)return;t.preventDefault();let i=t.clientX-this.dragStartX,a=t.clientY-this.dragStartY;e.scrollLeft=this.scrollLeft-i,e.scrollTop=this.scrollTop-a}onMouseUp(){this.isDragging=!1}static{this.\u0275fac=function(e){return new(e||n)(T(Dn))}}static{this.\u0275cmp=A({type:n,selectors:[["app-featured-image"]],inputs:{imageUrl:"imageUrl",predictions:"predictions",projectId:"projectId"},standalone:!1,features:[oe],decls:13,vars:8,consts:[["viewport",""],[1,"featured-image-container"],[1,"zoom-controls"],["title","\u653E\u5927 (Zoom In)",3,"click","disabled"],["title","\u91CD\u7F6E (Reset)",3,"click"],["title","\u7E2E\u5C0F (Zoom Out)",3,"click","disabled"],[1,"image-viewport",3,"wheel","mousedown","mousemove","mouseup","mouseleave"],[1,"image-wrapper"],["alt","Featured image",1,"featured-image",3,"load","src"],["class","bounding-box-overlay","preserveAspectRatio","xMidYMid meet",4,"ngIf"],["preserveAspectRatio","xMidYMid meet",1,"bounding-box-overlay"],[4,"ngFor","ngForOf"],["rx","3"],["fill","#ffffff","font-family","Arial","font-weight","normal"]],template:function(e,i){if(e&1){let a=j();l(0,"div",1)(1,"div",2)(2,"button",3),P("click",function(){return M(a),b(i.zoomIn())}),p(3," + "),c(),l(4,"button",4),P("click",function(){return M(a),b(i.resetZoom())}),p(5,"\u27F2"),c(),l(6,"button",5),P("click",function(){return M(a),b(i.zoomOut())}),p(7," \u2212 "),c()(),l(8,"div",6,0),P("wheel",function(s){return M(a),b(i.onMouseWheel(s))})("mousedown",function(s){M(a);let d=gt(9);return b(i.onMouseDown(s,d))})("mousemove",function(s){M(a);let d=gt(9);return b(i.onMouseMove(s,d))})("mouseup",function(){return M(a),b(i.onMouseUp())})("mouseleave",function(){return M(a),b(i.onMouseUp())}),l(10,"div",7)(11,"img",8),P("load",function(s){return M(a),b(i.onImageLoad(s))}),c(),y(12,af,2,2,"svg",9),c()()()}e&2&&(g(2),f("disabled",i.zoomLevel>=3),g(4),f("disabled",i.zoomLevel<=.5),g(2),$("dragging",i.isDragging),g(2),K("transform","scale("+i.zoomLevel+")"),g(),f("src",i.imageUrl,ae),g(),f("ngIf",i.imageLoaded&&i.boundingBoxes.length>0))},dependencies:[Q,N],styles:[".featured-image-container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;flex-direction:column;background-color:#f5f5f5;border-radius:4px;position:relative}.featured-image-container[_ngcontent-%COMP%]   .zoom-controls[_ngcontent-%COMP%]{position:absolute;top:10px;right:10px;z-index:10;display:flex;gap:8px;background:#ffffffe6;padding:4px;border-radius:4px;box-shadow:0 2px 4px #0000001a}.featured-image-container[_ngcontent-%COMP%]   .zoom-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:32px;height:32px;display:flex;align-items:center;justify-content:center;border:none;background:#fff;border-radius:4px;cursor:pointer;font-size:18px;color:#333;transition:background-color .2s}.featured-image-container[_ngcontent-%COMP%]   .zoom-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#e0e0e0}.featured-image-container[_ngcontent-%COMP%]   .zoom-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.featured-image-container[_ngcontent-%COMP%]   .image-viewport[_ngcontent-%COMP%]{flex:1;overflow:auto;display:flex;align-items:center;justify-content:center;position:relative;cursor:grab;-webkit-user-select:none;user-select:none}.featured-image-container[_ngcontent-%COMP%]   .image-viewport.dragging[_ngcontent-%COMP%]{cursor:grabbing}.featured-image-container[_ngcontent-%COMP%]   .image-viewport[_ngcontent-%COMP%]   .image-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;justify-content:center;transition:transform .2s ease-out;transform-origin:center center}.featured-image-container[_ngcontent-%COMP%]   .image-viewport[_ngcontent-%COMP%]   .image-wrapper[_ngcontent-%COMP%]   .featured-image[_ngcontent-%COMP%]{display:block;max-width:100%;max-height:100%;width:auto;height:auto;object-fit:contain}.featured-image-container[_ngcontent-%COMP%]   .image-viewport[_ngcontent-%COMP%]   .image-wrapper[_ngcontent-%COMP%]   .bounding-box-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}"]})}}return n})();function lf(n,o){if(n&1&&(l(0,"div",17),p(1),c()),n&2){let t=o.$implicit;g(),il(" ",t.index," - x ",t.x,", y ",t.y,", ",t.width," x ",t.height,", (",(t.confidence*100).toFixed(0),"%) ")}}function cf(n,o){if(n&1&&(l(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"mat-panel-title"),k(3,"span",14),p(4),c()(),l(5,"div",15),y(6,lf,2,6,"div",16),c()()),n&2){let t=o.$implicit;g(3),K("background-color",t.color),g(),ue(" ",t.className," (",t.count,") "),g(2),f("ngForOf",t.instances)}}function df(n,o){if(n&1&&(l(0,"mat-accordion"),y(1,cf,7,5,"mat-expansion-panel",13),c()),n&2){let t=C();g(),f("ngForOf",t.groupedPredictions)}}function pf(n,o){n&1&&(l(0,"p",18),p(1," No predictions available "),c())}var Zd=(()=>{class n{constructor(t){this.projectClassService=t,this.thresholdChanged=new H,this.activeTab="prediction",this.selectedTabIndex=0,this.groupedPredictions=[],this.jsonOutput="",this.projectClasses=[],this.thresholdSubject=new Ct,this.thresholdSubject.pipe(ri(500),xo()).subscribe(e=>{this.thresholdChanged.emit(e)})}ngOnInit(){this.projectId&&this.loadProjectClasses()}ngOnChanges(t){t.predictions&&this.updatePredictions(),t.projectId&&this.projectId&&this.loadProjectClasses()}loadProjectClasses(){console.log("PredictionPanel: Loading project classes for projectId:",this.projectId),this.projectClassService.getClassesByProjectId(this.projectId).subscribe({next:t=>{this.projectClasses=t.sort((e,i)=>e.id-i.id),console.log("PredictionPanel: Project classes loaded:",this.projectClasses.length),this.predictions&&this.updatePredictions()},error:t=>{console.error("PredictionPanel: Failed to load project classes:",t)}})}updatePredictions(){if(console.log("PredictionPanel: updatePredictions called"),console.log("PredictionPanel: predictions object:",this.predictions),!this.predictions){console.log("PredictionPanel: No predictions object"),this.groupedPredictions=[],this.jsonOutput="";return}if(console.log("PredictionPanel: predictions.predictions:",this.predictions.predictions),!this.predictions.predictions){console.log("PredictionPanel: No predictions.predictions array"),this.groupedPredictions=[],this.jsonOutput="";return}console.log("PredictionPanel: predictions.predictions length:",this.predictions.predictions.length),this.groupedPredictions=this.groupPredictionsByClass(),this.jsonOutput=JSON.stringify(this.predictions.predictions,null,2)}groupPredictionsByClass(){let t=new Map;return this.predictions.predictions.forEach((e,i)=>{let a=e.classId!==void 0?e.classId:e.class_id!==void 0?e.class_id:-1,r=e.className||e.class_name,s="#FF5C9A";!r&&this.projectClasses.length>0&&a>=0&&a<this.projectClasses.length?(r=this.projectClasses[a].className,s=this.projectClasses[a].colorCode):r?this.projectClasses.length>0&&a>=0&&a<this.projectClasses.length&&(s=this.projectClasses[a].colorCode):r=`Class ${a}`,t.has(a)||t.set(a,{classId:a,className:r,color:s,count:0,instances:[]});let d=t.get(a);d.count++;let[m,h,u,_]=e.bbox;d.instances.push({index:d.instances.length+1,x:Math.round(m*1e3),y:Math.round(h*1e3),width:Math.round(u*1e3),height:Math.round(_*1e3),confidence:e.confidence})}),Array.from(t.values())}switchTab(t){this.activeTab=t}onTabChange(t){this.selectedTabIndex=t,this.activeTab=t===0?"prediction":"json"}onSliderChange(t){let e=typeof t=="string"?parseFloat(t):t;this.confidenceThreshold=e,this.thresholdSubject.next(e)}onInputChange(t){let e=typeof t=="string"?parseFloat(t):t;this.confidenceThreshold=e,this.thresholdChanged.emit(e)}static{this.\u0275fac=function(e){return new(e||n)(T(Dn))}}static{this.\u0275cmp=A({type:n,selectors:[["app-prediction-panel"]],inputs:{predictions:"predictions",confidenceThreshold:"confidenceThreshold",projectId:"projectId"},outputs:{thresholdChanged:"thresholdChanged"},standalone:!1,features:[oe],decls:17,vars:7,consts:[[1,"prediction-panel"],[1,"threshold-control"],[1,"threshold-inputs"],["min","0","max","1","step","0.01",1,"threshold-slider"],["matSliderThumb","",3,"input","value"],["type","number","min","0","max","1","step","0.01",1,"threshold-input",3,"blur","value"],["mat-stretch-tabs","false",1,"fixed-width-tabs",3,"selectedIndexChange","selectedIndex","dynamicHeight"],["label","Prediction"],[1,"tab-content"],[4,"ngIf"],["class","no-predictions",4,"ngIf"],["label","JSON output"],[1,"json-output"],[4,"ngFor","ngForOf"],[1,"class-marker"],[1,"instance-list"],["class","instance-item",4,"ngFor","ngForOf"],[1,"instance-item"],[1,"no-predictions"]],template:function(e,i){e&1&&(l(0,"div",0)(1,"div",1)(2,"label"),p(3,"Confidence Threshold"),c(),l(4,"div",2)(5,"mat-slider",3)(6,"input",4),P("input",function(r){return i.onSliderChange(r.target.value)}),c()(),l(7,"input",5),P("blur",function(r){return i.onInputChange(r.target.value)}),c()()(),l(8,"mat-tab-group",6),P("selectedIndexChange",function(r){return i.onTabChange(r)}),l(9,"mat-tab",7)(10,"div",8),y(11,df,2,1,"mat-accordion",9)(12,pf,2,0,"p",10),c()(),l(13,"mat-tab",11)(14,"div",8)(15,"pre",12),p(16),c()()()()()),e&2&&(g(6),f("value",i.confidenceThreshold),g(),f("value",i.confidenceThreshold),g(),f("selectedIndex",i.selectedTabIndex)("dynamicHeight",!1),g(3),f("ngIf",i.groupedPredictions.length>0),g(),f("ngIf",i.groupedPredictions.length===0),g(4),D(i.jsonOutput))},dependencies:[Q,N,oa,aa,mi,gi,Sd,Od,yd,wd],styles:[".prediction-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;width:100%;min-width:100%;max-width:100%;background:#fff;border-radius:4px;overflow:hidden}.prediction-panel[_ngcontent-%COMP%]   .threshold-control[_ngcontent-%COMP%]{padding:16px;border-bottom:1px solid #e0e0e0;flex-shrink:0;width:100%;box-sizing:border-box}.prediction-panel[_ngcontent-%COMP%]   .threshold-control[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:500;margin-bottom:8px;color:#333}.prediction-panel[_ngcontent-%COMP%]   .threshold-control[_ngcontent-%COMP%]   .threshold-inputs[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.prediction-panel[_ngcontent-%COMP%]   .threshold-control[_ngcontent-%COMP%]   .threshold-inputs[_ngcontent-%COMP%]   .threshold-slider[_ngcontent-%COMP%]{flex:1;min-width:0}.prediction-panel[_ngcontent-%COMP%]   .threshold-control[_ngcontent-%COMP%]   .threshold-inputs[_ngcontent-%COMP%]   .threshold-input[_ngcontent-%COMP%]{width:80px;flex-shrink:0;padding:6px 8px;border:1px solid #ccc;border-radius:4px;font-size:14px}.prediction-panel[_ngcontent-%COMP%]     mat-tab-group, .prediction-panel[_ngcontent-%COMP%]     mat-tab-group.fixed-width-tabs{flex:1;display:flex;flex-direction:column;overflow:hidden;width:100%!important;min-width:100%!important;max-width:100%!important}.prediction-panel[_ngcontent-%COMP%]     mat-tab-group .mat-mdc-tab-header, .prediction-panel[_ngcontent-%COMP%]     mat-tab-group.fixed-width-tabs .mat-mdc-tab-header{flex-shrink:0!important;width:100%!important;min-width:100%!important;max-width:100%!important}.prediction-panel[_ngcontent-%COMP%]     mat-tab-group .mat-mdc-tab-header-pagination, .prediction-panel[_ngcontent-%COMP%]     mat-tab-group.fixed-width-tabs .mat-mdc-tab-header-pagination{display:none!important}.prediction-panel[_ngcontent-%COMP%]     mat-tab-group .mat-mdc-tab-label-container, .prediction-panel[_ngcontent-%COMP%]     mat-tab-group.fixed-width-tabs .mat-mdc-tab-label-container{width:100%!important;flex-grow:1!important}.prediction-panel[_ngcontent-%COMP%]     mat-tab-group .mat-mdc-tab-list, .prediction-panel[_ngcontent-%COMP%]     mat-tab-group.fixed-width-tabs .mat-mdc-tab-list{width:100%!important;flex-grow:1!important}.prediction-panel[_ngcontent-%COMP%]     mat-tab-group .mat-mdc-tab-labels, .prediction-panel[_ngcontent-%COMP%]     mat-tab-group.fixed-width-tabs .mat-mdc-tab-labels{width:100%!important;display:flex!important;justify-content:flex-start!important;gap:0!important}.prediction-panel[_ngcontent-%COMP%]     mat-tab-group .mat-mdc-tab-labels .mat-mdc-tab, .prediction-panel[_ngcontent-%COMP%]     mat-tab-group .mat-mdc-tab-labels .mdc-tab, .prediction-panel[_ngcontent-%COMP%]     mat-tab-group.fixed-width-tabs .mat-mdc-tab-labels .mat-mdc-tab, .prediction-panel[_ngcontent-%COMP%]     mat-tab-group.fixed-width-tabs .mat-mdc-tab-labels .mdc-tab{flex:1!important;min-width:0!important;flex-grow:1!important;flex-shrink:1!important}.prediction-panel[_ngcontent-%COMP%]     mat-tab-group .mat-mdc-tab-body-wrapper, .prediction-panel[_ngcontent-%COMP%]     mat-tab-group.fixed-width-tabs .mat-mdc-tab-body-wrapper{flex:1!important;overflow:hidden!important;width:100%!important;min-width:100%!important;max-width:100%!important}.prediction-panel[_ngcontent-%COMP%]     mat-tab-group .mat-mdc-tab-body, .prediction-panel[_ngcontent-%COMP%]     mat-tab-group.fixed-width-tabs .mat-mdc-tab-body{overflow:hidden!important;width:100%!important;min-width:100%!important;max-width:100%!important}.prediction-panel[_ngcontent-%COMP%]     mat-tab-group .mat-mdc-tab-body-content, .prediction-panel[_ngcontent-%COMP%]     mat-tab-group.fixed-width-tabs .mat-mdc-tab-body-content{height:100%!important;overflow:hidden!important;width:100%!important;min-width:100%!important;max-width:100%!important}.prediction-panel[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{padding:16px;overflow-y:auto;height:100%;max-height:100%;width:100%;min-width:350px;box-sizing:border-box}.prediction-panel[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .class-marker[_ngcontent-%COMP%]{display:inline-block;width:12px;height:12px;border-radius:2px;margin-right:8px}.prediction-panel[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   mat-accordion[_ngcontent-%COMP%]{min-width:330px}.prediction-panel[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .instance-list[_ngcontent-%COMP%]{padding:8px 0}.prediction-panel[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .instance-list[_ngcontent-%COMP%]   .instance-item[_ngcontent-%COMP%]{padding:4px 0;font-size:13px;color:#666;font-family:monospace}.prediction-panel[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .no-predictions[_ngcontent-%COMP%]{text-align:center;color:#999;padding:32px}.prediction-panel[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]   .json-output[_ngcontent-%COMP%]{font-family:Courier New,monospace;font-size:12px;background:#f5f5f5;padding:12px;border-radius:4px;overflow-x:auto;white-space:pre-wrap;word-wrap:break-word;width:100%;min-width:330px;box-sizing:border-box}"]})}}return n})();function gf(n,o){if(n&1){let t=j();l(0,"div",6),P("click",function(){let i=M(t).index,a=C();return b(a.selectImage(i))}),k(1,"img",7),c()}if(n&2){let t=o.$implicit,e=o.index,i=C();$("selected",i.isSelected(e)),g(),f("src",t.thumbnailUrl,ae)("alt","Image "+(e+1))}}var Qd=(()=>{class n{constructor(){this.images=[],this.selectedIndex=0,this.imageSelected=new H,this.continueUpload=new H,this.acceptedFormats=qi.join(",")}selectImage(t){this.imageSelected.emit(t)}isSelected(t){return t===this.selectedIndex}triggerContinueUpload(){let t=document.getElementById("continue-upload-input");t&&t.click()}onContinueUploadChange(t){let e=t.target;if(e.files&&e.files.length>0){let i=Array.from(e.files);this.continueUpload.emit(i),e.value=""}}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=A({type:n,selectors:[["app-image-thumbnail-list"]],inputs:{images:"images",selectedIndex:"selectedIndex"},outputs:{imageSelected:"imageSelected",continueUpload:"continueUpload"},standalone:!1,decls:8,vars:2,consts:[[1,"thumbnail-list"],[1,"upload-button-container"],["mat-icon-button","","matTooltip","Upload more images",1,"upload-button",3,"click"],[1,"thumbnail-grid"],["class","thumbnail-item",3,"selected","click",4,"ngFor","ngForOf"],["type","file","id","continue-upload-input","multiple","",2,"display","none",3,"change","accept"],[1,"thumbnail-item",3,"click"],[3,"src","alt"]],template:function(e,i){e&1&&(l(0,"div",0)(1,"div",1)(2,"button",2),P("click",function(){return i.triggerContinueUpload()}),l(3,"mat-icon"),p(4,"folder_open"),c()()(),l(5,"div",3),y(6,gf,2,4,"div",4),c(),l(7,"input",5),P("change",function(r){return i.onContinueUploadChange(r)}),c()()),e&2&&(g(6),f("ngForOf",i.images),g(),f("accept",i.acceptedFormats))},dependencies:[Q,at,W,jt],styles:[".thumbnail-list[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:flex-start}.thumbnail-list[_ngcontent-%COMP%]   .upload-button-container[_ngcontent-%COMP%]{flex:0 0 auto}.thumbnail-list[_ngcontent-%COMP%]   .upload-button-container[_ngcontent-%COMP%]   .upload-button[_ngcontent-%COMP%]{width:100px;height:92px;border:2px dashed #ccc;border-radius:4px;background:#fafafa;transition:all .3s ease}.thumbnail-list[_ngcontent-%COMP%]   .upload-button-container[_ngcontent-%COMP%]   .upload-button[_ngcontent-%COMP%]:hover{border-color:#0056fe;background:#f5f8ff}.thumbnail-list[_ngcontent-%COMP%]   .upload-button-container[_ngcontent-%COMP%]   .upload-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px}.thumbnail-list[_ngcontent-%COMP%]   .thumbnail-grid[_ngcontent-%COMP%]{flex:1;display:grid;grid-template-columns:repeat(auto-fill,minmax(100px,1fr));gap:12px;overflow-x:auto}.thumbnail-list[_ngcontent-%COMP%]   .thumbnail-grid[_ngcontent-%COMP%]   .thumbnail-item[_ngcontent-%COMP%]{position:relative;width:100%;height:92px;border:4px solid transparent;border-radius:4px;overflow:hidden;cursor:pointer;transition:all .2s ease}.thumbnail-list[_ngcontent-%COMP%]   .thumbnail-grid[_ngcontent-%COMP%]   .thumbnail-item[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.thumbnail-list[_ngcontent-%COMP%]   .thumbnail-grid[_ngcontent-%COMP%]   .thumbnail-item.selected[_ngcontent-%COMP%]{border-color:#0056fe}.thumbnail-list[_ngcontent-%COMP%]   .thumbnail-grid[_ngcontent-%COMP%]   .thumbnail-item[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover;display:block}"]})}}return n})();function ff(n,o){n&1&&(l(0,"div",8),k(1,"mat-spinner",9),l(2,"p"),p(3,"Processing images..."),c()())}function uf(n,o){if(n&1){let t=j();l(0,"div",10)(1,"app-test-model-upload-zone",11),P("filesUploaded",function(i){M(t);let a=C();return b(a.handleImagesUploaded(i))}),c()()}}function _f(n,o){if(n&1&&k(0,"app-featured-image",20),n&2){let t=C(2);f("imageUrl",t.selectedImage.blobUrl)("predictions",t.selectedImagePredictions)("projectId",t.data.projectId)}}function Cf(n,o){if(n&1){let t=j();l(0,"app-prediction-panel",21),P("thresholdChanged",function(i){M(t);let a=C(2);return b(a.handleThresholdChanged(i))}),c()}if(n&2){let t=C(2);f("predictions",t.selectedImagePredictions)("confidenceThreshold",t.confidenceThreshold)("projectId",t.data.projectId)}}function xf(n,o){if(n&1){let t=j();l(0,"div",12)(1,"div",13)(2,"div",14),y(3,_f,1,3,"app-featured-image",15),c(),l(4,"div",16),y(5,Cf,1,3,"app-prediction-panel",17),c()(),l(6,"div",18)(7,"app-image-thumbnail-list",19),P("imageSelected",function(i){M(t);let a=C();return b(a.handleImageSelected(i))})("continueUpload",function(i){M(t);let a=C();return b(a.handleContinueUpload(i))}),c()()()}if(n&2){let t=C();g(3),f("ngIf",t.selectedImage&&t.selectedImagePredictions),g(2),f("ngIf",t.selectedImagePredictions),g(2),f("images",t.uploadedImages)("selectedIndex",t.selectedImageIndex)}}var Kd=(()=>{class n{constructor(t,e,i,a,r){this.dialogRef=t,this.data=e,this.testModelService=i,this.fileUploadService=a,this.snackBar=r,this.uploadedImages=[],this.selectedImageIndex=0,this.confidenceThreshold=.75,this.predictionResults=[],this.isLoading=!1,this.error=null,this.showResults=!1,this.destroy$=new Ct}get selectedImage(){return this.uploadedImages.length===0||this.selectedImageIndex<0?null:this.uploadedImages[this.selectedImageIndex]||null}get selectedImagePredictions(){return this.predictionResults.length===0||!this.selectedImage?null:this.predictionResults.find(t=>t.image===this.selectedImage?.blobUrl)||null}ngOnInit(){console.log("=== TestModelDialog Initialized ==="),console.log("Dialog data:",this.data),console.log("Model ID:",this.data.modelId),console.log("Project ID:",this.data.projectId),console.log("Track ID:",this.data.trackId)}ngOnDestroy(){this.uploadedImages.length>0&&Gd(this.uploadedImages),this.destroy$.next(),this.destroy$.complete()}handleImagesUploaded(t){return _n(this,null,function*(){console.log("Handling uploaded images:",t.length);let{validFiles:e,errors:i}=Hd(t);if(i.length>0&&i.forEach(a=>{this.snackBar.open(a,"Close",{duration:5e3,verticalPosition:"top",panelClass:"snackbar-warning"})}),e.length!==0)try{let a=yield Wd(e);this.uploadedImages=[...this.uploadedImages,...a],this.uploadedImages.length>0&&this.selectedImageIndex<0&&(this.selectedImageIndex=0,console.log("Auto-selected first image after upload")),yield this.callPredictionApi()}catch(a){console.error("Error processing uploaded images:",a),this.showError("Failed to process uploaded images. Please try again.")}})}handleImageSelected(t){console.log("Image selected:",t),this.selectedImageIndex=t}handleThresholdChanged(t){console.log("Threshold changed to:",t),this.confidenceThreshold=t,this.callPredictionApi()}handleContinueUpload(t){return _n(this,null,function*(){yield this.handleImagesUploaded(t)})}closeDialog(){this.dialogRef.close()}callPredictionApi(){return _n(this,null,function*(){if(this.uploadedImages.length!==0){this.isLoading=!0,this.error=null;try{console.log("Step 1: Creating zip file from uploaded images...");let t=yield this.createZipFromImages();console.log("Zip file created, size:",t.size),console.log("Step 2: Uploading zip file to server...");let e=yield this.uploadZipFile(t);if(console.log("Upload response:",e),e.status!=="SUCCESS")throw new Error(e.error||"Failed to upload file");console.log("Step 3: Calling Test Model API...");let i={trackId:this.data.trackId,zipFilenames:[e.filename],zipPath:e.zipPath};console.log("Test Model API request:",i),this.testModelService.testModel(i).pipe(q(this.destroy$)).subscribe({next:a=>{if(console.log("Received test model submission response:",a),a.errorMessage){this.showError(a.errorMessage),this.isLoading=!1,this.cleanupUploadedFile(this.data.trackId,e.filename);return}console.log("Step 4: Fetching test results with runId:",a.runId),this.fetchTestResults(a.trackId,a.runId,e.filename)},error:a=>{console.error("Test Model API error:",a),this.showError(a.message),this.isLoading=!1,this.cleanupUploadedFile(this.data.trackId,e.filename)}})}catch(t){console.error("Error in prediction workflow:",t),this.showError(t.message||"Failed to process images"),this.isLoading=!1}}})}fetchTestResults(t,e,i){console.log("Fetching test results for trackId:",t,"runId:",e),this.testModelService.getTestResults(t,e).pipe(q(this.destroy$)).subscribe({next:a=>{if(console.log("Received test results response:",a),a.status==="ERROR"){this.showError(a.error||"Failed to retrieve test results"),this.isLoading=!1,this.cleanupUploadedFile(t,i);return}a.test_predictions?this.loadPredictionsFromFile(a.test_predictions,i):(this.showError("Test predictions file path not available"),this.isLoading=!1,this.cleanupUploadedFile(t,i))},error:a=>{console.error("Fetch test results error:",a),this.showError(a.message),this.isLoading=!1,this.cleanupUploadedFile(t,i)}})}loadPredictionsFromFile(t,e){console.log("Loading predictions from file:",t),this.testModelService.loadPredictionsFile(t).pipe(q(this.destroy$)).subscribe({next:i=>{console.log("Loaded predictions from file:",i);let a={prediction_images:i.map(r=>({image:r.image||r.filename,predictions:(r.predictions||r.labels||[]).map(s=>({confidence:s.confidence,class_id:s.class_id,class_name:s.class_name,bbox:s.bbox_normalized||s.bbox||[]}))}))};this.handlePredictionResponse(a),this.isLoading=!1,this.showResults=!0,this.cleanupUploadedFile(this.data.trackId,e)},error:i=>{console.error("Load predictions file error:",i),this.showError(i.message),this.isLoading=!1,this.cleanupUploadedFile(this.data.trackId,e)}})}createZipFromImages(){return _n(this,null,function*(){let t=yield import("./chunk-W2FA72DO.js"),e=t.default||t,i=new e;for(let r of this.uploadedImages)try{let d=yield(yield fetch(r.blobUrl)).blob();i.file(r.file.name,d),console.log(`Added ${r.file.name} to zip`)}catch(s){throw console.error(`Failed to add ${r.file.name} to zip:`,s),new Error(`Failed to process image: ${r.file.name}`)}return yield i.generateAsync({type:"blob"})})}uploadZipFile(t){let e=new File([t],`test_images_${this.data.trackId}.zip`,{type:"application/zip"});return new Promise((i,a)=>{this.fileUploadService.uploadZipFile(e,this.data.trackId).pipe(q(this.destroy$)).subscribe({next:r=>i(r),error:r=>a(new Error("Failed to upload file: "+r.message))})})}cleanupUploadedFile(t,e){this.fileUploadService.deleteFile(t,e).pipe(q(this.destroy$)).subscribe({next:()=>console.log("Uploaded file cleaned up successfully"),error:i=>console.warn("Failed to cleanup uploaded file:",i)})}handlePredictionResponse(t){if(console.log("=== handlePredictionResponse ==="),console.log("Full API response:",t),console.log("response.prediction_images:",t.prediction_images),t.prediction_images&&t.prediction_images.length>0){console.log("Number of prediction images:",t.prediction_images.length);let e=new Map;this.uploadedImages.forEach(i=>{e.set(i.file.name,i.blobUrl)}),this.predictionResults=t.prediction_images.map(i=>{console.log("Processing prediction result:",i),console.log("  - image:",i.image),console.log("  - predictions:",i.predictions),console.log("  - predictions length:",i.predictions?.length);let a=e.get(i.image);return a?ne(_t({},i),{image:a}):(console.warn(`No blob URL found for image: ${i.image}`),i)}),console.log("Stored prediction results:",this.predictionResults.length),console.log("First prediction result:",this.predictionResults[0]),this.predictionResults.length>0&&(this.selectedImageIndex=0,console.log("Auto-selected first image"))}else console.error("No prediction_images in response or empty array"),this.showError("No prediction results returned from API.")}showError(t){this.error=t,this.snackBar.open(t,"Close",{duration:5e3,verticalPosition:"top",panelClass:"snackbar-error"})}static{this.\u0275fac=function(e){return new(e||n)(T(pt),T(mt),T($d),T(Ud),T($t))}}static{this.\u0275cmp=A({type:n,selectors:[["app-test-model-dialog"]],standalone:!1,decls:11,vars:3,consts:[[1,"test-model-dialog"],[1,"dialog-header"],["mat-dialog-title",""],["mat-icon-button","",1,"close-button",3,"click"],[1,"dialog-content"],["class","loading-overlay",4,"ngIf"],["class","initial-state",4,"ngIf"],["class","results-state",4,"ngIf"],[1,"loading-overlay"],["diameter","50"],[1,"initial-state"],[3,"filesUploaded"],[1,"results-state"],[1,"results-layout"],[1,"featured-image-container"],[3,"imageUrl","predictions","projectId",4,"ngIf"],[1,"prediction-panel-container"],[3,"predictions","confidenceThreshold","projectId","thresholdChanged",4,"ngIf"],[1,"thumbnail-list-container"],[3,"imageSelected","continueUpload","images","selectedIndex"],[3,"imageUrl","predictions","projectId"],[3,"thresholdChanged","predictions","confidenceThreshold","projectId"]],template:function(e,i){e&1&&(l(0,"div",0)(1,"div",1)(2,"h2",2),p(3,"Try this model"),c(),l(4,"button",3),P("click",function(){return i.closeDialog()}),l(5,"mat-icon"),p(6,"close"),c()()(),l(7,"mat-dialog-content",4),y(8,ff,4,0,"div",5)(9,uf,2,0,"div",6)(10,xf,8,4,"div",7),c()()),e&2&&(g(8),f("ngIf",i.isLoading),g(),f("ngIf",!i.showResults),g(),f("ngIf",i.showResults))},dependencies:[N,xt,ht,at,W,nt,Yd,qd,Zd,Qd],styles:[".test-model-dialog[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;max-height:90vh}.test-model-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px 24px;border-bottom:1px solid #e0e0e0;flex-shrink:0}.test-model-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:500}.test-model-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{margin-right:-12px}.test-model-dialog[_ngcontent-%COMP%]   .dialog-content[_ngcontent-%COMP%]{position:relative;flex:1;padding:0;overflow:hidden;display:flex;flex-direction:column;min-height:0;max-height:none!important}.test-model-dialog[_ngcontent-%COMP%]   .loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#ffffffe6;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:1000}.test-model-dialog[_ngcontent-%COMP%]   .loading-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:16px;font-size:14px;color:#666}.test-model-dialog[_ngcontent-%COMP%]   .initial-state[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;padding:48px}.test-model-dialog[_ngcontent-%COMP%]   .results-state[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow:hidden;min-height:0}.test-model-dialog[_ngcontent-%COMP%]   .results-layout[_ngcontent-%COMP%]{flex:1;display:flex;gap:16px;padding:16px;overflow:hidden;min-height:400px}.test-model-dialog[_ngcontent-%COMP%]   .results-layout[_ngcontent-%COMP%]   .featured-image-container[_ngcontent-%COMP%]{flex:0 0 66.666%;display:flex;overflow:hidden;min-width:0}.test-model-dialog[_ngcontent-%COMP%]   .results-layout[_ngcontent-%COMP%]   .prediction-panel-container[_ngcontent-%COMP%]{flex:0 0 33.333%;display:flex;overflow:hidden;min-width:0;max-width:33.333%}.test-model-dialog[_ngcontent-%COMP%]   .thumbnail-list-container[_ngcontent-%COMP%]{flex:0 0 auto;border-top:1px solid #e0e0e0;padding:16px;overflow-y:auto;max-height:200px}@media (max-width: 1200px){.test-model-dialog[_ngcontent-%COMP%]   .results-layout[_ngcontent-%COMP%]{flex-direction:column}.test-model-dialog[_ngcontent-%COMP%]   .results-layout[_ngcontent-%COMP%]   .featured-image-container[_ngcontent-%COMP%], .test-model-dialog[_ngcontent-%COMP%]   .results-layout[_ngcontent-%COMP%]   .prediction-panel-container[_ngcontent-%COMP%]{flex:1 1 auto}}"]})}}return n})();function Mf(n,o){n&1&&(l(0,"div",6),k(1,"div",7),l(2,"div",8),k(3,"div",9)(4,"div",9)(5,"div",9),c()())}function bf(n,o){if(n&1){let t=j();l(0,"div",15)(1,"h2",16),p(2),c(),l(3,"button",17),P("click",function(){M(t);let i=C().ngIf,a=C();return b(a.startEditingName(i.modelAlias||""))}),l(4,"mat-icon"),p(5,"edit"),c()()()}if(n&2){let t=C().ngIf;g(2),D(t.modelAlias)}}function Pf(n,o){if(n&1&&(l(0,"mat-error"),p(1),c()),n&2){let t=C(3);g(),E(" ",t.getErrorMessage()," ")}}function vf(n,o){if(n&1){let t=j();l(0,"div",18)(1,"mat-form-field",19)(2,"mat-label"),p(3,"Model Name"),c(),l(4,"input",20),P("keyup.enter",function(){M(t);let i=C().ngIf,a=C();return b(a.saveModelName(i.id))})("keyup.escape",function(){M(t);let i=C(2);return b(i.cancelEditingName())}),c(),y(5,Pf,2,1,"mat-error",21),c(),l(6,"button",22),P("click",function(){M(t);let i=C().ngIf,a=C();return b(a.saveModelName(i.id))}),l(7,"mat-icon"),p(8,"check"),c()(),l(9,"button",23),P("click",function(){M(t);let i=C(2);return b(i.cancelEditingName())}),l(10,"mat-icon"),p(11,"close"),c()()()}if(n&2){let t=C(2);g(4),f("formControl",t.modelAliasControl),g(),f("ngIf",t.modelAliasControl.invalid),g(),f("disabled",t.modelAliasControl.invalid)}}function Of(n,o){if(n&1&&(l(0,"div",24)(1,"mat-icon"),p(2,"error"),c(),l(3,"span"),p(4),c()()),n&2){let t=o.ngIf;g(4),D(t)}}function yf(n,o){if(n&1&&(l(0,"div",10)(1,"div",11),y(2,bf,6,1,"div",12)(3,vf,12,3,"div",13)(4,Of,5,1,"div",14),z(5,"async"),c()()),n&2){let t=C();g(2),f("ngIf",!t.isEditingName),g(),f("ngIf",t.isEditingName),g(),f("ngIf",V(5,3,t.renameError$))}}var Jd=(()=>{class n{constructor(t){this.store=t,this.close=new H,this.toggleWidth=new H,this.isEditingName=!1,this.modelData$=this.store.select(Pi),this.panelWidth$=this.store.select(Vo),this.renameError$=this.store.select(Qc),this.modelAliasControl=new vl("",[qt.required,qt.minLength(1),qt.maxLength(36),this.noControlCharactersValidator])}ngOnInit(){}startEditingName(t){this.isEditingName=!0,this.modelAliasControl.setValue(t)}cancelEditingName(){this.isEditingName=!1,this.modelAliasControl.reset()}saveModelName(t){if(this.modelAliasControl.valid){let e=this.modelAliasControl.value.trim();this.store.dispatch(Nl({modelId:t,newAlias:e})),this.isEditingName=!1}}noControlCharactersValidator(t){if(!t.value)return null;let e=t.value;return/[\x00-\x1F\x7F]/.test(e)?{controlCharacters:!0}:null}getErrorMessage(){return this.modelAliasControl.hasError("required")?"Model name is required":this.modelAliasControl.hasError("minlength")?"Model name must be at least 1 character":this.modelAliasControl.hasError("maxlength")?"Model name must not exceed 36 characters":this.modelAliasControl.hasError("controlCharacters")?"Model name cannot contain control characters":""}formatDate(t){return t?new Date(t).toLocaleString():"N/A"}onClose(){this.close.emit()}onToggleWidth(){this.toggleWidth.emit()}static{this.\u0275fac=function(e){return new(e||n)(T(St))}}static{this.\u0275cmp=A({type:n,selectors:[["app-model-detail-header"]],outputs:{close:"close",toggleWidth:"toggleWidth"},standalone:!1,decls:14,vars:12,consts:[[1,"model-detail-header"],["class","header-skeleton",4,"ngIf"],["class","header-content",4,"ngIf"],[1,"header-actions"],["mat-icon-button","",3,"click","matTooltip"],["mat-icon-button","","matTooltip","Close panel",3,"click"],[1,"header-skeleton"],[1,"skeleton-line","skeleton-title"],[1,"skeleton-metadata"],[1,"skeleton-line","skeleton-text"],[1,"header-content"],[1,"model-name-section"],["class","model-name-display",4,"ngIf"],["class","model-name-edit",4,"ngIf"],["class","rename-error",4,"ngIf"],[1,"model-name-display"],[1,"model-alias"],["mat-icon-button","","matTooltip","Rename model",3,"click"],[1,"model-name-edit"],["appearance","outline"],["matInput","",3,"keyup.enter","keyup.escape","formControl"],[4,"ngIf"],["mat-icon-button","","color","primary","matTooltip","Save",3,"click","disabled"],["mat-icon-button","","matTooltip","Cancel",3,"click"],[1,"rename-error"]],template:function(e,i){e&1&&(l(0,"div",0),y(1,Mf,6,0,"div",1),z(2,"async"),y(3,yf,6,5,"div",2),z(4,"async"),l(5,"div",3)(6,"button",4),z(7,"async"),P("click",function(){return i.onToggleWidth()}),l(8,"mat-icon"),p(9),z(10,"async"),c()(),l(11,"button",5),P("click",function(){return i.onClose()}),l(12,"mat-icon"),p(13,"close"),c()()()()),e&2&&(g(),f("ngIf",!V(2,4,i.modelData$)),g(2),f("ngIf",V(4,6,i.modelData$)),g(3),f("matTooltip",V(7,8,i.panelWidth$)==="normal"?"Expand panel":"Collapse panel"),g(3),D(V(10,10,i.panelWidth$)==="normal"?"fullscreen":"fullscreen_exit"))},dependencies:[N,Lt,Ft,Ol,at,W,Mt,_e,Se,kt,jt,Vt],styles:[".model-detail-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;padding:20px 24px;background-color:#fafafa;border-bottom:1px solid #e0e0e0}.header-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:16px}.model-name-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.model-name-display[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.model-name-display[_ngcontent-%COMP%]   .model-alias[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:500;color:#1976d2}.model-name-display[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{opacity:.7;transition:opacity .2s ease}.model-name-display[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1}.model-name-edit[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:8px}.model-name-edit[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1;max-width:400px}.rename-error[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#f44336;font-size:14px;padding:8px 12px;background-color:#ffebee;border-radius:4px;border-left:3px solid #f44336}.rename-error[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.model-metadata[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:20px;padding-top:8px}.metadata-item[_ngcontent-%COMP%]{display:flex;gap:6px;font-size:14px}.metadata-item[_ngcontent-%COMP%]   .metadata-label[_ngcontent-%COMP%]{color:#666;font-weight:500}.metadata-item[_ngcontent-%COMP%]   .metadata-value[_ngcontent-%COMP%]{color:#333}.header-actions[_ngcontent-%COMP%]{display:flex;gap:4px;flex-shrink:0}.header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#666;transition:color .2s ease}.header-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{color:#1976d2}.header-skeleton[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:16px;padding:8px 0}.skeleton-line[_ngcontent-%COMP%]{background:linear-gradient(90deg,#f0f0f0 25%,#e0e0e0,#f0f0f0 75%);background-size:200% 100%;animation:_ngcontent-%COMP%_skeleton-loading 1.5s ease-in-out infinite;border-radius:4px}.skeleton-title[_ngcontent-%COMP%]{height:32px;width:300px;max-width:60%}.skeleton-metadata[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:16px}.skeleton-text[_ngcontent-%COMP%]{height:20px;width:150px}@keyframes _ngcontent-%COMP%_skeleton-loading{0%{background-position:200% 0}to{background-position:-200% 0}}@media (max-width: 768px){.model-detail-header[_ngcontent-%COMP%]{flex-direction:column;gap:16px;padding:16px}.header-actions[_ngcontent-%COMP%]{align-self:flex-end}.model-name-display[_ngcontent-%COMP%]   .model-alias[_ngcontent-%COMP%]{font-size:20px}.model-metadata[_ngcontent-%COMP%]{flex-direction:column;gap:8px}}"],changeDetection:0})}}return n})();var tp=(()=>{class n{constructor(t){this.store=t,this.activeTab$=this.store.select(Lo)}ngOnInit(){}switchToTrainingTab(){this.store.dispatch(fr({tab:"training"}))}switchToPerformanceTab(){this.store.dispatch(fr({tab:"performance"}))}static{this.\u0275fac=function(e){return new(e||n)(T(St))}}static{this.\u0275cmp=A({type:n,selectors:[["app-model-detail-tabs"]],standalone:!1,decls:5,vars:3,consts:[[1,"model-detail-tabs"],["animationDuration","300ms",3,"selectedIndexChange","selectedIndex"],["label","Training Information"],["label","Performance Report"]],template:function(e,i){e&1&&(l(0,"div",0)(1,"mat-tab-group",1),z(2,"async"),P("selectedIndexChange",function(r){return r===0?i.switchToTrainingTab():i.switchToPerformanceTab()}),k(3,"mat-tab",2)(4,"mat-tab",3),c()()),e&2&&(g(),f("selectedIndex",V(2,1,i.activeTab$)==="training"?0:1))},dependencies:[mi,gi,Vt],styles:[".model-detail-tabs[_ngcontent-%COMP%]{background-color:#fff}.model-detail-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-group .mat-mdc-tab-header{border-bottom:1px solid #e0e0e0}.model-detail-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-group .mat-mdc-tab-list{justify-content:flex-start}.model-detail-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-group .mat-mdc-tab-labels{padding:0 24px;justify-content:flex-start;flex-grow:0}.model-detail-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-group .mdc-tab, .model-detail-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-group .mat-mdc-tab{min-width:auto!important;width:auto!important;flex-grow:0!important;flex-basis:auto!important}.model-detail-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-group .mat-mdc-tab-label{min-width:auto;width:auto;height:48px;padding:0 24px;font-size:14px;font-weight:500;color:#666;flex-grow:0}.model-detail-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-group .mat-mdc-tab-label.mat-mdc-tab-label-active{color:#1976d2}.model-detail-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-group .mat-mdc-tab-body-wrapper{display:none}"],changeDetection:0})}}return n})();function Qi(n){return n+.5|0}var jn=(n,o,t)=>Math.max(Math.min(n,t),o);function Xi(n){return jn(Qi(n*2.55),0,255)}function Fn(n){return jn(Qi(n*255),0,255)}function dn(n){return jn(Qi(n/2.55)/100,0,1)}function ep(n){return jn(Qi(n*100),0,100)}var De={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},wr=[..."0123456789ABCDEF"],kf=n=>wr[n&15],If=n=>wr[(n&240)>>4]+wr[n&15],ga=n=>(n&240)>>4===(n&15),Tf=n=>ga(n.r)&&ga(n.g)&&ga(n.b)&&ga(n.a);function Df(n){var o=n.length,t;return n[0]==="#"&&(o===4||o===5?t={r:255&De[n[1]]*17,g:255&De[n[2]]*17,b:255&De[n[3]]*17,a:o===5?De[n[4]]*17:255}:(o===7||o===9)&&(t={r:De[n[1]]<<4|De[n[2]],g:De[n[3]]<<4|De[n[4]],b:De[n[5]]<<4|De[n[6]],a:o===9?De[n[7]]<<4|De[n[8]]:255})),t}var Ef=(n,o)=>n<255?o(n):"";function jf(n){var o=Tf(n)?kf:If;return n?"#"+o(n.r)+o(n.g)+o(n.b)+Ef(n.a,o):void 0}var Ff=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function ap(n,o,t){let e=o*Math.min(t,1-t),i=(a,r=(a+n/30)%12)=>t-e*Math.max(Math.min(r-3,9-r,1),-1);return[i(0),i(8),i(4)]}function Af(n,o,t){let e=(i,a=(i+n/60)%6)=>t-t*o*Math.max(Math.min(a,4-a,1),0);return[e(5),e(3),e(1)]}function zf(n,o,t){let e=ap(n,1,.5),i;for(o+t>1&&(i=1/(o+t),o*=i,t*=i),i=0;i<3;i++)e[i]*=1-o-t,e[i]+=o;return e}function Vf(n,o,t,e,i){return n===i?(o-t)/e+(o<t?6:0):o===i?(t-n)/e+2:(n-o)/e+4}function Sr(n){let t=n.r/255,e=n.g/255,i=n.b/255,a=Math.max(t,e,i),r=Math.min(t,e,i),s=(a+r)/2,d,m,h;return a!==r&&(h=a-r,m=s>.5?h/(2-a-r):h/(a+r),d=Vf(t,e,i,h,a),d=d*60+.5),[d|0,m||0,s]}function kr(n,o,t,e){return(Array.isArray(o)?n(o[0],o[1],o[2]):n(o,t,e)).map(Fn)}function Ir(n,o,t){return kr(ap,n,o,t)}function Lf(n,o,t){return kr(zf,n,o,t)}function Rf(n,o,t){return kr(Af,n,o,t)}function rp(n){return(n%360+360)%360}function Bf(n){let o=Ff.exec(n),t=255,e;if(!o)return;o[5]!==e&&(t=o[6]?Xi(+o[5]):Fn(+o[5]));let i=rp(+o[2]),a=+o[3]/100,r=+o[4]/100;return o[1]==="hwb"?e=Lf(i,a,r):o[1]==="hsv"?e=Rf(i,a,r):e=Ir(i,a,r),{r:e[0],g:e[1],b:e[2],a:t}}function Nf(n,o){var t=Sr(n);t[0]=rp(t[0]+o),t=Ir(t),n.r=t[0],n.g=t[1],n.b=t[2]}function $f(n){if(!n)return;let o=Sr(n),t=o[0],e=ep(o[1]),i=ep(o[2]);return n.a<255?`hsla(${t}, ${e}%, ${i}%, ${dn(n.a)})`:`hsl(${t}, ${e}%, ${i}%)`}var np={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},ip={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Uf(){let n={},o=Object.keys(ip),t=Object.keys(np),e,i,a,r,s;for(e=0;e<o.length;e++){for(r=s=o[e],i=0;i<t.length;i++)a=t[i],s=s.replace(a,np[a]);a=parseInt(ip[r],16),n[s]=[a>>16&255,a>>8&255,a&255]}return n}var ha;function Hf(n){ha||(ha=Uf(),ha.transparent=[0,0,0,0]);let o=ha[n.toLowerCase()];return o&&{r:o[0],g:o[1],b:o[2],a:o.length===4?o[3]:255}}var Wf=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Gf(n){let o=Wf.exec(n),t=255,e,i,a;if(o){if(o[7]!==e){let r=+o[7];t=o[8]?Xi(r):jn(r*255,0,255)}return e=+o[1],i=+o[3],a=+o[5],e=255&(o[2]?Xi(e):jn(e,0,255)),i=255&(o[4]?Xi(i):jn(i,0,255)),a=255&(o[6]?Xi(a):jn(a,0,255)),{r:e,g:i,b:a,a:t}}}function Yf(n){return n&&(n.a<255?`rgba(${n.r}, ${n.g}, ${n.b}, ${dn(n.a)})`:`rgb(${n.r}, ${n.g}, ${n.b})`)}var yr=n=>n<=.0031308?n*12.92:Math.pow(n,1/2.4)*1.055-.055,ki=n=>n<=.04045?n/12.92:Math.pow((n+.055)/1.055,2.4);function qf(n,o,t){let e=ki(dn(n.r)),i=ki(dn(n.g)),a=ki(dn(n.b));return{r:Fn(yr(e+t*(ki(dn(o.r))-e))),g:Fn(yr(i+t*(ki(dn(o.g))-i))),b:Fn(yr(a+t*(ki(dn(o.b))-a))),a:n.a+t*(o.a-n.a)}}function fa(n,o,t){if(n){let e=Sr(n);e[o]=Math.max(0,Math.min(e[o]+e[o]*t,o===0?360:1)),e=Ir(e),n.r=e[0],n.g=e[1],n.b=e[2]}}function sp(n,o){return n&&Object.assign(o||{},n)}function op(n){var o={r:0,g:0,b:0,a:255};return Array.isArray(n)?n.length>=3&&(o={r:n[0],g:n[1],b:n[2],a:255},n.length>3&&(o.a=Fn(n[3]))):(o=sp(n,{r:0,g:0,b:0,a:1}),o.a=Fn(o.a)),o}function Xf(n){return n.charAt(0)==="r"?Gf(n):Bf(n)}var Zi=class n{constructor(o){if(o instanceof n)return o;let t=typeof o,e;t==="object"?e=op(o):t==="string"&&(e=Df(o)||Hf(o)||Xf(o)),this._rgb=e,this._valid=!!e}get valid(){return this._valid}get rgb(){var o=sp(this._rgb);return o&&(o.a=dn(o.a)),o}set rgb(o){this._rgb=op(o)}rgbString(){return this._valid?Yf(this._rgb):void 0}hexString(){return this._valid?jf(this._rgb):void 0}hslString(){return this._valid?$f(this._rgb):void 0}mix(o,t){if(o){let e=this.rgb,i=o.rgb,a,r=t===a?.5:t,s=2*r-1,d=e.a-i.a,m=((s*d===-1?s:(s+d)/(1+s*d))+1)/2;a=1-m,e.r=255&m*e.r+a*i.r+.5,e.g=255&m*e.g+a*i.g+.5,e.b=255&m*e.b+a*i.b+.5,e.a=r*e.a+(1-r)*i.a,this.rgb=e}return this}interpolate(o,t){return o&&(this._rgb=qf(this._rgb,o._rgb,t)),this}clone(){return new n(this.rgb)}alpha(o){return this._rgb.a=Fn(o),this}clearer(o){let t=this._rgb;return t.a*=1-o,this}greyscale(){let o=this._rgb,t=Qi(o.r*.3+o.g*.59+o.b*.11);return o.r=o.g=o.b=t,this}opaquer(o){let t=this._rgb;return t.a*=1+o,this}negate(){let o=this._rgb;return o.r=255-o.r,o.g=255-o.g,o.b=255-o.b,this}lighten(o){return fa(this._rgb,2,o),this}darken(o){return fa(this._rgb,2,-o),this}saturate(o){return fa(this._rgb,1,o),this}desaturate(o){return fa(this._rgb,1,-o),this}rotate(o){return Nf(this._rgb,o),this}};function en(){}var Cp=(()=>{let n=0;return()=>n++})();function lt(n){return n==null}function It(n){if(Array.isArray&&Array.isArray(n))return!0;let o=Object.prototype.toString.call(n);return o.slice(0,7)==="[object"&&o.slice(-6)==="Array]"}function ct(n){return n!==null&&Object.prototype.toString.call(n)==="[object Object]"}function zt(n){return(typeof n=="number"||n instanceof Number)&&isFinite(+n)}function xe(n,o){return zt(n)?n:o}function tt(n,o){return typeof n>"u"?o:n}var xp=(n,o)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100:+n/o,jr=(n,o)=>typeof n=="string"&&n.endsWith("%")?parseFloat(n)/100*o:+n;function wt(n,o,t){if(n&&typeof n.call=="function")return n.apply(t,o)}function bt(n,o,t,e){let i,a,r;if(It(n))if(a=n.length,e)for(i=a-1;i>=0;i--)o.call(t,n[i],i);else for(i=0;i<a;i++)o.call(t,n[i],i);else if(ct(n))for(r=Object.keys(n),a=r.length,i=0;i<a;i++)o.call(t,n[r[i]],r[i])}function to(n,o){let t,e,i,a;if(!n||!o||n.length!==o.length)return!1;for(t=0,e=n.length;t<e;++t)if(i=n[t],a=o[t],i.datasetIndex!==a.datasetIndex||i.index!==a.index)return!1;return!0}function xa(n){if(It(n))return n.map(xa);if(ct(n)){let o=Object.create(null),t=Object.keys(n),e=t.length,i=0;for(;i<e;++i)o[t[i]]=xa(n[t[i]]);return o}return n}function Mp(n){return["__proto__","prototype","constructor"].indexOf(n)===-1}function Zf(n,o,t,e){if(!Mp(n))return;let i=o[n],a=t[n];ct(i)&&ct(a)?Ti(i,a,e):o[n]=xa(a)}function Ti(n,o,t){let e=It(o)?o:[o],i=e.length;if(!ct(n))return n;t=t||{};let a=t.merger||Zf,r;for(let s=0;s<i;++s){if(r=e[s],!ct(r))continue;let d=Object.keys(r);for(let m=0,h=d.length;m<h;++m)a(d[m],n,r,t)}return n}function Ei(n,o){return Ti(n,o,{merger:Qf})}function Qf(n,o,t){if(!Mp(n))return;let e=o[n],i=t[n];ct(e)&&ct(i)?Ei(e,i):Object.prototype.hasOwnProperty.call(o,n)||(o[n]=xa(i))}var lp={"":n=>n,x:n=>n.x,y:n=>n.y};function Kf(n){let o=n.split("."),t=[],e="";for(let i of o)e+=i,e.endsWith("\\")?e=e.slice(0,-1)+".":(t.push(e),e="");return t}function Jf(n){let o=Kf(n);return t=>{for(let e of o){if(e==="")break;t=t&&t[e]}return t}}function gn(n,o){return(lp[o]||(lp[o]=Jf(o)))(n)}function va(n){return n.charAt(0).toUpperCase()+n.slice(1)}var ji=n=>typeof n<"u",pn=n=>typeof n=="function",Fr=(n,o)=>{if(n.size!==o.size)return!1;for(let t of n)if(!o.has(t))return!1;return!0};function bp(n){return n.type==="mouseup"||n.type==="click"||n.type==="contextmenu"}var ft=Math.PI,Tt=2*ft,t0=Tt+ft,Ma=Number.POSITIVE_INFINITY,e0=ft/180,Rt=ft/2,qn=ft/4,cp=ft*2/3,mn=Math.log10,ze=Math.sign;function Fi(n,o,t){return Math.abs(n-o)<t}function Ar(n){let o=Math.round(n);n=Fi(n,o,n/1e3)?o:n;let t=Math.pow(10,Math.floor(mn(n))),e=n/t;return(e<=1?1:e<=2?2:e<=5?5:10)*t}function Pp(n){let o=[],t=Math.sqrt(n),e;for(e=1;e<t;e++)n%e===0&&(o.push(e),o.push(n/e));return t===(t|0)&&o.push(t),o.sort((i,a)=>i-a).pop(),o}function n0(n){return typeof n=="symbol"||typeof n=="object"&&n!==null&&!(Symbol.toPrimitive in n||"toString"in n||"valueOf"in n)}function Qn(n){return!n0(n)&&!isNaN(parseFloat(n))&&isFinite(n)}function vp(n,o){let t=Math.round(n);return t-o<=n&&t+o>=n}function zr(n,o,t){let e,i,a;for(e=0,i=n.length;e<i;e++)a=n[e][t],isNaN(a)||(o.min=Math.min(o.min,a),o.max=Math.max(o.max,a))}function Ee(n){return n*(ft/180)}function Oa(n){return n*(180/ft)}function Vr(n){if(!zt(n))return;let o=1,t=0;for(;Math.round(n*o)/o!==n;)o*=10,t++;return t}function Lr(n,o){let t=o.x-n.x,e=o.y-n.y,i=Math.sqrt(t*t+e*e),a=Math.atan2(e,t);return a<-.5*ft&&(a+=Tt),{angle:a,distance:i}}function ba(n,o){return Math.sqrt(Math.pow(o.x-n.x,2)+Math.pow(o.y-n.y,2))}function i0(n,o){return(n-o+t0)%Tt-ft}function Kt(n){return(n%Tt+Tt)%Tt}function Ai(n,o,t,e){let i=Kt(n),a=Kt(o),r=Kt(t),s=Kt(a-i),d=Kt(r-i),m=Kt(i-a),h=Kt(i-r);return i===a||i===r||e&&a===r||s>d&&m<h}function Xt(n,o,t){return Math.max(o,Math.min(t,n))}function Op(n){return Xt(n,-32768,32767)}function nn(n,o,t,e=1e-6){return n>=Math.min(o,t)-e&&n<=Math.max(o,t)+e}function ya(n,o,t){t=t||(r=>n[r]<o);let e=n.length-1,i=0,a;for(;e-i>1;)a=i+e>>1,t(a)?i=a:e=a;return{lo:i,hi:e}}var Je=(n,o,t,e)=>ya(n,t,e?i=>{let a=n[i][o];return a<t||a===t&&n[i+1][o]===t}:i=>n[i][o]<t),yp=(n,o,t)=>ya(n,t,e=>n[e][o]>=t);function wp(n,o,t){let e=0,i=n.length;for(;e<i&&n[e]<o;)e++;for(;i>e&&n[i-1]>t;)i--;return e>0||i<n.length?n.slice(e,i):n}var Sp=["push","pop","shift","splice","unshift"];function kp(n,o){if(n._chartjs){n._chartjs.listeners.push(o);return}Object.defineProperty(n,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[o]}}),Sp.forEach(t=>{let e="_onData"+va(t),i=n[t];Object.defineProperty(n,t,{configurable:!0,enumerable:!1,value(...a){let r=i.apply(this,a);return n._chartjs.listeners.forEach(s=>{typeof s[e]=="function"&&s[e](...a)}),r}})})}function Rr(n,o){let t=n._chartjs;if(!t)return;let e=t.listeners,i=e.indexOf(o);i!==-1&&e.splice(i,1),!(e.length>0)&&(Sp.forEach(a=>{delete n[a]}),delete n._chartjs)}function Br(n){let o=new Set(n);return o.size===n.length?n:Array.from(o)}var Nr=function(){return typeof window>"u"?function(n){return n()}:window.requestAnimationFrame}();function $r(n,o){let t=[],e=!1;return function(...i){t=i,e||(e=!0,Nr.call(window,()=>{e=!1,n.apply(o,t)}))}}function Ip(n,o){let t;return function(...e){return o?(clearTimeout(t),t=setTimeout(n,o,e)):n.apply(this,e),o}}var wa=n=>n==="start"?"left":n==="end"?"right":"center",Jt=(n,o,t)=>n==="start"?o:n==="end"?t:(o+t)/2,Tp=(n,o,t,e)=>n===(e?"left":"right")?t:n==="center"?(o+t)/2:o;function Ur(n,o,t){let e=o.length,i=0,a=e;if(n._sorted){let{iScale:r,vScale:s,_parsed:d}=n,m=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null,h=r.axis,{min:u,max:_,minDefined:x,maxDefined:v}=r.getUserBounds();if(x){if(i=Math.min(Je(d,h,u).lo,t?e:Je(o,h,r.getPixelForValue(u)).lo),m){let O=d.slice(0,i+1).reverse().findIndex(w=>!lt(w[s.axis]));i-=Math.max(0,O)}i=Xt(i,0,e-1)}if(v){let O=Math.max(Je(d,r.axis,_,!0).hi+1,t?0:Je(o,h,r.getPixelForValue(_),!0).hi+1);if(m){let w=d.slice(O-1).findIndex(S=>!lt(S[s.axis]));O+=Math.max(0,w)}a=Xt(O,i,e)-i}else a=e-i}return{start:i,count:a}}function Hr(n){let{xScale:o,yScale:t,_scaleRanges:e}=n,i={xmin:o.min,xmax:o.max,ymin:t.min,ymax:t.max};if(!e)return n._scaleRanges=i,!0;let a=e.xmin!==o.min||e.xmax!==o.max||e.ymin!==t.min||e.ymax!==t.max;return Object.assign(e,i),a}var ua=n=>n===0||n===1,dp=(n,o,t)=>-(Math.pow(2,10*(n-=1))*Math.sin((n-o)*Tt/t)),pp=(n,o,t)=>Math.pow(2,-10*n)*Math.sin((n-o)*Tt/t)+1,Ii={linear:n=>n,easeInQuad:n=>n*n,easeOutQuad:n=>-n*(n-2),easeInOutQuad:n=>(n/=.5)<1?.5*n*n:-.5*(--n*(n-2)-1),easeInCubic:n=>n*n*n,easeOutCubic:n=>(n-=1)*n*n+1,easeInOutCubic:n=>(n/=.5)<1?.5*n*n*n:.5*((n-=2)*n*n+2),easeInQuart:n=>n*n*n*n,easeOutQuart:n=>-((n-=1)*n*n*n-1),easeInOutQuart:n=>(n/=.5)<1?.5*n*n*n*n:-.5*((n-=2)*n*n*n-2),easeInQuint:n=>n*n*n*n*n,easeOutQuint:n=>(n-=1)*n*n*n*n+1,easeInOutQuint:n=>(n/=.5)<1?.5*n*n*n*n*n:.5*((n-=2)*n*n*n*n+2),easeInSine:n=>-Math.cos(n*Rt)+1,easeOutSine:n=>Math.sin(n*Rt),easeInOutSine:n=>-.5*(Math.cos(ft*n)-1),easeInExpo:n=>n===0?0:Math.pow(2,10*(n-1)),easeOutExpo:n=>n===1?1:-Math.pow(2,-10*n)+1,easeInOutExpo:n=>ua(n)?n:n<.5?.5*Math.pow(2,10*(n*2-1)):.5*(-Math.pow(2,-10*(n*2-1))+2),easeInCirc:n=>n>=1?n:-(Math.sqrt(1-n*n)-1),easeOutCirc:n=>Math.sqrt(1-(n-=1)*n),easeInOutCirc:n=>(n/=.5)<1?-.5*(Math.sqrt(1-n*n)-1):.5*(Math.sqrt(1-(n-=2)*n)+1),easeInElastic:n=>ua(n)?n:dp(n,.075,.3),easeOutElastic:n=>ua(n)?n:pp(n,.075,.3),easeInOutElastic(n){return ua(n)?n:n<.5?.5*dp(n*2,.1125,.45):.5+.5*pp(n*2-1,.1125,.45)},easeInBack(n){return n*n*((1.70158+1)*n-1.70158)},easeOutBack(n){return(n-=1)*n*((1.70158+1)*n+1.70158)+1},easeInOutBack(n){let o=1.70158;return(n/=.5)<1?.5*(n*n*(((o*=1.525)+1)*n-o)):.5*((n-=2)*n*(((o*=1.525)+1)*n+o)+2)},easeInBounce:n=>1-Ii.easeOutBounce(1-n),easeOutBounce(n){return n<1/2.75?7.5625*n*n:n<2/2.75?7.5625*(n-=1.5/2.75)*n+.75:n<2.5/2.75?7.5625*(n-=2.25/2.75)*n+.9375:7.5625*(n-=2.625/2.75)*n+.984375},easeInOutBounce:n=>n<.5?Ii.easeInBounce(n*2)*.5:Ii.easeOutBounce(n*2-1)*.5+.5};function Wr(n){if(n&&typeof n=="object"){let o=n.toString();return o==="[object CanvasPattern]"||o==="[object CanvasGradient]"}return!1}function Gr(n){return Wr(n)?n:new Zi(n)}function Tr(n){return Wr(n)?n:new Zi(n).saturate(.5).darken(.1).hexString()}var o0=["x","y","borderWidth","radius","tension"],a0=["color","borderColor","backgroundColor"];function r0(n){n.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),n.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:o=>o!=="onProgress"&&o!=="onComplete"&&o!=="fn"}),n.set("animations",{colors:{type:"color",properties:a0},numbers:{type:"number",properties:o0}}),n.describe("animations",{_fallback:"animation"}),n.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:o=>o|0}}}})}function s0(n){n.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var mp=new Map;function l0(n,o){o=o||{};let t=n+JSON.stringify(o),e=mp.get(t);return e||(e=new Intl.NumberFormat(n,o),mp.set(t,e)),e}function zi(n,o,t){return l0(o,t).format(n)}var Dp={values(n){return It(n)?n:""+n},numeric(n,o,t){if(n===0)return"0";let e=this.chart.options.locale,i,a=n;if(t.length>1){let m=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(m<1e-4||m>1e15)&&(i="scientific"),a=c0(n,t)}let r=mn(Math.abs(a)),s=isNaN(r)?1:Math.max(Math.min(-1*Math.floor(r),20),0),d={notation:i,minimumFractionDigits:s,maximumFractionDigits:s};return Object.assign(d,this.options.ticks.format),zi(n,e,d)},logarithmic(n,o,t){if(n===0)return"0";let e=t[o].significand||n/Math.pow(10,Math.floor(mn(n)));return[1,2,3,5,10,15].includes(e)||o>.8*t.length?Dp.numeric.call(this,n,o,t):""}};function c0(n,o){let t=o.length>3?o[2].value-o[1].value:o[1].value-o[0].value;return Math.abs(t)>=1&&n!==Math.floor(n)&&(t=n-Math.floor(n)),t}var eo={formatters:Dp};function d0(n){n.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(o,t)=>t.lineWidth,tickColor:(o,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:eo.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),n.route("scale.ticks","color","","color"),n.route("scale.grid","color","","borderColor"),n.route("scale.border","color","","borderColor"),n.route("scale.title","color","","color"),n.describe("scale",{_fallback:!1,_scriptable:o=>!o.startsWith("before")&&!o.startsWith("after")&&o!=="callback"&&o!=="parser",_indexable:o=>o!=="borderDash"&&o!=="tickBorderDash"&&o!=="dash"}),n.describe("scales",{_fallback:"scale"}),n.describe("scale.ticks",{_scriptable:o=>o!=="backdropPadding"&&o!=="callback",_indexable:o=>o!=="backdropPadding"})}var Vn=Object.create(null),Sa=Object.create(null);function Ki(n,o){if(!o)return n;let t=o.split(".");for(let e=0,i=t.length;e<i;++e){let a=t[e];n=n[a]||(n[a]=Object.create(null))}return n}function Dr(n,o,t){return typeof o=="string"?Ti(Ki(n,o),t):Ti(Ki(n,""),o)}var Er=class{constructor(o,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,i)=>Tr(i.backgroundColor),this.hoverBorderColor=(e,i)=>Tr(i.borderColor),this.hoverColor=(e,i)=>Tr(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(o),this.apply(t)}set(o,t){return Dr(this,o,t)}get(o){return Ki(this,o)}describe(o,t){return Dr(Sa,o,t)}override(o,t){return Dr(Vn,o,t)}route(o,t,e,i){let a=Ki(this,o),r=Ki(this,e),s="_"+t;Object.defineProperties(a,{[s]:{value:a[t],writable:!0},[t]:{enumerable:!0,get(){let d=this[s],m=r[i];return ct(d)?Object.assign({},m,d):tt(d,m)},set(d){this[s]=d}}})}apply(o){o.forEach(t=>t(this))}},Dt=new Er({_scriptable:n=>!n.startsWith("on"),_indexable:n=>n!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[r0,s0,d0]);function p0(n){return!n||lt(n.size)||lt(n.family)?null:(n.style?n.style+" ":"")+(n.weight?n.weight+" ":"")+n.size+"px "+n.family}function Ji(n,o,t,e,i){let a=o[i];return a||(a=o[i]=n.measureText(i).width,t.push(i)),a>e&&(e=a),e}function Ep(n,o,t,e){e=e||{};let i=e.data=e.data||{},a=e.garbageCollect=e.garbageCollect||[];e.font!==o&&(i=e.data={},a=e.garbageCollect=[],e.font=o),n.save(),n.font=o;let r=0,s=t.length,d,m,h,u,_;for(d=0;d<s;d++)if(u=t[d],u!=null&&!It(u))r=Ji(n,i,a,r,u);else if(It(u))for(m=0,h=u.length;m<h;m++)_=u[m],_!=null&&!It(_)&&(r=Ji(n,i,a,r,_));n.restore();let x=a.length/2;if(x>t.length){for(d=0;d<x;d++)delete i[a[d]];a.splice(0,x)}return r}function Ln(n,o,t){let e=n.currentDevicePixelRatio,i=t!==0?Math.max(t/2,.5):0;return Math.round((o-i)*e)/e+i}function Yr(n,o){!o&&!n||(o=o||n.getContext("2d"),o.save(),o.resetTransform(),o.clearRect(0,0,n.width,n.height),o.restore())}function ka(n,o,t,e){qr(n,o,t,e,null)}function qr(n,o,t,e,i){let a,r,s,d,m,h,u,_,x=o.pointStyle,v=o.rotation,O=o.radius,w=(v||0)*e0;if(x&&typeof x=="object"&&(a=x.toString(),a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]")){n.save(),n.translate(t,e),n.rotate(w),n.drawImage(x,-x.width/2,-x.height/2,x.width,x.height),n.restore();return}if(!(isNaN(O)||O<=0)){switch(n.beginPath(),x){default:i?n.ellipse(t,e,i/2,O,0,0,Tt):n.arc(t,e,O,0,Tt),n.closePath();break;case"triangle":h=i?i/2:O,n.moveTo(t+Math.sin(w)*h,e-Math.cos(w)*O),w+=cp,n.lineTo(t+Math.sin(w)*h,e-Math.cos(w)*O),w+=cp,n.lineTo(t+Math.sin(w)*h,e-Math.cos(w)*O),n.closePath();break;case"rectRounded":m=O*.516,d=O-m,r=Math.cos(w+qn)*d,u=Math.cos(w+qn)*(i?i/2-m:d),s=Math.sin(w+qn)*d,_=Math.sin(w+qn)*(i?i/2-m:d),n.arc(t-u,e-s,m,w-ft,w-Rt),n.arc(t+_,e-r,m,w-Rt,w),n.arc(t+u,e+s,m,w,w+Rt),n.arc(t-_,e+r,m,w+Rt,w+ft),n.closePath();break;case"rect":if(!v){d=Math.SQRT1_2*O,h=i?i/2:d,n.rect(t-h,e-d,2*h,2*d);break}w+=qn;case"rectRot":u=Math.cos(w)*(i?i/2:O),r=Math.cos(w)*O,s=Math.sin(w)*O,_=Math.sin(w)*(i?i/2:O),n.moveTo(t-u,e-s),n.lineTo(t+_,e-r),n.lineTo(t+u,e+s),n.lineTo(t-_,e+r),n.closePath();break;case"crossRot":w+=qn;case"cross":u=Math.cos(w)*(i?i/2:O),r=Math.cos(w)*O,s=Math.sin(w)*O,_=Math.sin(w)*(i?i/2:O),n.moveTo(t-u,e-s),n.lineTo(t+u,e+s),n.moveTo(t+_,e-r),n.lineTo(t-_,e+r);break;case"star":u=Math.cos(w)*(i?i/2:O),r=Math.cos(w)*O,s=Math.sin(w)*O,_=Math.sin(w)*(i?i/2:O),n.moveTo(t-u,e-s),n.lineTo(t+u,e+s),n.moveTo(t+_,e-r),n.lineTo(t-_,e+r),w+=qn,u=Math.cos(w)*(i?i/2:O),r=Math.cos(w)*O,s=Math.sin(w)*O,_=Math.sin(w)*(i?i/2:O),n.moveTo(t-u,e-s),n.lineTo(t+u,e+s),n.moveTo(t+_,e-r),n.lineTo(t-_,e+r);break;case"line":r=i?i/2:Math.cos(w)*O,s=Math.sin(w)*O,n.moveTo(t-r,e-s),n.lineTo(t+r,e+s);break;case"dash":n.moveTo(t,e),n.lineTo(t+Math.cos(w)*(i?i/2:O),e+Math.sin(w)*O);break;case!1:n.closePath();break}n.fill(),o.borderWidth>0&&n.stroke()}}function tn(n,o,t){return t=t||.5,!o||n&&n.x>o.left-t&&n.x<o.right+t&&n.y>o.top-t&&n.y<o.bottom+t}function no(n,o){n.save(),n.beginPath(),n.rect(o.left,o.top,o.right-o.left,o.bottom-o.top),n.clip()}function io(n){n.restore()}function jp(n,o,t,e,i){if(!o)return n.lineTo(t.x,t.y);if(i==="middle"){let a=(o.x+t.x)/2;n.lineTo(a,o.y),n.lineTo(a,t.y)}else i==="after"!=!!e?n.lineTo(o.x,t.y):n.lineTo(t.x,o.y);n.lineTo(t.x,t.y)}function Fp(n,o,t,e){if(!o)return n.lineTo(t.x,t.y);n.bezierCurveTo(e?o.cp1x:o.cp2x,e?o.cp1y:o.cp2y,e?t.cp2x:t.cp1x,e?t.cp2y:t.cp1y,t.x,t.y)}function m0(n,o){o.translation&&n.translate(o.translation[0],o.translation[1]),lt(o.rotation)||n.rotate(o.rotation),o.color&&(n.fillStyle=o.color),o.textAlign&&(n.textAlign=o.textAlign),o.textBaseline&&(n.textBaseline=o.textBaseline)}function g0(n,o,t,e,i){if(i.strikethrough||i.underline){let a=n.measureText(e),r=o-a.actualBoundingBoxLeft,s=o+a.actualBoundingBoxRight,d=t-a.actualBoundingBoxAscent,m=t+a.actualBoundingBoxDescent,h=i.strikethrough?(d+m)/2:m;n.strokeStyle=n.fillStyle,n.beginPath(),n.lineWidth=i.decorationWidth||2,n.moveTo(r,h),n.lineTo(s,h),n.stroke()}}function h0(n,o){let t=n.fillStyle;n.fillStyle=o.color,n.fillRect(o.left,o.top,o.width,o.height),n.fillStyle=t}function Rn(n,o,t,e,i,a={}){let r=It(o)?o:[o],s=a.strokeWidth>0&&a.strokeColor!=="",d,m;for(n.save(),n.font=i.string,m0(n,a),d=0;d<r.length;++d)m=r[d],a.backdrop&&h0(n,a.backdrop),s&&(a.strokeColor&&(n.strokeStyle=a.strokeColor),lt(a.strokeWidth)||(n.lineWidth=a.strokeWidth),n.strokeText(m,t,e,a.maxWidth)),n.fillText(m,t,e,a.maxWidth),g0(n,t,e,m,a),e+=Number(i.lineHeight);n.restore()}function Vi(n,o){let{x:t,y:e,w:i,h:a,radius:r}=o;n.arc(t+r.topLeft,e+r.topLeft,r.topLeft,1.5*ft,ft,!0),n.lineTo(t,e+a-r.bottomLeft),n.arc(t+r.bottomLeft,e+a-r.bottomLeft,r.bottomLeft,ft,Rt,!0),n.lineTo(t+i-r.bottomRight,e+a),n.arc(t+i-r.bottomRight,e+a-r.bottomRight,r.bottomRight,Rt,0,!0),n.lineTo(t+i,e+r.topRight),n.arc(t+i-r.topRight,e+r.topRight,r.topRight,0,-Rt,!0),n.lineTo(t+r.topLeft,e)}var f0=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,u0=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function _0(n,o){let t=(""+n).match(f0);if(!t||t[1]==="normal")return o*1.2;switch(n=+t[2],t[3]){case"px":return n;case"%":n/=100;break}return o*n}var C0=n=>+n||0;function Ia(n,o){let t={},e=ct(o),i=e?Object.keys(o):o,a=ct(n)?e?r=>tt(n[r],n[o[r]]):r=>n[r]:()=>n;for(let r of i)t[r]=C0(a(r));return t}function Xr(n){return Ia(n,{top:"y",right:"x",bottom:"y",left:"x"})}function Bn(n){return Ia(n,["topLeft","topRight","bottomLeft","bottomRight"])}function te(n){let o=Xr(n);return o.width=o.left+o.right,o.height=o.top+o.bottom,o}function Ut(n,o){n=n||{},o=o||Dt.font;let t=tt(n.size,o.size);typeof t=="string"&&(t=parseInt(t,10));let e=tt(n.style,o.style);e&&!(""+e).match(u0)&&(console.warn('Invalid font style specified: "'+e+'"'),e=void 0);let i={family:tt(n.family,o.family),lineHeight:_0(tt(n.lineHeight,o.lineHeight),t),size:t,style:e,weight:tt(n.weight,o.weight),string:""};return i.string=p0(i),i}function Li(n,o,t,e){let i=!0,a,r,s;for(a=0,r=n.length;a<r;++a)if(s=n[a],s!==void 0&&(o!==void 0&&typeof s=="function"&&(s=s(o),i=!1),t!==void 0&&It(s)&&(s=s[t%s.length],i=!1),s!==void 0))return e&&!i&&(e.cacheable=!1),s}function Ap(n,o,t){let{min:e,max:i}=n,a=jr(o,(i-e)/2),r=(s,d)=>t&&s===0?0:s+d;return{min:r(e,-Math.abs(a)),max:r(i,a)}}function hn(n,o){return Object.assign(Object.create(n),o)}function Ta(n,o=[""],t,e,i=()=>n[0]){let a=t||n;typeof e>"u"&&(e=Lp("_fallback",n));let r={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:n,_rootScopes:a,_fallback:e,_getTarget:i,override:s=>Ta([s,...n],o,a,e)};return new Proxy(r,{deleteProperty(s,d){return delete s[d],delete s._keys,delete n[0][d],!0},get(s,d){return zp(s,d,()=>w0(d,o,n,s))},getOwnPropertyDescriptor(s,d){return Reflect.getOwnPropertyDescriptor(s._scopes[0],d)},getPrototypeOf(){return Reflect.getPrototypeOf(n[0])},has(s,d){return hp(s).includes(d)},ownKeys(s){return hp(s)},set(s,d,m){let h=s._storage||(s._storage=i());return s[d]=h[d]=m,delete s._keys,!0}})}function Zn(n,o,t,e){let i={_cacheable:!1,_proxy:n,_context:o,_subProxy:t,_stack:new Set,_descriptors:Zr(n,e),setContext:a=>Zn(n,a,t,e),override:a=>Zn(n.override(a),o,t,e)};return new Proxy(i,{deleteProperty(a,r){return delete a[r],delete n[r],!0},get(a,r,s){return zp(a,r,()=>M0(a,r,s))},getOwnPropertyDescriptor(a,r){return a._descriptors.allKeys?Reflect.has(n,r)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(n,r)},getPrototypeOf(){return Reflect.getPrototypeOf(n)},has(a,r){return Reflect.has(n,r)},ownKeys(){return Reflect.ownKeys(n)},set(a,r,s){return n[r]=s,delete a[r],!0}})}function Zr(n,o={scriptable:!0,indexable:!0}){let{_scriptable:t=o.scriptable,_indexable:e=o.indexable,_allKeys:i=o.allKeys}=n;return{allKeys:i,scriptable:t,indexable:e,isScriptable:pn(t)?t:()=>t,isIndexable:pn(e)?e:()=>e}}var x0=(n,o)=>n?n+va(o):o,Qr=(n,o)=>ct(o)&&n!=="adapters"&&(Object.getPrototypeOf(o)===null||o.constructor===Object);function zp(n,o,t){if(Object.prototype.hasOwnProperty.call(n,o)||o==="constructor")return n[o];let e=t();return n[o]=e,e}function M0(n,o,t){let{_proxy:e,_context:i,_subProxy:a,_descriptors:r}=n,s=e[o];return pn(s)&&r.isScriptable(o)&&(s=b0(o,s,n,t)),It(s)&&s.length&&(s=P0(o,s,n,r.isIndexable)),Qr(o,s)&&(s=Zn(s,i,a&&a[o],r)),s}function b0(n,o,t,e){let{_proxy:i,_context:a,_subProxy:r,_stack:s}=t;if(s.has(n))throw new Error("Recursion detected: "+Array.from(s).join("->")+"->"+n);s.add(n);let d=o(a,r||e);return s.delete(n),Qr(n,d)&&(d=Kr(i._scopes,i,n,d)),d}function P0(n,o,t,e){let{_proxy:i,_context:a,_subProxy:r,_descriptors:s}=t;if(typeof a.index<"u"&&e(n))return o[a.index%o.length];if(ct(o[0])){let d=o,m=i._scopes.filter(h=>h!==d);o=[];for(let h of d){let u=Kr(m,i,n,h);o.push(Zn(u,a,r&&r[n],s))}}return o}function Vp(n,o,t){return pn(n)?n(o,t):n}var v0=(n,o)=>n===!0?o:typeof n=="string"?gn(o,n):void 0;function O0(n,o,t,e,i){for(let a of o){let r=v0(t,a);if(r){n.add(r);let s=Vp(r._fallback,t,i);if(typeof s<"u"&&s!==t&&s!==e)return s}else if(r===!1&&typeof e<"u"&&t!==e)return null}return!1}function Kr(n,o,t,e){let i=o._rootScopes,a=Vp(o._fallback,t,e),r=[...n,...i],s=new Set;s.add(e);let d=gp(s,r,t,a||t,e);return d===null||typeof a<"u"&&a!==t&&(d=gp(s,r,a,d,e),d===null)?!1:Ta(Array.from(s),[""],i,a,()=>y0(o,t,e))}function gp(n,o,t,e,i){for(;t;)t=O0(n,o,t,e,i);return t}function y0(n,o,t){let e=n._getTarget();o in e||(e[o]={});let i=e[o];return It(i)&&ct(t)?t:i||{}}function w0(n,o,t,e){let i;for(let a of o)if(i=Lp(x0(a,n),t),typeof i<"u")return Qr(n,i)?Kr(t,e,n,i):i}function Lp(n,o){for(let t of o){if(!t)continue;let e=t[n];if(typeof e<"u")return e}}function hp(n){let o=n._keys;return o||(o=n._keys=S0(n._scopes)),o}function S0(n){let o=new Set;for(let t of n)for(let e of Object.keys(t).filter(i=>!i.startsWith("_")))o.add(e);return Array.from(o)}function Jr(n,o,t,e){let{iScale:i}=n,{key:a="r"}=this._parsing,r=new Array(e),s,d,m,h;for(s=0,d=e;s<d;++s)m=s+t,h=o[m],r[s]={r:i.parse(gn(h,a),m)};return r}var k0=Number.EPSILON||1e-14,Di=(n,o)=>o<n.length&&!n[o].skip&&n[o],Rp=n=>n==="x"?"y":"x";function I0(n,o,t,e){let i=n.skip?o:n,a=o,r=t.skip?o:t,s=ba(a,i),d=ba(r,a),m=s/(s+d),h=d/(s+d);m=isNaN(m)?0:m,h=isNaN(h)?0:h;let u=e*m,_=e*h;return{previous:{x:a.x-u*(r.x-i.x),y:a.y-u*(r.y-i.y)},next:{x:a.x+_*(r.x-i.x),y:a.y+_*(r.y-i.y)}}}function T0(n,o,t){let e=n.length,i,a,r,s,d,m=Di(n,0);for(let h=0;h<e-1;++h)if(d=m,m=Di(n,h+1),!(!d||!m)){if(Fi(o[h],0,k0)){t[h]=t[h+1]=0;continue}i=t[h]/o[h],a=t[h+1]/o[h],s=Math.pow(i,2)+Math.pow(a,2),!(s<=9)&&(r=3/Math.sqrt(s),t[h]=i*r*o[h],t[h+1]=a*r*o[h])}}function D0(n,o,t="x"){let e=Rp(t),i=n.length,a,r,s,d=Di(n,0);for(let m=0;m<i;++m){if(r=s,s=d,d=Di(n,m+1),!s)continue;let h=s[t],u=s[e];r&&(a=(h-r[t])/3,s[`cp1${t}`]=h-a,s[`cp1${e}`]=u-a*o[m]),d&&(a=(d[t]-h)/3,s[`cp2${t}`]=h+a,s[`cp2${e}`]=u+a*o[m])}}function E0(n,o="x"){let t=Rp(o),e=n.length,i=Array(e).fill(0),a=Array(e),r,s,d,m=Di(n,0);for(r=0;r<e;++r)if(s=d,d=m,m=Di(n,r+1),!!d){if(m){let h=m[o]-d[o];i[r]=h!==0?(m[t]-d[t])/h:0}a[r]=s?m?ze(i[r-1])!==ze(i[r])?0:(i[r-1]+i[r])/2:i[r-1]:i[r]}T0(n,i,a),D0(n,a,o)}function _a(n,o,t){return Math.max(Math.min(n,t),o)}function j0(n,o){let t,e,i,a,r,s=tn(n[0],o);for(t=0,e=n.length;t<e;++t)r=a,a=s,s=t<e-1&&tn(n[t+1],o),a&&(i=n[t],r&&(i.cp1x=_a(i.cp1x,o.left,o.right),i.cp1y=_a(i.cp1y,o.top,o.bottom)),s&&(i.cp2x=_a(i.cp2x,o.left,o.right),i.cp2y=_a(i.cp2y,o.top,o.bottom)))}function Bp(n,o,t,e,i){let a,r,s,d;if(o.spanGaps&&(n=n.filter(m=>!m.skip)),o.cubicInterpolationMode==="monotone")E0(n,i);else{let m=e?n[n.length-1]:n[0];for(a=0,r=n.length;a<r;++a)s=n[a],d=I0(m,s,n[Math.min(a+1,r-(e?0:1))%r],o.tension),s.cp1x=d.previous.x,s.cp1y=d.previous.y,s.cp2x=d.next.x,s.cp2y=d.next.y,m=s}o.capBezierPoints&&j0(n,t)}function Da(){return typeof window<"u"&&typeof document<"u"}function Ea(n){let o=n.parentNode;return o&&o.toString()==="[object ShadowRoot]"&&(o=o.host),o}function Pa(n,o,t){let e;return typeof n=="string"?(e=parseInt(n,10),n.indexOf("%")!==-1&&(e=e/100*o.parentNode[t])):e=n,e}var ja=n=>n.ownerDocument.defaultView.getComputedStyle(n,null);function F0(n,o){return ja(n).getPropertyValue(o)}var A0=["top","right","bottom","left"];function Xn(n,o,t){let e={};t=t?"-"+t:"";for(let i=0;i<4;i++){let a=A0[i];e[a]=parseFloat(n[o+"-"+a+t])||0}return e.width=e.left+e.right,e.height=e.top+e.bottom,e}var z0=(n,o,t)=>(n>0||o>0)&&(!t||!t.shadowRoot);function V0(n,o){let t=n.touches,e=t&&t.length?t[0]:n,{offsetX:i,offsetY:a}=e,r=!1,s,d;if(z0(i,a,n.target))s=i,d=a;else{let m=o.getBoundingClientRect();s=e.clientX-m.left,d=e.clientY-m.top,r=!0}return{x:s,y:d,box:r}}function Nn(n,o){if("native"in n)return n;let{canvas:t,currentDevicePixelRatio:e}=o,i=ja(t),a=i.boxSizing==="border-box",r=Xn(i,"padding"),s=Xn(i,"border","width"),{x:d,y:m,box:h}=V0(n,t),u=r.left+(h&&s.left),_=r.top+(h&&s.top),{width:x,height:v}=o;return a&&(x-=r.width+s.width,v-=r.height+s.height),{x:Math.round((d-u)/x*t.width/e),y:Math.round((m-_)/v*t.height/e)}}function L0(n,o,t){let e,i;if(o===void 0||t===void 0){let a=n&&Ea(n);if(!a)o=n.clientWidth,t=n.clientHeight;else{let r=a.getBoundingClientRect(),s=ja(a),d=Xn(s,"border","width"),m=Xn(s,"padding");o=r.width-m.width-d.width,t=r.height-m.height-d.height,e=Pa(s.maxWidth,a,"clientWidth"),i=Pa(s.maxHeight,a,"clientHeight")}}return{width:o,height:t,maxWidth:e||Ma,maxHeight:i||Ma}}var zn=n=>Math.round(n*10)/10;function Np(n,o,t,e){let i=ja(n),a=Xn(i,"margin"),r=Pa(i.maxWidth,n,"clientWidth")||Ma,s=Pa(i.maxHeight,n,"clientHeight")||Ma,d=L0(n,o,t),{width:m,height:h}=d;if(i.boxSizing==="content-box"){let _=Xn(i,"border","width"),x=Xn(i,"padding");m-=x.width+_.width,h-=x.height+_.height}return m=Math.max(0,m-a.width),h=Math.max(0,e?m/e:h-a.height),m=zn(Math.min(m,r,d.maxWidth)),h=zn(Math.min(h,s,d.maxHeight)),m&&!h&&(h=zn(m/2)),(o!==void 0||t!==void 0)&&e&&d.height&&h>d.height&&(h=d.height,m=zn(Math.floor(h*e))),{width:m,height:h}}function ts(n,o,t){let e=o||1,i=zn(n.height*e),a=zn(n.width*e);n.height=zn(n.height),n.width=zn(n.width);let r=n.canvas;return r.style&&(t||!r.style.height&&!r.style.width)&&(r.style.height=`${n.height}px`,r.style.width=`${n.width}px`),n.currentDevicePixelRatio!==e||r.height!==i||r.width!==a?(n.currentDevicePixelRatio=e,r.height=i,r.width=a,n.ctx.setTransform(e,0,0,e,0,0),!0):!1}var $p=function(){let n=!1;try{let o={get passive(){return n=!0,!1}};Da()&&(window.addEventListener("test",null,o),window.removeEventListener("test",null,o))}catch{}return n}();function es(n,o){let t=F0(n,o),e=t&&t.match(/^(\d+)(\.\d+)?px$/);return e?+e[1]:void 0}function An(n,o,t,e){return{x:n.x+t*(o.x-n.x),y:n.y+t*(o.y-n.y)}}function Up(n,o,t,e){return{x:n.x+t*(o.x-n.x),y:e==="middle"?t<.5?n.y:o.y:e==="after"?t<1?n.y:o.y:t>0?o.y:n.y}}function Hp(n,o,t,e){let i={x:n.cp2x,y:n.cp2y},a={x:o.cp1x,y:o.cp1y},r=An(n,i,t),s=An(i,a,t),d=An(a,o,t),m=An(r,s,t),h=An(s,d,t);return An(m,h,t)}var R0=function(n,o){return{x(t){return n+n+o-t},setWidth(t){o=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,e){return t-e},leftForLtr(t,e){return t-e}}},B0=function(){return{x(n){return n},setWidth(n){},textAlign(n){return n},xPlus(n,o){return n+o},leftForLtr(n,o){return n}}};function Kn(n,o,t){return n?R0(o,t):B0()}function ns(n,o){let t,e;(o==="ltr"||o==="rtl")&&(t=n.canvas.style,e=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",o,"important"),n.prevTextDirection=e)}function is(n,o){o!==void 0&&(delete n.prevTextDirection,n.canvas.style.setProperty("direction",o[0],o[1]))}function Wp(n){return n==="angle"?{between:Ai,compare:i0,normalize:Kt}:{between:nn,compare:(o,t)=>o-t,normalize:o=>o}}function fp({start:n,end:o,count:t,loop:e,style:i}){return{start:n%t,end:o%t,loop:e&&(o-n+1)%t===0,style:i}}function N0(n,o,t){let{property:e,start:i,end:a}=t,{between:r,normalize:s}=Wp(e),d=o.length,{start:m,end:h,loop:u}=n,_,x;if(u){for(m+=d,h+=d,_=0,x=d;_<x&&r(s(o[m%d][e]),i,a);++_)m--,h--;m%=d,h%=d}return h<m&&(h+=d),{start:m,end:h,loop:u,style:n.style}}function os(n,o,t){if(!t)return[n];let{property:e,start:i,end:a}=t,r=o.length,{compare:s,between:d,normalize:m}=Wp(e),{start:h,end:u,loop:_,style:x}=N0(n,o,t),v=[],O=!1,w=null,S,I,L,R=()=>d(i,L,S)&&s(i,L)!==0,F=()=>s(a,S)===0||d(a,L,S),B=()=>O||R(),G=()=>!O||F();for(let U=h,X=h;U<=u;++U)I=o[U%r],!I.skip&&(S=m(I[e]),S!==L&&(O=d(S,i,a),w===null&&B()&&(w=s(S,i)===0?U:X),w!==null&&G()&&(v.push(fp({start:w,end:U,loop:_,count:r,style:x})),w=null),X=U,L=S));return w!==null&&v.push(fp({start:w,end:u,loop:_,count:r,style:x})),v}function as(n,o){let t=[],e=n.segments;for(let i=0;i<e.length;i++){let a=os(e[i],n.points,o);a.length&&t.push(...a)}return t}function $0(n,o,t,e){let i=0,a=o-1;if(t&&!e)for(;i<o&&!n[i].skip;)i++;for(;i<o&&n[i].skip;)i++;for(i%=o,t&&(a+=i);a>i&&n[a%o].skip;)a--;return a%=o,{start:i,end:a}}function U0(n,o,t,e){let i=n.length,a=[],r=o,s=n[o],d;for(d=o+1;d<=t;++d){let m=n[d%i];m.skip||m.stop?s.skip||(e=!1,a.push({start:o%i,end:(d-1)%i,loop:e}),o=r=m.stop?d:null):(r=d,s.skip&&(o=d)),s=m}return r!==null&&a.push({start:o%i,end:r%i,loop:e}),a}function Gp(n,o){let t=n.points,e=n.options.spanGaps,i=t.length;if(!i)return[];let a=!!n._loop,{start:r,end:s}=$0(t,i,a,e);if(e===!0)return up(n,[{start:r,end:s,loop:a}],t,o);let d=s<r?s+i:s,m=!!n._fullLoop&&r===0&&s===i-1;return up(n,U0(t,r,d,m),t,o)}function up(n,o,t,e){return!e||!e.setContext||!t?o:H0(n,o,t,e)}function H0(n,o,t,e){let i=n._chart.getContext(),a=_p(n.options),{_datasetIndex:r,options:{spanGaps:s}}=n,d=t.length,m=[],h=a,u=o[0].start,_=u;function x(v,O,w,S){let I=s?-1:1;if(v!==O){for(v+=d;t[v%d].skip;)v-=I;for(;t[O%d].skip;)O+=I;v%d!==O%d&&(m.push({start:v%d,end:O%d,loop:w,style:S}),h=S,u=O%d)}}for(let v of o){u=s?u:v.start;let O=t[u%d],w;for(_=u+1;_<=v.end;_++){let S=t[_%d];w=_p(e.setContext(hn(i,{type:"segment",p0:O,p1:S,p0DataIndex:(_-1)%d,p1DataIndex:_%d,datasetIndex:r}))),W0(w,h)&&x(u,_-1,v.loop,h),O=S,h=w}u<_-1&&x(u,_-1,v.loop,h)}return m}function _p(n){return{backgroundColor:n.backgroundColor,borderCapStyle:n.borderCapStyle,borderDash:n.borderDash,borderDashOffset:n.borderDashOffset,borderJoinStyle:n.borderJoinStyle,borderWidth:n.borderWidth,borderColor:n.borderColor}}function W0(n,o){if(!o)return!1;let t=[],e=function(i,a){return Wr(a)?(t.includes(a)||t.push(a),t.indexOf(a)):a};return JSON.stringify(n,e)!==JSON.stringify(o,e)}function Ca(n,o,t){return n.options.clip?n[t]:o[t]}function G0(n,o){let{xScale:t,yScale:e}=n;return t&&e?{left:Ca(t,o,"left"),right:Ca(t,o,"right"),top:Ca(e,o,"top"),bottom:Ca(e,o,"bottom")}:o}function rs(n,o){let t=o._clip;if(t.disabled)return!1;let e=G0(o,n.chartArea);return{left:t.left===!1?0:e.left-(t.left===!0?0:t.left),right:t.right===!1?n.width:e.right+(t.right===!0?0:t.right),top:t.top===!1?0:e.top-(t.top===!0?0:t.top),bottom:t.bottom===!1?n.height:e.bottom+(t.bottom===!0?0:t.bottom)}}var Cs=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(o,t,e,i){let a=t.listeners[i],r=t.duration;a.forEach(s=>s({chart:o,initial:t.initial,numSteps:r,currentStep:Math.min(e-t.start,r)}))}_refresh(){this._request||(this._running=!0,this._request=Nr.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(o=Date.now()){let t=0;this._charts.forEach((e,i)=>{if(!e.running||!e.items.length)return;let a=e.items,r=a.length-1,s=!1,d;for(;r>=0;--r)d=a[r],d._active?(d._total>e.duration&&(e.duration=d._total),d.tick(o),s=!0):(a[r]=a[a.length-1],a.pop());s&&(i.draw(),this._notify(i,e,o,"progress")),a.length||(e.running=!1,this._notify(i,e,o,"complete"),e.initial=!1),t+=a.length}),this._lastDate=o,t===0&&(this._running=!1)}_getAnims(o){let t=this._charts,e=t.get(o);return e||(e={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(o,e)),e}listen(o,t,e){this._getAnims(o).listeners[t].push(e)}add(o,t){!t||!t.length||this._getAnims(o).items.push(...t)}has(o){return this._getAnims(o).items.length>0}start(o){let t=this._charts.get(o);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((e,i)=>Math.max(e,i._duration),0),this._refresh())}running(o){if(!this._running)return!1;let t=this._charts.get(o);return!(!t||!t.running||!t.items.length)}stop(o){let t=this._charts.get(o);if(!t||!t.items.length)return;let e=t.items,i=e.length-1;for(;i>=0;--i)e[i].cancel();t.items=[],this._notify(o,t,Date.now(),"complete")}remove(o){return this._charts.delete(o)}},fn=new Cs,Yp="transparent",Y0={boolean(n,o,t){return t>.5?o:n},color(n,o,t){let e=Gr(n||Yp),i=e.valid&&Gr(o||Yp);return i&&i.valid?i.mix(e,t).hexString():o},number(n,o,t){return n+(o-n)*t}},xs=class{constructor(o,t,e,i){let a=t[e];i=Li([o.to,i,a,o.from]);let r=Li([o.from,a,i]);this._active=!0,this._fn=o.fn||Y0[o.type||typeof r],this._easing=Ii[o.easing]||Ii.linear,this._start=Math.floor(Date.now()+(o.delay||0)),this._duration=this._total=Math.floor(o.duration),this._loop=!!o.loop,this._target=t,this._prop=e,this._from=r,this._to=i,this._promises=void 0}active(){return this._active}update(o,t,e){if(this._active){this._notify(!1);let i=this._target[this._prop],a=e-this._start,r=this._duration-a;this._start=e,this._duration=Math.floor(Math.max(r,o.duration)),this._total+=a,this._loop=!!o.loop,this._to=Li([o.to,t,i,o.from]),this._from=Li([o.from,i,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(o){let t=o-this._start,e=this._duration,i=this._prop,a=this._from,r=this._loop,s=this._to,d;if(this._active=a!==s&&(r||t<e),!this._active){this._target[i]=s,this._notify(!0);return}if(t<0){this._target[i]=a;return}d=t/e%2,d=r&&d>1?2-d:d,d=this._easing(Math.min(1,Math.max(0,d))),this._target[i]=this._fn(a,s,d)}wait(){let o=this._promises||(this._promises=[]);return new Promise((t,e)=>{o.push({res:t,rej:e})})}_notify(o){let t=o?"res":"rej",e=this._promises||[];for(let i=0;i<e.length;i++)e[i][t]()}},$a=class{constructor(o,t){this._chart=o,this._properties=new Map,this.configure(t)}configure(o){if(!ct(o))return;let t=Object.keys(Dt.animation),e=this._properties;Object.getOwnPropertyNames(o).forEach(i=>{let a=o[i];if(!ct(a))return;let r={};for(let s of t)r[s]=a[s];(It(a.properties)&&a.properties||[i]).forEach(s=>{(s===i||!e.has(s))&&e.set(s,r)})})}_animateOptions(o,t){let e=t.options,i=X0(o,e);if(!i)return[];let a=this._createAnimations(i,e);return e.$shared&&q0(o.options.$animations,e).then(()=>{o.options=e},()=>{}),a}_createAnimations(o,t){let e=this._properties,i=[],a=o.$animations||(o.$animations={}),r=Object.keys(t),s=Date.now(),d;for(d=r.length-1;d>=0;--d){let m=r[d];if(m.charAt(0)==="$")continue;if(m==="options"){i.push(...this._animateOptions(o,t));continue}let h=t[m],u=a[m],_=e.get(m);if(u)if(_&&u.active()){u.update(_,h,s);continue}else u.cancel();if(!_||!_.duration){o[m]=h;continue}a[m]=u=new xs(_,o,m,h),i.push(u)}return i}update(o,t){if(this._properties.size===0){Object.assign(o,t);return}let e=this._createAnimations(o,t);if(e.length)return fn.add(this._chart,e),!0}};function q0(n,o){let t=[],e=Object.keys(o);for(let i=0;i<e.length;i++){let a=n[e[i]];a&&a.active()&&t.push(a.wait())}return Promise.all(t)}function X0(n,o){if(!o)return;let t=n.options;if(!t){n.options=o;return}return t.$shared&&(n.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function qp(n,o){let t=n&&n.options||{},e=t.reverse,i=t.min===void 0?o:0,a=t.max===void 0?o:0;return{start:e?a:i,end:e?i:a}}function Z0(n,o,t){if(t===!1)return!1;let e=qp(n,t),i=qp(o,t);return{top:i.end,right:e.end,bottom:i.start,left:e.start}}function Q0(n){let o,t,e,i;return ct(n)?(o=n.top,t=n.right,e=n.bottom,i=n.left):o=t=e=i=n,{top:o,right:t,bottom:e,left:i,disabled:n===!1}}function Ym(n,o){let t=[],e=n._getSortedDatasetMetas(o),i,a;for(i=0,a=e.length;i<a;++i)t.push(e[i].index);return t}function Xp(n,o,t,e={}){let i=n.keys,a=e.mode==="single",r,s,d,m;if(o===null)return;let h=!1;for(r=0,s=i.length;r<s;++r){if(d=+i[r],d===t){if(h=!0,e.all)continue;break}m=n.values[d],zt(m)&&(a||o===0||ze(o)===ze(m))&&(o+=m)}return!h&&!e.all?0:o}function K0(n,o){let{iScale:t,vScale:e}=o,i=t.axis==="x"?"x":"y",a=e.axis==="x"?"x":"y",r=Object.keys(n),s=new Array(r.length),d,m,h;for(d=0,m=r.length;d<m;++d)h=r[d],s[d]={[i]:h,[a]:n[h]};return s}function ss(n,o){let t=n&&n.options.stacked;return t||t===void 0&&o.stack!==void 0}function J0(n,o,t){return`${n.id}.${o.id}.${t.stack||t.type}`}function tu(n){let{min:o,max:t,minDefined:e,maxDefined:i}=n.getUserBounds();return{min:e?o:Number.NEGATIVE_INFINITY,max:i?t:Number.POSITIVE_INFINITY}}function eu(n,o,t){let e=n[o]||(n[o]={});return e[t]||(e[t]={})}function Zp(n,o,t,e){for(let i of o.getMatchingVisibleMetas(e).reverse()){let a=n[i.index];if(t&&a>0||!t&&a<0)return i.index}return null}function Qp(n,o){let{chart:t,_cachedMeta:e}=n,i=t._stacks||(t._stacks={}),{iScale:a,vScale:r,index:s}=e,d=a.axis,m=r.axis,h=J0(a,r,e),u=o.length,_;for(let x=0;x<u;++x){let v=o[x],{[d]:O,[m]:w}=v,S=v._stacks||(v._stacks={});_=S[m]=eu(i,h,O),_[s]=w,_._top=Zp(_,r,!0,e.type),_._bottom=Zp(_,r,!1,e.type);let I=_._visualValues||(_._visualValues={});I[s]=w}}function ls(n,o){let t=n.scales;return Object.keys(t).filter(e=>t[e].axis===o).shift()}function nu(n,o){return hn(n,{active:!1,dataset:void 0,datasetIndex:o,index:o,mode:"default",type:"dataset"})}function iu(n,o,t){return hn(n,{active:!1,dataIndex:o,parsed:void 0,raw:void 0,element:t,index:o,mode:"default",type:"data"})}function oo(n,o){let t=n.controller.index,e=n.vScale&&n.vScale.axis;if(e){o=o||n._parsed;for(let i of o){let a=i._stacks;if(!a||a[e]===void 0||a[e][t]===void 0)return;delete a[e][t],a[e]._visualValues!==void 0&&a[e]._visualValues[t]!==void 0&&delete a[e]._visualValues[t]}}}var cs=n=>n==="reset"||n==="none",Kp=(n,o)=>o?n:Object.assign({},n),ou=(n,o,t)=>n&&!o.hidden&&o._stacked&&{keys:Ym(t,!0),values:null},Un=(()=>{class n{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=ss(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&oo(this._cachedMeta),this.index=t}linkScales(){let t=this.chart,e=this._cachedMeta,i=this.getDataset(),a=(_,x,v,O)=>_==="x"?x:_==="r"?O:v,r=e.xAxisID=tt(i.xAxisID,ls(t,"x")),s=e.yAxisID=tt(i.yAxisID,ls(t,"y")),d=e.rAxisID=tt(i.rAxisID,ls(t,"r")),m=e.indexAxis,h=e.iAxisID=a(m,r,s,d),u=e.vAxisID=a(m,s,r,d);e.xScale=this.getScaleForId(r),e.yScale=this.getScaleForId(s),e.rScale=this.getScaleForId(d),e.iScale=this.getScaleForId(h),e.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){let e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){let t=this._cachedMeta;this._data&&Rr(this._data,this),t._stacked&&oo(t)}_dataCheck(){let t=this.getDataset(),e=t.data||(t.data=[]),i=this._data;if(ct(e)){let a=this._cachedMeta;this._data=K0(e,a)}else if(i!==e){if(i){Rr(i,this);let a=this._cachedMeta;oo(a),a._parsed=[]}e&&Object.isExtensible(e)&&kp(e,this),this._syncList=[],this._data=e}}addElements(){let t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){let e=this._cachedMeta,i=this.getDataset(),a=!1;this._dataCheck();let r=e._stacked;e._stacked=ss(e.vScale,e),e.stack!==i.stack&&(a=!0,oo(e),e.stack=i.stack),this._resyncElements(t),(a||r!==e._stacked)&&(Qp(this,e._parsed),e._stacked=ss(e.vScale,e))}configure(){let t=this.chart.config,e=t.datasetScopeKeys(this._type),i=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(i,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){let{_cachedMeta:i,_data:a}=this,{iScale:r,_stacked:s}=i,d=r.axis,m=t===0&&e===a.length?!0:i._sorted,h=t>0&&i._parsed[t-1],u,_,x;if(this._parsing===!1)i._parsed=a,i._sorted=!0,x=a;else{It(a[t])?x=this.parseArrayData(i,a,t,e):ct(a[t])?x=this.parseObjectData(i,a,t,e):x=this.parsePrimitiveData(i,a,t,e);let v=()=>_[d]===null||h&&_[d]<h[d];for(u=0;u<e;++u)i._parsed[u+t]=_=x[u],m&&(v()&&(m=!1),h=_);i._sorted=m}s&&Qp(this,x)}parsePrimitiveData(t,e,i,a){let{iScale:r,vScale:s}=t,d=r.axis,m=s.axis,h=r.getLabels(),u=r===s,_=new Array(a),x,v,O;for(x=0,v=a;x<v;++x)O=x+i,_[x]={[d]:u||r.parse(h[O],O),[m]:s.parse(e[O],O)};return _}parseArrayData(t,e,i,a){let{xScale:r,yScale:s}=t,d=new Array(a),m,h,u,_;for(m=0,h=a;m<h;++m)u=m+i,_=e[u],d[m]={x:r.parse(_[0],u),y:s.parse(_[1],u)};return d}parseObjectData(t,e,i,a){let{xScale:r,yScale:s}=t,{xAxisKey:d="x",yAxisKey:m="y"}=this._parsing,h=new Array(a),u,_,x,v;for(u=0,_=a;u<_;++u)x=u+i,v=e[x],h[u]={x:r.parse(gn(v,d),x),y:s.parse(gn(v,m),x)};return h}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,i){let a=this.chart,r=this._cachedMeta,s=e[t.axis],d={keys:Ym(a,!0),values:e._stacks[t.axis]._visualValues};return Xp(d,s,r.index,{mode:i})}updateRangeFromParsed(t,e,i,a){let r=i[e.axis],s=r===null?NaN:r,d=a&&i._stacks[e.axis];a&&d&&(a.values=d,s=Xp(a,r,this._cachedMeta.index)),t.min=Math.min(t.min,s),t.max=Math.max(t.max,s)}getMinMax(t,e){let i=this._cachedMeta,a=i._parsed,r=i._sorted&&t===i.iScale,s=a.length,d=this._getOtherScale(t),m=ou(e,i,this.chart),h={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:_}=tu(d),x,v;function O(){v=a[x];let w=v[d.axis];return!zt(v[t.axis])||u>w||_<w}for(x=0;x<s&&!(!O()&&(this.updateRangeFromParsed(h,t,v,m),r));++x);if(r){for(x=s-1;x>=0;--x)if(!O()){this.updateRangeFromParsed(h,t,v,m);break}}return h}getAllParsedValues(t){let e=this._cachedMeta._parsed,i=[],a,r,s;for(a=0,r=e.length;a<r;++a)s=e[a][t.axis],zt(s)&&i.push(s);return i}getMaxOverflow(){return!1}getLabelAndValue(t){let e=this._cachedMeta,i=e.iScale,a=e.vScale,r=this.getParsed(t);return{label:i?""+i.getLabelForValue(r[i.axis]):"",value:a?""+a.getLabelForValue(r[a.axis]):""}}_update(t){let e=this._cachedMeta;this.update(t||"default"),e._clip=Q0(tt(this.options.clip,Z0(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){let t=this._ctx,e=this.chart,i=this._cachedMeta,a=i.data||[],r=e.chartArea,s=[],d=this._drawStart||0,m=this._drawCount||a.length-d,h=this.options.drawActiveElementsOnTop,u;for(i.dataset&&i.dataset.draw(t,r,d,m),u=d;u<d+m;++u){let _=a[u];_.hidden||(_.active&&h?s.push(_):_.draw(t,r))}for(u=0;u<s.length;++u)s[u].draw(t,r)}getStyle(t,e){let i=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(i):this.resolveDataElementOptions(t||0,i)}getContext(t,e,i){let a=this.getDataset(),r;if(t>=0&&t<this._cachedMeta.data.length){let s=this._cachedMeta.data[t];r=s.$context||(s.$context=iu(this.getContext(),t,s)),r.parsed=this.getParsed(t),r.raw=a.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=nu(this.chart.getContext(),this.index)),r.dataset=a,r.index=r.datasetIndex=this.index;return r.active=!!e,r.mode=i,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",i){let a=e==="active",r=this._cachedDataOpts,s=t+"-"+e,d=r[s],m=this.enableOptionSharing&&ji(i);if(d)return Kp(d,m);let h=this.chart.config,u=h.datasetElementScopeKeys(this._type,t),_=a?[`${t}Hover`,"hover",t,""]:[t,""],x=h.getOptionScopes(this.getDataset(),u),v=Object.keys(Dt.elements[t]),O=()=>this.getContext(i,a,e),w=h.resolveNamedOptions(x,v,O,_);return w.$shared&&(w.$shared=m,r[s]=Object.freeze(Kp(w,m))),w}_resolveAnimations(t,e,i){let a=this.chart,r=this._cachedDataOpts,s=`animation-${e}`,d=r[s];if(d)return d;let m;if(a.options.animation!==!1){let u=this.chart.config,_=u.datasetAnimationScopeKeys(this._type,e),x=u.getOptionScopes(this.getDataset(),_);m=u.createResolver(x,this.getContext(t,i,e))}let h=new $a(a,m&&m.animations);return m&&m._cacheable&&(r[s]=Object.freeze(h)),h}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||cs(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){let i=this.resolveDataElementOptions(t,e),a=this._sharedOptions,r=this.getSharedOptions(i),s=this.includeOptions(e,r)||r!==a;return this.updateSharedOptions(r,e,i),{sharedOptions:r,includeOptions:s}}updateElement(t,e,i,a){cs(a)?Object.assign(t,i):this._resolveAnimations(e,a).update(t,i)}updateSharedOptions(t,e,i){t&&!cs(e)&&this._resolveAnimations(void 0,e).update(t,i)}_setStyle(t,e,i,a){t.active=a;let r=this.getStyle(e,a);this._resolveAnimations(e,i,a).update(t,{options:!a&&this.getSharedOptions(r)||r})}removeHoverStyle(t,e,i){this._setStyle(t,i,"active",!1)}setHoverStyle(t,e,i){this._setStyle(t,i,"active",!0)}_removeDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){let t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){let e=this._data,i=this._cachedMeta.data;for(let[d,m,h]of this._syncList)this[d](m,h);this._syncList=[];let a=i.length,r=e.length,s=Math.min(r,a);s&&this.parse(0,s),r>a?this._insertElements(a,r-a,t):r<a&&this._removeElements(r,a-r)}_insertElements(t,e,i=!0){let a=this._cachedMeta,r=a.data,s=t+e,d,m=h=>{for(h.length+=e,d=h.length-1;d>=s;d--)h[d]=h[d-e]};for(m(r),d=t;d<s;++d)r[d]=new this.dataElementType;this._parsing&&m(a._parsed),this.parse(t,e),i&&this.updateElements(r,t,e,"reset")}updateElements(t,e,i,a){}_removeElements(t,e){let i=this._cachedMeta;if(this._parsing){let a=i._parsed.splice(t,e);i._stacked&&oo(i,a)}i.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{let[e,i,a]=t;this[e](i,a)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){let t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);let i=arguments.length-2;i&&this._sync(["_insertElements",t,i])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return n})();function au(n,o){if(!n._cache.$bar){let t=n.getMatchingVisibleMetas(o),e=[];for(let i=0,a=t.length;i<a;i++)e=e.concat(t[i].controller.getAllParsedValues(n));n._cache.$bar=Br(e.sort((i,a)=>i-a))}return n._cache.$bar}function ru(n){let o=n.iScale,t=au(o,n.type),e=o._length,i,a,r,s,d=()=>{r===32767||r===-32768||(ji(s)&&(e=Math.min(e,Math.abs(r-s)||e)),s=r)};for(i=0,a=t.length;i<a;++i)r=o.getPixelForValue(t[i]),d();for(s=void 0,i=0,a=o.ticks.length;i<a;++i)r=o.getPixelForTick(i),d();return e}function su(n,o,t,e){let i=t.barThickness,a,r;return lt(i)?(a=o.min*t.categoryPercentage,r=t.barPercentage):(a=i*e,r=1),{chunk:a/e,ratio:r,start:o.pixels[n]-a/2}}function lu(n,o,t,e){let i=o.pixels,a=i[n],r=n>0?i[n-1]:null,s=n<i.length-1?i[n+1]:null,d=t.categoryPercentage;r===null&&(r=a-(s===null?o.end-o.start:s-a)),s===null&&(s=a+a-r);let m=a-(a-Math.min(r,s))/2*d;return{chunk:Math.abs(s-r)/2*d/e,ratio:t.barPercentage,start:m}}function cu(n,o,t,e){let i=t.parse(n[0],e),a=t.parse(n[1],e),r=Math.min(i,a),s=Math.max(i,a),d=r,m=s;Math.abs(r)>Math.abs(s)&&(d=s,m=r),o[t.axis]=m,o._custom={barStart:d,barEnd:m,start:i,end:a,min:r,max:s}}function qm(n,o,t,e){return It(n)?cu(n,o,t,e):o[t.axis]=t.parse(n,e),o}function Jp(n,o,t,e){let i=n.iScale,a=n.vScale,r=i.getLabels(),s=i===a,d=[],m,h,u,_;for(m=t,h=t+e;m<h;++m)_=o[m],u={},u[i.axis]=s||i.parse(r[m],m),d.push(qm(_,u,a,m));return d}function ds(n){return n&&n.barStart!==void 0&&n.barEnd!==void 0}function du(n,o,t){return n!==0?ze(n):(o.isHorizontal()?1:-1)*(o.min>=t?1:-1)}function pu(n){let o,t,e,i,a;return n.horizontal?(o=n.base>n.x,t="left",e="right"):(o=n.base<n.y,t="bottom",e="top"),o?(i="end",a="start"):(i="start",a="end"),{start:t,end:e,reverse:o,top:i,bottom:a}}function mu(n,o,t,e){let i=o.borderSkipped,a={};if(!i){n.borderSkipped=a;return}if(i===!0){n.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:r,end:s,reverse:d,top:m,bottom:h}=pu(n);i==="middle"&&t&&(n.enableBorderRadius=!0,(t._top||0)===e?i=m:(t._bottom||0)===e?i=h:(a[tm(h,r,s,d)]=!0,i=m)),a[tm(i,r,s,d)]=!0,n.borderSkipped=a}function tm(n,o,t,e){return e?(n=gu(n,o,t),n=em(n,t,o)):n=em(n,o,t),n}function gu(n,o,t){return n===o?t:n===t?o:n}function em(n,o,t){return n==="start"?o:n==="end"?t:n}function hu(n,{inflateAmount:o},t){n.inflateAmount=o==="auto"?t===1?.33:0:o}var fu=(()=>{class n extends Un{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,e,i,a){return Jp(t,e,i,a)}parseArrayData(t,e,i,a){return Jp(t,e,i,a)}parseObjectData(t,e,i,a){let{iScale:r,vScale:s}=t,{xAxisKey:d="x",yAxisKey:m="y"}=this._parsing,h=r.axis==="x"?d:m,u=s.axis==="x"?d:m,_=[],x,v,O,w;for(x=i,v=i+a;x<v;++x)w=e[x],O={},O[r.axis]=r.parse(gn(w,h),x),_.push(qm(gn(w,u),O,s,x));return _}updateRangeFromParsed(t,e,i,a){super.updateRangeFromParsed(t,e,i,a);let r=i._custom;r&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){let e=this._cachedMeta,{iScale:i,vScale:a}=e,r=this.getParsed(t),s=r._custom,d=ds(s)?"["+s.start+", "+s.end+"]":""+a.getLabelForValue(r[a.axis]);return{label:""+i.getLabelForValue(r[i.axis]),value:d}}initialize(){this.enableOptionSharing=!0,super.initialize();let t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){let e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,i,a){let r=a==="reset",{index:s,_cachedMeta:{vScale:d}}=this,m=d.getBasePixel(),h=d.isHorizontal(),u=this._getRuler(),{sharedOptions:_,includeOptions:x}=this._getSharedOptions(e,a);for(let v=e;v<e+i;v++){let O=this.getParsed(v),w=r||lt(O[d.axis])?{base:m,head:m}:this._calculateBarValuePixels(v),S=this._calculateBarIndexPixels(v,u),I=(O._stacks||{})[d.axis],L={horizontal:h,base:w.base,enableBorderRadius:!I||ds(O._custom)||s===I._top||s===I._bottom,x:h?w.head:S.center,y:h?S.center:w.head,height:h?S.size:Math.abs(w.size),width:h?Math.abs(w.size):S.size};x&&(L.options=_||this.resolveDataElementOptions(v,t[v].active?"active":a));let R=L.options||t[v].options;mu(L,R,I,s),hu(L,R,u.ratio),this.updateElement(t[v],v,L,a)}}_getStacks(t,e){let{iScale:i}=this._cachedMeta,a=i.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),r=i.options.stacked,s=[],d=this._cachedMeta.controller.getParsed(e),m=d&&d[i.axis],h=u=>{let _=u._parsed.find(v=>v[i.axis]===m),x=_&&_[u.vScale.axis];if(lt(x)||isNaN(x))return!0};for(let u of a)if(!(e!==void 0&&h(u))&&((r===!1||s.indexOf(u.stack)===-1||r===void 0&&u.stack===void 0)&&s.push(u.stack),u.index===t))break;return s.length||s.push(void 0),s}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){let t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(i=>t[i].axis===e).shift()}_getAxis(){let t={},e=this.getFirstScaleIdForIndexAxis();for(let i of this.chart.data.datasets)t[tt(this.chart.options.indexAxis==="x"?i.xAxisID:i.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,i){let a=this._getStacks(t,i),r=e!==void 0?a.indexOf(e):-1;return r===-1?a.length-1:r}_getRuler(){let t=this.options,e=this._cachedMeta,i=e.iScale,a=[],r,s;for(r=0,s=e.data.length;r<s;++r)a.push(i.getPixelForValue(this.getParsed(r)[i.axis],r));let d=t.barThickness;return{min:d||ru(e),pixels:a,start:i._startPixel,end:i._endPixel,stackCount:this._getStackCount(),scale:i,grouped:t.grouped,ratio:d?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){let{_cachedMeta:{vScale:e,_stacked:i,index:a},options:{base:r,minBarLength:s}}=this,d=r||0,m=this.getParsed(t),h=m._custom,u=ds(h),_=m[e.axis],x=0,v=i?this.applyStack(e,m,i):_,O,w;v!==_&&(x=v-_,v=_),u&&(_=h.barStart,v=h.barEnd-h.barStart,_!==0&&ze(_)!==ze(h.barEnd)&&(x=0),x+=_);let S=!lt(r)&&!u?r:x,I=e.getPixelForValue(S);if(this.chart.getDataVisibility(t)?O=e.getPixelForValue(x+v):O=I,w=O-I,Math.abs(w)<s){w=du(w,e,d)*s,_===d&&(I-=w/2);let L=e.getPixelForDecimal(0),R=e.getPixelForDecimal(1),F=Math.min(L,R),B=Math.max(L,R);I=Math.max(Math.min(I,B),F),O=I+w,i&&!u&&(m._stacks[e.axis]._visualValues[a]=e.getValueForPixel(O)-e.getValueForPixel(I))}if(I===e.getPixelForValue(d)){let L=ze(w)*e.getLineWidthForValue(d)/2;I+=L,w-=L}return{size:w,base:I,head:O,center:O+w/2}}_calculateBarIndexPixels(t,e){let i=e.scale,a=this.options,r=a.skipNull,s=tt(a.maxBarThickness,1/0),d,m,h=this._getAxisCount();if(e.grouped){let u=r?this._getStackCount(t):e.stackCount,_=a.barThickness==="flex"?lu(t,e,a,u*h):su(t,e,a,u*h),x=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,v=this._getAxis().indexOf(tt(x,this.getFirstScaleIdForIndexAxis())),O=this._getStackIndex(this.index,this._cachedMeta.stack,r?t:void 0)+v;d=_.start+_.chunk*O+_.chunk/2,m=Math.min(s,_.chunk*_.ratio)}else d=i.getPixelForValue(this.getParsed(t)[i.axis],t),m=Math.min(s,e.min*e.ratio);return{base:d-m/2,head:d+m/2,center:d,size:m}}draw(){let t=this._cachedMeta,e=t.vScale,i=t.data,a=i.length,r=0;for(;r<a;++r)this.getParsed(r)[e.axis]!==null&&!i[r].hidden&&i[r].draw(this._ctx)}}return n})(),uu=(()=>{class n extends Un{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,i,a){let r=super.parsePrimitiveData(t,e,i,a);for(let s=0;s<r.length;s++)r[s]._custom=this.resolveDataElementOptions(s+i).radius;return r}parseArrayData(t,e,i,a){let r=super.parseArrayData(t,e,i,a);for(let s=0;s<r.length;s++){let d=e[i+s];r[s]._custom=tt(d[2],this.resolveDataElementOptions(s+i).radius)}return r}parseObjectData(t,e,i,a){let r=super.parseObjectData(t,e,i,a);for(let s=0;s<r.length;s++){let d=e[i+s];r[s]._custom=tt(d&&d.r&&+d.r,this.resolveDataElementOptions(s+i).radius)}return r}getMaxOverflow(){let t=this._cachedMeta.data,e=0;for(let i=t.length-1;i>=0;--i)e=Math.max(e,t[i].size(this.resolveDataElementOptions(i))/2);return e>0&&e}getLabelAndValue(t){let e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:a,yScale:r}=e,s=this.getParsed(t),d=a.getLabelForValue(s.x),m=r.getLabelForValue(s.y),h=s._custom;return{label:i[t]||"",value:"("+d+", "+m+(h?", "+h:"")+")"}}update(t){let e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,i,a){let r=a==="reset",{iScale:s,vScale:d}=this._cachedMeta,{sharedOptions:m,includeOptions:h}=this._getSharedOptions(e,a),u=s.axis,_=d.axis;for(let x=e;x<e+i;x++){let v=t[x],O=!r&&this.getParsed(x),w={},S=w[u]=r?s.getPixelForDecimal(.5):s.getPixelForValue(O[u]),I=w[_]=r?d.getBasePixel():d.getPixelForValue(O[_]);w.skip=isNaN(S)||isNaN(I),h&&(w.options=m||this.resolveDataElementOptions(x,v.active?"active":a),r&&(w.options.radius=0)),this.updateElement(v,x,w,a)}}resolveDataElementOptions(t,e){let i=this.getParsed(t),a=super.resolveDataElementOptions(t,e);a.$shared&&(a=Object.assign({},a,{$shared:!1}));let r=a.radius;return e!=="active"&&(a.radius=0),a.radius+=tt(i&&i._custom,r),a}}return n})();function _u(n,o,t){let e=1,i=1,a=0,r=0;if(o<Tt){let s=n,d=s+o,m=Math.cos(s),h=Math.sin(s),u=Math.cos(d),_=Math.sin(d),x=(L,R,F)=>Ai(L,s,d,!0)?1:Math.max(R,R*t,F,F*t),v=(L,R,F)=>Ai(L,s,d,!0)?-1:Math.min(R,R*t,F,F*t),O=x(0,m,u),w=x(Rt,h,_),S=v(ft,m,u),I=v(ft+Rt,h,_);e=(O-S)/2,i=(w-I)/2,a=-(O+S)/2,r=-(w+I)/2}return{ratioX:e,ratioY:i,offsetX:a,offsetY:r}}var Rs=(()=>{class n extends Un{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let e=t.data,{labels:{pointStyle:i,textAlign:a,color:r,useBorderRadius:s,borderRadius:d}}=t.legend.options;return e.labels.length&&e.datasets.length?e.labels.map((m,h)=>{let _=t.getDatasetMeta(0).controller.getStyle(h);return{text:m,fillStyle:_.backgroundColor,fontColor:r,hidden:!t.getDataVisibility(h),lineDash:_.borderDash,lineDashOffset:_.borderDashOffset,lineJoin:_.borderJoinStyle,lineWidth:_.borderWidth,strokeStyle:_.borderColor,textAlign:a,pointStyle:i,borderRadius:s&&(d||_.borderRadius),index:h}}):[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}}};constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){let i=this.getDataset().data,a=this._cachedMeta;if(this._parsing===!1)a._parsed=i;else{let r=m=>+i[m];if(ct(i[t])){let{key:m="value"}=this._parsing;r=h=>+gn(i[h],m)}let s,d;for(s=t,d=t+e;s<d;++s)a._parsed[s]=r(s)}}_getRotation(){return Ee(this.options.rotation-90)}_getCircumference(){return Ee(this.options.circumference)}_getRotationExtents(){let t=Tt,e=-Tt;for(let i=0;i<this.chart.data.datasets.length;++i)if(this.chart.isDatasetVisible(i)&&this.chart.getDatasetMeta(i).type===this._type){let a=this.chart.getDatasetMeta(i).controller,r=a._getRotation(),s=a._getCircumference();t=Math.min(t,r),e=Math.max(e,r+s)}return{rotation:t,circumference:e-t}}update(t){let e=this.chart,{chartArea:i}=e,a=this._cachedMeta,r=a.data,s=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,d=Math.max((Math.min(i.width,i.height)-s)/2,0),m=Math.min(xp(this.options.cutout,d),1),h=this._getRingWeight(this.index),{circumference:u,rotation:_}=this._getRotationExtents(),{ratioX:x,ratioY:v,offsetX:O,offsetY:w}=_u(_,u,m),S=(i.width-s)/x,I=(i.height-s)/v,L=Math.max(Math.min(S,I)/2,0),R=jr(this.options.radius,L),F=Math.max(R*m,0),B=(R-F)/this._getVisibleDatasetWeightTotal();this.offsetX=O*R,this.offsetY=w*R,a.total=this.calculateTotal(),this.outerRadius=R-B*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-B*h,0),this.updateElements(r,0,r.length,t)}_circumference(t,e){let i=this.options,a=this._cachedMeta,r=this._getCircumference();return e&&i.animation.animateRotate||!this.chart.getDataVisibility(t)||a._parsed[t]===null||a.data[t].hidden?0:this.calculateCircumference(a._parsed[t]*r/Tt)}updateElements(t,e,i,a){let r=a==="reset",s=this.chart,d=s.chartArea,h=s.options.animation,u=(d.left+d.right)/2,_=(d.top+d.bottom)/2,x=r&&h.animateScale,v=x?0:this.innerRadius,O=x?0:this.outerRadius,{sharedOptions:w,includeOptions:S}=this._getSharedOptions(e,a),I=this._getRotation(),L;for(L=0;L<e;++L)I+=this._circumference(L,r);for(L=e;L<e+i;++L){let R=this._circumference(L,r),F=t[L],B={x:u+this.offsetX,y:_+this.offsetY,startAngle:I,endAngle:I+R,circumference:R,outerRadius:O,innerRadius:v};S&&(B.options=w||this.resolveDataElementOptions(L,F.active?"active":a)),I+=R,this.updateElement(F,L,B,a)}}calculateTotal(){let t=this._cachedMeta,e=t.data,i=0,a;for(a=0;a<e.length;a++){let r=t._parsed[a];r!==null&&!isNaN(r)&&this.chart.getDataVisibility(a)&&!e[a].hidden&&(i+=Math.abs(r))}return i}calculateCircumference(t){let e=this._cachedMeta.total;return e>0&&!isNaN(t)?Tt*(Math.abs(t)/e):0}getLabelAndValue(t){let e=this._cachedMeta,i=this.chart,a=i.data.labels||[],r=zi(e._parsed[t],i.options.locale);return{label:a[t]||"",value:r}}getMaxBorderWidth(t){let e=0,i=this.chart,a,r,s,d,m;if(!t){for(a=0,r=i.data.datasets.length;a<r;++a)if(i.isDatasetVisible(a)){s=i.getDatasetMeta(a),t=s.data,d=s.controller;break}}if(!t)return 0;for(a=0,r=t.length;a<r;++a)m=d.resolveDataElementOptions(a),m.borderAlign!=="inner"&&(e=Math.max(e,m.borderWidth||0,m.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let i=0,a=t.length;i<a;++i){let r=this.resolveDataElementOptions(i);e=Math.max(e,r.offset||0,r.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let i=0;i<t;++i)this.chart.isDatasetVisible(i)&&(e+=this._getRingWeight(i));return e}_getRingWeight(t){return Math.max(tt(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return n})(),Cu=(()=>{class n extends Un{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){let e=this._cachedMeta,{dataset:i,data:a=[],_dataset:r}=e,s=this.chart._animationsDisabled,{start:d,count:m}=Ur(e,a,s);this._drawStart=d,this._drawCount=m,Hr(e)&&(d=0,m=a.length),i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!r._decimated,i.points=a;let h=this.resolveDatasetElementOptions(t);this.options.showLine||(h.borderWidth=0),h.segment=this.options.segment,this.updateElement(i,void 0,{animated:!s,options:h},t),this.updateElements(a,d,m,t)}updateElements(t,e,i,a){let r=a==="reset",{iScale:s,vScale:d,_stacked:m,_dataset:h}=this._cachedMeta,{sharedOptions:u,includeOptions:_}=this._getSharedOptions(e,a),x=s.axis,v=d.axis,{spanGaps:O,segment:w}=this.options,S=Qn(O)?O:Number.POSITIVE_INFINITY,I=this.chart._animationsDisabled||r||a==="none",L=e+i,R=t.length,F=e>0&&this.getParsed(e-1);for(let B=0;B<R;++B){let G=t[B],U=I?G:{};if(B<e||B>=L){U.skip=!0;continue}let X=this.getParsed(B),ot=lt(X[v]),it=U[x]=s.getPixelForValue(X[x],B),dt=U[v]=r||ot?d.getBasePixel():d.getPixelForValue(m?this.applyStack(d,X,m):X[v],B);U.skip=isNaN(it)||isNaN(dt)||ot,U.stop=B>0&&Math.abs(X[x]-F[x])>S,w&&(U.parsed=X,U.raw=h.data[B]),_&&(U.options=u||this.resolveDataElementOptions(B,G.active?"active":a)),I||this.updateElement(G,B,U,a),F=X}}getMaxOverflow(){let t=this._cachedMeta,e=t.dataset,i=e.options&&e.options.borderWidth||0,a=t.data||[];if(!a.length)return i;let r=a[0].size(this.resolveDataElementOptions(0)),s=a[a.length-1].size(this.resolveDataElementOptions(a.length-1));return Math.max(i,r,s)/2}draw(){let t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}return n})(),Xm=(()=>{class n extends Un{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){let e=t.data;if(e.labels.length&&e.datasets.length){let{labels:{pointStyle:i,color:a}}=t.legend.options;return e.labels.map((r,s)=>{let m=t.getDatasetMeta(0).controller.getStyle(s);return{text:r,fillStyle:m.backgroundColor,strokeStyle:m.borderColor,fontColor:a,lineWidth:m.borderWidth,pointStyle:i,hidden:!t.getDataVisibility(s),index:s}})}return[]}},onClick(t,e,i){i.chart.toggleDataVisibility(e.index),i.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){let e=this._cachedMeta,i=this.chart,a=i.data.labels||[],r=zi(e._parsed[t].r,i.options.locale);return{label:a[t]||"",value:r}}parseObjectData(t,e,i,a){return Jr.bind(this)(t,e,i,a)}update(t){let e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){let t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((i,a)=>{let r=this.getParsed(a).r;!isNaN(r)&&this.chart.getDataVisibility(a)&&(r<e.min&&(e.min=r),r>e.max&&(e.max=r))}),e}_updateRadius(){let t=this.chart,e=t.chartArea,i=t.options,a=Math.min(e.right-e.left,e.bottom-e.top),r=Math.max(a/2,0),s=Math.max(i.cutoutPercentage?r/100*i.cutoutPercentage:1,0),d=(r-s)/t.getVisibleDatasetCount();this.outerRadius=r-d*this.index,this.innerRadius=this.outerRadius-d}updateElements(t,e,i,a){let r=a==="reset",s=this.chart,m=s.options.animation,h=this._cachedMeta.rScale,u=h.xCenter,_=h.yCenter,x=h.getIndexAngle(0)-.5*ft,v=x,O,w=360/this.countVisibleElements();for(O=0;O<e;++O)v+=this._computeAngle(O,a,w);for(O=e;O<e+i;O++){let S=t[O],I=v,L=v+this._computeAngle(O,a,w),R=s.getDataVisibility(O)?h.getDistanceFromCenterForValue(this.getParsed(O).r):0;v=L,r&&(m.animateScale&&(R=0),m.animateRotate&&(I=L=x));let F={x:u,y:_,innerRadius:0,outerRadius:R,startAngle:I,endAngle:L,options:this.resolveDataElementOptions(O,S.active?"active":a)};this.updateElement(S,O,F,a)}}countVisibleElements(){let t=this._cachedMeta,e=0;return t.data.forEach((i,a)=>{!isNaN(this.getParsed(a).r)&&this.chart.getDataVisibility(a)&&e++}),e}_computeAngle(t,e,i){return this.chart.getDataVisibility(t)?Ee(this.resolveDataElementOptions(t,e).angle||i):0}}return n})(),xu=(()=>{class n extends Rs{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}return n})(),Mu=(()=>{class n extends Un{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){let e=this._cachedMeta.vScale,i=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(i[e.axis])}}parseObjectData(t,e,i,a){return Jr.bind(this)(t,e,i,a)}update(t){let e=this._cachedMeta,i=e.dataset,a=e.data||[],r=e.iScale.getLabels();if(i.points=a,t!=="resize"){let s=this.resolveDatasetElementOptions(t);this.options.showLine||(s.borderWidth=0);let d={_loop:!0,_fullLoop:r.length===a.length,options:s};this.updateElement(i,void 0,d,t)}this.updateElements(a,0,a.length,t)}updateElements(t,e,i,a){let r=this._cachedMeta.rScale,s=a==="reset";for(let d=e;d<e+i;d++){let m=t[d],h=this.resolveDataElementOptions(d,m.active?"active":a),u=r.getPointPositionForValue(d,this.getParsed(d).r),_=s?r.xCenter:u.x,x=s?r.yCenter:u.y,v={x:_,y:x,angle:u.angle,skip:isNaN(_)||isNaN(x),options:h};this.updateElement(m,d,v,a)}}}return n})(),bu=(()=>{class n extends Un{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){let e=this._cachedMeta,i=this.chart.data.labels||[],{xScale:a,yScale:r}=e,s=this.getParsed(t),d=a.getLabelForValue(s.x),m=r.getLabelForValue(s.y);return{label:i[t]||"",value:"("+d+", "+m+")"}}update(t){let e=this._cachedMeta,{data:i=[]}=e,a=this.chart._animationsDisabled,{start:r,count:s}=Ur(e,i,a);if(this._drawStart=r,this._drawCount=s,Hr(e)&&(r=0,s=i.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:d,_dataset:m}=e;d._chart=this.chart,d._datasetIndex=this.index,d._decimated=!!m._decimated,d.points=i;let h=this.resolveDatasetElementOptions(t);h.segment=this.options.segment,this.updateElement(d,void 0,{animated:!a,options:h},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(i,r,s,t)}addElements(){let{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,i,a){let r=a==="reset",{iScale:s,vScale:d,_stacked:m,_dataset:h}=this._cachedMeta,u=this.resolveDataElementOptions(e,a),_=this.getSharedOptions(u),x=this.includeOptions(a,_),v=s.axis,O=d.axis,{spanGaps:w,segment:S}=this.options,I=Qn(w)?w:Number.POSITIVE_INFINITY,L=this.chart._animationsDisabled||r||a==="none",R=e>0&&this.getParsed(e-1);for(let F=e;F<e+i;++F){let B=t[F],G=this.getParsed(F),U=L?B:{},X=lt(G[O]),ot=U[v]=s.getPixelForValue(G[v],F),it=U[O]=r||X?d.getBasePixel():d.getPixelForValue(m?this.applyStack(d,G,m):G[O],F);U.skip=isNaN(ot)||isNaN(it)||X,U.stop=F>0&&Math.abs(G[v]-R[v])>I,S&&(U.parsed=G,U.raw=h.data[F]),x&&(U.options=_||this.resolveDataElementOptions(F,B.active?"active":a)),L||this.updateElement(B,F,U,a),R=G}this.updateSharedOptions(_,a,u)}getMaxOverflow(){let t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let d=0;for(let m=e.length-1;m>=0;--m)d=Math.max(d,e[m].size(this.resolveDataElementOptions(m))/2);return d>0&&d}let i=t.dataset,a=i.options&&i.options.borderWidth||0;if(!e.length)return a;let r=e[0].size(this.resolveDataElementOptions(0)),s=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(a,r,s)/2}}return n})(),Pu=Object.freeze({__proto__:null,BarController:fu,BubbleController:uu,DoughnutController:Rs,LineController:Cu,PieController:xu,PolarAreaController:Xm,RadarController:Mu,ScatterController:bu});function Jn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var Ms=class n{static override(o){Object.assign(n.prototype,o)}options;constructor(o){this.options=o||{}}init(){}formats(){return Jn()}parse(){return Jn()}format(){return Jn()}add(){return Jn()}diff(){return Jn()}startOf(){return Jn()}endOf(){return Jn()}},vu={_date:Ms};function Ou(n,o,t,e){let{controller:i,data:a,_sorted:r}=n,s=i._cachedMeta.iScale,d=n.dataset&&n.dataset.options?n.dataset.options.spanGaps:null;if(s&&o===s.axis&&o!=="r"&&r&&a.length){let m=s._reversePixels?yp:Je;if(e){if(i._sharedOptions){let h=a[0],u=typeof h.getRange=="function"&&h.getRange(o);if(u){let _=m(a,o,t-u),x=m(a,o,t+u);return{lo:_.lo,hi:x.hi}}}}else{let h=m(a,o,t);if(d){let{vScale:u}=i._cachedMeta,{_parsed:_}=n,x=_.slice(0,h.lo+1).reverse().findIndex(O=>!lt(O[u.axis]));h.lo-=Math.max(0,x);let v=_.slice(h.hi).findIndex(O=>!lt(O[u.axis]));h.hi+=Math.max(0,v)}return h}}return{lo:0,hi:a.length-1}}function fo(n,o,t,e,i){let a=n.getSortedVisibleDatasetMetas(),r=t[o];for(let s=0,d=a.length;s<d;++s){let{index:m,data:h}=a[s],{lo:u,hi:_}=Ou(a[s],o,r,i);for(let x=u;x<=_;++x){let v=h[x];v.skip||e(v,m,x)}}}function yu(n){let o=n.indexOf("x")!==-1,t=n.indexOf("y")!==-1;return function(e,i){let a=o?Math.abs(e.x-i.x):0,r=t?Math.abs(e.y-i.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(r,2))}}function ps(n,o,t,e,i){let a=[];return!i&&!n.isPointInArea(o)||fo(n,t,o,function(s,d,m){!i&&!tn(s,n.chartArea,0)||s.inRange(o.x,o.y,e)&&a.push({element:s,datasetIndex:d,index:m})},!0),a}function wu(n,o,t,e){let i=[];function a(r,s,d){let{startAngle:m,endAngle:h}=r.getProps(["startAngle","endAngle"],e),{angle:u}=Lr(r,{x:o.x,y:o.y});Ai(u,m,h)&&i.push({element:r,datasetIndex:s,index:d})}return fo(n,t,o,a),i}function Su(n,o,t,e,i,a){let r=[],s=yu(t),d=Number.POSITIVE_INFINITY;function m(h,u,_){let x=h.inRange(o.x,o.y,i);if(e&&!x)return;let v=h.getCenterPoint(i);if(!(!!a||n.isPointInArea(v))&&!x)return;let w=s(o,v);w<d?(r=[{element:h,datasetIndex:u,index:_}],d=w):w===d&&r.push({element:h,datasetIndex:u,index:_})}return fo(n,t,o,m),r}function ms(n,o,t,e,i,a){return!a&&!n.isPointInArea(o)?[]:t==="r"&&!e?wu(n,o,t,i):Su(n,o,t,e,i,a)}function nm(n,o,t,e,i){let a=[],r=t==="x"?"inXRange":"inYRange",s=!1;return fo(n,t,o,(d,m,h)=>{d[r]&&d[r](o[t],i)&&(a.push({element:d,datasetIndex:m,index:h}),s=s||d.inRange(o.x,o.y,i))}),e&&!s?[]:a}var ku={evaluateInteractionItems:fo,modes:{index(n,o,t,e){let i=Nn(o,n),a=t.axis||"x",r=t.includeInvisible||!1,s=t.intersect?ps(n,i,a,e,r):ms(n,i,a,!1,e,r),d=[];return s.length?(n.getSortedVisibleDatasetMetas().forEach(m=>{let h=s[0].index,u=m.data[h];u&&!u.skip&&d.push({element:u,datasetIndex:m.index,index:h})}),d):[]},dataset(n,o,t,e){let i=Nn(o,n),a=t.axis||"xy",r=t.includeInvisible||!1,s=t.intersect?ps(n,i,a,e,r):ms(n,i,a,!1,e,r);if(s.length>0){let d=s[0].datasetIndex,m=n.getDatasetMeta(d).data;s=[];for(let h=0;h<m.length;++h)s.push({element:m[h],datasetIndex:d,index:h})}return s},point(n,o,t,e){let i=Nn(o,n),a=t.axis||"xy",r=t.includeInvisible||!1;return ps(n,i,a,e,r)},nearest(n,o,t,e){let i=Nn(o,n),a=t.axis||"xy",r=t.includeInvisible||!1;return ms(n,i,a,t.intersect,e,r)},x(n,o,t,e){let i=Nn(o,n);return nm(n,i,"x",t.intersect,e)},y(n,o,t,e){let i=Nn(o,n);return nm(n,i,"y",t.intersect,e)}}},Zm=["left","top","right","bottom"];function ao(n,o){return n.filter(t=>t.pos===o)}function im(n,o){return n.filter(t=>Zm.indexOf(t.pos)===-1&&t.box.axis===o)}function ro(n,o){return n.sort((t,e)=>{let i=o?e:t,a=o?t:e;return i.weight===a.weight?i.index-a.index:i.weight-a.weight})}function Iu(n){let o=[],t,e,i,a,r,s;for(t=0,e=(n||[]).length;t<e;++t)i=n[t],{position:a,options:{stack:r,stackWeight:s=1}}=i,o.push({index:t,box:i,pos:a,horizontal:i.isHorizontal(),weight:i.weight,stack:r&&a+r,stackWeight:s});return o}function Tu(n){let o={};for(let t of n){let{stack:e,pos:i,stackWeight:a}=t;if(!e||!Zm.includes(i))continue;let r=o[e]||(o[e]={count:0,placed:0,weight:0,size:0});r.count++,r.weight+=a}return o}function Du(n,o){let t=Tu(n),{vBoxMaxWidth:e,hBoxMaxHeight:i}=o,a,r,s;for(a=0,r=n.length;a<r;++a){s=n[a];let{fullSize:d}=s.box,m=t[s.stack],h=m&&s.stackWeight/m.weight;s.horizontal?(s.width=h?h*e:d&&o.availableWidth,s.height=i):(s.width=e,s.height=h?h*i:d&&o.availableHeight)}return t}function Eu(n){let o=Iu(n),t=ro(o.filter(m=>m.box.fullSize),!0),e=ro(ao(o,"left"),!0),i=ro(ao(o,"right")),a=ro(ao(o,"top"),!0),r=ro(ao(o,"bottom")),s=im(o,"x"),d=im(o,"y");return{fullSize:t,leftAndTop:e.concat(a),rightAndBottom:i.concat(d).concat(r).concat(s),chartArea:ao(o,"chartArea"),vertical:e.concat(i).concat(d),horizontal:a.concat(r).concat(s)}}function om(n,o,t,e){return Math.max(n[t],o[t])+Math.max(n[e],o[e])}function Qm(n,o){n.top=Math.max(n.top,o.top),n.left=Math.max(n.left,o.left),n.bottom=Math.max(n.bottom,o.bottom),n.right=Math.max(n.right,o.right)}function ju(n,o,t,e){let{pos:i,box:a}=t,r=n.maxPadding;if(!ct(i)){t.size&&(n[i]-=t.size);let u=e[t.stack]||{size:0,count:1};u.size=Math.max(u.size,t.horizontal?a.height:a.width),t.size=u.size/u.count,n[i]+=t.size}a.getPadding&&Qm(r,a.getPadding());let s=Math.max(0,o.outerWidth-om(r,n,"left","right")),d=Math.max(0,o.outerHeight-om(r,n,"top","bottom")),m=s!==n.w,h=d!==n.h;return n.w=s,n.h=d,t.horizontal?{same:m,other:h}:{same:h,other:m}}function Fu(n){let o=n.maxPadding;function t(e){let i=Math.max(o[e]-n[e],0);return n[e]+=i,i}n.y+=t("top"),n.x+=t("left"),t("right"),t("bottom")}function Au(n,o){let t=o.maxPadding;function e(i){let a={left:0,top:0,right:0,bottom:0};return i.forEach(r=>{a[r]=Math.max(o[r],t[r])}),a}return e(n?["left","right"]:["top","bottom"])}function co(n,o,t,e){let i=[],a,r,s,d,m,h;for(a=0,r=n.length,m=0;a<r;++a){s=n[a],d=s.box,d.update(s.width||o.w,s.height||o.h,Au(s.horizontal,o));let{same:u,other:_}=ju(o,t,s,e);m|=u&&i.length,h=h||_,d.fullSize||i.push(s)}return m&&co(i,o,t,e)||h}function Fa(n,o,t,e,i){n.top=t,n.left=o,n.right=o+e,n.bottom=t+i,n.width=e,n.height=i}function am(n,o,t,e){let i=t.padding,{x:a,y:r}=o;for(let s of n){let d=s.box,m=e[s.stack]||{count:1,placed:0,weight:1},h=s.stackWeight/m.weight||1;if(s.horizontal){let u=o.w*h,_=m.size||d.height;ji(m.start)&&(r=m.start),d.fullSize?Fa(d,i.left,r,t.outerWidth-i.right-i.left,_):Fa(d,o.left+m.placed,r,u,_),m.start=r,m.placed+=u,r=d.bottom}else{let u=o.h*h,_=m.size||d.width;ji(m.start)&&(a=m.start),d.fullSize?Fa(d,a,i.top,_,t.outerHeight-i.bottom-i.top):Fa(d,a,o.top+m.placed,_,u),m.start=a,m.placed+=u,a=d.right}}o.x=a,o.y=r}var le={addBox(n,o){n.boxes||(n.boxes=[]),o.fullSize=o.fullSize||!1,o.position=o.position||"top",o.weight=o.weight||0,o._layers=o._layers||function(){return[{z:0,draw(t){o.draw(t)}}]},n.boxes.push(o)},removeBox(n,o){let t=n.boxes?n.boxes.indexOf(o):-1;t!==-1&&n.boxes.splice(t,1)},configure(n,o,t){o.fullSize=t.fullSize,o.position=t.position,o.weight=t.weight},update(n,o,t,e){if(!n)return;let i=te(n.options.layout.padding),a=Math.max(o-i.width,0),r=Math.max(t-i.height,0),s=Eu(n.boxes),d=s.vertical,m=s.horizontal;bt(n.boxes,O=>{typeof O.beforeLayout=="function"&&O.beforeLayout()});let h=d.reduce((O,w)=>w.box.options&&w.box.options.display===!1?O:O+1,0)||1,u=Object.freeze({outerWidth:o,outerHeight:t,padding:i,availableWidth:a,availableHeight:r,vBoxMaxWidth:a/2/h,hBoxMaxHeight:r/2}),_=Object.assign({},i);Qm(_,te(e));let x=Object.assign({maxPadding:_,w:a,h:r,x:i.left,y:i.top},i),v=Du(d.concat(m),u);co(s.fullSize,x,u,v),co(d,x,u,v),co(m,x,u,v)&&co(d,x,u,v),Fu(x),am(s.leftAndTop,x,u,v),x.x+=x.w,x.y+=x.h,am(s.rightAndBottom,x,u,v),n.chartArea={left:x.left,top:x.top,right:x.left+x.w,bottom:x.top+x.h,height:x.h,width:x.w},bt(s.chartArea,O=>{let w=O.box;Object.assign(w,n.chartArea),w.update(x.w,x.h,{left:0,top:0,right:0,bottom:0})})}},Ua=class{acquireContext(o,t){}releaseContext(o){return!1}addEventListener(o,t,e){}removeEventListener(o,t,e){}getDevicePixelRatio(){return 1}getMaximumSize(o,t,e,i){return t=Math.max(0,t||o.width),e=e||o.height,{width:t,height:Math.max(0,i?Math.floor(t/i):e)}}isAttached(o){return!0}updateConfig(o){}},bs=class extends Ua{acquireContext(o){return o&&o.getContext&&o.getContext("2d")||null}updateConfig(o){o.options.animation=!1}},Ba="$chartjs",zu={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},rm=n=>n===null||n==="";function Vu(n,o){let t=n.style,e=n.getAttribute("height"),i=n.getAttribute("width");if(n[Ba]={initial:{height:e,width:i,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",rm(i)){let a=es(n,"width");a!==void 0&&(n.width=a)}if(rm(e))if(n.style.height==="")n.height=n.width/(o||2);else{let a=es(n,"height");a!==void 0&&(n.height=a)}return n}var Km=$p?{passive:!0}:!1;function Lu(n,o,t){n&&n.addEventListener(o,t,Km)}function Ru(n,o,t){n&&n.canvas&&n.canvas.removeEventListener(o,t,Km)}function Bu(n,o){let t=zu[n.type]||n.type,{x:e,y:i}=Nn(n,o);return{type:t,chart:o,native:n,x:e!==void 0?e:null,y:i!==void 0?i:null}}function Ha(n,o){for(let t of n)if(t===o||t.contains(o))return!0}function Nu(n,o,t){let e=n.canvas,i=new MutationObserver(a=>{let r=!1;for(let s of a)r=r||Ha(s.addedNodes,e),r=r&&!Ha(s.removedNodes,e);r&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}function $u(n,o,t){let e=n.canvas,i=new MutationObserver(a=>{let r=!1;for(let s of a)r=r||Ha(s.removedNodes,e),r=r&&!Ha(s.addedNodes,e);r&&t()});return i.observe(document,{childList:!0,subtree:!0}),i}var mo=new Map,sm=0;function Jm(){let n=window.devicePixelRatio;n!==sm&&(sm=n,mo.forEach((o,t)=>{t.currentDevicePixelRatio!==n&&o()}))}function Uu(n,o){mo.size||window.addEventListener("resize",Jm),mo.set(n,o)}function Hu(n){mo.delete(n),mo.size||window.removeEventListener("resize",Jm)}function Wu(n,o,t){let e=n.canvas,i=e&&Ea(e);if(!i)return;let a=$r((s,d)=>{let m=i.clientWidth;t(s,d),m<i.clientWidth&&t()},window),r=new ResizeObserver(s=>{let d=s[0],m=d.contentRect.width,h=d.contentRect.height;m===0&&h===0||a(m,h)});return r.observe(i),Uu(n,a),r}function gs(n,o,t){t&&t.disconnect(),o==="resize"&&Hu(n)}function Gu(n,o,t){let e=n.canvas,i=$r(a=>{n.ctx!==null&&t(Bu(a,n))},n);return Lu(e,o,i),i}var Ps=class extends Ua{acquireContext(o,t){let e=o&&o.getContext&&o.getContext("2d");return e&&e.canvas===o?(Vu(o,t),e):null}releaseContext(o){let t=o.canvas;if(!t[Ba])return!1;let e=t[Ba].initial;["height","width"].forEach(a=>{let r=e[a];lt(r)?t.removeAttribute(a):t.setAttribute(a,r)});let i=e.style||{};return Object.keys(i).forEach(a=>{t.style[a]=i[a]}),t.width=t.width,delete t[Ba],!0}addEventListener(o,t,e){this.removeEventListener(o,t);let i=o.$proxies||(o.$proxies={}),r={attach:Nu,detach:$u,resize:Wu}[t]||Gu;i[t]=r(o,t,e)}removeEventListener(o,t){let e=o.$proxies||(o.$proxies={}),i=e[t];if(!i)return;({attach:gs,detach:gs,resize:gs}[t]||Ru)(o,t,i),e[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(o,t,e,i){return Np(o,t,e,i)}isAttached(o){let t=o&&Ea(o);return!!(t&&t.isConnected)}};function Yu(n){return!Da()||typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas?bs:Ps}var Ve=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(o){let{x:t,y:e}=this.getProps(["x","y"],o);return{x:t,y:e}}hasValue(){return Qn(this.x)&&Qn(this.y)}getProps(o,t){let e=this.$animations;if(!t||!e)return this;let i={};return o.forEach(a=>{i[a]=e[a]&&e[a].active()?e[a]._to:this[a]}),i}};function qu(n,o){let t=n.options.ticks,e=Xu(n),i=Math.min(t.maxTicksLimit||e,e),a=t.major.enabled?Qu(o):[],r=a.length,s=a[0],d=a[r-1],m=[];if(r>i)return Ku(o,m,a,r/i),m;let h=Zu(a,o,i);if(r>0){let u,_,x=r>1?Math.round((d-s)/(r-1)):null;for(Aa(o,m,h,lt(x)?0:s-x,s),u=0,_=r-1;u<_;u++)Aa(o,m,h,a[u],a[u+1]);return Aa(o,m,h,d,lt(x)?o.length:d+x),m}return Aa(o,m,h),m}function Xu(n){let o=n.options.offset,t=n._tickSize(),e=n._length/t+(o?0:1),i=n._maxLength/t;return Math.floor(Math.min(e,i))}function Zu(n,o,t){let e=Ju(n),i=o.length/t;if(!e)return Math.max(i,1);let a=Pp(e);for(let r=0,s=a.length-1;r<s;r++){let d=a[r];if(d>i)return d}return Math.max(i,1)}function Qu(n){let o=[],t,e;for(t=0,e=n.length;t<e;t++)n[t].major&&o.push(t);return o}function Ku(n,o,t,e){let i=0,a=t[0],r;for(e=Math.ceil(e),r=0;r<n.length;r++)r===a&&(o.push(n[r]),i++,a=t[i*e])}function Aa(n,o,t,e,i){let a=tt(e,0),r=Math.min(tt(i,n.length),n.length),s=0,d,m,h;for(t=Math.ceil(t),i&&(d=i-e,t=d/Math.floor(d/t)),h=a;h<0;)s++,h=Math.round(a+s*t);for(m=Math.max(a,0);m<r;m++)m===h&&(o.push(n[m]),s++,h=Math.round(a+s*t))}function Ju(n){let o=n.length,t,e;if(o<2)return!1;for(e=n[0],t=1;t<o;++t)if(n[t]-n[t-1]!==e)return!1;return e}var t_=n=>n==="left"?"right":n==="right"?"left":n,lm=(n,o,t)=>o==="top"||o==="left"?n[o]+t:n[o]-t,cm=(n,o)=>Math.min(o||n,n);function dm(n,o){let t=[],e=n.length/o,i=n.length,a=0;for(;a<i;a+=e)t.push(n[Math.floor(a)]);return t}function e_(n,o,t){let e=n.ticks.length,i=Math.min(o,e-1),a=n._startPixel,r=n._endPixel,s=1e-6,d=n.getPixelForTick(i),m;if(!(t&&(e===1?m=Math.max(d-a,r-d):o===0?m=(n.getPixelForTick(1)-d)/2:m=(d-n.getPixelForTick(i-1))/2,d+=i<o?m:-m,d<a-s||d>r+s)))return d}function n_(n,o){bt(n,t=>{let e=t.gc,i=e.length/2,a;if(i>o){for(a=0;a<i;++a)delete t.data[e[a]];e.splice(0,i)}})}function so(n){return n.drawTicks?n.tickLength:0}function pm(n,o){if(!n.display)return 0;let t=Ut(n.font,o),e=te(n.padding);return(It(n.text)?n.text.length:1)*t.lineHeight+e.height}function i_(n,o){return hn(n,{scale:o,type:"scale"})}function o_(n,o,t){return hn(n,{tick:t,index:o,type:"tick"})}function a_(n,o,t){let e=wa(n);return(t&&o!=="right"||!t&&o==="right")&&(e=t_(e)),e}function r_(n,o,t,e){let{top:i,left:a,bottom:r,right:s,chart:d}=n,{chartArea:m,scales:h}=d,u=0,_,x,v,O=r-i,w=s-a;if(n.isHorizontal()){if(x=Jt(e,a,s),ct(t)){let S=Object.keys(t)[0],I=t[S];v=h[S].getPixelForValue(I)+O-o}else t==="center"?v=(m.bottom+m.top)/2+O-o:v=lm(n,t,o);_=s-a}else{if(ct(t)){let S=Object.keys(t)[0],I=t[S];x=h[S].getPixelForValue(I)-w+o}else t==="center"?x=(m.left+m.right)/2-w+o:x=lm(n,t,o);v=Jt(e,r,i),u=t==="left"?-Rt:Rt}return{titleX:x,titleY:v,maxWidth:_,rotation:u}}var ei=class n extends Ve{constructor(o){super(),this.id=o.id,this.type=o.type,this.options=void 0,this.ctx=o.ctx,this.chart=o.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(o){this.options=o.setContext(this.getContext()),this.axis=o.axis,this._userMin=this.parse(o.min),this._userMax=this.parse(o.max),this._suggestedMin=this.parse(o.suggestedMin),this._suggestedMax=this.parse(o.suggestedMax)}parse(o,t){return o}getUserBounds(){let{_userMin:o,_userMax:t,_suggestedMin:e,_suggestedMax:i}=this;return o=xe(o,Number.POSITIVE_INFINITY),t=xe(t,Number.NEGATIVE_INFINITY),e=xe(e,Number.POSITIVE_INFINITY),i=xe(i,Number.NEGATIVE_INFINITY),{min:xe(o,e),max:xe(t,i),minDefined:zt(o),maxDefined:zt(t)}}getMinMax(o){let{min:t,max:e,minDefined:i,maxDefined:a}=this.getUserBounds(),r;if(i&&a)return{min:t,max:e};let s=this.getMatchingVisibleMetas();for(let d=0,m=s.length;d<m;++d)r=s[d].controller.getMinMax(this,o),i||(t=Math.min(t,r.min)),a||(e=Math.max(e,r.max));return t=a&&t>e?e:t,e=i&&t>e?t:e,{min:xe(t,xe(e,t)),max:xe(e,xe(t,e))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let o=this.chart.data;return this.options.labels||(this.isHorizontal()?o.xLabels:o.yLabels)||o.labels||[]}getLabelItems(o=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(o))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){wt(this.options.beforeUpdate,[this])}update(o,t,e){let{beginAtZero:i,grace:a,ticks:r}=this.options,s=r.sampleSize;this.beforeUpdate(),this.maxWidth=o,this.maxHeight=t,this._margins=e=Object.assign({left:0,right:0,top:0,bottom:0},e),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+e.left+e.right:this.height+e.top+e.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=Ap(this,a,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let d=s<this.ticks.length;this._convertTicksToLabels(d?dm(this.ticks,s):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),r.display&&(r.autoSkip||r.source==="auto")&&(this.ticks=qu(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),d&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let o=this.options.reverse,t,e;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,o=!o),this._startPixel=t,this._endPixel=e,this._reversePixels=o,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){wt(this.options.afterUpdate,[this])}beforeSetDimensions(){wt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){wt(this.options.afterSetDimensions,[this])}_callHooks(o){this.chart.notifyPlugins(o,this.getContext()),wt(this.options[o],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){wt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(o){let t=this.options.ticks,e,i,a;for(e=0,i=o.length;e<i;e++)a=o[e],a.label=wt(t.callback,[a.value,e,o],this)}afterTickToLabelConversion(){wt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){wt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let o=this.options,t=o.ticks,e=cm(this.ticks.length,o.ticks.maxTicksLimit),i=t.minRotation||0,a=t.maxRotation,r=i,s,d,m;if(!this._isVisible()||!t.display||i>=a||e<=1||!this.isHorizontal()){this.labelRotation=i;return}let h=this._getLabelSizes(),u=h.widest.width,_=h.highest.height,x=Xt(this.chart.width-u,0,this.maxWidth);s=o.offset?this.maxWidth/e:x/(e-1),u+6>s&&(s=x/(e-(o.offset?.5:1)),d=this.maxHeight-so(o.grid)-t.padding-pm(o.title,this.chart.options.font),m=Math.sqrt(u*u+_*_),r=Oa(Math.min(Math.asin(Xt((h.highest.height+6)/s,-1,1)),Math.asin(Xt(d/m,-1,1))-Math.asin(Xt(_/m,-1,1)))),r=Math.max(i,Math.min(a,r))),this.labelRotation=r}afterCalculateLabelRotation(){wt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){wt(this.options.beforeFit,[this])}fit(){let o={width:0,height:0},{chart:t,options:{ticks:e,title:i,grid:a}}=this,r=this._isVisible(),s=this.isHorizontal();if(r){let d=pm(i,t.options.font);if(s?(o.width=this.maxWidth,o.height=so(a)+d):(o.height=this.maxHeight,o.width=so(a)+d),e.display&&this.ticks.length){let{first:m,last:h,widest:u,highest:_}=this._getLabelSizes(),x=e.padding*2,v=Ee(this.labelRotation),O=Math.cos(v),w=Math.sin(v);if(s){let S=e.mirror?0:w*u.width+O*_.height;o.height=Math.min(this.maxHeight,o.height+S+x)}else{let S=e.mirror?0:O*u.width+w*_.height;o.width=Math.min(this.maxWidth,o.width+S+x)}this._calculatePadding(m,h,w,O)}}this._handleMargins(),s?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=o.height):(this.width=o.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(o,t,e,i){let{ticks:{align:a,padding:r},position:s}=this.options,d=this.labelRotation!==0,m=s!=="top"&&this.axis==="x";if(this.isHorizontal()){let h=this.getPixelForTick(0)-this.left,u=this.right-this.getPixelForTick(this.ticks.length-1),_=0,x=0;d?m?(_=i*o.width,x=e*t.height):(_=e*o.height,x=i*t.width):a==="start"?x=t.width:a==="end"?_=o.width:a!=="inner"&&(_=o.width/2,x=t.width/2),this.paddingLeft=Math.max((_-h+r)*this.width/(this.width-h),0),this.paddingRight=Math.max((x-u+r)*this.width/(this.width-u),0)}else{let h=t.height/2,u=o.height/2;a==="start"?(h=0,u=o.height):a==="end"&&(h=t.height,u=0),this.paddingTop=h+r,this.paddingBottom=u+r}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){wt(this.options.afterFit,[this])}isHorizontal(){let{axis:o,position:t}=this.options;return t==="top"||t==="bottom"||o==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(o){this.beforeTickToLabelConversion(),this.generateTickLabels(o);let t,e;for(t=0,e=o.length;t<e;t++)lt(o[t].label)&&(o.splice(t,1),e--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let o=this._labelSizes;if(!o){let t=this.options.ticks.sampleSize,e=this.ticks;t<e.length&&(e=dm(e,t)),this._labelSizes=o=this._computeLabelSizes(e,e.length,this.options.ticks.maxTicksLimit)}return o}_computeLabelSizes(o,t,e){let{ctx:i,_longestTextCache:a}=this,r=[],s=[],d=Math.floor(t/cm(t,e)),m=0,h=0,u,_,x,v,O,w,S,I,L,R,F;for(u=0;u<t;u+=d){if(v=o[u].label,O=this._resolveTickFontOptions(u),i.font=w=O.string,S=a[w]=a[w]||{data:{},gc:[]},I=O.lineHeight,L=R=0,!lt(v)&&!It(v))L=Ji(i,S.data,S.gc,L,v),R=I;else if(It(v))for(_=0,x=v.length;_<x;++_)F=v[_],!lt(F)&&!It(F)&&(L=Ji(i,S.data,S.gc,L,F),R+=I);r.push(L),s.push(R),m=Math.max(L,m),h=Math.max(R,h)}n_(a,t);let B=r.indexOf(m),G=s.indexOf(h),U=X=>({width:r[X]||0,height:s[X]||0});return{first:U(0),last:U(t-1),widest:U(B),highest:U(G),widths:r,heights:s}}getLabelForValue(o){return o}getPixelForValue(o,t){return NaN}getValueForPixel(o){}getPixelForTick(o){let t=this.ticks;return o<0||o>t.length-1?null:this.getPixelForValue(t[o].value)}getPixelForDecimal(o){this._reversePixels&&(o=1-o);let t=this._startPixel+o*this._length;return Op(this._alignToPixels?Ln(this.chart,t,0):t)}getDecimalForPixel(o){let t=(o-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:o,max:t}=this;return o<0&&t<0?t:o>0&&t>0?o:0}getContext(o){let t=this.ticks||[];if(o>=0&&o<t.length){let e=t[o];return e.$context||(e.$context=o_(this.getContext(),o,e))}return this.$context||(this.$context=i_(this.chart.getContext(),this))}_tickSize(){let o=this.options.ticks,t=Ee(this.labelRotation),e=Math.abs(Math.cos(t)),i=Math.abs(Math.sin(t)),a=this._getLabelSizes(),r=o.autoSkipPadding||0,s=a?a.widest.width+r:0,d=a?a.highest.height+r:0;return this.isHorizontal()?d*e>s*i?s/e:d/i:d*i<s*e?d/e:s/i}_isVisible(){let o=this.options.display;return o!=="auto"?!!o:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(o){let t=this.axis,e=this.chart,i=this.options,{grid:a,position:r,border:s}=i,d=a.offset,m=this.isHorizontal(),u=this.ticks.length+(d?1:0),_=so(a),x=[],v=s.setContext(this.getContext()),O=v.display?v.width:0,w=O/2,S=function(Et){return Ln(e,Et,O)},I,L,R,F,B,G,U,X,ot,it,dt,Qt;if(r==="top")I=S(this.bottom),G=this.bottom-_,X=I-w,it=S(o.top)+w,Qt=o.bottom;else if(r==="bottom")I=S(this.top),it=o.top,Qt=S(o.bottom)-w,G=I+w,X=this.top+_;else if(r==="left")I=S(this.right),B=this.right-_,U=I-w,ot=S(o.left)+w,dt=o.right;else if(r==="right")I=S(this.left),ot=o.left,dt=S(o.right)-w,B=I+w,U=this.left+_;else if(t==="x"){if(r==="center")I=S((o.top+o.bottom)/2+.5);else if(ct(r)){let Et=Object.keys(r)[0],Bt=r[Et];I=S(this.chart.scales[Et].getPixelForValue(Bt))}it=o.top,Qt=o.bottom,G=I+w,X=G+_}else if(t==="y"){if(r==="center")I=S((o.left+o.right)/2);else if(ct(r)){let Et=Object.keys(r)[0],Bt=r[Et];I=S(this.chart.scales[Et].getPixelForValue(Bt))}B=I-w,U=B-_,ot=o.left,dt=o.right}let Pe=tt(i.ticks.maxTicksLimit,u),Pt=Math.max(1,Math.ceil(u/Pe));for(L=0;L<u;L+=Pt){let Et=this.getContext(L),Bt=a.setContext(Et),je=s.setContext(Et),ee=Bt.lineWidth,ii=Bt.color,Co=je.dash||[],oi=je.dashOffset,Ui=Bt.tickWidth,Hn=Bt.tickColor,Hi=Bt.tickBorderDash||[],Wn=Bt.tickBorderDashOffset;R=e_(this,L,d),R!==void 0&&(F=Ln(e,R,ee),m?B=U=ot=dt=F:G=X=it=Qt=F,x.push({tx1:B,ty1:G,tx2:U,ty2:X,x1:ot,y1:it,x2:dt,y2:Qt,width:ee,color:ii,borderDash:Co,borderDashOffset:oi,tickWidth:Ui,tickColor:Hn,tickBorderDash:Hi,tickBorderDashOffset:Wn}))}return this._ticksLength=u,this._borderValue=I,x}_computeLabelItems(o){let t=this.axis,e=this.options,{position:i,ticks:a}=e,r=this.isHorizontal(),s=this.ticks,{align:d,crossAlign:m,padding:h,mirror:u}=a,_=so(e.grid),x=_+h,v=u?-h:x,O=-Ee(this.labelRotation),w=[],S,I,L,R,F,B,G,U,X,ot,it,dt,Qt="middle";if(i==="top")B=this.bottom-v,G=this._getXAxisLabelAlignment();else if(i==="bottom")B=this.top+v,G=this._getXAxisLabelAlignment();else if(i==="left"){let Pt=this._getYAxisLabelAlignment(_);G=Pt.textAlign,F=Pt.x}else if(i==="right"){let Pt=this._getYAxisLabelAlignment(_);G=Pt.textAlign,F=Pt.x}else if(t==="x"){if(i==="center")B=(o.top+o.bottom)/2+x;else if(ct(i)){let Pt=Object.keys(i)[0],Et=i[Pt];B=this.chart.scales[Pt].getPixelForValue(Et)+x}G=this._getXAxisLabelAlignment()}else if(t==="y"){if(i==="center")F=(o.left+o.right)/2-x;else if(ct(i)){let Pt=Object.keys(i)[0],Et=i[Pt];F=this.chart.scales[Pt].getPixelForValue(Et)}G=this._getYAxisLabelAlignment(_).textAlign}t==="y"&&(d==="start"?Qt="top":d==="end"&&(Qt="bottom"));let Pe=this._getLabelSizes();for(S=0,I=s.length;S<I;++S){L=s[S],R=L.label;let Pt=a.setContext(this.getContext(S));U=this.getPixelForTick(S)+a.labelOffset,X=this._resolveTickFontOptions(S),ot=X.lineHeight,it=It(R)?R.length:1;let Et=it/2,Bt=Pt.color,je=Pt.textStrokeColor,ee=Pt.textStrokeWidth,ii=G;r?(F=U,G==="inner"&&(S===I-1?ii=this.options.reverse?"left":"right":S===0?ii=this.options.reverse?"right":"left":ii="center"),i==="top"?m==="near"||O!==0?dt=-it*ot+ot/2:m==="center"?dt=-Pe.highest.height/2-Et*ot+ot:dt=-Pe.highest.height+ot/2:m==="near"||O!==0?dt=ot/2:m==="center"?dt=Pe.highest.height/2-Et*ot:dt=Pe.highest.height-it*ot,u&&(dt*=-1),O!==0&&!Pt.showLabelBackdrop&&(F+=ot/2*Math.sin(O))):(B=U,dt=(1-it)*ot/2);let Co;if(Pt.showLabelBackdrop){let oi=te(Pt.backdropPadding),Ui=Pe.heights[S],Hn=Pe.widths[S],Hi=dt-oi.top,Wn=0-oi.left;switch(Qt){case"middle":Hi-=Ui/2;break;case"bottom":Hi-=Ui;break}switch(G){case"center":Wn-=Hn/2;break;case"right":Wn-=Hn;break;case"inner":S===I-1?Wn-=Hn:S>0&&(Wn-=Hn/2);break}Co={left:Wn,top:Hi,width:Hn+oi.width,height:Ui+oi.height,color:Pt.backdropColor}}w.push({label:R,font:X,textOffset:dt,options:{rotation:O,color:Bt,strokeColor:je,strokeWidth:ee,textAlign:ii,textBaseline:Qt,translation:[F,B],backdrop:Co}})}return w}_getXAxisLabelAlignment(){let{position:o,ticks:t}=this.options;if(-Ee(this.labelRotation))return o==="top"?"left":"right";let i="center";return t.align==="start"?i="left":t.align==="end"?i="right":t.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(o){let{position:t,ticks:{crossAlign:e,mirror:i,padding:a}}=this.options,r=this._getLabelSizes(),s=o+a,d=r.widest.width,m,h;return t==="left"?i?(h=this.right+a,e==="near"?m="left":e==="center"?(m="center",h+=d/2):(m="right",h+=d)):(h=this.right-s,e==="near"?m="right":e==="center"?(m="center",h-=d/2):(m="left",h=this.left)):t==="right"?i?(h=this.left+a,e==="near"?m="right":e==="center"?(m="center",h-=d/2):(m="left",h-=d)):(h=this.left+s,e==="near"?m="left":e==="center"?(m="center",h+=d/2):(m="right",h=this.right)):m="right",{textAlign:m,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;let o=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:o.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:o.width}}drawBackground(){let{ctx:o,options:{backgroundColor:t},left:e,top:i,width:a,height:r}=this;t&&(o.save(),o.fillStyle=t,o.fillRect(e,i,a,r),o.restore())}getLineWidthForValue(o){let t=this.options.grid;if(!this._isVisible()||!t.display)return 0;let i=this.ticks.findIndex(a=>a.value===o);return i>=0?t.setContext(this.getContext(i)).lineWidth:0}drawGrid(o){let t=this.options.grid,e=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(o)),a,r,s=(d,m,h)=>{!h.width||!h.color||(e.save(),e.lineWidth=h.width,e.strokeStyle=h.color,e.setLineDash(h.borderDash||[]),e.lineDashOffset=h.borderDashOffset,e.beginPath(),e.moveTo(d.x,d.y),e.lineTo(m.x,m.y),e.stroke(),e.restore())};if(t.display)for(a=0,r=i.length;a<r;++a){let d=i[a];t.drawOnChartArea&&s({x:d.x1,y:d.y1},{x:d.x2,y:d.y2},d),t.drawTicks&&s({x:d.tx1,y:d.ty1},{x:d.tx2,y:d.ty2},{color:d.tickColor,width:d.tickWidth,borderDash:d.tickBorderDash,borderDashOffset:d.tickBorderDashOffset})}}drawBorder(){let{chart:o,ctx:t,options:{border:e,grid:i}}=this,a=e.setContext(this.getContext()),r=e.display?a.width:0;if(!r)return;let s=i.setContext(this.getContext(0)).lineWidth,d=this._borderValue,m,h,u,_;this.isHorizontal()?(m=Ln(o,this.left,r)-r/2,h=Ln(o,this.right,s)+s/2,u=_=d):(u=Ln(o,this.top,r)-r/2,_=Ln(o,this.bottom,s)+s/2,m=h=d),t.save(),t.lineWidth=a.width,t.strokeStyle=a.color,t.beginPath(),t.moveTo(m,u),t.lineTo(h,_),t.stroke(),t.restore()}drawLabels(o){if(!this.options.ticks.display)return;let e=this.ctx,i=this._computeLabelArea();i&&no(e,i);let a=this.getLabelItems(o);for(let r of a){let s=r.options,d=r.font,m=r.label,h=r.textOffset;Rn(e,m,0,h,d,s)}i&&io(e)}drawTitle(){let{ctx:o,options:{position:t,title:e,reverse:i}}=this;if(!e.display)return;let a=Ut(e.font),r=te(e.padding),s=e.align,d=a.lineHeight/2;t==="bottom"||t==="center"||ct(t)?(d+=r.bottom,It(e.text)&&(d+=a.lineHeight*(e.text.length-1))):d+=r.top;let{titleX:m,titleY:h,maxWidth:u,rotation:_}=r_(this,d,t,s);Rn(o,e.text,0,0,a,{color:e.color,maxWidth:u,rotation:_,textAlign:a_(s,t,i),textBaseline:"middle",translation:[m,h]})}draw(o){this._isVisible()&&(this.drawBackground(),this.drawGrid(o),this.drawBorder(),this.drawTitle(),this.drawLabels(o))}_layers(){let o=this.options,t=o.ticks&&o.ticks.z||0,e=tt(o.grid&&o.grid.z,-1),i=tt(o.border&&o.border.z,0);return!this._isVisible()||this.draw!==n.prototype.draw?[{z:t,draw:a=>{this.draw(a)}}]:[{z:e,draw:a=>{this.drawBackground(),this.drawGrid(a),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:t,draw:a=>{this.drawLabels(a)}}]}getMatchingVisibleMetas(o){let t=this.chart.getSortedVisibleDatasetMetas(),e=this.axis+"AxisID",i=[],a,r;for(a=0,r=t.length;a<r;++a){let s=t[a];s[e]===this.id&&(!o||s.type===o)&&i.push(s)}return i}_resolveTickFontOptions(o){let t=this.options.ticks.setContext(this.getContext(o));return Ut(t.font)}_maxDigits(){let o=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/o}},Bi=class{constructor(o,t,e){this.type=o,this.scope=t,this.override=e,this.items=Object.create(null)}isForType(o){return Object.prototype.isPrototypeOf.call(this.type.prototype,o.prototype)}register(o){let t=Object.getPrototypeOf(o),e;c_(t)&&(e=this.register(t));let i=this.items,a=o.id,r=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+o);return a in i||(i[a]=o,s_(o,r,e),this.override&&Dt.override(o.id,o.overrides)),r}get(o){return this.items[o]}unregister(o){let t=this.items,e=o.id,i=this.scope;e in t&&delete t[e],i&&e in Dt[i]&&(delete Dt[i][e],this.override&&delete Vn[e])}};function s_(n,o,t){let e=Ti(Object.create(null),[t?Dt.get(t):{},Dt.get(o),n.defaults]);Dt.set(o,e),n.defaultRoutes&&l_(o,n.defaultRoutes),n.descriptors&&Dt.describe(o,n.descriptors)}function l_(n,o){Object.keys(o).forEach(t=>{let e=t.split("."),i=e.pop(),a=[n].concat(e).join("."),r=o[t].split("."),s=r.pop(),d=r.join(".");Dt.route(a,i,d,s)})}function c_(n){return"id"in n&&"defaults"in n}var vs=class{constructor(){this.controllers=new Bi(Un,"datasets",!0),this.elements=new Bi(Ve,"elements"),this.plugins=new Bi(Object,"plugins"),this.scales=new Bi(ei,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...o){this._each("register",o)}remove(...o){this._each("unregister",o)}addControllers(...o){this._each("register",o,this.controllers)}addElements(...o){this._each("register",o,this.elements)}addPlugins(...o){this._each("register",o,this.plugins)}addScales(...o){this._each("register",o,this.scales)}getController(o){return this._get(o,this.controllers,"controller")}getElement(o){return this._get(o,this.elements,"element")}getPlugin(o){return this._get(o,this.plugins,"plugin")}getScale(o){return this._get(o,this.scales,"scale")}removeControllers(...o){this._each("unregister",o,this.controllers)}removeElements(...o){this._each("unregister",o,this.elements)}removePlugins(...o){this._each("unregister",o,this.plugins)}removeScales(...o){this._each("unregister",o,this.scales)}_each(o,t,e){[...t].forEach(i=>{let a=e||this._getRegistryForType(i);e||a.isForType(i)||a===this.plugins&&i.id?this._exec(o,a,i):bt(i,r=>{let s=e||this._getRegistryForType(r);this._exec(o,s,r)})})}_exec(o,t,e){let i=va(o);wt(e["before"+i],[],e),t[o](e),wt(e["after"+i],[],e)}_getRegistryForType(o){for(let t=0;t<this._typedRegistries.length;t++){let e=this._typedRegistries[t];if(e.isForType(o))return e}return this.plugins}_get(o,t,e){let i=t.get(o);if(i===void 0)throw new Error('"'+o+'" is not a registered '+e+".");return i}},an=new vs,Os=class{constructor(){this._init=void 0}notify(o,t,e,i){if(t==="beforeInit"&&(this._init=this._createDescriptors(o,!0),this._notify(this._init,o,"install")),this._init===void 0)return;let a=i?this._descriptors(o).filter(i):this._descriptors(o),r=this._notify(a,o,t,e);return t==="afterDestroy"&&(this._notify(a,o,"stop"),this._notify(this._init,o,"uninstall"),this._init=void 0),r}_notify(o,t,e,i){i=i||{};for(let a of o){let r=a.plugin,s=r[e],d=[t,i,a.options];if(wt(s,d,r)===!1&&i.cancelable)return!1}return!0}invalidate(){lt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(o){if(this._cache)return this._cache;let t=this._cache=this._createDescriptors(o);return this._notifyStateChanges(o),t}_createDescriptors(o,t){let e=o&&o.config,i=tt(e.options&&e.options.plugins,{}),a=d_(e);return i===!1&&!t?[]:m_(o,a,i,t)}_notifyStateChanges(o){let t=this._oldCache||[],e=this._cache,i=(a,r)=>a.filter(s=>!r.some(d=>s.plugin.id===d.plugin.id));this._notify(i(t,e),o,"stop"),this._notify(i(e,t),o,"start")}};function d_(n){let o={},t=[],e=Object.keys(an.plugins.items);for(let a=0;a<e.length;a++)t.push(an.getPlugin(e[a]));let i=n.plugins||[];for(let a=0;a<i.length;a++){let r=i[a];t.indexOf(r)===-1&&(t.push(r),o[r.id]=!0)}return{plugins:t,localIds:o}}function p_(n,o){return!o&&n===!1?null:n===!0?{}:n}function m_(n,{plugins:o,localIds:t},e,i){let a=[],r=n.getContext();for(let s of o){let d=s.id,m=p_(e[d],i);m!==null&&a.push({plugin:s,options:g_(n.config,{plugin:s,local:t[d]},m,r)})}return a}function g_(n,{plugin:o,local:t},e,i){let a=n.pluginScopeKeys(o),r=n.getOptionScopes(e,a);return t&&o.defaults&&r.push(o.defaults),n.createResolver(r,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function ys(n,o){let t=Dt.datasets[n]||{};return((o.datasets||{})[n]||{}).indexAxis||o.indexAxis||t.indexAxis||"x"}function h_(n,o){let t=n;return n==="_index_"?t=o:n==="_value_"&&(t=o==="x"?"y":"x"),t}function f_(n,o){return n===o?"_index_":"_value_"}function mm(n){if(n==="x"||n==="y"||n==="r")return n}function u_(n){if(n==="top"||n==="bottom")return"x";if(n==="left"||n==="right")return"y"}function ws(n,...o){if(mm(n))return n;for(let t of o){let e=t.axis||u_(t.position)||n.length>1&&mm(n[0].toLowerCase());if(e)return e}throw new Error(`Cannot determine type of '${n}' axis. Please provide 'axis' or 'position' option.`)}function gm(n,o,t){if(t[o+"AxisID"]===n)return{axis:o}}function __(n,o){if(o.data&&o.data.datasets){let t=o.data.datasets.filter(e=>e.xAxisID===n||e.yAxisID===n);if(t.length)return gm(n,"x",t[0])||gm(n,"y",t[0])}return{}}function C_(n,o){let t=Vn[n.type]||{scales:{}},e=o.scales||{},i=ys(n.type,o),a=Object.create(null);return Object.keys(e).forEach(r=>{let s=e[r];if(!ct(s))return console.error(`Invalid scale configuration for scale: ${r}`);if(s._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${r}`);let d=ws(r,s,__(r,n),Dt.scales[s.type]),m=f_(d,i),h=t.scales||{};a[r]=Ei(Object.create(null),[{axis:d},s,h[d],h[m]])}),n.data.datasets.forEach(r=>{let s=r.type||n.type,d=r.indexAxis||ys(s,o),h=(Vn[s]||{}).scales||{};Object.keys(h).forEach(u=>{let _=h_(u,d),x=r[_+"AxisID"]||_;a[x]=a[x]||Object.create(null),Ei(a[x],[{axis:_},e[x],h[u]])})}),Object.keys(a).forEach(r=>{let s=a[r];Ei(s,[Dt.scales[s.type],Dt.scale])}),a}function tg(n){let o=n.options||(n.options={});o.plugins=tt(o.plugins,{}),o.scales=C_(n,o)}function eg(n){return n=n||{},n.datasets=n.datasets||[],n.labels=n.labels||[],n}function x_(n){return n=n||{},n.data=eg(n.data),tg(n),n}var hm=new Map,ng=new Set;function za(n,o){let t=hm.get(n);return t||(t=o(),hm.set(n,t),ng.add(t)),t}var lo=(n,o,t)=>{let e=gn(o,t);e!==void 0&&n.add(e)},Ss=class{constructor(o){this._config=x_(o),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(o){this._config.type=o}get data(){return this._config.data}set data(o){this._config.data=eg(o)}get options(){return this._config.options}set options(o){this._config.options=o}get plugins(){return this._config.plugins}update(){let o=this._config;this.clearCache(),tg(o)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(o){return za(o,()=>[[`datasets.${o}`,""]])}datasetAnimationScopeKeys(o,t){return za(`${o}.transition.${t}`,()=>[[`datasets.${o}.transitions.${t}`,`transitions.${t}`],[`datasets.${o}`,""]])}datasetElementScopeKeys(o,t){return za(`${o}-${t}`,()=>[[`datasets.${o}.elements.${t}`,`datasets.${o}`,`elements.${t}`,""]])}pluginScopeKeys(o){let t=o.id,e=this.type;return za(`${e}-plugin-${t}`,()=>[[`plugins.${t}`,...o.additionalOptionScopes||[]]])}_cachedScopes(o,t){let e=this._scopeCache,i=e.get(o);return(!i||t)&&(i=new Map,e.set(o,i)),i}getOptionScopes(o,t,e){let{options:i,type:a}=this,r=this._cachedScopes(o,e),s=r.get(t);if(s)return s;let d=new Set;t.forEach(h=>{o&&(d.add(o),h.forEach(u=>lo(d,o,u))),h.forEach(u=>lo(d,i,u)),h.forEach(u=>lo(d,Vn[a]||{},u)),h.forEach(u=>lo(d,Dt,u)),h.forEach(u=>lo(d,Sa,u))});let m=Array.from(d);return m.length===0&&m.push(Object.create(null)),ng.has(t)&&r.set(t,m),m}chartOptionScopes(){let{options:o,type:t}=this;return[o,Vn[t]||{},Dt.datasets[t]||{},{type:t},Dt,Sa]}resolveNamedOptions(o,t,e,i=[""]){let a={$shared:!0},{resolver:r,subPrefixes:s}=fm(this._resolverCache,o,i),d=r;if(b_(r,t)){a.$shared=!1,e=pn(e)?e():e;let m=this.createResolver(o,e,s);d=Zn(r,e,m)}for(let m of t)a[m]=d[m];return a}createResolver(o,t,e=[""],i){let{resolver:a}=fm(this._resolverCache,o,e);return ct(t)?Zn(a,t,void 0,i):a}};function fm(n,o,t){let e=n.get(o);e||(e=new Map,n.set(o,e));let i=t.join(),a=e.get(i);return a||(a={resolver:Ta(o,t),subPrefixes:t.filter(s=>!s.toLowerCase().includes("hover"))},e.set(i,a)),a}var M_=n=>ct(n)&&Object.getOwnPropertyNames(n).some(o=>pn(n[o]));function b_(n,o){let{isScriptable:t,isIndexable:e}=Zr(n);for(let i of o){let a=t(i),r=e(i),s=(r||a)&&n[i];if(a&&(pn(s)||M_(s))||r&&It(s))return!0}return!1}var P_="4.5.1",v_=["top","bottom","left","right","chartArea"];function um(n,o){return n==="top"||n==="bottom"||v_.indexOf(n)===-1&&o==="x"}function _m(n,o){return function(t,e){return t[n]===e[n]?t[o]-e[o]:t[n]-e[n]}}function Cm(n){let o=n.chart,t=o.options.animation;o.notifyPlugins("afterRender"),wt(t&&t.onComplete,[n],o)}function O_(n){let o=n.chart,t=o.options.animation;wt(t&&t.onProgress,[n],o)}function ig(n){return Da()&&typeof n=="string"?n=document.getElementById(n):n&&n.length&&(n=n[0]),n&&n.canvas&&(n=n.canvas),n}var Na={},xm=n=>{let o=ig(n);return Object.values(Na).filter(t=>t.canvas===o).pop()};function y_(n,o,t){let e=Object.keys(n);for(let i of e){let a=+i;if(a>=o){let r=n[i];delete n[i],(t>0||a>o)&&(n[a+t]=r)}}}function w_(n,o,t,e){return!t||n.type==="mouseout"?null:e?o:n}var ni=(()=>{class n{static defaults=Dt;static instances=Na;static overrides=Vn;static registry=an;static version=P_;static getChart=xm;static register(...t){an.add(...t),Mm()}static unregister(...t){an.remove(...t),Mm()}constructor(t,e){let i=this.config=new Ss(e),a=ig(t),r=xm(a);if(r)throw new Error("Canvas is already in use. Chart with ID '"+r.id+"' must be destroyed before the canvas with ID '"+r.canvas.id+"' can be reused.");let s=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||Yu(a)),this.platform.updateConfig(i);let d=this.platform.acquireContext(a,s.aspectRatio),m=d&&d.canvas,h=m&&m.height,u=m&&m.width;if(this.id=Cp(),this.ctx=d,this.canvas=m,this.width=u,this.height=h,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Os,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Ip(_=>this.update(_),s.resizeDelay||0),this._dataChanges=[],Na[this.id]=this,!d||!m){console.error("Failed to create chart: can't acquire context from the given item");return}fn.listen(this,"complete",Cm),fn.listen(this,"progress",O_),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:t,maintainAspectRatio:e},width:i,height:a,_aspectRatio:r}=this;return lt(t)?e&&r?r:a?i/a:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return an}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ts(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Yr(this.canvas,this.ctx),this}stop(){return fn.stop(this),this}resize(t,e){fn.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){let i=this.options,a=this.canvas,r=i.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(a,t,e,r),d=i.devicePixelRatio||this.platform.getDevicePixelRatio(),m=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,ts(this,d,!0)&&(this.notifyPlugins("resize",{size:s}),wt(i.onResize,[this,s],this),this.attached&&this._doResize(m)&&this.render())}ensureScalesHaveIDs(){let e=this.options.scales||{};bt(e,(i,a)=>{i.id=a})}buildOrUpdateScales(){let t=this.options,e=t.scales,i=this.scales,a=Object.keys(i).reduce((s,d)=>(s[d]=!1,s),{}),r=[];e&&(r=r.concat(Object.keys(e).map(s=>{let d=e[s],m=ws(s,d),h=m==="r",u=m==="x";return{options:d,dposition:h?"chartArea":u?"bottom":"left",dtype:h?"radialLinear":u?"category":"linear"}}))),bt(r,s=>{let d=s.options,m=d.id,h=ws(m,d),u=tt(d.type,s.dtype);(d.position===void 0||um(d.position,h)!==um(s.dposition))&&(d.position=s.dposition),a[m]=!0;let _=null;if(m in i&&i[m].type===u)_=i[m];else{let x=an.getScale(u);_=new x({id:m,type:u,ctx:this.ctx,chart:this}),i[_.id]=_}_.init(d,t)}),bt(a,(s,d)=>{s||delete i[d]}),bt(i,s=>{le.configure(this,s,s.options),le.addBox(this,s)})}_updateMetasets(){let t=this._metasets,e=this.data.datasets.length,i=t.length;if(t.sort((a,r)=>a.index-r.index),i>e){for(let a=e;a<i;++a)this._destroyDatasetMeta(a);t.splice(e,i-e)}this._sortedMetasets=t.slice(0).sort(_m("order","index"))}_removeUnreferencedMetasets(){let{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((i,a)=>{e.filter(r=>r===i._dataset).length===0&&this._destroyDatasetMeta(a)})}buildOrUpdateControllers(){let t=[],e=this.data.datasets,i,a;for(this._removeUnreferencedMetasets(),i=0,a=e.length;i<a;i++){let r=e[i],s=this.getDatasetMeta(i),d=r.type||this.config.type;if(s.type&&s.type!==d&&(this._destroyDatasetMeta(i),s=this.getDatasetMeta(i)),s.type=d,s.indexAxis=r.indexAxis||ys(d,this.options),s.order=r.order||0,s.index=i,s.label=""+r.label,s.visible=this.isDatasetVisible(i),s.controller)s.controller.updateIndex(i),s.controller.linkScales();else{let m=an.getController(d),{datasetElementType:h,dataElementType:u}=Dt.datasets[d];Object.assign(m,{dataElementType:an.getElement(u),datasetElementType:h&&an.getElement(h)}),s.controller=new m(this,i),t.push(s.controller)}}return this._updateMetasets(),t}_resetElements(){bt(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){let e=this.config;e.update();let i=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),a=this._animationsDisabled=!i.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;let r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let h=0,u=this.data.datasets.length;h<u;h++){let{controller:_}=this.getDatasetMeta(h),x=!a&&r.indexOf(_)===-1;_.buildOrUpdateElements(x),s=Math.max(+_.getMaxOverflow(),s)}s=this._minPadding=i.layout.autoPadding?s:0,this._updateLayout(s),a||bt(r,h=>{h.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(_m("z","_idx"));let{_active:d,_lastEvent:m}=this;m?this._eventHandler(m,!0):d.length&&this._updateHoverStyles(d,d,!0),this.render()}_updateScales(){bt(this.scales,t=>{le.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let t=this.options,e=new Set(Object.keys(this._listeners)),i=new Set(t.events);(!Fr(e,i)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(let{method:i,start:a,count:r}of e){let s=i==="_removeElements"?-r:r;y_(t,a,s)}}_getUniformDataChanges(){let t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];let e=this.data.datasets.length,i=r=>new Set(t.filter(s=>s[0]===r).map((s,d)=>d+","+s.splice(1).join(","))),a=i(0);for(let r=1;r<e;r++)if(!Fr(a,i(r)))return;return Array.from(a).map(r=>r.split(",")).map(r=>({method:r[1],start:+r[2],count:+r[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;le.update(this,this.width,this.height,t);let e=this.chartArea,i=e.width<=0||e.height<=0;this._layers=[],bt(this.boxes,a=>{i&&a.position==="chartArea"||(a.configure&&a.configure(),this._layers.push(...a._layers()))},this),this._layers.forEach((a,r)=>{a._idx=r}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,i=this.data.datasets.length;e<i;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,i=this.data.datasets.length;e<i;++e)this._updateDataset(e,pn(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){let i=this.getDatasetMeta(t),a={meta:i,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",a)!==!1&&(i.controller._update(e),a.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",a))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(fn.has(this)?this.attached&&!fn.running(this)&&fn.start(this):(this.draw(),Cm({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){let{width:i,height:a}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(i,a)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){let e=this._sortedMetasets,i=[],a,r;for(a=0,r=e.length;a<r;++a){let s=e[a];(!t||s.visible)&&i.push(s)}return i}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){let e=this.ctx,i={meta:t,index:t.index,cancelable:!0},a=rs(this,t);this.notifyPlugins("beforeDatasetDraw",i)!==!1&&(a&&no(e,a),t.controller.draw(),a&&io(e),i.cancelable=!1,this.notifyPlugins("afterDatasetDraw",i))}isPointInArea(t){return tn(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,i,a){let r=ku.modes[e];return typeof r=="function"?r(this,t,i,a):[]}getDatasetMeta(t){let e=this.data.datasets[t],i=this._metasets,a=i.filter(r=>r&&r._dataset===e).pop();return a||(a={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},i.push(a)),a}getContext(){return this.$context||(this.$context=hn(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){let e=this.data.datasets[t];if(!e)return!1;let i=this.getDatasetMeta(t);return typeof i.hidden=="boolean"?!i.hidden:!e.hidden}setDatasetVisibility(t,e){let i=this.getDatasetMeta(t);i.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,i){let a=i?"show":"hide",r=this.getDatasetMeta(t),s=r.controller._resolveAnimations(void 0,a);ji(e)?(r.data[e].hidden=!i,this.update()):(this.setDatasetVisibility(t,i),s.update(r,{visible:i}),this.update(d=>d.datasetIndex===t?a:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){let e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),fn.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),Yr(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Na[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let t=this._listeners,e=this.platform,i=(r,s)=>{e.addEventListener(this,r,s),t[r]=s},a=(r,s,d)=>{r.offsetX=s,r.offsetY=d,this._eventHandler(r)};bt(this.options.events,r=>i(r,a))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let t=this._responsiveListeners,e=this.platform,i=(m,h)=>{e.addEventListener(this,m,h),t[m]=h},a=(m,h)=>{t[m]&&(e.removeEventListener(this,m,h),delete t[m])},r=(m,h)=>{this.canvas&&this.resize(m,h)},s,d=()=>{a("attach",d),this.attached=!0,this.resize(),i("resize",r),i("detach",s)};s=()=>{this.attached=!1,a("resize",r),this._stop(),this._resize(0,0),i("attach",d)},e.isAttached(this.canvas)?d():s()}unbindEvents(){bt(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},bt(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,i){let a=i?"set":"remove",r,s,d,m;for(e==="dataset"&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+a+"DatasetHoverStyle"]()),d=0,m=t.length;d<m;++d){s=t[d];let h=s&&this.getDatasetMeta(s.datasetIndex).controller;h&&h[a+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){let e=this._active||[],i=t.map(({datasetIndex:r,index:s})=>{let d=this.getDatasetMeta(r);if(!d)throw new Error("No dataset found at index "+r);return{datasetIndex:r,element:d.data[s],index:s}});!to(i,e)&&(this._active=i,this._lastEvent=null,this._updateHoverStyles(i,e))}notifyPlugins(t,e,i){return this._plugins.notify(this,t,e,i)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,i){let a=this.options.hover,r=(m,h)=>m.filter(u=>!h.some(_=>u.datasetIndex===_.datasetIndex&&u.index===_.index)),s=r(e,t),d=i?t:r(t,e);s.length&&this.updateHoverStyle(s,a.mode,!1),d.length&&a.mode&&this.updateHoverStyle(d,a.mode,!0)}_eventHandler(t,e){let i={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},a=s=>(s.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",i,a)===!1)return;let r=this._handleEvent(t,e,i.inChartArea);return i.cancelable=!1,this.notifyPlugins("afterEvent",i,a),(r||i.changed)&&this.render(),this}_handleEvent(t,e,i){let{_active:a=[],options:r}=this,s=e,d=this._getActiveElements(t,a,i,s),m=bp(t),h=w_(t,this._lastEvent,i,m);i&&(this._lastEvent=null,wt(r.onHover,[t,d,this],this),m&&wt(r.onClick,[t,d,this],this));let u=!to(d,a);return(u||e)&&(this._active=d,this._updateHoverStyles(d,a,e)),this._lastEvent=h,u}_getActiveElements(t,e,i,a){if(t.type==="mouseout")return[];if(!i)return e;let r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,a)}}return n})();function Mm(){return bt(ni.instances,n=>n._plugins.invalidate())}function S_(n,o,t){let{startAngle:e,x:i,y:a,outerRadius:r,innerRadius:s,options:d}=o,{borderWidth:m,borderJoinStyle:h}=d,u=Math.min(m/r,Kt(e-t));if(n.beginPath(),n.arc(i,a,r-m/2,e+u/2,t-u/2),s>0){let _=Math.min(m/s,Kt(e-t));n.arc(i,a,s+m/2,t-_/2,e+_/2,!0)}else{let _=Math.min(m/2,r*Kt(e-t));if(h==="round")n.arc(i,a,_,t-ft/2,e+ft/2,!0);else if(h==="bevel"){let x=2*_*_,v=-x*Math.cos(t+ft/2)+i,O=-x*Math.sin(t+ft/2)+a,w=x*Math.cos(e+ft/2)+i,S=x*Math.sin(e+ft/2)+a;n.lineTo(v,O),n.lineTo(w,S)}}n.closePath(),n.moveTo(0,0),n.rect(0,0,n.canvas.width,n.canvas.height),n.clip("evenodd")}function k_(n,o,t){let{startAngle:e,pixelMargin:i,x:a,y:r,outerRadius:s,innerRadius:d}=o,m=i/s;n.beginPath(),n.arc(a,r,s,e-m,t+m),d>i?(m=i/d,n.arc(a,r,d,t+m,e-m,!0)):n.arc(a,r,i,t+Rt,e-Rt),n.closePath(),n.clip()}function I_(n){return Ia(n,["outerStart","outerEnd","innerStart","innerEnd"])}function T_(n,o,t,e){let i=I_(n.options.borderRadius),a=(t-o)/2,r=Math.min(a,e*o/2),s=d=>{let m=(t-Math.min(a,d))*e/2;return Xt(d,0,Math.min(a,m))};return{outerStart:s(i.outerStart),outerEnd:s(i.outerEnd),innerStart:Xt(i.innerStart,0,r),innerEnd:Xt(i.innerEnd,0,r)}}function Ri(n,o,t,e){return{x:t+n*Math.cos(o),y:e+n*Math.sin(o)}}function Wa(n,o,t,e,i,a){let{x:r,y:s,startAngle:d,pixelMargin:m,innerRadius:h}=o,u=Math.max(o.outerRadius+e+t-m,0),_=h>0?h+e+t+m:0,x=0,v=i-d;if(e){let Pt=h>0?h-e:0,Et=u>0?u-e:0,Bt=(Pt+Et)/2,je=Bt!==0?v*Bt/(Bt+e):v;x=(v-je)/2}let O=Math.max(.001,v*u-t/ft)/u,w=(v-O)/2,S=d+w+x,I=i-w-x,{outerStart:L,outerEnd:R,innerStart:F,innerEnd:B}=T_(o,_,u,I-S),G=u-L,U=u-R,X=S+L/G,ot=I-R/U,it=_+F,dt=_+B,Qt=S+F/it,Pe=I-B/dt;if(n.beginPath(),a){let Pt=(X+ot)/2;if(n.arc(r,s,u,X,Pt),n.arc(r,s,u,Pt,ot),R>0){let ee=Ri(U,ot,r,s);n.arc(ee.x,ee.y,R,ot,I+Rt)}let Et=Ri(dt,I,r,s);if(n.lineTo(Et.x,Et.y),B>0){let ee=Ri(dt,Pe,r,s);n.arc(ee.x,ee.y,B,I+Rt,Pe+Math.PI)}let Bt=(I-B/_+(S+F/_))/2;if(n.arc(r,s,_,I-B/_,Bt,!0),n.arc(r,s,_,Bt,S+F/_,!0),F>0){let ee=Ri(it,Qt,r,s);n.arc(ee.x,ee.y,F,Qt+Math.PI,S-Rt)}let je=Ri(G,S,r,s);if(n.lineTo(je.x,je.y),L>0){let ee=Ri(G,X,r,s);n.arc(ee.x,ee.y,L,S-Rt,X)}}else{n.moveTo(r,s);let Pt=Math.cos(X)*u+r,Et=Math.sin(X)*u+s;n.lineTo(Pt,Et);let Bt=Math.cos(ot)*u+r,je=Math.sin(ot)*u+s;n.lineTo(Bt,je)}n.closePath()}function D_(n,o,t,e,i){let{fullCircles:a,startAngle:r,circumference:s}=o,d=o.endAngle;if(a){Wa(n,o,t,e,d,i);for(let m=0;m<a;++m)n.fill();isNaN(s)||(d=r+(s%Tt||Tt))}return Wa(n,o,t,e,d,i),n.fill(),d}function E_(n,o,t,e,i){let{fullCircles:a,startAngle:r,circumference:s,options:d}=o,{borderWidth:m,borderJoinStyle:h,borderDash:u,borderDashOffset:_,borderRadius:x}=d,v=d.borderAlign==="inner";if(!m)return;n.setLineDash(u||[]),n.lineDashOffset=_,v?(n.lineWidth=m*2,n.lineJoin=h||"round"):(n.lineWidth=m,n.lineJoin=h||"bevel");let O=o.endAngle;if(a){Wa(n,o,t,e,O,i);for(let w=0;w<a;++w)n.stroke();isNaN(s)||(O=r+(s%Tt||Tt))}v&&k_(n,o,O),d.selfJoin&&O-r>=ft&&x===0&&h!=="miter"&&S_(n,o,O),a||(Wa(n,o,t,e,O,i),n.stroke())}var ks=class extends Ve{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:o=>o!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(o){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,o&&Object.assign(this,o)}inRange(o,t,e){let i=this.getProps(["x","y"],e),{angle:a,distance:r}=Lr(i,{x:o,y:t}),{startAngle:s,endAngle:d,innerRadius:m,outerRadius:h,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],e),_=(this.options.spacing+this.options.borderWidth)/2,x=tt(u,d-s),v=Ai(a,s,d)&&s!==d,O=x>=Tt||v,w=nn(r,m+_,h+_);return O&&w}getCenterPoint(o){let{x:t,y:e,startAngle:i,endAngle:a,innerRadius:r,outerRadius:s}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],o),{offset:d,spacing:m}=this.options,h=(i+a)/2,u=(r+s+m+d)/2;return{x:t+Math.cos(h)*u,y:e+Math.sin(h)*u}}tooltipPosition(o){return this.getCenterPoint(o)}draw(o){let{options:t,circumference:e}=this,i=(t.offset||0)/4,a=(t.spacing||0)/2,r=t.circular;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=e>Tt?Math.floor(e/Tt):0,e===0||this.innerRadius<0||this.outerRadius<0)return;o.save();let s=(this.startAngle+this.endAngle)/2;o.translate(Math.cos(s)*i,Math.sin(s)*i);let d=1-Math.sin(Math.min(ft,e||0)),m=i*d;o.fillStyle=t.backgroundColor,o.strokeStyle=t.borderColor,D_(o,this,m,a,r),E_(o,this,m,a,r),o.restore()}};function og(n,o,t=o){n.lineCap=tt(t.borderCapStyle,o.borderCapStyle),n.setLineDash(tt(t.borderDash,o.borderDash)),n.lineDashOffset=tt(t.borderDashOffset,o.borderDashOffset),n.lineJoin=tt(t.borderJoinStyle,o.borderJoinStyle),n.lineWidth=tt(t.borderWidth,o.borderWidth),n.strokeStyle=tt(t.borderColor,o.borderColor)}function j_(n,o,t){n.lineTo(t.x,t.y)}function F_(n){return n.stepped?jp:n.tension||n.cubicInterpolationMode==="monotone"?Fp:j_}function ag(n,o,t={}){let e=n.length,{start:i=0,end:a=e-1}=t,{start:r,end:s}=o,d=Math.max(i,r),m=Math.min(a,s),h=i<r&&a<r||i>s&&a>s;return{count:e,start:d,loop:o.loop,ilen:m<d&&!h?e+m-d:m-d}}function A_(n,o,t,e){let{points:i,options:a}=o,{count:r,start:s,loop:d,ilen:m}=ag(i,t,e),h=F_(a),{move:u=!0,reverse:_}=e||{},x,v,O;for(x=0;x<=m;++x)v=i[(s+(_?m-x:x))%r],!v.skip&&(u?(n.moveTo(v.x,v.y),u=!1):h(n,O,v,_,a.stepped),O=v);return d&&(v=i[(s+(_?m:0))%r],h(n,O,v,_,a.stepped)),!!d}function z_(n,o,t,e){let i=o.points,{count:a,start:r,ilen:s}=ag(i,t,e),{move:d=!0,reverse:m}=e||{},h=0,u=0,_,x,v,O,w,S,I=R=>(r+(m?s-R:R))%a,L=()=>{O!==w&&(n.lineTo(h,w),n.lineTo(h,O),n.lineTo(h,S))};for(d&&(x=i[I(0)],n.moveTo(x.x,x.y)),_=0;_<=s;++_){if(x=i[I(_)],x.skip)continue;let R=x.x,F=x.y,B=R|0;B===v?(F<O?O=F:F>w&&(w=F),h=(u*h+R)/++u):(L(),n.lineTo(R,F),v=B,u=0,O=w=F),S=F}L()}function Is(n){let o=n.options,t=o.borderDash&&o.borderDash.length;return!n._decimated&&!n._loop&&!o.tension&&o.cubicInterpolationMode!=="monotone"&&!o.stepped&&!t?z_:A_}function V_(n){return n.stepped?Up:n.tension||n.cubicInterpolationMode==="monotone"?Hp:An}function L_(n,o,t,e){let i=o._path;i||(i=o._path=new Path2D,o.path(i,t,e)&&i.closePath()),og(n,o.options),n.stroke(i)}function R_(n,o,t,e){let{segments:i,options:a}=o,r=Is(o);for(let s of i)og(n,a,s.style),n.beginPath(),r(n,o,s,{start:t,end:t+e-1})&&n.closePath(),n.stroke()}var B_=typeof Path2D=="function";function N_(n,o,t,e){B_&&!o.options.segment?L_(n,o,t,e):R_(n,o,t,e)}var qa=(()=>{class n extends Ve{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){let i=this.options;if((i.tension||i.cubicInterpolationMode==="monotone")&&!i.stepped&&!this._pointsUpdated){let a=i.spanGaps?this._loop:this._fullLoop;Bp(this._points,i,t,a,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Gp(this,this.options.segment))}first(){let t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){let t=this.segments,e=this.points,i=t.length;return i&&e[t[i-1].end]}interpolate(t,e){let i=this.options,a=t[e],r=this.points,s=as(this,{property:e,start:a,end:a});if(!s.length)return;let d=[],m=V_(i),h,u;for(h=0,u=s.length;h<u;++h){let{start:_,end:x}=s[h],v=r[_],O=r[x];if(v===O){d.push(v);continue}let w=Math.abs((a-v[e])/(O[e]-v[e])),S=m(v,O,w,i.stepped);S[e]=t[e],d.push(S)}return d.length===1?d[0]:d}pathSegment(t,e,i){return Is(this)(t,this,e,i)}path(t,e,i){let a=this.segments,r=Is(this),s=this._loop;e=e||0,i=i||this.points.length-e;for(let d of a)s&=r(t,this,d,{start:e,end:e+i-1});return!!s}draw(t,e,i,a){let r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),N_(t,this,i,a),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return n})();function bm(n,o,t,e){let i=n.options,{[t]:a}=n.getProps([t],e);return Math.abs(o-a)<i.radius+i.hitRadius}var $_=(()=>{class n extends Ve{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,i){let a=this.options,{x:r,y:s}=this.getProps(["x","y"],i);return Math.pow(t-r,2)+Math.pow(e-s,2)<Math.pow(a.hitRadius+a.radius,2)}inXRange(t,e){return bm(this,t,"x",e)}inYRange(t,e){return bm(this,t,"y",e)}getCenterPoint(t){let{x:e,y:i}=this.getProps(["x","y"],t);return{x:e,y:i}}size(t){t=t||this.options||{};let e=t.radius||0;e=Math.max(e,e&&t.hoverRadius||0);let i=e&&t.borderWidth||0;return(e+i)*2}draw(t,e){let i=this.options;this.skip||i.radius<.1||!tn(this,e,this.size(i)/2)||(t.strokeStyle=i.borderColor,t.lineWidth=i.borderWidth,t.fillStyle=i.backgroundColor,ka(t,i,this.x,this.y))}getRange(){let t=this.options||{};return t.radius+t.hitRadius}}return n})();function rg(n,o){let{x:t,y:e,base:i,width:a,height:r}=n.getProps(["x","y","base","width","height"],o),s,d,m,h,u;return n.horizontal?(u=r/2,s=Math.min(t,i),d=Math.max(t,i),m=e-u,h=e+u):(u=a/2,s=t-u,d=t+u,m=Math.min(e,i),h=Math.max(e,i)),{left:s,top:m,right:d,bottom:h}}function $n(n,o,t,e){return n?0:Xt(o,t,e)}function U_(n,o,t){let e=n.options.borderWidth,i=n.borderSkipped,a=Xr(e);return{t:$n(i.top,a.top,0,t),r:$n(i.right,a.right,0,o),b:$n(i.bottom,a.bottom,0,t),l:$n(i.left,a.left,0,o)}}function H_(n,o,t){let{enableBorderRadius:e}=n.getProps(["enableBorderRadius"]),i=n.options.borderRadius,a=Bn(i),r=Math.min(o,t),s=n.borderSkipped,d=e||ct(i);return{topLeft:$n(!d||s.top||s.left,a.topLeft,0,r),topRight:$n(!d||s.top||s.right,a.topRight,0,r),bottomLeft:$n(!d||s.bottom||s.left,a.bottomLeft,0,r),bottomRight:$n(!d||s.bottom||s.right,a.bottomRight,0,r)}}function W_(n){let o=rg(n),t=o.right-o.left,e=o.bottom-o.top,i=U_(n,t/2,e/2),a=H_(n,t/2,e/2);return{outer:{x:o.left,y:o.top,w:t,h:e,radius:a},inner:{x:o.left+i.l,y:o.top+i.t,w:t-i.l-i.r,h:e-i.t-i.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,a.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(i.b,i.r))}}}}function hs(n,o,t,e){let i=o===null,a=t===null,s=n&&!(i&&a)&&rg(n,e);return s&&(i||nn(o,s.left,s.right))&&(a||nn(t,s.top,s.bottom))}function G_(n){return n.topLeft||n.topRight||n.bottomLeft||n.bottomRight}function Y_(n,o){n.rect(o.x,o.y,o.w,o.h)}function fs(n,o,t={}){let e=n.x!==t.x?-o:0,i=n.y!==t.y?-o:0,a=(n.x+n.w!==t.x+t.w?o:0)-e,r=(n.y+n.h!==t.y+t.h?o:0)-i;return{x:n.x+e,y:n.y+i,w:n.w+a,h:n.h+r,radius:n.radius}}var Ts=class extends Ve{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(o){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,o&&Object.assign(this,o)}draw(o){let{inflateAmount:t,options:{borderColor:e,backgroundColor:i}}=this,{inner:a,outer:r}=W_(this),s=G_(r.radius)?Vi:Y_;o.save(),(r.w!==a.w||r.h!==a.h)&&(o.beginPath(),s(o,fs(r,t,a)),o.clip(),s(o,fs(a,-t,r)),o.fillStyle=e,o.fill("evenodd")),o.beginPath(),s(o,fs(a,t)),o.fillStyle=i,o.fill(),o.restore()}inRange(o,t,e){return hs(this,o,t,e)}inXRange(o,t){return hs(this,o,null,t)}inYRange(o,t){return hs(this,null,o,t)}getCenterPoint(o){let{x:t,y:e,base:i,horizontal:a}=this.getProps(["x","y","base","horizontal"],o);return{x:a?(t+i)/2:t,y:a?e:(e+i)/2}}getRange(o){return o==="x"?this.width/2:this.height/2}},q_=Object.freeze({__proto__:null,ArcElement:ks,BarElement:Ts,LineElement:qa,PointElement:$_}),Ds=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Pm=Ds.map(n=>n.replace("rgb(","rgba(").replace(")",", 0.5)"));function sg(n){return Ds[n%Ds.length]}function lg(n){return Pm[n%Pm.length]}function X_(n,o){return n.borderColor=sg(o),n.backgroundColor=lg(o),++o}function Z_(n,o){return n.backgroundColor=n.data.map(()=>sg(o++)),o}function Q_(n,o){return n.backgroundColor=n.data.map(()=>lg(o++)),o}function K_(n){let o=0;return(t,e)=>{let i=n.getDatasetMeta(e).controller;i instanceof Rs?o=Z_(t,o):i instanceof Xm?o=Q_(t,o):i&&(o=X_(t,o))}}function vm(n){let o;for(o in n)if(n[o].borderColor||n[o].backgroundColor)return!0;return!1}function J_(n){return n&&(n.borderColor||n.backgroundColor)}function tC(){return Dt.borderColor!=="rgba(0,0,0,0.1)"||Dt.backgroundColor!=="rgba(0,0,0,0.1)"}var eC={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(n,o,t){if(!t.enabled)return;let{data:{datasets:e},options:i}=n.config,{elements:a}=i,r=vm(e)||J_(i)||a&&vm(a)||tC();if(!t.forceOverride&&r)return;let s=K_(n);e.forEach(s)}};function nC(n,o,t,e,i){let a=i.samples||e;if(a>=t)return n.slice(o,o+t);let r=[],s=(t-2)/(a-2),d=0,m=o+t-1,h=o,u,_,x,v,O;for(r[d++]=n[h],u=0;u<a-2;u++){let w=0,S=0,I,L=Math.floor((u+1)*s)+1+o,R=Math.min(Math.floor((u+2)*s)+1,t)+o,F=R-L;for(I=L;I<R;I++)w+=n[I].x,S+=n[I].y;w/=F,S/=F;let B=Math.floor(u*s)+1+o,G=Math.min(Math.floor((u+1)*s)+1,t)+o,{x:U,y:X}=n[h];for(x=v=-1,I=B;I<G;I++)v=.5*Math.abs((U-w)*(n[I].y-X)-(U-n[I].x)*(S-X)),v>x&&(x=v,_=n[I],O=I);r[d++]=_,h=O}return r[d++]=n[m],r}function iC(n,o,t,e){let i=0,a=0,r,s,d,m,h,u,_,x,v,O,w=[],S=o+t-1,I=n[o].x,R=n[S].x-I;for(r=o;r<o+t;++r){s=n[r],d=(s.x-I)/R*e,m=s.y;let F=d|0;if(F===h)m<v?(v=m,u=r):m>O&&(O=m,_=r),i=(a*i+s.x)/++a;else{let B=r-1;if(!lt(u)&&!lt(_)){let G=Math.min(u,_),U=Math.max(u,_);G!==x&&G!==B&&w.push(ne(_t({},n[G]),{x:i})),U!==x&&U!==B&&w.push(ne(_t({},n[U]),{x:i}))}r>0&&B!==x&&w.push(n[B]),w.push(s),h=F,a=0,v=O=m,u=_=x=r}}return w}function cg(n){if(n._decimated){let o=n._data;delete n._decimated,delete n._data,Object.defineProperty(n,"data",{configurable:!0,enumerable:!0,writable:!0,value:o})}}function Om(n){n.data.datasets.forEach(o=>{cg(o)})}function oC(n,o){let t=o.length,e=0,i,{iScale:a}=n,{min:r,max:s,minDefined:d,maxDefined:m}=a.getUserBounds();return d&&(e=Xt(Je(o,a.axis,r).lo,0,t-1)),m?i=Xt(Je(o,a.axis,s).hi+1,e,t)-e:i=t-e,{start:e,count:i}}var aC={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(n,o,t)=>{if(!t.enabled){Om(n);return}let e=n.width;n.data.datasets.forEach((i,a)=>{let{_data:r,indexAxis:s}=i,d=n.getDatasetMeta(a),m=r||i.data;if(Li([s,n.options.indexAxis])==="y"||!d.controller.supportsDecimation)return;let h=n.scales[d.xAxisID];if(h.type!=="linear"&&h.type!=="time"||n.options.parsing)return;let{start:u,count:_}=oC(d,m),x=t.threshold||4*e;if(_<=x){cg(i);return}lt(r)&&(i._data=m,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(O){this._data=O}}));let v;switch(t.algorithm){case"lttb":v=nC(m,u,_,e,t);break;case"min-max":v=iC(m,u,_,e);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}i._decimated=v})},destroy(n){Om(n)}};function rC(n,o,t){let e=n.segments,i=n.points,a=o.points,r=[];for(let s of e){let{start:d,end:m}=s;m=Xa(d,m,i);let h=Es(t,i[d],i[m],s.loop);if(!o.segments){r.push({source:s,target:h,start:i[d],end:i[m]});continue}let u=as(o,h);for(let _ of u){let x=Es(t,a[_.start],a[_.end],_.loop),v=os(s,i,x);for(let O of v)r.push({source:O,target:_,start:{[t]:ym(h,x,"start",Math.max)},end:{[t]:ym(h,x,"end",Math.min)}})}}return r}function Es(n,o,t,e){if(e)return;let i=o[n],a=t[n];return n==="angle"&&(i=Kt(i),a=Kt(a)),{property:n,start:i,end:a}}function sC(n,o){let{x:t=null,y:e=null}=n||{},i=o.points,a=[];return o.segments.forEach(({start:r,end:s})=>{s=Xa(r,s,i);let d=i[r],m=i[s];e!==null?(a.push({x:d.x,y:e}),a.push({x:m.x,y:e})):t!==null&&(a.push({x:t,y:d.y}),a.push({x:t,y:m.y}))}),a}function Xa(n,o,t){for(;o>n;o--){let e=t[o];if(!isNaN(e.x)&&!isNaN(e.y))break}return o}function ym(n,o,t,e){return n&&o?e(n[t],o[t]):n?n[t]:o?o[t]:0}function dg(n,o){let t=[],e=!1;return It(n)?(e=!0,t=n):t=sC(n,o),t.length?new qa({points:t,options:{tension:0},_loop:e,_fullLoop:e}):null}function wm(n){return n&&n.fill!==!1}function lC(n,o,t){let i=n[o].fill,a=[o],r;if(!t)return i;for(;i!==!1&&a.indexOf(i)===-1;){if(!zt(i))return i;if(r=n[i],!r)return!1;if(r.visible)return i;a.push(i),i=r.fill}return!1}function cC(n,o,t){let e=gC(n);if(ct(e))return isNaN(e.value)?!1:e;let i=parseFloat(e);return zt(i)&&Math.floor(i)===i?dC(e[0],o,i,t):["origin","start","end","stack","shape"].indexOf(e)>=0&&e}function dC(n,o,t,e){return(n==="-"||n==="+")&&(t=o+t),t===o||t<0||t>=e?!1:t}function pC(n,o){let t=null;return n==="start"?t=o.bottom:n==="end"?t=o.top:ct(n)?t=o.getPixelForValue(n.value):o.getBasePixel&&(t=o.getBasePixel()),t}function mC(n,o,t){let e;return n==="start"?e=t:n==="end"?e=o.options.reverse?o.min:o.max:ct(n)?e=n.value:e=o.getBaseValue(),e}function gC(n){let o=n.options,t=o.fill,e=tt(t&&t.target,t);return e===void 0&&(e=!!o.backgroundColor),e===!1||e===null?!1:e===!0?"origin":e}function hC(n){let{scale:o,index:t,line:e}=n,i=[],a=e.segments,r=e.points,s=fC(o,t);s.push(dg({x:null,y:o.bottom},e));for(let d=0;d<a.length;d++){let m=a[d];for(let h=m.start;h<=m.end;h++)uC(i,r[h],s)}return new qa({points:i,options:{}})}function fC(n,o){let t=[],e=n.getMatchingVisibleMetas("line");for(let i=0;i<e.length;i++){let a=e[i];if(a.index===o)break;a.hidden||t.unshift(a.dataset)}return t}function uC(n,o,t){let e=[];for(let i=0;i<t.length;i++){let a=t[i],{first:r,last:s,point:d}=_C(a,o,"x");if(!(!d||r&&s)){if(r)e.unshift(d);else if(n.push(d),!s)break}}n.push(...e)}function _C(n,o,t){let e=n.interpolate(o,t);if(!e)return{};let i=e[t],a=n.segments,r=n.points,s=!1,d=!1;for(let m=0;m<a.length;m++){let h=a[m],u=r[h.start][t],_=r[h.end][t];if(nn(i,u,_)){s=i===u,d=i===_;break}}return{first:s,last:d,point:e}}var Ga=class{constructor(o){this.x=o.x,this.y=o.y,this.radius=o.radius}pathSegment(o,t,e){let{x:i,y:a,radius:r}=this;return t=t||{start:0,end:Tt},o.arc(i,a,r,t.end,t.start,!0),!e.bounds}interpolate(o){let{x:t,y:e,radius:i}=this,a=o.angle;return{x:t+Math.cos(a)*i,y:e+Math.sin(a)*i,angle:a}}};function CC(n){let{chart:o,fill:t,line:e}=n;if(zt(t))return xC(o,t);if(t==="stack")return hC(n);if(t==="shape")return!0;let i=MC(n);return i instanceof Ga?i:dg(i,e)}function xC(n,o){let t=n.getDatasetMeta(o);return t&&n.isDatasetVisible(o)?t.dataset:null}function MC(n){return(n.scale||{}).getPointPositionForValue?PC(n):bC(n)}function bC(n){let{scale:o={},fill:t}=n,e=pC(t,o);if(zt(e)){let i=o.isHorizontal();return{x:i?e:null,y:i?null:e}}return null}function PC(n){let{scale:o,fill:t}=n,e=o.options,i=o.getLabels().length,a=e.reverse?o.max:o.min,r=mC(t,o,a),s=[];if(e.grid.circular){let d=o.getPointPositionForValue(0,a);return new Ga({x:d.x,y:d.y,radius:o.getDistanceFromCenterForValue(r)})}for(let d=0;d<i;++d)s.push(o.getPointPositionForValue(d,r));return s}function us(n,o,t){let e=CC(o),{chart:i,index:a,line:r,scale:s,axis:d}=o,m=r.options,h=m.fill,u=m.backgroundColor,{above:_=u,below:x=u}=h||{},v=i.getDatasetMeta(a),O=rs(i,v);e&&r.points.length&&(no(n,t),vC(n,{line:r,target:e,above:_,below:x,area:t,scale:s,axis:d,clip:O}),io(n))}function vC(n,o){let{line:t,target:e,above:i,below:a,area:r,scale:s,clip:d}=o,m=t._loop?"angle":o.axis;n.save();let h=a;a!==i&&(m==="x"?(Sm(n,e,r.top),_s(n,{line:t,target:e,color:i,scale:s,property:m,clip:d}),n.restore(),n.save(),Sm(n,e,r.bottom)):m==="y"&&(km(n,e,r.left),_s(n,{line:t,target:e,color:a,scale:s,property:m,clip:d}),n.restore(),n.save(),km(n,e,r.right),h=i)),_s(n,{line:t,target:e,color:h,scale:s,property:m,clip:d}),n.restore()}function Sm(n,o,t){let{segments:e,points:i}=o,a=!0,r=!1;n.beginPath();for(let s of e){let{start:d,end:m}=s,h=i[d],u=i[Xa(d,m,i)];a?(n.moveTo(h.x,h.y),a=!1):(n.lineTo(h.x,t),n.lineTo(h.x,h.y)),r=!!o.pathSegment(n,s,{move:r}),r?n.closePath():n.lineTo(u.x,t)}n.lineTo(o.first().x,t),n.closePath(),n.clip()}function km(n,o,t){let{segments:e,points:i}=o,a=!0,r=!1;n.beginPath();for(let s of e){let{start:d,end:m}=s,h=i[d],u=i[Xa(d,m,i)];a?(n.moveTo(h.x,h.y),a=!1):(n.lineTo(t,h.y),n.lineTo(h.x,h.y)),r=!!o.pathSegment(n,s,{move:r}),r?n.closePath():n.lineTo(t,u.y)}n.lineTo(t,o.first().y),n.closePath(),n.clip()}function _s(n,o){let{line:t,target:e,property:i,color:a,scale:r,clip:s}=o,d=rC(t,e,i);for(let{source:m,target:h,start:u,end:_}of d){let{style:{backgroundColor:x=a}={}}=m,v=e!==!0;n.save(),n.fillStyle=x,OC(n,r,s,v&&Es(i,u,_)),n.beginPath();let O=!!t.pathSegment(n,m),w;if(v){O?n.closePath():Im(n,e,_,i);let S=!!e.pathSegment(n,h,{move:O,reverse:!0});w=O&&S,w||Im(n,e,u,i)}n.closePath(),n.fill(w?"evenodd":"nonzero"),n.restore()}}function OC(n,o,t,e){let i=o.chart.chartArea,{property:a,start:r,end:s}=e||{};if(a==="x"||a==="y"){let d,m,h,u;a==="x"?(d=r,m=i.top,h=s,u=i.bottom):(d=i.left,m=r,h=i.right,u=s),n.beginPath(),t&&(d=Math.max(d,t.left),h=Math.min(h,t.right),m=Math.max(m,t.top),u=Math.min(u,t.bottom)),n.rect(d,m,h-d,u-m),n.clip()}}function Im(n,o,t,e){let i=o.interpolate(t,e);i&&n.lineTo(i.x,i.y)}var yC={id:"filler",afterDatasetsUpdate(n,o,t){let e=(n.data.datasets||[]).length,i=[],a,r,s,d;for(r=0;r<e;++r)a=n.getDatasetMeta(r),s=a.dataset,d=null,s&&s.options&&s instanceof qa&&(d={visible:n.isDatasetVisible(r),index:r,fill:cC(s,r,e),chart:n,axis:a.controller.options.indexAxis,scale:a.vScale,line:s}),a.$filler=d,i.push(d);for(r=0;r<e;++r)d=i[r],!(!d||d.fill===!1)&&(d.fill=lC(i,r,t.propagate))},beforeDraw(n,o,t){let e=t.drawTime==="beforeDraw",i=n.getSortedVisibleDatasetMetas(),a=n.chartArea;for(let r=i.length-1;r>=0;--r){let s=i[r].$filler;s&&(s.line.updateControlPoints(a,s.axis),e&&s.fill&&us(n.ctx,s,a))}},beforeDatasetsDraw(n,o,t){if(t.drawTime!=="beforeDatasetsDraw")return;let e=n.getSortedVisibleDatasetMetas();for(let i=e.length-1;i>=0;--i){let a=e[i].$filler;wm(a)&&us(n.ctx,a,n.chartArea)}},beforeDatasetDraw(n,o,t){let e=o.meta.$filler;!wm(e)||t.drawTime!=="beforeDatasetDraw"||us(n.ctx,e,n.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},Tm=(n,o)=>{let{boxHeight:t=o,boxWidth:e=o}=n;return n.usePointStyle&&(t=Math.min(t,o),e=n.pointStyleWidth||Math.min(e,o)),{boxWidth:e,boxHeight:t,itemHeight:Math.max(o,t)}},wC=(n,o)=>n!==null&&o!==null&&n.datasetIndex===o.datasetIndex&&n.index===o.index,Ya=class extends Ve{constructor(o){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=o.chart,this.options=o.options,this.ctx=o.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(o,t,e){this.maxWidth=o,this.maxHeight=t,this._margins=e,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let o=this.options.labels||{},t=wt(o.generateLabels,[this.chart],this)||[];o.filter&&(t=t.filter(e=>o.filter(e,this.chart.data))),o.sort&&(t=t.sort((e,i)=>o.sort(e,i,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){let{options:o,ctx:t}=this;if(!o.display){this.width=this.height=0;return}let e=o.labels,i=Ut(e.font),a=i.size,r=this._computeTitleHeight(),{boxWidth:s,itemHeight:d}=Tm(e,a),m,h;t.font=i.string,this.isHorizontal()?(m=this.maxWidth,h=this._fitRows(r,a,s,d)+10):(h=this.maxHeight,m=this._fitCols(r,i,s,d)+10),this.width=Math.min(m,o.maxWidth||this.maxWidth),this.height=Math.min(h,o.maxHeight||this.maxHeight)}_fitRows(o,t,e,i){let{ctx:a,maxWidth:r,options:{labels:{padding:s}}}=this,d=this.legendHitBoxes=[],m=this.lineWidths=[0],h=i+s,u=o;a.textAlign="left",a.textBaseline="middle";let _=-1,x=-h;return this.legendItems.forEach((v,O)=>{let w=e+t/2+a.measureText(v.text).width;(O===0||m[m.length-1]+w+2*s>r)&&(u+=h,m[m.length-(O>0?0:1)]=0,x+=h,_++),d[O]={left:0,top:x,row:_,width:w,height:i},m[m.length-1]+=w+s}),u}_fitCols(o,t,e,i){let{ctx:a,maxHeight:r,options:{labels:{padding:s}}}=this,d=this.legendHitBoxes=[],m=this.columnSizes=[],h=r-o,u=s,_=0,x=0,v=0,O=0;return this.legendItems.forEach((w,S)=>{let{itemWidth:I,itemHeight:L}=SC(e,t,a,w,i);S>0&&x+L+2*s>h&&(u+=_+s,m.push({width:_,height:x}),v+=_+s,O++,_=x=0),d[S]={left:v,top:x,col:O,width:I,height:L},_=Math.max(_,I),x+=L+s}),u+=_,m.push({width:_,height:x}),u}adjustHitBoxes(){if(!this.options.display)return;let o=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:e,labels:{padding:i},rtl:a}}=this,r=Kn(a,this.left,this.width);if(this.isHorizontal()){let s=0,d=Jt(e,this.left+i,this.right-this.lineWidths[s]);for(let m of t)s!==m.row&&(s=m.row,d=Jt(e,this.left+i,this.right-this.lineWidths[s])),m.top+=this.top+o+i,m.left=r.leftForLtr(r.x(d),m.width),d+=m.width+i}else{let s=0,d=Jt(e,this.top+o+i,this.bottom-this.columnSizes[s].height);for(let m of t)m.col!==s&&(s=m.col,d=Jt(e,this.top+o+i,this.bottom-this.columnSizes[s].height)),m.top=d,m.left+=this.left+i,m.left=r.leftForLtr(r.x(m.left),m.width),d+=m.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let o=this.ctx;no(o,this),this._draw(),io(o)}}_draw(){let{options:o,columnSizes:t,lineWidths:e,ctx:i}=this,{align:a,labels:r}=o,s=Dt.color,d=Kn(o.rtl,this.left,this.width),m=Ut(r.font),{padding:h}=r,u=m.size,_=u/2,x;this.drawTitle(),i.textAlign=d.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=m.string;let{boxWidth:v,boxHeight:O,itemHeight:w}=Tm(r,u),S=function(B,G,U){if(isNaN(v)||v<=0||isNaN(O)||O<0)return;i.save();let X=tt(U.lineWidth,1);if(i.fillStyle=tt(U.fillStyle,s),i.lineCap=tt(U.lineCap,"butt"),i.lineDashOffset=tt(U.lineDashOffset,0),i.lineJoin=tt(U.lineJoin,"miter"),i.lineWidth=X,i.strokeStyle=tt(U.strokeStyle,s),i.setLineDash(tt(U.lineDash,[])),r.usePointStyle){let ot={radius:O*Math.SQRT2/2,pointStyle:U.pointStyle,rotation:U.rotation,borderWidth:X},it=d.xPlus(B,v/2),dt=G+_;qr(i,ot,it,dt,r.pointStyleWidth&&v)}else{let ot=G+Math.max((u-O)/2,0),it=d.leftForLtr(B,v),dt=Bn(U.borderRadius);i.beginPath(),Object.values(dt).some(Qt=>Qt!==0)?Vi(i,{x:it,y:ot,w:v,h:O,radius:dt}):i.rect(it,ot,v,O),i.fill(),X!==0&&i.stroke()}i.restore()},I=function(B,G,U){Rn(i,U.text,B,G+w/2,m,{strikethrough:U.hidden,textAlign:d.textAlign(U.textAlign)})},L=this.isHorizontal(),R=this._computeTitleHeight();L?x={x:Jt(a,this.left+h,this.right-e[0]),y:this.top+h+R,line:0}:x={x:this.left+h,y:Jt(a,this.top+R+h,this.bottom-t[0].height),line:0},ns(this.ctx,o.textDirection);let F=w+h;this.legendItems.forEach((B,G)=>{i.strokeStyle=B.fontColor,i.fillStyle=B.fontColor;let U=i.measureText(B.text).width,X=d.textAlign(B.textAlign||(B.textAlign=r.textAlign)),ot=v+_+U,it=x.x,dt=x.y;d.setWidth(this.width),L?G>0&&it+ot+h>this.right&&(dt=x.y+=F,x.line++,it=x.x=Jt(a,this.left+h,this.right-e[x.line])):G>0&&dt+F>this.bottom&&(it=x.x=it+t[x.line].width+h,x.line++,dt=x.y=Jt(a,this.top+R+h,this.bottom-t[x.line].height));let Qt=d.x(it);if(S(Qt,dt,B),it=Tp(X,it+v+_,L?it+ot:this.right,o.rtl),I(d.x(it),dt,B),L)x.x+=ot+h;else if(typeof B.text!="string"){let Pe=m.lineHeight;x.y+=pg(B,Pe)+h}else x.y+=F}),is(this.ctx,o.textDirection)}drawTitle(){let o=this.options,t=o.title,e=Ut(t.font),i=te(t.padding);if(!t.display)return;let a=Kn(o.rtl,this.left,this.width),r=this.ctx,s=t.position,d=e.size/2,m=i.top+d,h,u=this.left,_=this.width;if(this.isHorizontal())_=Math.max(...this.lineWidths),h=this.top+m,u=Jt(o.align,u,this.right-_);else{let v=this.columnSizes.reduce((O,w)=>Math.max(O,w.height),0);h=m+Jt(o.align,this.top,this.bottom-v-o.labels.padding-this._computeTitleHeight())}let x=Jt(s,u,u+_);r.textAlign=a.textAlign(wa(s)),r.textBaseline="middle",r.strokeStyle=t.color,r.fillStyle=t.color,r.font=e.string,Rn(r,t.text,x,h,e)}_computeTitleHeight(){let o=this.options.title,t=Ut(o.font),e=te(o.padding);return o.display?t.lineHeight+e.height:0}_getLegendItemAt(o,t){let e,i,a;if(nn(o,this.left,this.right)&&nn(t,this.top,this.bottom)){for(a=this.legendHitBoxes,e=0;e<a.length;++e)if(i=a[e],nn(o,i.left,i.left+i.width)&&nn(t,i.top,i.top+i.height))return this.legendItems[e]}return null}handleEvent(o){let t=this.options;if(!TC(o.type,t))return;let e=this._getLegendItemAt(o.x,o.y);if(o.type==="mousemove"||o.type==="mouseout"){let i=this._hoveredItem,a=wC(i,e);i&&!a&&wt(t.onLeave,[o,i,this],this),this._hoveredItem=e,e&&!a&&wt(t.onHover,[o,e,this],this)}else e&&wt(t.onClick,[o,e,this],this)}};function SC(n,o,t,e,i){let a=kC(e,n,o,t),r=IC(i,e,o.lineHeight);return{itemWidth:a,itemHeight:r}}function kC(n,o,t,e){let i=n.text;return i&&typeof i!="string"&&(i=i.reduce((a,r)=>a.length>r.length?a:r)),o+t.size/2+e.measureText(i).width}function IC(n,o,t){let e=n;return typeof o.text!="string"&&(e=pg(o,t)),e}function pg(n,o){let t=n.text?n.text.length:0;return o*t}function TC(n,o){return!!((n==="mousemove"||n==="mouseout")&&(o.onHover||o.onLeave)||o.onClick&&(n==="click"||n==="mouseup"))}var DC={id:"legend",_element:Ya,start(n,o,t){let e=n.legend=new Ya({ctx:n.ctx,options:t,chart:n});le.configure(n,e,t),le.addBox(n,e)},stop(n){le.removeBox(n,n.legend),delete n.legend},beforeUpdate(n,o,t){let e=n.legend;le.configure(n,e,t),e.options=t},afterUpdate(n){let o=n.legend;o.buildLabels(),o.adjustHitBoxes()},afterEvent(n,o){o.replay||n.legend.handleEvent(o.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(n,o,t){let e=o.datasetIndex,i=t.chart;i.isDatasetVisible(e)?(i.hide(e),o.hidden=!0):(i.show(e),o.hidden=!1)},onHover:null,onLeave:null,labels:{color:n=>n.chart.options.color,boxWidth:40,padding:10,generateLabels(n){let o=n.data.datasets,{labels:{usePointStyle:t,pointStyle:e,textAlign:i,color:a,useBorderRadius:r,borderRadius:s}}=n.legend.options;return n._getSortedDatasetMetas().map(d=>{let m=d.controller.getStyle(t?0:void 0),h=te(m.borderWidth);return{text:o[d.index].label,fillStyle:m.backgroundColor,fontColor:a,hidden:!d.visible,lineCap:m.borderCapStyle,lineDash:m.borderDash,lineDashOffset:m.borderDashOffset,lineJoin:m.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:m.borderColor,pointStyle:e||m.pointStyle,rotation:m.rotation,textAlign:i||m.textAlign,borderRadius:r&&(s||m.borderRadius),datasetIndex:d.index}},this)}},title:{color:n=>n.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:n=>!n.startsWith("on"),labels:{_scriptable:n=>!["generateLabels","filter","sort"].includes(n)}}},go=class extends Ve{constructor(o){super(),this.chart=o.chart,this.options=o.options,this.ctx=o.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(o,t){let e=this.options;if(this.left=0,this.top=0,!e.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=o,this.height=this.bottom=t;let i=It(e.text)?e.text.length:1;this._padding=te(e.padding);let a=i*Ut(e.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){let o=this.options.position;return o==="top"||o==="bottom"}_drawArgs(o){let{top:t,left:e,bottom:i,right:a,options:r}=this,s=r.align,d=0,m,h,u;return this.isHorizontal()?(h=Jt(s,e,a),u=t+o,m=a-e):(r.position==="left"?(h=e+o,u=Jt(s,i,t),d=ft*-.5):(h=a-o,u=Jt(s,t,i),d=ft*.5),m=i-t),{titleX:h,titleY:u,maxWidth:m,rotation:d}}draw(){let o=this.ctx,t=this.options;if(!t.display)return;let e=Ut(t.font),a=e.lineHeight/2+this._padding.top,{titleX:r,titleY:s,maxWidth:d,rotation:m}=this._drawArgs(a);Rn(o,t.text,0,0,e,{color:t.color,maxWidth:d,rotation:m,textAlign:wa(t.align),textBaseline:"middle",translation:[r,s]})}};function EC(n,o){let t=new go({ctx:n.ctx,options:o,chart:n});le.configure(n,t,o),le.addBox(n,t),n.titleBlock=t}var jC={id:"title",_element:go,start(n,o,t){EC(n,t)},stop(n){let o=n.titleBlock;le.removeBox(n,o),delete n.titleBlock},beforeUpdate(n,o,t){let e=n.titleBlock;le.configure(n,e,t),e.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},Va=new WeakMap,FC={id:"subtitle",start(n,o,t){let e=new go({ctx:n.ctx,options:t,chart:n});le.configure(n,e,t),le.addBox(n,e),Va.set(n,e)},stop(n){le.removeBox(n,Va.get(n)),Va.delete(n)},beforeUpdate(n,o,t){let e=Va.get(n);le.configure(n,e,t),e.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},po={average(n){if(!n.length)return!1;let o,t,e=new Set,i=0,a=0;for(o=0,t=n.length;o<t;++o){let s=n[o].element;if(s&&s.hasValue()){let d=s.tooltipPosition();e.add(d.x),i+=d.y,++a}}return a===0||e.size===0?!1:{x:[...e].reduce((s,d)=>s+d)/e.size,y:i/a}},nearest(n,o){if(!n.length)return!1;let t=o.x,e=o.y,i=Number.POSITIVE_INFINITY,a,r,s;for(a=0,r=n.length;a<r;++a){let d=n[a].element;if(d&&d.hasValue()){let m=d.getCenterPoint(),h=ba(o,m);h<i&&(i=h,s=d)}}if(s){let d=s.tooltipPosition();t=d.x,e=d.y}return{x:t,y:e}}};function on(n,o){return o&&(It(o)?Array.prototype.push.apply(n,o):n.push(o)),n}function un(n){return(typeof n=="string"||n instanceof String)&&n.indexOf(`
`)>-1?n.split(`
`):n}function AC(n,o){let{element:t,datasetIndex:e,index:i}=o,a=n.getDatasetMeta(e).controller,{label:r,value:s}=a.getLabelAndValue(i);return{chart:n,label:r,parsed:a.getParsed(i),raw:n.data.datasets[e].data[i],formattedValue:s,dataset:a.getDataset(),dataIndex:i,datasetIndex:e,element:t}}function Dm(n,o){let t=n.chart.ctx,{body:e,footer:i,title:a}=n,{boxWidth:r,boxHeight:s}=o,d=Ut(o.bodyFont),m=Ut(o.titleFont),h=Ut(o.footerFont),u=a.length,_=i.length,x=e.length,v=te(o.padding),O=v.height,w=0,S=e.reduce((R,F)=>R+F.before.length+F.lines.length+F.after.length,0);if(S+=n.beforeBody.length+n.afterBody.length,u&&(O+=u*m.lineHeight+(u-1)*o.titleSpacing+o.titleMarginBottom),S){let R=o.displayColors?Math.max(s,d.lineHeight):d.lineHeight;O+=x*R+(S-x)*d.lineHeight+(S-1)*o.bodySpacing}_&&(O+=o.footerMarginTop+_*h.lineHeight+(_-1)*o.footerSpacing);let I=0,L=function(R){w=Math.max(w,t.measureText(R).width+I)};return t.save(),t.font=m.string,bt(n.title,L),t.font=d.string,bt(n.beforeBody.concat(n.afterBody),L),I=o.displayColors?r+2+o.boxPadding:0,bt(e,R=>{bt(R.before,L),bt(R.lines,L),bt(R.after,L)}),I=0,t.font=h.string,bt(n.footer,L),t.restore(),w+=v.width,{width:w,height:O}}function zC(n,o){let{y:t,height:e}=o;return t<e/2?"top":t>n.height-e/2?"bottom":"center"}function VC(n,o,t,e){let{x:i,width:a}=e,r=t.caretSize+t.caretPadding;if(n==="left"&&i+a+r>o.width||n==="right"&&i-a-r<0)return!0}function LC(n,o,t,e){let{x:i,width:a}=t,{width:r,chartArea:{left:s,right:d}}=n,m="center";return e==="center"?m=i<=(s+d)/2?"left":"right":i<=a/2?m="left":i>=r-a/2&&(m="right"),VC(m,n,o,t)&&(m="center"),m}function Em(n,o,t){let e=t.yAlign||o.yAlign||zC(n,t);return{xAlign:t.xAlign||o.xAlign||LC(n,o,t,e),yAlign:e}}function RC(n,o){let{x:t,width:e}=n;return o==="right"?t-=e:o==="center"&&(t-=e/2),t}function BC(n,o,t){let{y:e,height:i}=n;return o==="top"?e+=t:o==="bottom"?e-=i+t:e-=i/2,e}function jm(n,o,t,e){let{caretSize:i,caretPadding:a,cornerRadius:r}=n,{xAlign:s,yAlign:d}=t,m=i+a,{topLeft:h,topRight:u,bottomLeft:_,bottomRight:x}=Bn(r),v=RC(o,s),O=BC(o,d,m);return d==="center"?s==="left"?v+=m:s==="right"&&(v-=m):s==="left"?v-=Math.max(h,_)+i:s==="right"&&(v+=Math.max(u,x)+i),{x:Xt(v,0,e.width-o.width),y:Xt(O,0,e.height-o.height)}}function La(n,o,t){let e=te(t.padding);return o==="center"?n.x+n.width/2:o==="right"?n.x+n.width-e.right:n.x+e.left}function Fm(n){return on([],un(n))}function NC(n,o,t){return hn(n,{tooltip:o,tooltipItems:t,type:"tooltip"})}function Am(n,o){let t=o&&o.dataset&&o.dataset.tooltip&&o.dataset.tooltip.callbacks;return t?n.override(t):n}var mg={beforeTitle:en,title(n){if(n.length>0){let o=n[0],t=o.chart.data.labels,e=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return o.dataset.label||"";if(o.label)return o.label;if(e>0&&o.dataIndex<e)return t[o.dataIndex]}return""},afterTitle:en,beforeBody:en,beforeLabel:en,label(n){if(this&&this.options&&this.options.mode==="dataset")return n.label+": "+n.formattedValue||n.formattedValue;let o=n.dataset.label||"";o&&(o+=": ");let t=n.formattedValue;return lt(t)||(o+=t),o},labelColor(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(n){let t=n.chart.getDatasetMeta(n.datasetIndex).controller.getStyle(n.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:en,afterBody:en,beforeFooter:en,footer:en,afterFooter:en};function Me(n,o,t,e){let i=n[o].call(t,e);return typeof i>"u"?mg[o].call(t,e):i}var zm=(()=>{class n extends Ve{static positioners=po;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let t=this._cachedAnimations;if(t)return t;let e=this.chart,i=this.options.setContext(this.getContext()),a=i.enabled&&e.options.animation&&i.animations,r=new $a(this.chart,a);return a._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=NC(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){let{callbacks:i}=e,a=Me(i,"beforeTitle",this,t),r=Me(i,"title",this,t),s=Me(i,"afterTitle",this,t),d=[];return d=on(d,un(a)),d=on(d,un(r)),d=on(d,un(s)),d}getBeforeBody(t,e){return Fm(Me(e.callbacks,"beforeBody",this,t))}getBody(t,e){let{callbacks:i}=e,a=[];return bt(t,r=>{let s={before:[],lines:[],after:[]},d=Am(i,r);on(s.before,un(Me(d,"beforeLabel",this,r))),on(s.lines,Me(d,"label",this,r)),on(s.after,un(Me(d,"afterLabel",this,r))),a.push(s)}),a}getAfterBody(t,e){return Fm(Me(e.callbacks,"afterBody",this,t))}getFooter(t,e){let{callbacks:i}=e,a=Me(i,"beforeFooter",this,t),r=Me(i,"footer",this,t),s=Me(i,"afterFooter",this,t),d=[];return d=on(d,un(a)),d=on(d,un(r)),d=on(d,un(s)),d}_createItems(t){let e=this._active,i=this.chart.data,a=[],r=[],s=[],d=[],m,h;for(m=0,h=e.length;m<h;++m)d.push(AC(this.chart,e[m]));return t.filter&&(d=d.filter((u,_,x)=>t.filter(u,_,x,i))),t.itemSort&&(d=d.sort((u,_)=>t.itemSort(u,_,i))),bt(d,u=>{let _=Am(t.callbacks,u);a.push(Me(_,"labelColor",this,u)),r.push(Me(_,"labelPointStyle",this,u)),s.push(Me(_,"labelTextColor",this,u))}),this.labelColors=a,this.labelPointStyles=r,this.labelTextColors=s,this.dataPoints=d,d}update(t,e){let i=this.options.setContext(this.getContext()),a=this._active,r,s=[];if(!a.length)this.opacity!==0&&(r={opacity:0});else{let d=po[i.position].call(this,a,this._eventPosition);s=this._createItems(i),this.title=this.getTitle(s,i),this.beforeBody=this.getBeforeBody(s,i),this.body=this.getBody(s,i),this.afterBody=this.getAfterBody(s,i),this.footer=this.getFooter(s,i);let m=this._size=Dm(this,i),h=Object.assign({},d,m),u=Em(this.chart,i,h),_=jm(i,h,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,r={opacity:1,x:_.x,y:_.y,width:m.width,height:m.height,caretX:d.x,caretY:d.y}}this._tooltipItems=s,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&i.external&&i.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,i,a){let r=this.getCaretPosition(t,i,a);e.lineTo(r.x1,r.y1),e.lineTo(r.x2,r.y2),e.lineTo(r.x3,r.y3)}getCaretPosition(t,e,i){let{xAlign:a,yAlign:r}=this,{caretSize:s,cornerRadius:d}=i,{topLeft:m,topRight:h,bottomLeft:u,bottomRight:_}=Bn(d),{x,y:v}=t,{width:O,height:w}=e,S,I,L,R,F,B;return r==="center"?(F=v+w/2,a==="left"?(S=x,I=S-s,R=F+s,B=F-s):(S=x+O,I=S+s,R=F-s,B=F+s),L=S):(a==="left"?I=x+Math.max(m,u)+s:a==="right"?I=x+O-Math.max(h,_)-s:I=this.caretX,r==="top"?(R=v,F=R-s,S=I-s,L=I+s):(R=v+w,F=R+s,S=I+s,L=I-s),B=R),{x1:S,x2:I,x3:L,y1:R,y2:F,y3:B}}drawTitle(t,e,i){let a=this.title,r=a.length,s,d,m;if(r){let h=Kn(i.rtl,this.x,this.width);for(t.x=La(this,i.titleAlign,i),e.textAlign=h.textAlign(i.titleAlign),e.textBaseline="middle",s=Ut(i.titleFont),d=i.titleSpacing,e.fillStyle=i.titleColor,e.font=s.string,m=0;m<r;++m)e.fillText(a[m],h.x(t.x),t.y+s.lineHeight/2),t.y+=s.lineHeight+d,m+1===r&&(t.y+=i.titleMarginBottom-d)}}_drawColorBox(t,e,i,a,r){let s=this.labelColors[i],d=this.labelPointStyles[i],{boxHeight:m,boxWidth:h}=r,u=Ut(r.bodyFont),_=La(this,"left",r),x=a.x(_),v=m<u.lineHeight?(u.lineHeight-m)/2:0,O=e.y+v;if(r.usePointStyle){let w={radius:Math.min(h,m)/2,pointStyle:d.pointStyle,rotation:d.rotation,borderWidth:1},S=a.leftForLtr(x,h)+h/2,I=O+m/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,ka(t,w,S,I),t.strokeStyle=s.borderColor,t.fillStyle=s.backgroundColor,ka(t,w,S,I)}else{t.lineWidth=ct(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,t.strokeStyle=s.borderColor,t.setLineDash(s.borderDash||[]),t.lineDashOffset=s.borderDashOffset||0;let w=a.leftForLtr(x,h),S=a.leftForLtr(a.xPlus(x,1),h-2),I=Bn(s.borderRadius);Object.values(I).some(L=>L!==0)?(t.beginPath(),t.fillStyle=r.multiKeyBackground,Vi(t,{x:w,y:O,w:h,h:m,radius:I}),t.fill(),t.stroke(),t.fillStyle=s.backgroundColor,t.beginPath(),Vi(t,{x:S,y:O+1,w:h-2,h:m-2,radius:I}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(w,O,h,m),t.strokeRect(w,O,h,m),t.fillStyle=s.backgroundColor,t.fillRect(S,O+1,h-2,m-2))}t.fillStyle=this.labelTextColors[i]}drawBody(t,e,i){let{body:a}=this,{bodySpacing:r,bodyAlign:s,displayColors:d,boxHeight:m,boxWidth:h,boxPadding:u}=i,_=Ut(i.bodyFont),x=_.lineHeight,v=0,O=Kn(i.rtl,this.x,this.width),w=function(X){e.fillText(X,O.x(t.x+v),t.y+x/2),t.y+=x+r},S=O.textAlign(s),I,L,R,F,B,G,U;for(e.textAlign=s,e.textBaseline="middle",e.font=_.string,t.x=La(this,S,i),e.fillStyle=i.bodyColor,bt(this.beforeBody,w),v=d&&S!=="right"?s==="center"?h/2+u:h+2+u:0,F=0,G=a.length;F<G;++F){for(I=a[F],L=this.labelTextColors[F],e.fillStyle=L,bt(I.before,w),R=I.lines,d&&R.length&&(this._drawColorBox(e,t,F,O,i),x=Math.max(_.lineHeight,m)),B=0,U=R.length;B<U;++B)w(R[B]),x=_.lineHeight;bt(I.after,w)}v=0,x=_.lineHeight,bt(this.afterBody,w),t.y-=r}drawFooter(t,e,i){let a=this.footer,r=a.length,s,d;if(r){let m=Kn(i.rtl,this.x,this.width);for(t.x=La(this,i.footerAlign,i),t.y+=i.footerMarginTop,e.textAlign=m.textAlign(i.footerAlign),e.textBaseline="middle",s=Ut(i.footerFont),e.fillStyle=i.footerColor,e.font=s.string,d=0;d<r;++d)e.fillText(a[d],m.x(t.x),t.y+s.lineHeight/2),t.y+=s.lineHeight+i.footerSpacing}}drawBackground(t,e,i,a){let{xAlign:r,yAlign:s}=this,{x:d,y:m}=t,{width:h,height:u}=i,{topLeft:_,topRight:x,bottomLeft:v,bottomRight:O}=Bn(a.cornerRadius);e.fillStyle=a.backgroundColor,e.strokeStyle=a.borderColor,e.lineWidth=a.borderWidth,e.beginPath(),e.moveTo(d+_,m),s==="top"&&this.drawCaret(t,e,i,a),e.lineTo(d+h-x,m),e.quadraticCurveTo(d+h,m,d+h,m+x),s==="center"&&r==="right"&&this.drawCaret(t,e,i,a),e.lineTo(d+h,m+u-O),e.quadraticCurveTo(d+h,m+u,d+h-O,m+u),s==="bottom"&&this.drawCaret(t,e,i,a),e.lineTo(d+v,m+u),e.quadraticCurveTo(d,m+u,d,m+u-v),s==="center"&&r==="left"&&this.drawCaret(t,e,i,a),e.lineTo(d,m+_),e.quadraticCurveTo(d,m,d+_,m),e.closePath(),e.fill(),a.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){let e=this.chart,i=this.$animations,a=i&&i.x,r=i&&i.y;if(a||r){let s=po[t.position].call(this,this._active,this._eventPosition);if(!s)return;let d=this._size=Dm(this,t),m=Object.assign({},s,this._size),h=Em(e,t,m),u=jm(t,m,h,e);(a._to!==u.x||r._to!==u.y)&&(this.xAlign=h.xAlign,this.yAlign=h.yAlign,this.width=d.width,this.height=d.height,this.caretX=s.x,this.caretY=s.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(t){let e=this.options.setContext(this.getContext()),i=this.opacity;if(!i)return;this._updateAnimationTarget(e);let a={width:this.width,height:this.height},r={x:this.x,y:this.y};i=Math.abs(i)<.001?0:i;let s=te(e.padding),d=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&d&&(t.save(),t.globalAlpha=i,this.drawBackground(r,t,a,e),ns(t,e.textDirection),r.y+=s.top,this.drawTitle(r,t,e),this.drawBody(r,t,e),this.drawFooter(r,t,e),is(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){let i=this._active,a=t.map(({datasetIndex:d,index:m})=>{let h=this.chart.getDatasetMeta(d);if(!h)throw new Error("Cannot find a dataset at index "+d);return{datasetIndex:d,element:h.data[m],index:m}}),r=!to(i,a),s=this._positionChanged(a,e);(r||s)&&(this._active=a,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,i=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let a=this.options,r=this._active||[],s=this._getActiveElements(t,r,e,i),d=this._positionChanged(s,t),m=e||!to(s,r)||d;return m&&(this._active=s,(a.enabled||a.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),m}_getActiveElements(t,e,i,a){let r=this.options;if(t.type==="mouseout")return[];if(!a)return e.filter(d=>this.chart.data.datasets[d.datasetIndex]&&this.chart.getDatasetMeta(d.datasetIndex).controller.getParsed(d.index)!==void 0);let s=this.chart.getElementsAtEventForMode(t,r.mode,r,i);return r.reverse&&s.reverse(),s}_positionChanged(t,e){let{caretX:i,caretY:a,options:r}=this,s=po[r.position].call(this,t,e);return s!==!1&&(i!==s.x||a!==s.y)}}return n})(),$C={id:"tooltip",_element:zm,positioners:po,afterInit(n,o,t){t&&(n.tooltip=new zm({chart:n,options:t}))},beforeUpdate(n,o,t){n.tooltip&&n.tooltip.initialize(t)},reset(n,o,t){n.tooltip&&n.tooltip.initialize(t)},afterDraw(n){let o=n.tooltip;if(o&&o._willRender()){let t={tooltip:o};if(n.notifyPlugins("beforeTooltipDraw",ne(_t({},t),{cancelable:!0}))===!1)return;o.draw(n.ctx),n.notifyPlugins("afterTooltipDraw",t)}},afterEvent(n,o){if(n.tooltip){let t=o.replay;n.tooltip.handleEvent(o.event,t,o.inChartArea)&&(o.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(n,o)=>o.bodyFont.size,boxWidth:(n,o)=>o.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:mg},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:n=>n!=="filter"&&n!=="itemSort"&&n!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},UC=Object.freeze({__proto__:null,Colors:eC,Decimation:aC,Filler:yC,Legend:DC,SubTitle:FC,Title:jC,Tooltip:$C}),HC=(n,o,t,e)=>(typeof o=="string"?(t=n.push(o)-1,e.unshift({index:t,label:o})):isNaN(o)&&(t=null),t);function WC(n,o,t,e){let i=n.indexOf(o);if(i===-1)return HC(n,o,t,e);let a=n.lastIndexOf(o);return i!==a?t:i}var GC=(n,o)=>n===null?null:Xt(Math.round(n),0,o);function Vm(n){let o=this.getLabels();return n>=0&&n<o.length?o[n]:n}var YC=(()=>{class n extends ei{static id="category";static defaults={ticks:{callback:Vm}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){let e=this._addedLabels;if(e.length){let i=this.getLabels();for(let{index:a,label:r}of e)i[a]===r&&i.splice(a,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(lt(t))return null;let i=this.getLabels();return e=isFinite(e)&&i[e]===t?e:WC(i,t,tt(e,t),this._addedLabels),GC(e,i.length-1)}determineDataLimits(){let{minDefined:t,maxDefined:e}=this.getUserBounds(),{min:i,max:a}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(i=0),e||(a=this.getLabels().length-1)),this.min=i,this.max=a}buildTicks(){let t=this.min,e=this.max,i=this.options.offset,a=[],r=this.getLabels();r=t===0&&e===r.length-1?r:r.slice(t,e+1),this._valueRange=Math.max(r.length-(i?0:1),1),this._startValue=this.min-(i?.5:0);for(let s=t;s<=e;s++)a.push({value:s});return a}getLabelForValue(t){return Vm.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){let e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}return n})();function qC(n,o){let t=[],{bounds:i,step:a,min:r,max:s,precision:d,count:m,maxTicks:h,maxDigits:u,includeBounds:_}=n,x=a||1,v=h-1,{min:O,max:w}=o,S=!lt(r),I=!lt(s),L=!lt(m),R=(w-O)/(u+1),F=Ar((w-O)/v/x)*x,B,G,U,X;if(F<1e-14&&!S&&!I)return[{value:O},{value:w}];X=Math.ceil(w/F)-Math.floor(O/F),X>v&&(F=Ar(X*F/v/x)*x),lt(d)||(B=Math.pow(10,d),F=Math.ceil(F*B)/B),i==="ticks"?(G=Math.floor(O/F)*F,U=Math.ceil(w/F)*F):(G=O,U=w),S&&I&&a&&vp((s-r)/a,F/1e3)?(X=Math.round(Math.min((s-r)/F,h)),F=(s-r)/X,G=r,U=s):L?(G=S?r:G,U=I?s:U,X=m-1,F=(U-G)/X):(X=(U-G)/F,Fi(X,Math.round(X),F/1e3)?X=Math.round(X):X=Math.ceil(X));let ot=Math.max(Vr(F),Vr(G));B=Math.pow(10,lt(d)?ot:d),G=Math.round(G*B)/B,U=Math.round(U*B)/B;let it=0;for(S&&(_&&G!==r?(t.push({value:r}),G<r&&it++,Fi(Math.round((G+it*F)*B)/B,r,Lm(r,R,n))&&it++):G<r&&it++);it<X;++it){let dt=Math.round((G+it*F)*B)/B;if(I&&dt>s)break;t.push({value:dt})}return I&&_&&U!==s?t.length&&Fi(t[t.length-1].value,s,Lm(s,R,n))?t[t.length-1].value=s:t.push({value:s}):(!I||U===s)&&t.push({value:U}),t}function Lm(n,o,{horizontal:t,minRotation:e}){let i=Ee(e),a=(t?Math.sin(i):Math.cos(i))||.001,r=.75*o*(""+n).length;return Math.min(o/a,r)}var Ni=class extends ei{constructor(o){super(o),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(o,t){return lt(o)||(typeof o=="number"||o instanceof Number)&&!isFinite(+o)?null:+o}handleTickRangeOptions(){let{beginAtZero:o}=this.options,{minDefined:t,maxDefined:e}=this.getUserBounds(),{min:i,max:a}=this,r=d=>i=t?i:d,s=d=>a=e?a:d;if(o){let d=ze(i),m=ze(a);d<0&&m<0?s(0):d>0&&m>0&&r(0)}if(i===a){let d=a===0?1:Math.abs(a*.05);s(a+d),o||r(i-d)}this.min=i,this.max=a}getTickLimit(){let o=this.options.ticks,{maxTicksLimit:t,stepSize:e}=o,i;return e?(i=Math.ceil(this.max/e)-Math.floor(this.min/e)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${e} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),t=t||11),t&&(i=Math.min(t,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let o=this.options,t=o.ticks,e=this.getTickLimit();e=Math.max(2,e);let i={maxTicks:e,bounds:o.bounds,min:o.min,max:o.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},a=this._range||this,r=qC(i,a);return o.bounds==="ticks"&&zr(r,this,"value"),o.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){let o=this.ticks,t=this.min,e=this.max;if(super.configure(),this.options.offset&&o.length){let i=(e-t)/Math.max(o.length-1,1)/2;t-=i,e+=i}this._startValue=t,this._endValue=e,this._valueRange=e-t}getLabelForValue(o){return zi(o,this.chart.options.locale,this.options.ticks.format)}},js=class extends Ni{static id="linear";static defaults={ticks:{callback:eo.formatters.numeric}};determineDataLimits(){let{min:o,max:t}=this.getMinMax(!0);this.min=zt(o)?o:0,this.max=zt(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){let o=this.isHorizontal(),t=o?this.width:this.height,e=Ee(this.options.ticks.minRotation),i=(o?Math.sin(e):Math.cos(e))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,a.lineHeight/i))}getPixelForValue(o){return o===null?NaN:this.getPixelForDecimal((o-this._startValue)/this._valueRange)}getValueForPixel(o){return this._startValue+this.getDecimalForPixel(o)*this._valueRange}},ho=n=>Math.floor(mn(n)),ti=(n,o)=>Math.pow(10,ho(n)+o);function Rm(n){return n/Math.pow(10,ho(n))===1}function Bm(n,o,t){let e=Math.pow(10,t),i=Math.floor(n/e);return Math.ceil(o/e)-i}function XC(n,o){let t=o-n,e=ho(t);for(;Bm(n,o,e)>10;)e++;for(;Bm(n,o,e)<10;)e--;return Math.min(e,ho(n))}function ZC(n,{min:o,max:t}){o=xe(n.min,o);let e=[],i=ho(o),a=XC(o,t),r=a<0?Math.pow(10,Math.abs(a)):1,s=Math.pow(10,a),d=i>a?Math.pow(10,i):0,m=Math.round((o-d)*r)/r,h=Math.floor((o-d)/s/10)*s*10,u=Math.floor((m-h)/Math.pow(10,a)),_=xe(n.min,Math.round((d+h+u*Math.pow(10,a))*r)/r);for(;_<t;)e.push({value:_,major:Rm(_),significand:u}),u>=10?u=u<15?15:20:u++,u>=20&&(a++,u=2,r=a>=0?1:r),_=Math.round((d+h+u*Math.pow(10,a))*r)/r;let x=xe(n.max,_);return e.push({value:x,major:Rm(x),significand:u}),e}var Fs=class extends ei{static id="logarithmic";static defaults={ticks:{callback:eo.formatters.logarithmic,major:{enabled:!0}}};constructor(o){super(o),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(o,t){let e=Ni.prototype.parse.apply(this,[o,t]);if(e===0){this._zero=!0;return}return zt(e)&&e>0?e:null}determineDataLimits(){let{min:o,max:t}=this.getMinMax(!0);this.min=zt(o)?Math.max(0,o):null,this.max=zt(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!zt(this._userMin)&&(this.min=o===ti(this.min,0)?ti(this.min,-1):ti(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:o,maxDefined:t}=this.getUserBounds(),e=this.min,i=this.max,a=s=>e=o?e:s,r=s=>i=t?i:s;e===i&&(e<=0?(a(1),r(10)):(a(ti(e,-1)),r(ti(i,1)))),e<=0&&a(ti(i,-1)),i<=0&&r(ti(e,1)),this.min=e,this.max=i}buildTicks(){let o=this.options,t={min:this._userMin,max:this._userMax},e=ZC(t,this);return o.bounds==="ticks"&&zr(e,this,"value"),o.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}getLabelForValue(o){return o===void 0?"0":zi(o,this.chart.options.locale,this.options.ticks.format)}configure(){let o=this.min;super.configure(),this._startValue=mn(o),this._valueRange=mn(this.max)-mn(o)}getPixelForValue(o){return(o===void 0||o===0)&&(o=this.min),o===null||isNaN(o)?NaN:this.getPixelForDecimal(o===this.min?0:(mn(o)-this._startValue)/this._valueRange)}getValueForPixel(o){let t=this.getDecimalForPixel(o);return Math.pow(10,this._startValue+t*this._valueRange)}};function As(n){let o=n.ticks;if(o.display&&n.display){let t=te(o.backdropPadding);return tt(o.font&&o.font.size,Dt.font.size)+t.height}return 0}function QC(n,o,t){return t=It(t)?t:[t],{w:Ep(n,o.string,t),h:t.length*o.lineHeight}}function Nm(n,o,t,e,i){return n===e||n===i?{start:o-t/2,end:o+t/2}:n<e||n>i?{start:o-t,end:o}:{start:o,end:o+t}}function KC(n){let o={l:n.left+n._padding.left,r:n.right-n._padding.right,t:n.top+n._padding.top,b:n.bottom-n._padding.bottom},t=Object.assign({},o),e=[],i=[],a=n._pointLabels.length,r=n.options.pointLabels,s=r.centerPointLabels?ft/a:0;for(let d=0;d<a;d++){let m=r.setContext(n.getPointLabelContext(d));i[d]=m.padding;let h=n.getPointPosition(d,n.drawingArea+i[d],s),u=Ut(m.font),_=QC(n.ctx,u,n._pointLabels[d]);e[d]=_;let x=Kt(n.getIndexAngle(d)+s),v=Math.round(Oa(x)),O=Nm(v,h.x,_.w,0,180),w=Nm(v,h.y,_.h,90,270);JC(t,o,x,O,w)}n.setCenterPoint(o.l-t.l,t.r-o.r,o.t-t.t,t.b-o.b),n._pointLabelItems=nx(n,e,i)}function JC(n,o,t,e,i){let a=Math.abs(Math.sin(t)),r=Math.abs(Math.cos(t)),s=0,d=0;e.start<o.l?(s=(o.l-e.start)/a,n.l=Math.min(n.l,o.l-s)):e.end>o.r&&(s=(e.end-o.r)/a,n.r=Math.max(n.r,o.r+s)),i.start<o.t?(d=(o.t-i.start)/r,n.t=Math.min(n.t,o.t-d)):i.end>o.b&&(d=(i.end-o.b)/r,n.b=Math.max(n.b,o.b+d))}function tx(n,o,t){let e=n.drawingArea,{extra:i,additionalAngle:a,padding:r,size:s}=t,d=n.getPointPosition(o,e+i+r,a),m=Math.round(Oa(Kt(d.angle+Rt))),h=ax(d.y,s.h,m),u=ix(m),_=ox(d.x,s.w,u);return{visible:!0,x:d.x,y:h,textAlign:u,left:_,top:h,right:_+s.w,bottom:h+s.h}}function ex(n,o){if(!o)return!0;let{left:t,top:e,right:i,bottom:a}=n;return!(tn({x:t,y:e},o)||tn({x:t,y:a},o)||tn({x:i,y:e},o)||tn({x:i,y:a},o))}function nx(n,o,t){let e=[],i=n._pointLabels.length,a=n.options,{centerPointLabels:r,display:s}=a.pointLabels,d={extra:As(a)/2,additionalAngle:r?ft/i:0},m;for(let h=0;h<i;h++){d.padding=t[h],d.size=o[h];let u=tx(n,h,d);e.push(u),s==="auto"&&(u.visible=ex(u,m),u.visible&&(m=u))}return e}function ix(n){return n===0||n===180?"center":n<180?"left":"right"}function ox(n,o,t){return t==="right"?n-=o:t==="center"&&(n-=o/2),n}function ax(n,o,t){return t===90||t===270?n-=o/2:(t>270||t<90)&&(n-=o),n}function rx(n,o,t){let{left:e,top:i,right:a,bottom:r}=t,{backdropColor:s}=o;if(!lt(s)){let d=Bn(o.borderRadius),m=te(o.backdropPadding);n.fillStyle=s;let h=e-m.left,u=i-m.top,_=a-e+m.width,x=r-i+m.height;Object.values(d).some(v=>v!==0)?(n.beginPath(),Vi(n,{x:h,y:u,w:_,h:x,radius:d}),n.fill()):n.fillRect(h,u,_,x)}}function sx(n,o){let{ctx:t,options:{pointLabels:e}}=n;for(let i=o-1;i>=0;i--){let a=n._pointLabelItems[i];if(!a.visible)continue;let r=e.setContext(n.getPointLabelContext(i));rx(t,r,a);let s=Ut(r.font),{x:d,y:m,textAlign:h}=a;Rn(t,n._pointLabels[i],d,m+s.lineHeight/2,s,{color:r.color,textAlign:h,textBaseline:"middle"})}}function gg(n,o,t,e){let{ctx:i}=n;if(t)i.arc(n.xCenter,n.yCenter,o,0,Tt);else{let a=n.getPointPosition(0,o);i.moveTo(a.x,a.y);for(let r=1;r<e;r++)a=n.getPointPosition(r,o),i.lineTo(a.x,a.y)}}function lx(n,o,t,e,i){let a=n.ctx,r=o.circular,{color:s,lineWidth:d}=o;!r&&!e||!s||!d||t<0||(a.save(),a.strokeStyle=s,a.lineWidth=d,a.setLineDash(i.dash||[]),a.lineDashOffset=i.dashOffset,a.beginPath(),gg(n,t,r,e),a.closePath(),a.stroke(),a.restore())}function cx(n,o,t){return hn(n,{label:t,index:o,type:"pointLabel"})}var zs=class extends Ni{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:eo.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(o){return o},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(o){super(o),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let o=this._padding=te(As(this.options)/2),t=this.width=this.maxWidth-o.width,e=this.height=this.maxHeight-o.height;this.xCenter=Math.floor(this.left+t/2+o.left),this.yCenter=Math.floor(this.top+e/2+o.top),this.drawingArea=Math.floor(Math.min(t,e)/2)}determineDataLimits(){let{min:o,max:t}=this.getMinMax(!1);this.min=zt(o)&&!isNaN(o)?o:0,this.max=zt(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/As(this.options))}generateTickLabels(o){Ni.prototype.generateTickLabels.call(this,o),this._pointLabels=this.getLabels().map((t,e)=>{let i=wt(this.options.pointLabels.callback,[t,e],this);return i||i===0?i:""}).filter((t,e)=>this.chart.getDataVisibility(e))}fit(){let o=this.options;o.display&&o.pointLabels.display?KC(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(o,t,e,i){this.xCenter+=Math.floor((o-t)/2),this.yCenter+=Math.floor((e-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(o,t,e,i))}getIndexAngle(o){let t=Tt/(this._pointLabels.length||1),e=this.options.startAngle||0;return Kt(o*t+Ee(e))}getDistanceFromCenterForValue(o){if(lt(o))return NaN;let t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-o)*t:(o-this.min)*t}getValueForDistanceFromCenter(o){if(lt(o))return NaN;let t=o/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(o){let t=this._pointLabels||[];if(o>=0&&o<t.length){let e=t[o];return cx(this.getContext(),o,e)}}getPointPosition(o,t,e=0){let i=this.getIndexAngle(o)-Rt+e;return{x:Math.cos(i)*t+this.xCenter,y:Math.sin(i)*t+this.yCenter,angle:i}}getPointPositionForValue(o,t){return this.getPointPosition(o,this.getDistanceFromCenterForValue(t))}getBasePosition(o){return this.getPointPositionForValue(o||0,this.getBaseValue())}getPointLabelPosition(o){let{left:t,top:e,right:i,bottom:a}=this._pointLabelItems[o];return{left:t,top:e,right:i,bottom:a}}drawBackground(){let{backgroundColor:o,grid:{circular:t}}=this.options;if(o){let e=this.ctx;e.save(),e.beginPath(),gg(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),e.closePath(),e.fillStyle=o,e.fill(),e.restore()}}drawGrid(){let o=this.ctx,t=this.options,{angleLines:e,grid:i,border:a}=t,r=this._pointLabels.length,s,d,m;if(t.pointLabels.display&&sx(this,r),i.display&&this.ticks.forEach((h,u)=>{if(u!==0||u===0&&this.min<0){d=this.getDistanceFromCenterForValue(h.value);let _=this.getContext(u),x=i.setContext(_),v=a.setContext(_);lx(this,x,d,r,v)}}),e.display){for(o.save(),s=r-1;s>=0;s--){let h=e.setContext(this.getPointLabelContext(s)),{color:u,lineWidth:_}=h;!_||!u||(o.lineWidth=_,o.strokeStyle=u,o.setLineDash(h.borderDash),o.lineDashOffset=h.borderDashOffset,d=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),m=this.getPointPosition(s,d),o.beginPath(),o.moveTo(this.xCenter,this.yCenter),o.lineTo(m.x,m.y),o.stroke())}o.restore()}}drawBorder(){}drawLabels(){let o=this.ctx,t=this.options,e=t.ticks;if(!e.display)return;let i=this.getIndexAngle(0),a,r;o.save(),o.translate(this.xCenter,this.yCenter),o.rotate(i),o.textAlign="center",o.textBaseline="middle",this.ticks.forEach((s,d)=>{if(d===0&&this.min>=0&&!t.reverse)return;let m=e.setContext(this.getContext(d)),h=Ut(m.font);if(a=this.getDistanceFromCenterForValue(this.ticks[d].value),m.showLabelBackdrop){o.font=h.string,r=o.measureText(s.label).width,o.fillStyle=m.backdropColor;let u=te(m.backdropPadding);o.fillRect(-r/2-u.left,-a-h.size/2-u.top,r+u.width,h.size+u.height)}Rn(o,s.label,0,-a,h,{color:m.color,strokeColor:m.textStrokeColor,strokeWidth:m.textStrokeWidth})}),o.restore()}drawTitle(){}},Za={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},be=Object.keys(Za);function $m(n,o){return n-o}function Um(n,o){if(lt(o))return null;let t=n._adapter,{parser:e,round:i,isoWeekday:a}=n._parseOpts,r=o;return typeof e=="function"&&(r=e(r)),zt(r)||(r=typeof e=="string"?t.parse(r,e):t.parse(r)),r===null?null:(i&&(r=i==="week"&&(Qn(a)||a===!0)?t.startOf(r,"isoWeek",a):t.startOf(r,i)),+r)}function Hm(n,o,t,e){let i=be.length;for(let a=be.indexOf(n);a<i-1;++a){let r=Za[be[a]],s=r.steps?r.steps:Number.MAX_SAFE_INTEGER;if(r.common&&Math.ceil((t-o)/(s*r.size))<=e)return be[a]}return be[i-1]}function dx(n,o,t,e,i){for(let a=be.length-1;a>=be.indexOf(t);a--){let r=be[a];if(Za[r].common&&n._adapter.diff(i,e,r)>=o-1)return r}return be[t?be.indexOf(t):0]}function px(n){for(let o=be.indexOf(n)+1,t=be.length;o<t;++o)if(Za[be[o]].common)return be[o]}function Wm(n,o,t){if(!t)n[o]=!0;else if(t.length){let{lo:e,hi:i}=ya(t,o),a=t[e]>=o?t[e]:t[i];n[a]=!0}}function mx(n,o,t,e){let i=n._adapter,a=+i.startOf(o[0].value,e),r=o[o.length-1].value,s,d;for(s=a;s<=r;s=+i.add(s,1,e))d=t[s],d>=0&&(o[d].major=!0);return o}function Gm(n,o,t){let e=[],i={},a=o.length,r,s;for(r=0;r<a;++r)s=o[r],i[s]=r,e.push({value:s,major:!1});return a===0||!t?e:mx(n,e,i,t)}var Vs=(()=>{class n extends ei{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){let i=t.time||(t.time={}),a=this._adapter=new vu._date(t.adapters.date);a.init(e),Ei(i.displayFormats,a.formats()),this._parseOpts={parser:i.parser,round:i.round,isoWeekday:i.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:Um(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let t=this.options,e=this._adapter,i=t.time.unit||"day",{min:a,max:r,minDefined:s,maxDefined:d}=this.getUserBounds();function m(h){!s&&!isNaN(h.min)&&(a=Math.min(a,h.min)),!d&&!isNaN(h.max)&&(r=Math.max(r,h.max))}(!s||!d)&&(m(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&m(this.getMinMax(!1))),a=zt(a)&&!isNaN(a)?a:+e.startOf(Date.now(),i),r=zt(r)&&!isNaN(r)?r:+e.endOf(Date.now(),i)+1,this.min=Math.min(a,r-1),this.max=Math.max(a+1,r)}_getLabelBounds(){let t=this.getLabelTimestamps(),e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],i=t[t.length-1]),{min:e,max:i}}buildTicks(){let t=this.options,e=t.time,i=t.ticks,a=i.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&a.length&&(this.min=this._userMin||a[0],this.max=this._userMax||a[a.length-1]);let r=this.min,s=this.max,d=wp(a,r,s);return this._unit=e.unit||(i.autoSkip?Hm(e.minUnit,this.min,this.max,this._getLabelCapacity(r)):dx(this,d.length,e.minUnit,this.min,this.max)),this._majorUnit=!i.major.enabled||this._unit==="year"?void 0:px(this._unit),this.initOffsets(a),t.reverse&&d.reverse(),Gm(this,d,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,i=0,a,r;this.options.offset&&t.length&&(a=this.getDecimalForValue(t[0]),t.length===1?e=1-a:e=(this.getDecimalForValue(t[1])-a)/2,r=this.getDecimalForValue(t[t.length-1]),t.length===1?i=r:i=(r-this.getDecimalForValue(t[t.length-2]))/2);let s=t.length<3?.5:.25;e=Xt(e,0,s),i=Xt(i,0,s),this._offsets={start:e,end:i,factor:1/(e+1+i)}}_generate(){let t=this._adapter,e=this.min,i=this.max,a=this.options,r=a.time,s=r.unit||Hm(r.minUnit,e,i,this._getLabelCapacity(e)),d=tt(a.ticks.stepSize,1),m=s==="week"?r.isoWeekday:!1,h=Qn(m)||m===!0,u={},_=e,x,v;if(h&&(_=+t.startOf(_,"isoWeek",m)),_=+t.startOf(_,h?"day":s),t.diff(i,e,s)>1e5*d)throw new Error(e+" and "+i+" are too far apart with stepSize of "+d+" "+s);let O=a.ticks.source==="data"&&this.getDataTimestamps();for(x=_,v=0;x<i;x=+t.add(x,d,s),v++)Wm(u,x,O);return(x===i||a.bounds==="ticks"||v===1)&&Wm(u,x,O),Object.keys(u).sort($m).map(w=>+w)}getLabelForValue(t){let e=this._adapter,i=this.options.time;return i.tooltipFormat?e.format(t,i.tooltipFormat):e.format(t,i.displayFormats.datetime)}format(t,e){let a=this.options.time.displayFormats,r=this._unit,s=e||a[r];return this._adapter.format(t,s)}_tickFormatFunction(t,e,i,a){let r=this.options,s=r.ticks.callback;if(s)return wt(s,[t,e,i],this);let d=r.time.displayFormats,m=this._unit,h=this._majorUnit,u=m&&d[m],_=h&&d[h],x=i[e],v=h&&_&&x&&x.major;return this._adapter.format(t,a||(v?_:u))}generateTickLabels(t){let e,i,a;for(e=0,i=t.length;e<i;++e)a=t[e],a.label=this._tickFormatFunction(a.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){let e=this._offsets,i=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+i)*e.factor)}getValueForPixel(t){let e=this._offsets,i=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+i*(this.max-this.min)}_getLabelSize(t){let e=this.options.ticks,i=this.ctx.measureText(t).width,a=Ee(this.isHorizontal()?e.maxRotation:e.minRotation),r=Math.cos(a),s=Math.sin(a),d=this._resolveTickFontOptions(0).size;return{w:i*r+d*s,h:i*s+d*r}}_getLabelCapacity(t){let e=this.options.time,i=e.displayFormats,a=i[e.unit]||i.millisecond,r=this._tickFormatFunction(t,0,Gm(this,[t],this._majorUnit),a),s=this._getLabelSize(r),d=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return d>0?d:1}getDataTimestamps(){let t=this._cache.data||[],e,i;if(t.length)return t;let a=this.getMatchingVisibleMetas();if(this._normalized&&a.length)return this._cache.data=a[0].controller.getAllParsedValues(this);for(e=0,i=a.length;e<i;++e)t=t.concat(a[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){let t=this._cache.labels||[],e,i;if(t.length)return t;let a=this.getLabels();for(e=0,i=a.length;e<i;++e)t.push(Um(this,a[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Br(t.sort($m))}}return n})();function Ra(n,o,t){let e=0,i=n.length-1,a,r,s,d;t?(o>=n[e].pos&&o<=n[i].pos&&({lo:e,hi:i}=Je(n,"pos",o)),{pos:a,time:s}=n[e],{pos:r,time:d}=n[i]):(o>=n[e].time&&o<=n[i].time&&({lo:e,hi:i}=Je(n,"time",o)),{time:a,pos:s}=n[e],{time:r,pos:d}=n[i]);let m=r-a;return m?s+(d-s)*(o-a)/m:s}var Ls=class extends Vs{static id="timeseries";static defaults=Vs.defaults;constructor(o){super(o),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let o=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(o);this._minPos=Ra(t,this.min),this._tableRange=Ra(t,this.max)-this._minPos,super.initOffsets(o)}buildLookupTable(o){let{min:t,max:e}=this,i=[],a=[],r,s,d,m,h;for(r=0,s=o.length;r<s;++r)m=o[r],m>=t&&m<=e&&i.push(m);if(i.length<2)return[{time:t,pos:0},{time:e,pos:1}];for(r=0,s=i.length;r<s;++r)h=i[r+1],d=i[r-1],m=i[r],Math.round((h+d)/2)!==m&&a.push({time:m,pos:r/(s-1)});return a}_generate(){let o=this.min,t=this.max,e=super.getDataTimestamps();return(!e.includes(o)||!e.length)&&e.splice(0,0,o),(!e.includes(t)||e.length===1)&&e.push(t),e.sort((i,a)=>i-a)}_getTimestampsForTable(){let o=this._cache.all||[];if(o.length)return o;let t=this.getDataTimestamps(),e=this.getLabelTimestamps();return t.length&&e.length?o=this.normalize(t.concat(e)):o=t.length?t:e,o=this._cache.all=o,o}getDecimalForValue(o){return(Ra(this._table,o)-this._minPos)/this._tableRange}getValueForPixel(o){let t=this._offsets,e=this.getDecimalForPixel(o)/t.factor-t.end;return Ra(this._table,e*this._tableRange+this._minPos,!0)}},gx=Object.freeze({__proto__:null,CategoryScale:YC,LinearScale:js,LogarithmicScale:Fs,RadialLinearScale:zs,TimeScale:Vs,TimeSeriesScale:Ls}),Qa=[Pu,q_,UC,gx];var hx=["chartCanvas"];function fx(n,o){n&1&&(l(0,"div",4),k(1,"canvas",null,0),c())}function ux(n,o){n&1&&(l(0,"div",5)(1,"p"),p(2,"No loss data available"),c()())}ni.register(...Qa);var hg=(()=>{class n{constructor(t){this.cdr=t,this.chartData=null}ngAfterViewInit(){setTimeout(()=>{this.renderChart()},0)}ngOnChanges(t){t.chartData&&!t.chartData.firstChange&&this.renderChart()}renderChart(){if(!this.chartData||!this.chartCanvas){console.log("Loss Chart - No data or canvas",{hasData:!!this.chartData,hasCanvas:!!this.chartCanvas});return}console.log("Loss Chart - Rendering with data:",this.chartData),this.chart&&this.chart.destroy();let t=this.chartCanvas.nativeElement.getContext("2d");if(!t){console.error("Loss Chart - Failed to get canvas context");return}let e={type:"line",data:this.chartData,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"bottom"},tooltip:{mode:"index",intersect:!1}},scales:{x:{display:!0,title:{display:!0,text:"Time"}},y:{display:!0,title:{display:!0,text:"Loss"},beginAtZero:!0}},interaction:{mode:"nearest",axis:"x",intersect:!1}}};this.chart=new ni(t,e),console.log("Loss Chart - Chart created successfully"),this.cdr.markForCheck()}static{this.\u0275fac=function(e){return new(e||n)(T(ge))}}static{this.\u0275cmp=A({type:n,selectors:[["app-loss-chart"]],viewQuery:function(e,i){if(e&1&&ve(hx,5),e&2){let a;pe(a=me())&&(i.chartCanvas=a.first)}},inputs:{chartData:"chartData"},standalone:!1,features:[oe],decls:5,vars:2,consts:[["chartCanvas",""],[1,"loss-chart"],["class","chart-container",4,"ngIf"],["class","no-data",4,"ngIf"],[1,"chart-container"],[1,"no-data"]],template:function(e,i){e&1&&(l(0,"div",1)(1,"h4"),p(2,"Loss Chart"),c(),y(3,fx,3,0,"div",2)(4,ux,3,0,"div",3),c()),e&2&&(g(3),f("ngIf",i.chartData),g(),f("ngIf",!i.chartData))},dependencies:[N],styles:[".loss-chart[_ngcontent-%COMP%]{padding:16px;background:#fff;border-radius:4px;box-shadow:0 2px 4px #0000001a}.loss-chart[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;font-size:16px;font-weight:500;color:#333}.chart-container[_ngcontent-%COMP%]{position:relative;height:300px;width:100%}.no-data[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#999}"],changeDetection:0})}}return n})();var Cx=["chartCanvas"];function xx(n,o){n&1&&(l(0,"div",4),k(1,"canvas",null,0),c())}function Mx(n,o){n&1&&(l(0,"div",5)(1,"p"),p(2,"No validation data available"),c()())}ni.register(...Qa);var fg=(()=>{class n{constructor(t){this.cdr=t,this.chartData=null}ngAfterViewInit(){setTimeout(()=>{this.renderChart()},0)}ngOnChanges(t){t.chartData&&!t.chartData.firstChange&&this.renderChart()}renderChart(){if(!this.chartData||!this.chartCanvas){console.log("Validation Chart - No data or canvas",{hasData:!!this.chartData,hasCanvas:!!this.chartCanvas});return}console.log("Validation Chart - Rendering with data:",this.chartData),this.chart&&this.chart.destroy();let t=this.chartCanvas.nativeElement.getContext("2d");if(!t){console.error("Validation Chart - Failed to get canvas context");return}let e={type:"line",data:this.chartData,options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"bottom"},tooltip:{mode:"index",intersect:!1}},scales:{x:{display:!0,title:{display:!0,text:"Time"}},y:{display:!0,title:{display:!0,text:"mAP"},beginAtZero:!0,min:0,max:1}},interaction:{mode:"nearest",axis:"x",intersect:!1}}};this.chart=new ni(t,e),console.log("Validation Chart - Chart created successfully"),this.cdr.markForCheck()}static{this.\u0275fac=function(e){return new(e||n)(T(ge))}}static{this.\u0275cmp=A({type:n,selectors:[["app-validation-chart"]],viewQuery:function(e,i){if(e&1&&ve(Cx,5),e&2){let a;pe(a=me())&&(i.chartCanvas=a.first)}},inputs:{chartData:"chartData"},standalone:!1,features:[oe],decls:5,vars:2,consts:[["chartCanvas",""],[1,"validation-chart"],["class","chart-container",4,"ngIf"],["class","no-data",4,"ngIf"],[1,"chart-container"],[1,"no-data"]],template:function(e,i){e&1&&(l(0,"div",1)(1,"h4"),p(2,"Validation Chart"),c(),y(3,xx,3,0,"div",2)(4,Mx,3,0,"div",3),c()),e&2&&(g(3),f("ngIf",i.chartData),g(),f("ngIf",!i.chartData))},dependencies:[N],styles:[".validation-chart[_ngcontent-%COMP%]{padding:16px;background:#fff;border-radius:4px;box-shadow:0 2px 4px #0000001a}.validation-chart[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 16px;font-size:16px;font-weight:500;color:#333}.chart-container[_ngcontent-%COMP%]{position:relative;height:300px;width:100%}.no-data[_ngcontent-%COMP%]{text-align:center;padding:40px;color:#999}"],changeDetection:0})}}return n})();var ug=(()=>{class n{constructor(){this.transformParam=null}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=A({type:n,selectors:[["app-trained-from"]],inputs:{transformParam:"transformParam"},standalone:!1,decls:6,vars:1,consts:[[1,"trained-from"]],template:function(e,i){e&1&&(l(0,"table",0)(1,"tr")(2,"th"),p(3,"Trained from"),c(),l(4,"td"),p(5),c()()()),e&2&&(g(5),D(i.transformParam||"No transformation parameters"))},styles:[".trained-from[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin:4px 0}.trained-from[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;font-size:14px;font-weight:500;color:#333;padding:4px 16px;width:200px}.trained-from[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:left;font-size:14px;color:#666;padding:4px 16px}"],changeDetection:0})}}return n})();function _g(n,o){let t=n.trainingCount||0,e=n.devCount||0,i=n.testCount||0,a=t+e+i,r=Math.max(0,o-a);return{train:t,dev:e,test:i,unassigned:r,total:o}}function vx(n,o){if(n&1&&(l(0,"table",1)(1,"tr")(2,"th"),p(3,"Split"),c(),l(4,"td")(5,"div",2)(6,"div",3),p(7,"Split distribution on labeled images"),c(),l(8,"div",4)(9,"div",5),k(10,"div",6)(11,"div",7)(12,"div",8)(13,"div",9),c()(),l(14,"div",10)(15,"div",11)(16,"div",12),p(17),c(),l(18,"div",13),p(19,"train"),c()(),l(20,"div",11)(21,"div",12),p(22),c(),l(23,"div",13),p(24,"dev"),c()(),l(25,"div",11)(26,"div",12),p(27),c(),l(28,"div",13),p(29,"test"),c()(),l(30,"div",11)(31,"div",12),p(32),c(),l(33,"div",13),p(34,"unassigned"),c()()()()()()()),n&2){let t=C();g(10),K("width",t.getTrainPercentage(),"%"),f("title","train | "+t.trainingRecord.trainingCount+" ("+t.getTrainPercentage().toFixed(1)+"%)"),g(),K("width",t.getDevPercentage(),"%"),f("title","dev | "+t.trainingRecord.devCount+" ("+t.getDevPercentage().toFixed(1)+"%)"),g(),K("width",t.getTestPercentage(),"%"),f("title","test | "+t.trainingRecord.testCount+" ("+t.getTestPercentage().toFixed(1)+"%)"),g(),K("width",t.getUnassignedPercentage(),"%"),f("title","unassigned | "+t.getUnassignedCount()+" ("+t.getUnassignedPercentage().toFixed(1)+"%)"),g(4),D(t.trainingRecord.trainingCount),g(5),D(t.trainingRecord.devCount),g(5),D(t.trainingRecord.testCount),g(5),D(t.getUnassignedCount())}}var Cg=(()=>{class n{constructor(){this.trainingRecord=null,this.totalImageCount=0}getUnassignedCount(){return this.trainingRecord?_g(this.trainingRecord,this.totalImageCount).unassigned:0}getTotalCount(){return this.trainingRecord?this.trainingRecord.trainingCount+this.trainingRecord.devCount+this.trainingRecord.testCount+this.getUnassignedCount():0}getTrainPercentage(){let t=this.getTotalCount();return t===0?0:this.trainingRecord.trainingCount/t*100}getDevPercentage(){let t=this.getTotalCount();return t===0?0:this.trainingRecord.devCount/t*100}getTestPercentage(){let t=this.getTotalCount();return t===0?0:this.trainingRecord.testCount/t*100}getUnassignedPercentage(){let t=this.getTotalCount();return t===0?0:this.getUnassignedCount()/t*100}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=A({type:n,selectors:[["app-split-distribution"]],inputs:{trainingRecord:"trainingRecord",totalImageCount:"totalImageCount"},standalone:!1,decls:1,vars:1,consts:[["class","split-distribution",4,"ngIf"],[1,"split-distribution"],[1,"split-content"],[1,"split-title"],[1,"split-bar-container"],[1,"split-bar"],[1,"bar-segment","train",3,"title"],[1,"bar-segment","dev",3,"title"],[1,"bar-segment","test",3,"title"],[1,"bar-segment","unassigned",3,"title"],[1,"split-values"],[1,"value-item"],[1,"value"],[1,"label"]],template:function(e,i){e&1&&y(0,vx,35,16,"table",0),e&2&&f("ngIf",i.trainingRecord)},dependencies:[N],styles:[".split-distribution[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin:4px 0}.split-distribution[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;font-size:14px;font-weight:500;color:#333;padding:4px 16px;width:200px;vertical-align:top}.split-distribution[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:left;padding:4px 16px}.split-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.split-title[_ngcontent-%COMP%]{font-size:14px;color:#666;margin-bottom:4px}.split-bar-container[_ngcontent-%COMP%]{width:100%;margin-bottom:8px}.split-bar[_ngcontent-%COMP%]{display:flex;height:24px;width:100%;border-radius:4px;overflow:hidden}.bar-segment[_ngcontent-%COMP%]{height:100%;transition:width .3s ease;cursor:pointer}.bar-segment[_ngcontent-%COMP%]:hover{opacity:.8}.bar-segment.train[_ngcontent-%COMP%]{background-color:#76c893}.bar-segment.dev[_ngcontent-%COMP%]{background-color:#99d98c}.bar-segment.test[_ngcontent-%COMP%]{background-color:#bbe5b5}.bar-segment.unassigned[_ngcontent-%COMP%]{background-color:#b9c0d4}.split-values[_ngcontent-%COMP%]{display:flex;gap:24px}.value-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center}.value-item[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{font-size:16px;font-weight:500;color:#333}.value-item[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{font-size:12px;color:#666}"],changeDetection:0})}}return n})();function yx(n,o){if(n&1&&(l(0,"td"),p(1),c()),n&2){let t=C();g(),E(" ",t.formatDate(t.completedAt)," ")}}function wx(n,o){if(n&1&&(l(0,"td"),p(1),c()),n&2){let t=C();g(),E(" ",t.formatDate(t.startedAt)," ")}}function Sx(n,o){n&1&&(l(0,"td"),p(1,"Training time not recorded"),c())}var xg=(()=>{class n{constructor(){this.startedAt=null,this.completedAt=null}formatDate(t){return t?new Date(t).toLocaleString():"N/A"}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=A({type:n,selectors:[["app-trained-at"]],inputs:{startedAt:"startedAt",completedAt:"completedAt"},standalone:!1,decls:7,vars:3,consts:[[1,"trained-at"],[4,"ngIf"]],template:function(e,i){e&1&&(l(0,"table",0)(1,"tr")(2,"th"),p(3,"Trained At"),c(),y(4,yx,2,1,"td",1)(5,wx,2,1,"td",1)(6,Sx,2,0,"td",1),c()()),e&2&&(g(4),f("ngIf",i.completedAt),g(),f("ngIf",!i.completedAt&&i.startedAt),g(),f("ngIf",!i.completedAt&&!i.startedAt))},dependencies:[N],styles:[".trained-at[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin:4px 0}.trained-at[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;font-size:14px;font-weight:500;color:#333;padding:4px 16px;width:200px}.trained-at[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:left;font-size:14px;color:#666;padding:4px 16px}"],changeDetection:0})}}return n})();var Mg=(()=>{class n{constructor(){this.createdBy=null}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=A({type:n,selectors:[["app-trained-by"]],inputs:{createdBy:"createdBy"},standalone:!1,decls:6,vars:1,consts:[[1,"trained-by"]],template:function(e,i){e&1&&(l(0,"table",0)(1,"tr")(2,"th"),p(3,"Trained By"),c(),l(4,"td"),p(5),c()()()),e&2&&(g(5),D(i.createdBy||"Unknown"))},styles:[".trained-by[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin:4px 0}.trained-by[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;font-size:14px;font-weight:500;color:#333;padding:4px 16px;width:200px}.trained-by[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:left;font-size:14px;color:#666;padding:4px 16px}"],changeDetection:0})}}return n})();var bg=(()=>{class n{constructor(){this.epochs=null,this.modelSize=null}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=A({type:n,selectors:[["app-hyperparameters"]],inputs:{epochs:"epochs",modelSize:"modelSize"},standalone:!1,decls:15,vars:2,consts:[[1,"hyperparameters"],["rowspan","2"],[1,"param-label"],[1,"param-value"]],template:function(e,i){if(e&1&&(l(0,"table",0)(1,"tr")(2,"th",1),p(3,"Hyperparameter"),c(),l(4,"td")(5,"span",2),p(6,"Epoch "),c(),l(7,"span",3),p(8),c()()(),l(9,"tr")(10,"td")(11,"span",2),p(12,"Model size "),c(),l(13,"span",3),p(14),c()()()()),e&2){let a,r;g(8),D((a=i.epochs)!==null&&a!==void 0?a:"--"),g(6),D((r=i.modelSize)!==null&&r!==void 0?r:"--")}},styles:[".hyperparameters[_ngcontent-%COMP%]{width:100%;border-collapse:collapse;margin:4px 0}.hyperparameters[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{text-align:left;font-size:14px;font-weight:500;color:#333;padding:4px 16px;width:200px;vertical-align:top}.hyperparameters[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{text-align:left;font-size:14px;padding:4px 16px}.param-label[_ngcontent-%COMP%]{color:#666;margin-right:8px}.param-value[_ngcontent-%COMP%]{color:#333}"],changeDetection:0})}}return n})();function Dx(n,o){n&1&&(l(0,"div",4),k(1,"mat-spinner",5),l(2,"p"),p(3,"Loading training information..."),c()())}function Ex(n,o){if(n&1&&(vt(0),l(1,"div",8),k(2,"app-loss-chart",9),z(3,"async"),k(4,"app-validation-chart",9),z(5,"async"),c(),l(6,"div",10),k(7,"app-trained-from",11)(8,"app-split-distribution",12),z(9,"async"),k(10,"app-trained-at",13)(11,"app-trained-by",14)(12,"app-hyperparameters",15),c(),Ot()),n&2){let t,e=o.ngIf,i=C(2);g(2),f("chartData",V(3,10,i.lossChartData$)),g(2),f("chartData",V(5,12,i.validationChartData$)),g(3),f("transformParam",e.transformParam),g(),f("trainingRecord",e)("totalImageCount",(t=(t=V(9,14,i.modelData$))==null?null:t.imageCount)!==null&&t!==void 0?t:0),g(2),f("startedAt",e.startedAt)("completedAt",e.completedAt),g(),f("createdBy",e.createdBy),g(),f("epochs",e.epochs)("modelSize",e.modelSize)}}function jx(n,o){if(n&1&&(l(0,"div",6),y(1,Ex,13,16,"ng-container",7),z(2,"async"),c()),n&2){let t=C();g(),f("ngIf",V(2,1,t.trainingRecord$))}}function Fx(n,o){n&1&&(l(0,"div",16)(1,"mat-icon"),p(2,"info"),c(),l(3,"p"),p(4,"Training information unavailable"),c()())}var Pg=(()=>{class n{constructor(t){this.store=t,this.modelData$=this.store.select(Pi),this.trainingRecord$=this.store.select(Uc),this.lossChartData$=this.store.select(Wc),this.validationChartData$=this.store.select(Gc),this.isLoadingChartData$=this.store.select(qc)}ngOnInit(){}static{this.\u0275fac=function(e){return new(e||n)(T(St))}}static{this.\u0275cmp=A({type:n,selectors:[["app-training-information-tab"]],standalone:!1,decls:9,vars:13,consts:[[1,"training-information-tab"],["class","loading-state",4,"ngIf"],["class","content-loaded",4,"ngIf"],["class","no-data",4,"ngIf"],[1,"loading-state"],["diameter","50"],[1,"content-loaded"],[4,"ngIf"],[1,"charts-section"],[3,"chartData"],[1,"info-sections"],[3,"transformParam"],[3,"trainingRecord","totalImageCount"],[3,"startedAt","completedAt"],[3,"createdBy"],[3,"epochs","modelSize"],[1,"no-data"]],template:function(e,i){e&1&&(l(0,"div",0),y(1,Dx,4,0,"div",1),z(2,"async"),y(3,jx,3,3,"div",2),z(4,"async"),z(5,"async"),y(6,Fx,5,0,"div",3),z(7,"async"),z(8,"async"),c()),e&2&&(g(),f("ngIf",V(2,3,i.isLoadingChartData$)),g(2),f("ngIf",V(4,5,i.trainingRecord$)&&!V(5,7,i.isLoadingChartData$)),g(3),f("ngIf",!V(7,9,i.trainingRecord$)&&!V(8,11,i.isLoadingChartData$)))},dependencies:[N,W,nt,hg,fg,ug,Cg,xg,Mg,bg,Vt],styles:[".training-information-tab[_ngcontent-%COMP%]{padding:24px;background-color:#fff;min-height:100%}.content-loaded[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}.charts-section[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:24px;margin-bottom:32px}.chart-container[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:8px;padding:20px;background-color:#fafafa;box-shadow:0 1px 3px #0000000d}.chart-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;font-size:16px;font-weight:500;color:#333}.chart-loading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;height:200px}.info-sections[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.placeholder-text[_ngcontent-%COMP%]{color:#666;font-size:14px;font-style:italic;text-align:center;padding:40px 20px}.no-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:300px;gap:16px;color:#999}.no-data[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;opacity:.5}.no-data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;margin:0}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:400px;gap:16px}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:14px;margin:0}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 1024px){.charts-section[_ngcontent-%COMP%]{grid-template-columns:1fr}}@media (max-width: 768px){.training-information-tab[_ngcontent-%COMP%]{padding:16px}.charts-section[_ngcontent-%COMP%]{gap:16px;margin-bottom:24px}.info-sections[_ngcontent-%COMP%]{gap:12px}}"],changeDetection:0})}}return n})();var vg=(()=>{class n{constructor(t){this.cdr=t,this.value=.5,this.min=0,this.max=.99,this.step=.01,this.disabled=!1,this.valueChange=new H}onSliderChange(t){isNaN(t)||(this.value=t,this.valueChange.emit(this.value),this.cdr.markForCheck())}onSliderInput(t){let e=t.target,i=parseFloat(e.value);isNaN(i)||(this.value=i,this.valueChange.emit(this.value),this.cdr.markForCheck())}onInputChange(t){let e=t.target,i=parseFloat(e.value);!isNaN(i)&&i>=this.min&&i<=this.max&&(this.value=i,this.valueChange.emit(this.value),this.cdr.markForCheck())}formatValue(t){return t.toFixed(2)}formatLabel(t){return this.formatValue(t)}getMarkerPosition(){return this.originalThreshold===void 0?"0%":`calc(8px + (100% - 16px) * ${(this.originalThreshold-this.min)/(this.max-this.min)*100/100})`}static{this.\u0275fac=function(e){return new(e||n)(T(ge))}}static{this.\u0275cmp=A({type:n,selectors:[["app-threshold-slider"]],inputs:{value:"value",min:"min",max:"max",step:"step",originalThreshold:"originalThreshold",disabled:"disabled"},outputs:{valueChange:"valueChange"},standalone:!1,decls:7,vars:11,consts:[[1,"threshold-slider-container"],[1,"threshold-inputs"],[1,"threshold-slider",3,"min","max","step","disabled","displayWith"],["matSliderThumb","",3,"input","valueChange","value"],["type","number","data-testid","threshold-input",1,"threshold-input",3,"input","value","min","max","step","disabled"]],template:function(e,i){e&1&&(l(0,"div",0)(1,"label"),p(2,"Confidence Threshold"),c(),l(3,"div",1)(4,"mat-slider",2)(5,"input",3),P("input",function(r){return i.onSliderInput(r)})("valueChange",function(r){return i.onSliderChange(r)}),c()(),l(6,"input",4),P("input",function(r){return i.onInputChange(r)}),c()()()),e&2&&(g(4),f("min",i.min)("max",i.max)("step",i.step)("disabled",i.disabled)("displayWith",i.formatLabel.bind(i)),g(),f("value",i.value),g(),f("value",i.formatValue(i.value))("min",i.min)("max",i.max)("step",i.step)("disabled",i.disabled))},dependencies:[oa,aa],styles:[".threshold-slider-container[_ngcontent-%COMP%]{position:relative}.threshold-slider-container[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:500;margin-bottom:8px;color:#333}.threshold-slider-container[_ngcontent-%COMP%]   .threshold-inputs[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.threshold-slider-container[_ngcontent-%COMP%]   .threshold-inputs[_ngcontent-%COMP%]   .threshold-slider[_ngcontent-%COMP%]{flex:1;min-width:0}.threshold-slider-container[_ngcontent-%COMP%]   .threshold-inputs[_ngcontent-%COMP%]   .threshold-input[_ngcontent-%COMP%]{width:80px;flex-shrink:0;padding:6px 8px;border:1px solid #ccc;border-radius:4px;font-size:14px;text-align:center}.threshold-slider-container[_ngcontent-%COMP%]   .threshold-inputs[_ngcontent-%COMP%]   .threshold-input[_ngcontent-%COMP%]::-webkit-outer-spin-button, .threshold-slider-container[_ngcontent-%COMP%]   .threshold-inputs[_ngcontent-%COMP%]   .threshold-input[_ngcontent-%COMP%]::-webkit-inner-spin-button{-webkit-appearance:none;margin:0}.threshold-slider-container[_ngcontent-%COMP%]   .threshold-inputs[_ngcontent-%COMP%]   .threshold-input[type=number][_ngcontent-%COMP%]{-moz-appearance:textfield}.threshold-slider-container[_ngcontent-%COMP%]   .threshold-inputs[_ngcontent-%COMP%]   .threshold-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#1976d2}.threshold-slider-container[_ngcontent-%COMP%]   .threshold-inputs[_ngcontent-%COMP%]   .threshold-input[_ngcontent-%COMP%]:disabled{background-color:#f5f5f5;cursor:not-allowed}.threshold-slider-container[_ngcontent-%COMP%]   .original-threshold-marker[_ngcontent-%COMP%]{position:absolute;top:30px;left:var(--position, 50%);pointer-events:none;z-index:1;display:flex;flex-direction:column;align-items:center;transform:translate(-50%)}.threshold-slider-container[_ngcontent-%COMP%]   .original-threshold-marker[_ngcontent-%COMP%]   .marker-line[_ngcontent-%COMP%]{width:2px;height:20px;background-color:#ff9800}.threshold-slider-container[_ngcontent-%COMP%]   .original-threshold-marker[_ngcontent-%COMP%]   .marker-label[_ngcontent-%COMP%]{font-size:10px;color:#ff9800;font-weight:600;text-align:center;margin-top:2px;white-space:nowrap}@media (max-width: 600px){.threshold-slider-container[_ngcontent-%COMP%]   .threshold-inputs[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.threshold-slider-container[_ngcontent-%COMP%]   .threshold-inputs[_ngcontent-%COMP%]   .threshold-input[_ngcontent-%COMP%]{width:100%}}"],changeDetection:0})}}return n})();function Vx(n,o){n&1&&(l(0,"div",3),k(1,"mat-spinner",4),l(2,"p"),p(3,"\u91CD\u65B0\u8A08\u7B97\u4E2D..."),c()())}function Lx(n,o){if(n&1&&(l(0,"div",28)(1,"span",29),p(2),c()()),n&2){let t=o.$implicit;f("title",t),g(2),D(t)}}function Rx(n,o){if(n&1&&(l(0,"div",32),p(1),c()),n&2){let t=o.$implicit,e=o.index,i=C().index,a=C(2);K("background-color",a.getCellColor(t,i===e))("color",a.getTextColor(t)),$("diagonal",i===e)("clickable",t>0),f("title","GT: "+a.data.classNames[i]+", Pred: "+a.data.classNames[e]+", Count: "+t),g(),E(" ",a.formatCount(t,i,e)," ")}}function Bx(n,o){if(n&1&&(l(0,"div",30),y(1,Rx,2,10,"div",31),c()),n&2){let t=o.$implicit;g(),f("ngForOf",t)}}function Nx(n,o){if(n&1&&(l(0,"div",33),p(1),c()),n&2){let t=o.$implicit,e=C(2);g(),E(" ",e.formatPercentage(t)," ")}}function $x(n,o){if(n&1&&(l(0,"div",34)(1,"span",29),p(2),c()()),n&2){let t=o.$implicit;f("title",t),g(2),D(t)}}function Ux(n,o){if(n&1&&(l(0,"div",35),p(1),c()),n&2){let t=o.$implicit,e=C(2);g(),E(" ",e.formatPercentage(t)," ")}}function Hx(n,o){n&1&&(l(0,"div",36)(1,"mat-icon"),p(2,"info"),c(),l(3,"p"),p(4,"\u7121\u6DF7\u6DC6\u77E9\u9663\u8CC7\u6599"),c()())}function Wx(n,o){if(n&1&&(l(0,"div",5)(1,"div",6)(2,"h3"),p(3,"Confusion Matrix"),c()(),l(4,"div",7)(5,"div",8)(6,"div",9)(7,"div",10),p(8,"Ground truth"),c(),y(9,Lx,3,2,"div",11),l(10,"div",12),p(11,"Precision"),c()(),l(12,"div",13),k(13,"div",14),y(14,Bx,2,1,"div",15),l(15,"div",16)(16,"div",17),y(17,Nx,2,1,"div",18),c(),l(18,"div",19),y(19,$x,3,2,"div",20),c()()(),l(20,"div",21)(21,"div",22)(22,"div",23),p(23,"Recall"),c()(),y(24,Ux,2,1,"div",24),k(25,"div",25),l(26,"div",26),p(27,"Prediction"),c()()()(),y(28,Hx,5,0,"div",27),c()),n&2){let t=C();g(9),f("ngForOf",t.data.classNames),g(5),f("ngForOf",t.data.matrix),g(3),f("ngForOf",t.data.precisionByClass),g(2),f("ngForOf",t.data.predictionClassNames),g(5),f("ngForOf",t.data.recallByClass),g(4),f("ngIf",!t.loading&&!t.data)}}var Og=(()=>{class n{constructor(){this.loading=!1,this.maxCount=0}ngOnChanges(t){t.data&&this.data&&(console.log("[Dynamic Confusion Matrix] Data changed:",this.data),console.log("[Dynamic Confusion Matrix] Class Names:",this.data.classNames),console.log("[Dynamic Confusion Matrix] Matrix:",this.data.matrix),this.calculateMaxCount())}calculateMaxCount(){if(!this.data||!this.data.matrix){this.maxCount=0,console.log("[Dynamic Confusion Matrix] No data or matrix, maxCount set to 0");return}this.maxCount=0;for(let t of this.data.matrix)for(let e of t)e>this.maxCount&&(this.maxCount=e);console.log("[Dynamic Confusion Matrix] Max count calculated:",this.maxCount)}getCellColor(t,e=!1){if(t===0||this.maxCount===0)return"#ffffff";let i=Math.min(t/this.maxCount,1),a=Math.round(255-i*222),r=Math.round(255-i*105);return`rgb(${a}, ${r}, 243)`}getTextColor(t){return t===0||this.maxCount===0?"#999999":Math.min(t/this.maxCount,1)>.5?"#ffffff":"#999999"}formatPercentage(t){return t==null||isNaN(t)?"--":t.toFixed(1)+"%"}formatCount(t,e,i){if(t==null)return"--";if(t===0){let a=this.data&&e===this.data.matrix.length-1,r=this.data&&i===this.data.matrix[0].length-1;return a&&r?"--":"0"}return t.toString()}getClassName(t,e=15){return t?t.length<=e?t:t.substring(0,e-3)+"...":"--"}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=A({type:n,selectors:[["app-dynamic-confusion-matrix"]],inputs:{data:"data",loading:"loading"},standalone:!1,features:[oe],decls:3,vars:2,consts:[[1,"confusion-matrix-container"],["class","loading-overlay",4,"ngIf"],["class","matrix-section",4,"ngIf"],[1,"loading-overlay"],["diameter","40"],[1,"matrix-section"],[1,"matrix-header"],[1,"confusion-matrix-grid"],[1,"main-container"],[1,"left-section"],[1,"ground-truth-label"],["class","gt-class-label",3,"title",4,"ngFor","ngForOf"],[1,"precision-label"],[1,"middle-section"],[1,"top-empty"],["class","matrix-cells-row",4,"ngFor","ngForOf"],[1,"bottom-row"],[1,"precision-row"],["class","precision-cell",4,"ngFor","ngForOf"],[1,"prediction-class-labels"],["class","prediction-class-label",3,"title",4,"ngFor","ngForOf"],[1,"right-section"],[1,"recall-header"],[1,"recall-label"],["class","recall-value-row",4,"ngFor","ngForOf"],[1,"right-empty"],[1,"prediction-label-bottom"],["class","no-data",4,"ngIf"],[1,"gt-class-label",3,"title"],[1,"class-name"],[1,"matrix-cells-row"],["class","matrix-cell",3,"diagonal","clickable","background-color","color","title",4,"ngFor","ngForOf"],[1,"matrix-cell",3,"title"],[1,"precision-cell"],[1,"prediction-class-label",3,"title"],[1,"recall-value-row"],[1,"no-data"]],template:function(e,i){e&1&&(l(0,"div",0),y(1,Vx,4,0,"div",1)(2,Wx,29,6,"div",2),c()),e&2&&(g(),f("ngIf",i.loading),g(),f("ngIf",!i.loading&&i.data))},dependencies:[Q,N,W,nt],styles:[".confusion-matrix-container[_ngcontent-%COMP%]{position:relative;width:100%;min-height:216px}.confusion-matrix-container[_ngcontent-%COMP%]   .loading-overlay[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:216px;gap:16px}.confusion-matrix-container[_ngcontent-%COMP%]   .loading-overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:14px;margin:0}.confusion-matrix-container[_ngcontent-%COMP%]   .matrix-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;flex-shrink:0}.confusion-matrix-container[_ngcontent-%COMP%]   .matrix-header[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:40px;width:100%}.confusion-matrix-container[_ngcontent-%COMP%]   .matrix-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:500;color:#333;line-height:40px;text-align:center}.confusion-matrix-container[_ngcontent-%COMP%]   .confusion-matrix-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:0;align-items:center;justify-content:center}.confusion-matrix-container[_ngcontent-%COMP%]   .main-container[_ngcontent-%COMP%]{display:flex;max-width:50%;gap:0;transform:scale(.8);transform-origin:top center}.confusion-matrix-container[_ngcontent-%COMP%]   .left-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0}.confusion-matrix-container[_ngcontent-%COMP%]   .ground-truth-label[_ngcontent-%COMP%]{padding:8px 12px;font-size:12px;font-weight:500;color:#666;display:flex;align-items:center;justify-content:flex-start;min-height:40px}.confusion-matrix-container[_ngcontent-%COMP%]   .gt-class-label[_ngcontent-%COMP%]{min-width:80px;max-width:100px;padding:6px 8px;display:flex;align-items:center;justify-content:flex-end;font-size:13px;font-weight:600;color:#333;background-color:transparent;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;min-height:40px}.confusion-matrix-container[_ngcontent-%COMP%]   .gt-class-label[_ngcontent-%COMP%]   .class-name[_ngcontent-%COMP%]{display:block}.confusion-matrix-container[_ngcontent-%COMP%]   .precision-label[_ngcontent-%COMP%]{padding:4px 12px;font-size:12px;font-weight:500;color:#666;display:flex;align-items:center;justify-content:flex-start;background-color:#f5f5f5;min-height:32px}.confusion-matrix-container[_ngcontent-%COMP%]   .middle-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0;flex:1}.confusion-matrix-container[_ngcontent-%COMP%]   .top-empty[_ngcontent-%COMP%]{min-height:40px}.confusion-matrix-container[_ngcontent-%COMP%]   .matrix-cells-row[_ngcontent-%COMP%]{display:flex;gap:2px;min-height:40px}.confusion-matrix-container[_ngcontent-%COMP%]   .matrix-cell[_ngcontent-%COMP%]{flex:1;min-width:65px;max-width:104px;display:flex;align-items:center;justify-content:center;font-size:13px;font-weight:600;border:none;transition:all .2s ease}.confusion-matrix-container[_ngcontent-%COMP%]   .matrix-cell.clickable[_ngcontent-%COMP%]{cursor:pointer}.confusion-matrix-container[_ngcontent-%COMP%]   .matrix-cell.clickable[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 2px 8px #00000026;z-index:1}.confusion-matrix-container[_ngcontent-%COMP%]   .matrix-cell[_ngcontent-%COMP%]:not(.clickable){cursor:default;opacity:.6}.confusion-matrix-container[_ngcontent-%COMP%]   .bottom-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px;min-height:80px}.confusion-matrix-container[_ngcontent-%COMP%]   .precision-row[_ngcontent-%COMP%]{display:flex;gap:2px;min-height:40px;align-items:center;margin-top:0;background-color:#f5f5f5;padding:4px 0}.confusion-matrix-container[_ngcontent-%COMP%]   .precision-cell[_ngcontent-%COMP%]{flex:1;min-width:65px;max-width:104px;text-align:center;font-size:13px;font-weight:600;color:#333;display:flex;align-items:center;justify-content:center;background-color:#f5f5f5;min-height:40px;padding:4px 2px}.confusion-matrix-container[_ngcontent-%COMP%]   .precision-cell[_ngcontent-%COMP%]:empty{background-color:transparent}.confusion-matrix-container[_ngcontent-%COMP%]   .prediction-class-labels[_ngcontent-%COMP%]{display:flex;gap:2px;align-items:flex-end}.confusion-matrix-container[_ngcontent-%COMP%]   .prediction-class-label[_ngcontent-%COMP%]{flex:1;min-width:65px;max-width:104px;padding:6px 4px;text-align:center;font-size:13px;font-weight:600;color:#333;overflow:visible;display:flex;flex-direction:column;align-items:center;justify-content:flex-end;height:40px;position:relative}.confusion-matrix-container[_ngcontent-%COMP%]   .prediction-class-label[_ngcontent-%COMP%]   .class-name[_ngcontent-%COMP%]{display:block;transform:rotate(-45deg);transform-origin:center;white-space:nowrap}.confusion-matrix-container[_ngcontent-%COMP%]   .right-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0;min-width:60px}.confusion-matrix-container[_ngcontent-%COMP%]   .recall-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:40px;background-color:#f5f5f5}.confusion-matrix-container[_ngcontent-%COMP%]   .recall-label[_ngcontent-%COMP%]{padding:8px;font-size:12px;font-weight:500;color:#666;text-align:center;line-height:1.2}.confusion-matrix-container[_ngcontent-%COMP%]   .recall-value-row[_ngcontent-%COMP%]{padding:0 8px;font-size:13px;font-weight:600;color:#333;text-align:center;min-height:40px;display:flex;align-items:center;justify-content:center;background-color:#f5f5f5}.confusion-matrix-container[_ngcontent-%COMP%]   .recall-value-row[_ngcontent-%COMP%]:empty, .confusion-matrix-container[_ngcontent-%COMP%]   .recall-value-row[_ngcontent-%COMP%]:has(:empty){background-color:transparent}.confusion-matrix-container[_ngcontent-%COMP%]   .right-empty[_ngcontent-%COMP%]{flex:1}.confusion-matrix-container[_ngcontent-%COMP%]   .prediction-label-bottom[_ngcontent-%COMP%]{padding:8px 4px;font-size:12px;font-weight:500;color:#666;display:flex;align-items:flex-end;justify-content:center;min-height:60px}.confusion-matrix-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:216px;gap:8px}.confusion-matrix-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#999}.confusion-matrix-container[_ngcontent-%COMP%]   .no-data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#666;font-size:14px}@media (max-width: 1024px){.confusion-matrix-container[_ngcontent-%COMP%]   .matrix-cell[_ngcontent-%COMP%]{min-width:65px;font-size:12px}.confusion-matrix-container[_ngcontent-%COMP%]   .gt-class-label[_ngcontent-%COMP%]{min-width:80px;font-size:12px}}@media (max-width: 768px){.confusion-matrix-container[_ngcontent-%COMP%]   .confusion-matrix-grid[_ngcontent-%COMP%]{padding:0}.confusion-matrix-container[_ngcontent-%COMP%]   .matrix-cell[_ngcontent-%COMP%]{min-width:58.5px;font-size:11px}}"],changeDetection:0})}}return n})();function Yx(n,o){n&1&&(l(0,"div",7),k(1,"mat-spinner",8),l(2,"p"),p(3,"Loading prediction data..."),c()())}function qx(n,o){if(n&1){let t=j();l(0,"div",9)(1,"div",10)(2,"app-threshold-slider",11),P("valueChange",function(i){M(t);let a=C();return b(a.onThresholdChange(i))}),c()(),l(3,"div",12),k(4,"app-dynamic-confusion-matrix",13),c()()}if(n&2){let t=C();g(2),f("value",t.currentThreshold)("min",0)("max",.99)("step",.01)("originalThreshold",t.originalThreshold)("disabled",t.recalculating||t.generating),g(2),f("data",t.confusionMatrixData)("loading",t.recalculating)}}function Xx(n,o){n&1&&k(0,"mat-spinner",17)}function Zx(n,o){if(n&1&&(l(0,"span"),p(1),c()),n&2){let t=C(2);g(),D(t.generateButtonText)}}function Qx(n,o){n&1&&(l(0,"span"),p(1,"Generating..."),c())}function Kx(n,o){if(n&1){let t=j();l(0,"button",14),P("click",function(){M(t);let i=C();return b(i.onGenerate())}),y(1,Xx,1,0,"mat-spinner",15)(2,Zx,2,1,"span",16)(3,Qx,2,0,"span",16),c()}if(n&2){let t=C();f("disabled",!t.showGenerateButton||t.generating),g(),f("ngIf",t.generating),g(),f("ngIf",!t.generating),g(),f("ngIf",t.generating)}}var yg=(()=>{class n{constructor(t,e,i,a){this.dialogRef=t,this.data=e,this.modelDetailService=i,this.snackBar=a,this.loading=!0,this.recalculating=!1,this.generating=!1,this.allPredictionLabelsBySet={train:[],dev:[],test:[]},this.allGroundTruthLabelsBySet={train:[],dev:[],test:[]},this.thresholdChange$=new Ct,this.destroy$=new Ct,this.currentThreshold=e.currentThreshold,this.originalThreshold=e.currentThreshold}ngOnInit(){this.loadData(),this.thresholdChange$.pipe(ri(300),q(this.destroy$)).subscribe(t=>{this.recalculateConfusionMatrix(t)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadData(){this.loading=!0,console.log("[Adjust Threshold] Loading data for all evaluation sets, model:",this.data.modelId),Hs({trainPredictions:this.modelDetailService.getPredictionLabels(this.data.modelId,"train"),trainGroundTruth:this.modelDetailService.getGroundTruthLabels(this.data.modelId,"train"),devPredictions:this.modelDetailService.getPredictionLabels(this.data.modelId,"dev"),devGroundTruth:this.modelDetailService.getGroundTruthLabels(this.data.modelId,"dev"),testPredictions:this.modelDetailService.getPredictionLabels(this.data.modelId,"test"),testGroundTruth:this.modelDetailService.getGroundTruthLabels(this.data.modelId,"test")}).subscribe({next:t=>{console.log("[Adjust Threshold] All data loaded successfully"),console.log("[Adjust Threshold] Train Predictions:",t.trainPredictions.length),console.log("[Adjust Threshold] Train Ground Truth:",t.trainGroundTruth.length),console.log("[Adjust Threshold] Dev Predictions:",t.devPredictions.length),console.log("[Adjust Threshold] Dev Ground Truth:",t.devGroundTruth.length),console.log("[Adjust Threshold] Test Predictions:",t.testPredictions.length),console.log("[Adjust Threshold] Test Ground Truth:",t.testGroundTruth.length),this.allPredictionLabelsBySet={train:t.trainPredictions,dev:t.devPredictions,test:t.testPredictions},this.allGroundTruthLabelsBySet={train:t.trainGroundTruth,dev:t.devGroundTruth,test:t.testGroundTruth},this.loading=!1,this.recalculateConfusionMatrix(this.currentThreshold)},error:t=>{console.error("[Adjust Threshold] Error loading labels:",t),this.loading=!1,this.snackBar.open("\u8F09\u5165\u8CC7\u6599\u5931\u6557","\u95DC\u9589",{duration:3e3})}})}onThresholdChange(t){this.currentThreshold=t,this.thresholdChange$.next(t)}recalculateConfusionMatrix(t){this.recalculating=!0,console.log("[Adjust Threshold] Recalculating confusion matrix with threshold:",t),console.log("[Adjust Threshold] Current evaluation set:",this.data.evaluationSet);try{let e=this.allPredictionLabelsBySet[this.data.evaluationSet],i=this.allGroundTruthLabelsBySet[this.data.evaluationSet];console.log("[Adjust Threshold] Current Prediction Labels count:",e.length),console.log("[Adjust Threshold] Current Ground Truth Labels count:",i.length);let a=this.filterPredictionsByThreshold(e,t);console.log("[Adjust Threshold] Filtered Predictions (after threshold):",a),console.log("[Adjust Threshold] Filtered Predictions count:",a.length),this.confusionMatrixData=this.calculateConfusionMatrix(i,a),console.log("[Adjust Threshold] Confusion Matrix Data:",this.confusionMatrixData),this.recalculating=!1}catch(e){console.error("[Adjust Threshold] Error calculating confusion matrix:",e),this.recalculating=!1,this.snackBar.open("\u8A08\u7B97\u6DF7\u6DC6\u77E9\u9663\u5931\u6557","\u95DC\u9589",{duration:3e3})}}filterPredictionsByThreshold(t,e){let i=Math.round(e*100);return t.filter(a=>a.confidenceRate>=i)}calculateConfusionMatrix(t,e){console.log("[Adjust Threshold] calculateConfusionMatrix - Ground Truth count:",t.length),console.log("[Adjust Threshold] calculateConfusionMatrix - Prediction count:",e.length);let i=new Set,a=new Map;t.forEach(S=>{i.add(S.classId),a.set(S.classId,S.className)}),e.forEach(S=>{i.add(S.classId),a.set(S.classId,S.className)});let r=Array.from(i).sort((S,I)=>S-I),s=r.length;console.log("[Adjust Threshold] Class IDs:",r),console.log("[Adjust Threshold] Class Names Map:",a),console.log("[Adjust Threshold] Class Count:",s);let d=s+1,m=Array(d).fill(0).map(()=>Array(d).fill(0)),h=new Map;t.forEach(S=>{let I=`${S.imageId}_${S.position}`;h.set(I,S)});let u=new Map;e.forEach(S=>{let I=`${S.imageId}_${S.position}`;u.set(I,S)}),console.log("[Adjust Threshold] GT Label Map size:",h.size),console.log("[Adjust Threshold] Pred Label Map size:",u.size),h.forEach((S,I)=>{let L=u.get(I),R=r.indexOf(S.classId);if(L){let F=r.indexOf(L.classId);m[R][F]++,console.log(`[Adjust Threshold] Match found - GT: ${S.className} (${R}), Pred: ${L.className} (${F}), Position: ${S.position}`)}else m[R][s]++,console.log(`[Adjust Threshold] No prediction found for GT: ${S.className}, imageId: ${S.imageId}, position: ${S.position}`)}),u.forEach((S,I)=>{if(!h.has(I)){let L=r.indexOf(S.classId);m[s][L]++,console.log(`[Adjust Threshold] No GT found for Pred: ${S.className}, imageId: ${S.imageId}, position: ${S.position}`)}}),console.log("[Adjust Threshold] Final Matrix (with No prediction & No label):",m);let _=this.calculatePrecisionByClass(m,s),x=this.calculateRecallByClass(m,s);console.log("[Adjust Threshold] Precision by Class:",_),console.log("[Adjust Threshold] Recall by Class:",x);let v=this.calculateMicroAveragedMetrics(m,s);console.log("[Adjust Threshold] Overall Metrics:",v);let O=[...r.map(S=>a.get(S)||"Unknown"),"No label"],w=[...r.map(S=>a.get(S)||"Unknown"),"No prediction"];return{classNames:O,predictionClassNames:w,matrix:m,precisionByClass:_,recallByClass:x,overallPrecision:v.precision,overallRecall:v.recall,overallF1:v.f1}}groupLabelsByImage(t,e){let i={};return t.forEach(a=>{i[a.imageId]||(i[a.imageId]={groundTruth:[],predictions:[]}),i[a.imageId].groundTruth.push(a)}),e.forEach(a=>{i[a.imageId]||(i[a.imageId]={groundTruth:[],predictions:[]}),i[a.imageId].predictions.push(a)}),i}calculatePrecisionByClass(t,e){let i=[];for(let a=0;a<e;a++){let r=t[a][a],s=0;for(let m=0;m<e;m++)m!==a&&(s+=t[m][a]);s+=t[e][a];let d=r+s;i.push(d>0?r/d*100:0)}return i.push(0),i}calculateRecallByClass(t,e){let i=[];for(let a=0;a<e;a++){let r=t[a][a],s=0;for(let m=0;m<e;m++)m!==a&&(s+=t[a][m]);s+=t[a][e];let d=r+s;i.push(d>0?r/d*100:0)}return i.push(0),i}calculateMicroAveragedMetrics(t,e){let i=0,a=0,r=0;console.log("[Adjust Threshold] calculateMicroAveragedMetrics - Matrix:",t),console.log("[Adjust Threshold] calculateMicroAveragedMetrics - classCount:",e);for(let h=0;h<e;h++){let u=t[h][h];i+=u;let _=0;for(let w=0;w<e;w++)w!==h&&(_+=t[w][h]);let x=t[e][h];_+=x,a+=_;let v=0;for(let w=0;w<e;w++)w!==h&&(v+=t[h][w]);let O=t[h][e];v+=O,r+=v,console.log(`[Adjust Threshold] Class ${h} - TP: ${u}, FP: ${_} (from No label: ${x}), FN: ${v} (from No pred: ${O})`)}console.log(`[Adjust Threshold] Total - TP: ${i}, FP: ${a}, FN: ${r}`);let s=i+a>0?i/(i+a)*100:0,d=i+r>0?i/(i+r)*100:0,m=s+d>0?2*s*d/(s+d):0;return console.log(`[Adjust Threshold] Metrics - Precision: ${s.toFixed(2)}%, Recall: ${d.toFixed(2)}%, F1: ${m.toFixed(2)}%`),{precision:s,recall:d,f1:m}}getRecalculatedMetrics(){console.log("[Adjust Threshold] Calculating metrics for all evaluation sets with threshold:",this.currentThreshold);let t=this.calculateMetricsForEvaluationSet("train");console.log("[Adjust Threshold] Train metrics:",t);let e=this.calculateMetricsForEvaluationSet("dev");console.log("[Adjust Threshold] Dev metrics:",e);let i=this.calculateMetricsForEvaluationSet("test");return console.log("[Adjust Threshold] Test metrics:",i),{trainF1:t.f1,trainPrecision:t.precision,trainRecall:t.recall,devF1:e.f1,devPrecision:e.precision,devRecall:e.recall,testF1:i.f1,testPrecision:i.precision,testRecall:i.recall}}calculateMetricsForEvaluationSet(t){let e=this.allPredictionLabelsBySet[t],i=this.allGroundTruthLabelsBySet[t],a=this.filterPredictionsByThreshold(e,this.currentThreshold),r=this.calculateConfusionMatrix(i,a);return{f1:r.overallF1,precision:r.overallPrecision,recall:r.overallRecall}}get showGenerateButton(){return this.currentThreshold!==this.originalThreshold&&!this.loading&&!this.generating}get generateButtonText(){return`Generate a New Report at ${this.currentThreshold.toFixed(2)}`}onCancel(){this.dialogRef.close({success:!1})}onGenerate(){if(this.generating)return;this.generating=!0;let t=this.snackBar.open("Generating new report, please wait...","",{duration:0});try{let e={sourceModelId:this.data.modelId,newThreshold:this.currentThreshold,recalculatedMetrics:this.getRecalculatedMetrics()};this.modelDetailService.generateModelWithNewThreshold(this.data.modelId,e).subscribe({next:i=>{this.generating=!1,t.dismiss(),this.snackBar.open(`Successfully generated new report (Model ID: ${i.newModelId})`,"Close",{duration:3e3}),this.dialogRef.close({success:!0,newModelId:i.newModelId})},error:i=>{console.error("Error generating model:",i),this.generating=!1,t.dismiss(),this.snackBar.open("Failed to generate new report: "+(i.message||"Unknown error"),"Close",{duration:5e3})}})}catch(e){console.error("Error preparing request:",e),this.generating=!1,t.dismiss(),this.snackBar.open("Failed to prepare request: "+e.message,"Close",{duration:5e3})}}static{this.\u0275fac=function(e){return new(e||n)(T(pt),T(mt),T(Jc),T($t))}}static{this.\u0275cmp=A({type:n,selectors:[["app-adjust-threshold-dialog"]],standalone:!1,decls:10,vars:4,consts:[[1,"adjust-threshold-dialog"],["mat-dialog-title",""],["class","loading-container",4,"ngIf"],["class","content-container",4,"ngIf"],["align","end"],["mat-button","",3,"click","disabled"],["mat-raised-button","","color","primary",3,"disabled","click",4,"ngIf"],[1,"loading-container"],["diameter","50"],[1,"content-container"],[1,"threshold-section"],[3,"valueChange","value","min","max","step","originalThreshold","disabled"],[1,"confusion-matrix-section"],[3,"data","loading"],["mat-raised-button","","color","primary",3,"click","disabled"],["diameter","20",4,"ngIf"],[4,"ngIf"],["diameter","20"]],template:function(e,i){e&1&&(l(0,"div",0)(1,"h2",1),p(2,"Adjust Confidence Threshold"),c(),l(3,"mat-dialog-content"),y(4,Yx,4,0,"div",2)(5,qx,5,8,"div",3),c(),l(6,"mat-dialog-actions",4)(7,"button",5),P("click",function(){return i.onCancel()}),p(8," Cancel "),c(),y(9,Kx,4,4,"button",6),c()()),e&2&&(g(4),f("ngIf",i.loading),g(),f("ngIf",!i.loading),g(2),f("disabled",i.generating),g(2),f("ngIf",i.showGenerateButton))},dependencies:[N,Z,nt,xt,yt,ht,vg,Og],styles:[".adjust-threshold-dialog[_ngcontent-%COMP%]{min-width:600px;max-width:800px}.adjust-threshold-dialog[_ngcontent-%COMP%]   h2[mat-dialog-title][_ngcontent-%COMP%]{margin:0;padding:16px 24px;font-size:20px;font-weight:500;color:#333;border-bottom:1px solid #e0e0e0}.adjust-threshold-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]{padding:24px;min-height:500px;max-height:80vh;overflow:hidden}.adjust-threshold-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:300px}.adjust-threshold-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-bottom:16px}.adjust-threshold-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:14px}.adjust-threshold-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:24px;height:100%}.adjust-threshold-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .threshold-section[_ngcontent-%COMP%]{padding:16px;background-color:#f5f5f5;border-radius:4px;border-bottom:1px solid #e0e0e0;flex-shrink:0}.adjust-threshold-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .confusion-matrix-section[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden;min-height:0;padding-right:8px}.adjust-threshold-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .content-container[_ngcontent-%COMP%]   .confusion-matrix-section[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 16px;font-size:16px;font-weight:500;color:#333}.adjust-threshold-dialog[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]{padding:16px 24px;border-top:1px solid #e0e0e0;margin:0}.adjust-threshold-dialog[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:8px}.adjust-threshold-dialog[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-child{margin-left:0}.adjust-threshold-dialog[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{display:inline-block;margin-right:8px;vertical-align:middle}@media (max-width: 768px){.adjust-threshold-dialog[_ngcontent-%COMP%]{min-width:100%;max-width:100%}}"]})}}return n})();var $i=(()=>{class n{constructor(t,e){this.http=t,this.configuration=e,this.actionUrl=this.configuration.ServerWithApiUrl+"landingai/confusion-matrix/"}getConfusionMatrix(t,e){return this.http.get(`${this.actionUrl}${t}/${e}`).pipe(Oe(this.handleError))}getCellDetail(t,e,i,a){let r={gtClassId:i.toString(),predClassId:a.toString()};return this.http.get(`${this.actionUrl}${t}/${e}/cell`,{params:r}).pipe(Oe(this.handleError))}getAllImages(t,e){return this.http.get(`${this.actionUrl}${t}/${e}/all-images`).pipe(Oe(this.handleError))}handleError(t){let e="An error occurred";return t.error instanceof ErrorEvent?e=`Error: ${t.error.message}`:t.status===404?e="Model or data not found":t.status===400?e="Invalid request parameters":t.error&&t.error.message?e=t.error.message:e=`Server error: ${t.status} - ${t.statusText}`,console.error("ConfusionMatrixService Error:",e),ai(()=>new Error(e))}static{this.\u0275fac=function(e){return new(e||n)(Ht(Re),Ht(Be))}}static{this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();function Jx(n,o){if(n&1&&(l(0,"div",20)(1,"span",21),p(2),c()()),n&2){let t=o.$implicit;f("title",t.name),g(2),D(t.name)}}function tM(n,o){if(n&1){let t=j();l(0,"div",24),P("click",function(){let i=M(t).$implicit,a=C().$implicit,r=C();return b(r.onCellClick(r.getCell(a.id,i.id)))}),p(1),c()}if(n&2){let t=o.$implicit,e=C().$implicit,i=C();K("background-color",i.getCellColor(i.getCell(e.id,t.id).count))("color",i.getTextColor(i.getCell(e.id,t.id).count)),$("diagonal",i.isDiagonalCell(i.getCell(e.id,t.id)))("clickable",i.getCell(e.id,t.id).count>0),f("title","GT: "+e.name+", Pred: "+t.name+", Count: "+i.getCell(e.id,t.id).count),g(),E(" ",i.isNoLabelNoPredictionCell(i.getCell(e.id,t.id))?"--":i.getCell(e.id,t.id).count," ")}}function eM(n,o){if(n&1&&(l(0,"div",22),y(1,tM,2,10,"div",23),c()),n&2){let t=C();g(),f("ngForOf",t.matrixData.predictionClasses)}}function nM(n,o){if(n&1&&(l(0,"div",25),p(1),c()),n&2){let t=o.$implicit,e=C();g(),E(" ",e.getPrecision(t.id)," ")}}function iM(n,o){if(n&1&&(l(0,"div",26)(1,"span",21),p(2),c()()),n&2){let t=o.$implicit;f("title",t.name),g(2),D(t.name)}}function oM(n,o){if(n&1&&(l(0,"div",27),p(1),c()),n&2){let t=o.$implicit,e=C();g(),E(" ",e.getRecall(t.id)," ")}}var wg=(()=>{class n{constructor(){this.cellClick=new H}onCellClick(t){if(t.count===0)return;let e=this.matrixData.classes.find(a=>a.id===t.groundTruthClassId),i=this.matrixData.predictionClasses.find(a=>a.id===t.predictionClassId);e&&i&&this.cellClick.emit({gtClassId:t.groundTruthClassId,gtClassName:e.name,predClassId:t.predictionClassId,predClassName:i.name,count:t.count})}getCellColor(t){if(t===0)return"#ffffff";let e=this.matrixData.maxCount;if(e===0)return"#e3f2fd";let i=t/e,a={r:33,g:150,b:243},r={r:227,g:242,b:253},s=Math.round(r.r+(a.r-r.r)*i),d=Math.round(r.g+(a.g-r.g)*i),m=Math.round(r.b+(a.b-r.b)*i);return`rgb(${s}, ${d}, ${m})`}getTextColor(t){if(t===0)return"#999";let e=this.matrixData.maxCount;return t/e>.5?"#ffffff":"#333333"}getPrecision(t){if(this.matrixData.predictionClasses.find(r=>r.id===t)?.name==="No prediction")return"";let i=this.matrixData.classMetrics.find(r=>r.classId===t);return!i||i.truePositives+i.falsePositives===0?"--":`${i.precision.toFixed(1)}%`}getRecall(t){if(this.matrixData.classes.find(r=>r.id===t)?.name==="No label")return"";let i=this.matrixData.classMetrics.find(r=>r.classId===t);return!i||i.truePositives+i.falseNegatives===0?"--":`${i.recall.toFixed(1)}%`}getOverallPrecision(){if(!this.matrixData.classMetrics||this.matrixData.classMetrics.length===0)return"--";let t=0,e=0;for(let r of this.matrixData.classMetrics)t+=r.truePositives,e+=r.falsePositives;let i=t+e;return i===0?"--":`${(t/i*100).toFixed(1)}%`}getOverallRecall(){if(!this.matrixData.classMetrics||this.matrixData.classMetrics.length===0)return"--";let t=0,e=0;for(let r of this.matrixData.classMetrics)r.truePositives+r.falseNegatives>0&&(t+=r.truePositives,e+=r.falseNegatives);let i=t+e;return i===0?"--":`${(t/i*100).toFixed(1)}%`}isNoLabelNoPredictionCell(t){let e=this.matrixData.classes.find(a=>a.id===t.groundTruthClassId),i=this.matrixData.predictionClasses.find(a=>a.id===t.predictionClassId);return e?.name==="No label"&&i?.name==="No prediction"}isDiagonalCell(t){return t.isDiagonal}getCell(t,e){for(let i of this.matrixData.matrix)for(let a of i)if(a.groundTruthClassId===t&&a.predictionClassId===e)return a;return null}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=A({type:n,selectors:[["app-confusion-matrix-grid"]],inputs:{matrixData:"matrixData"},outputs:{cellClick:"cellClick"},standalone:!1,decls:24,vars:5,consts:[[1,"confusion-matrix-grid"],[1,"main-container"],[1,"left-section"],[1,"ground-truth-label"],["class","gt-class-label",3,"title",4,"ngFor","ngForOf"],[1,"precision-label"],[1,"middle-section"],[1,"top-empty"],["class","matrix-cells-row",4,"ngFor","ngForOf"],[1,"bottom-row"],[1,"precision-row"],["class","precision-cell",4,"ngFor","ngForOf"],[1,"prediction-class-labels"],["class","prediction-class-label",3,"title",4,"ngFor","ngForOf"],[1,"right-section"],[1,"recall-header"],[1,"recall-label"],["class","recall-value-row",4,"ngFor","ngForOf"],[1,"right-empty"],[1,"prediction-label-bottom"],[1,"gt-class-label",3,"title"],[1,"class-name"],[1,"matrix-cells-row"],["class","matrix-cell",3,"diagonal","clickable","background-color","color","title","click",4,"ngFor","ngForOf"],[1,"matrix-cell",3,"click","title"],[1,"precision-cell"],[1,"prediction-class-label",3,"title"],[1,"recall-value-row"]],template:function(e,i){e&1&&(l(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),p(4,"Ground truth"),c(),y(5,Jx,3,2,"div",4),l(6,"div",5),p(7,"Precision"),c()(),l(8,"div",6),k(9,"div",7),y(10,eM,2,1,"div",8),l(11,"div",9)(12,"div",10),y(13,nM,2,1,"div",11),c(),l(14,"div",12),y(15,iM,3,2,"div",13),c()()(),l(16,"div",14)(17,"div",15)(18,"div",16),p(19,"Recall"),c()(),y(20,oM,2,1,"div",17),k(21,"div",18),l(22,"div",19),p(23,"Prediction"),c()()()()),e&2&&(g(5),f("ngForOf",i.matrixData.classes),g(5),f("ngForOf",i.matrixData.classes),g(3),f("ngForOf",i.matrixData.predictionClasses),g(2),f("ngForOf",i.matrixData.predictionClasses),g(5),f("ngForOf",i.matrixData.classes))},dependencies:[Q],styles:[".confusion-matrix-grid[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;padding:0;align-items:center;justify-content:center}.main-container[_ngcontent-%COMP%]{display:flex;max-width:50%;gap:0}.left-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0}.ground-truth-label[_ngcontent-%COMP%]{padding:8px 12px;font-size:12px;font-weight:500;color:#666;display:flex;align-items:center;justify-content:flex-start;min-height:40px}.gt-class-label[_ngcontent-%COMP%]{min-width:80px;max-width:100px;padding:6px 8px;display:flex;align-items:center;justify-content:flex-end;font-size:13px;font-weight:600;color:#333;background-color:transparent;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;min-height:40px}.gt-class-label[_ngcontent-%COMP%]   .class-name[_ngcontent-%COMP%]{display:block}.precision-label[_ngcontent-%COMP%]{padding:4px 12px;font-size:12px;font-weight:500;color:#666;display:flex;align-items:center;justify-content:flex-start;background-color:#f5f5f5;min-height:32px}.middle-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0;flex:1}.top-empty[_ngcontent-%COMP%]{min-height:40px}.matrix-cells-row[_ngcontent-%COMP%]{display:flex;gap:2px;min-height:40px}.matrix-cell[_ngcontent-%COMP%]{flex:1;min-width:65px;max-width:104px;display:flex;align-items:center;justify-content:center;font-size:13px;font-weight:600;border:none;transition:all .2s ease}.matrix-cell.clickable[_ngcontent-%COMP%]{cursor:pointer}.matrix-cell.clickable[_ngcontent-%COMP%]:hover{transform:scale(1.05);box-shadow:0 2px 8px #00000026;z-index:1}.matrix-cell[_ngcontent-%COMP%]:not(.clickable){cursor:default;opacity:.6}.bottom-row[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2px;min-height:60px}.precision-row[_ngcontent-%COMP%]{display:flex;gap:2px;min-height:32px;align-items:center;margin-top:0;background-color:#f5f5f5}.precision-cell[_ngcontent-%COMP%]{flex:1;min-width:65px;max-width:104px;text-align:center;font-size:13px;font-weight:600;color:#333;display:flex;align-items:center;justify-content:center;background-color:#f5f5f5;min-height:32px}.precision-cell[_ngcontent-%COMP%]:empty{background-color:transparent}.prediction-class-labels[_ngcontent-%COMP%]{display:flex;gap:2px;align-items:flex-end}.prediction-class-label[_ngcontent-%COMP%]{flex:1;min-width:65px;max-width:104px;padding:6px 4px;text-align:center;font-size:13px;font-weight:600;color:#333;overflow:visible;display:flex;flex-direction:column;align-items:center;justify-content:flex-end;height:40px;position:relative}.prediction-class-label[_ngcontent-%COMP%]   .class-name[_ngcontent-%COMP%]{display:block;transform:rotate(-45deg);transform-origin:center;white-space:nowrap}.right-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0;min-width:60px}.recall-header[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:40px;background-color:#f5f5f5}.recall-label[_ngcontent-%COMP%]{padding:8px;font-size:12px;font-weight:500;color:#666;text-align:center;line-height:1.2}.recall-value-row[_ngcontent-%COMP%]{padding:0 8px;font-size:13px;font-weight:600;color:#333;text-align:center;min-height:40px;display:flex;align-items:center;justify-content:center;background-color:#f5f5f5}.recall-value-row[_ngcontent-%COMP%]:empty, .recall-value-row[_ngcontent-%COMP%]:has(:empty){background-color:transparent}.right-empty[_ngcontent-%COMP%]{flex:1}.prediction-label-bottom[_ngcontent-%COMP%]{padding:8px 4px;font-size:12px;font-weight:500;color:#666;display:flex;align-items:flex-end;justify-content:center;min-height:60px}@media (max-width: 1024px){.matrix-cell[_ngcontent-%COMP%]{min-width:65px;font-size:12px}.gt-class-label[_ngcontent-%COMP%]{min-width:80px;font-size:12px}}@media (max-width: 768px){.confusion-matrix-grid[_ngcontent-%COMP%]{padding:0}.matrix-cell[_ngcontent-%COMP%]{min-width:58.5px;font-size:11px}}"],changeDetection:0})}}return n})();function rM(n,o){if(n&1){let t=j();l(0,"div",6)(1,"button",7),P("click",function(){M(t);let i=C();return b(i.onClose())}),l(2,"mat-icon"),p(3,"arrow_back"),c()(),l(4,"div",8)(5,"h3"),p(6,"Cell Detail"),c(),l(7,"p",9),p(8," Ground Truth: "),l(9,"strong"),p(10),c(),p(11," \u2192 Prediction: "),l(12,"strong"),p(13),c(),p(14),c()()()}if(n&2){let t=C();g(10),D(t.cellSelection.gtClassName),g(3),D(t.cellSelection.predClassName),g(),ue(" (",t.totalCount," label pairs, ",t.images.length," unique images) ")}}function sM(n,o){n&1&&(l(0,"div",10),k(1,"mat-spinner",11),l(2,"p"),p(3,"Loading images..."),c()())}function lM(n,o){if(n&1){let t=j();l(0,"div",12)(1,"mat-icon",13),p(2,"error"),c(),l(3,"p"),p(4),c(),l(5,"button",14),P("click",function(){M(t);let i=C();return b(i.onRetry())}),p(6,"Retry"),c()()}if(n&2){let t=C();g(4),D(t.error)}}function cM(n,o){n&1&&(l(0,"div",18)(1,"mat-icon"),p(2,"image_not_supported"),c(),l(3,"p"),p(4,"No images found for this cell"),c()())}function dM(n,o){if(n&1&&(l(0,"div",34)(1,"span",35),p(2),c()()),n&2){let t=o.$implicit;K("border-color",t.classColor),g(2),D(t.className)}}function pM(n,o){if(n&1&&(l(0,"span",37),p(1),c()),n&2){let t=C().$implicit;g(),E(" ",t.confidenceRate.toFixed(2)," ")}}function mM(n,o){if(n&1&&(l(0,"div",34)(1,"span",35),p(2),c(),y(3,pM,2,1,"span",36),c()),n&2){let t=o.$implicit;K("border-color",t.classColor),g(2),D(t.className),g(),f("ngIf",t.confidenceRate)}}function gM(n,o){if(n&1){let t=j();l(0,"div",24)(1,"div",25),P("click",function(){let i=M(t).$implicit,a=C(3);return b(a.onImageClick(i))}),l(2,"div",26),k(3,"img",27),l(4,"div",28),y(5,dM,3,3,"div",29),c(),l(6,"div",30)(7,"mat-icon"),p(8,"zoom_in"),c()()(),l(9,"div",31)(10,"p",32),p(11),c()()(),l(12,"div",25),P("click",function(){let i=M(t).$implicit,a=C(3);return b(a.onImageClick(i))}),l(13,"div",26),k(14,"img",27),l(15,"div",33),y(16,mM,4,4,"div",29),c(),l(17,"div",30)(18,"mat-icon"),p(19,"zoom_in"),c()()(),l(20,"div",31)(21,"p",32),p(22),c()()()()}if(n&2){let t=o.$implicit,e=C(3);g(3),f("src",e.getImageUrl(t.imageId),ae)("alt",t.fileName),g(2),f("ngForOf",t.groundTruthLabels),g(5),f("title",t.fileName),g(),E(" ",t.fileName," "),g(3),f("src",e.getImageUrl(t.imageId),ae)("alt",t.fileName),g(2),f("ngForOf",t.predictionLabels),g(5),f("title",t.fileName),g(),E(" ",t.fileName," ")}}function hM(n,o){if(n&1&&(l(0,"div",19)(1,"div",20)(2,"div",21)(3,"mat-icon"),p(4,"label"),c(),l(5,"span"),p(6,"Ground Truth"),c()(),l(7,"div",21)(8,"mat-icon"),p(9,"psychology"),c(),l(10,"span"),p(11,"Prediction"),c()()(),l(12,"div",22),y(13,gM,23,10,"div",23),c()()),n&2){let t=C(2);g(13),f("ngForOf",t.images)}}function fM(n,o){if(n&1&&(l(0,"div",15),y(1,cM,5,0,"div",16)(2,hM,14,1,"div",17),c()),n&2){let t=C();g(),f("ngIf",t.images.length===0),g(),f("ngIf",t.images.length>0)}}function uM(n,o){if(n&1&&(l(0,"div",44)(1,"strong"),p(2,"Confidence:"),c(),p(3),c()),n&2){let t=C(2);g(3),E(" ",t.selectedImage.predictionLabels[0].confidenceRate?t.selectedImage.predictionLabels[0].confidenceRate.toFixed(1)+"%":"N/A"," ")}}function _M(n,o){if(n&1){let t=j();l(0,"div",38),P("click",function(){M(t);let i=C();return b(i.onCloseEnlargedView())}),l(1,"div",39),P("click",function(i){return M(t),b(i.stopPropagation())}),l(2,"button",40),P("click",function(){M(t);let i=C();return b(i.onCloseEnlargedView())}),l(3,"mat-icon"),p(4,"close"),c()(),k(5,"img",41),l(6,"div",42)(7,"h4"),p(8),c(),l(9,"div",43)(10,"div",44)(11,"strong"),p(12,"Ground Truth:"),c(),p(13),c(),l(14,"div",44)(15,"strong"),p(16,"Prediction:"),c(),p(17),c(),y(18,uM,4,1,"div",45),l(19,"div",44)(20,"strong"),p(21,"Correct:"),c(),l(22,"mat-icon"),p(23),c()()()()()()}if(n&2){let t=C();g(5),f("src",t.getImageUrl(t.selectedImage.imageId),ae)("alt",t.selectedImage.fileName),g(3),D(t.selectedImage.fileName),g(5),E(" ",t.cellSelection.gtClassName," "),g(4),E(" ",t.cellSelection.predClassName," "),g(),f("ngIf",t.selectedImage.predictionLabels.length>0),g(4),$("correct",t.selectedImage.isCorrect)("incorrect",!t.selectedImage.isCorrect),g(),E(" ",t.selectedImage.isCorrect?"check_circle":"cancel"," ")}}var Sg=(()=>{class n{constructor(t,e,i){this.confusionMatrixService=t,this.imageService=e,this.cdr=i,this.hideHeader=!1,this.close=new H,this.images=[],this.selectedImage=null,this.loading=!1,this.error=null,this.totalCount=0}ngOnInit(){this.loadImages()}ngOnChanges(t){(t.cellSelection||t.modelId||t.evaluationSet)&&(t.cellSelection?.firstChange||this.loadImages())}loadImages(){this.loading=!0,this.error=null,this.confusionMatrixService.getCellDetail(this.modelId,this.evaluationSet,this.cellSelection.gtClassId,this.cellSelection.predClassId).subscribe({next:t=>{this.images=t.images,this.totalCount=t.totalCount,this.loading=!1,this.cdr.markForCheck()},error:t=>{this.error=t.message||"Failed to load images",this.loading=!1,this.cdr.markForCheck()}})}onImageClick(t){this.selectedImage=t}onCloseEnlargedView(){this.selectedImage=null}onClose(){this.close.emit()}onRetry(){this.loadImages()}getImageUrl(t){return this.imageService.isMockMode()?this.imageService.getMockImageUrl():`/api/landingai/images/${t}/file`}static{this.\u0275fac=function(e){return new(e||n)(T($i),T(ke),T(ge))}}static{this.\u0275cmp=A({type:n,selectors:[["app-detail-panel"]],inputs:{cellSelection:"cellSelection",modelId:"modelId",evaluationSet:"evaluationSet",hideHeader:"hideHeader"},outputs:{close:"close"},standalone:!1,features:[oe],decls:6,vars:5,consts:[[1,"detail-panel"],["class","panel-header",4,"ngIf"],["class","loading-state",4,"ngIf"],["class","error-state",4,"ngIf"],["class","panel-content",4,"ngIf"],["class","enlarged-view",3,"click",4,"ngIf"],[1,"panel-header"],["mat-icon-button","",1,"back-button",3,"click"],[1,"header-content"],[1,"cell-info"],[1,"loading-state"],["diameter","40"],[1,"error-state"],["color","warn"],["mat-raised-button","","color","primary",3,"click"],[1,"panel-content"],["class","empty-state",4,"ngIf"],["class","image-gallery-columns",4,"ngIf"],[1,"empty-state"],[1,"image-gallery-columns"],[1,"column-headers"],[1,"column-header"],[1,"image-rows"],["class","image-row-pair",4,"ngFor","ngForOf"],[1,"image-row-pair"],[1,"image-card",3,"click"],[1,"image-container"],[1,"thumbnail",3,"src","alt"],[1,"label-overlay","gt-overlay"],["class","label-box",3,"border-color",4,"ngFor","ngForOf"],[1,"image-overlay"],[1,"image-info"],[1,"image-name",3,"title"],[1,"label-overlay","pred-overlay"],[1,"label-box"],[1,"label-text"],["class","confidence-badge",4,"ngIf"],[1,"confidence-badge"],[1,"enlarged-view",3,"click"],[1,"enlarged-content",3,"click"],["mat-icon-button","",1,"close-enlarged-button",3,"click"],[1,"enlarged-image",3,"src","alt"],[1,"enlarged-info"],[1,"metadata"],[1,"metadata-item"],["class","metadata-item",4,"ngIf"]],template:function(e,i){e&1&&(l(0,"div",0),y(1,rM,15,4,"div",1)(2,sM,4,0,"div",2)(3,lM,7,1,"div",3)(4,fM,3,2,"div",4)(5,_M,24,11,"div",5),c()),e&2&&(g(),f("ngIf",!i.hideHeader),g(),f("ngIf",i.loading),g(),f("ngIf",i.error&&!i.loading),g(),f("ngIf",!i.loading&&!i.error),g(),f("ngIf",i.selectedImage))},dependencies:[Q,N,Z,at,W,nt],styles:[".detail-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;background:#fff}.panel-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px;padding:16px;border-bottom:1px solid #e0e0e0;background:#f5f5f5}.panel-header[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]{flex-shrink:0}.panel-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]{flex:1}.panel-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 4px;font-size:18px;font-weight:500;color:#333}.panel-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .cell-info[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#666}.panel-header[_ngcontent-%COMP%]   .header-content[_ngcontent-%COMP%]   .cell-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px;gap:16px}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:14px}.error-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px;gap:16px}.error-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px}.error-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#d32f2f;font-size:14px;text-align:center}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px;gap:16px}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#999}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:14px}.panel-content[_ngcontent-%COMP%]{flex:1;overflow:visible;padding:16px}.image-gallery-columns[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.column-headers[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:8px}.column-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:8px 12px;background:#f5f5f5;border-radius:4px;font-size:13px;font-weight:600;color:#333}.column-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;color:#666}.image-rows[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.image-row-pair[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:12px}.image-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;border:1px solid #e0e0e0;border-radius:4px;overflow:hidden;cursor:pointer;transition:all .2s ease;background:#fff}.image-card[_ngcontent-%COMP%]:hover{box-shadow:0 2px 8px #0000001a;transform:translateY(-2px)}.image-card[_ngcontent-%COMP%]:hover   .image-overlay[_ngcontent-%COMP%]{opacity:1}.image-container[_ngcontent-%COMP%]{position:relative;width:100%;padding-top:75%;background:#f5f5f5;overflow:hidden}.image-container[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:contain}.image-container[_ngcontent-%COMP%]   .label-overlay[_ngcontent-%COMP%]{position:absolute;top:6px;left:6px;right:6px;pointer-events:none;z-index:1}.image-container[_ngcontent-%COMP%]   .label-box[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;padding:3px 6px;background:#fffffff2;border:2px solid;border-radius:3px;font-size:11px;font-weight:600;box-shadow:0 1px 3px #00000026}.image-container[_ngcontent-%COMP%]   .label-box[_ngcontent-%COMP%]   .label-text[_ngcontent-%COMP%]{color:#333}.image-container[_ngcontent-%COMP%]   .label-box[_ngcontent-%COMP%]   .confidence-badge[_ngcontent-%COMP%]{padding:1px 4px;background:#2196f3;color:#fff;border-radius:8px;font-size:9px;font-weight:700}.image-container[_ngcontent-%COMP%]   .image-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#0006;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .2s ease}.image-container[_ngcontent-%COMP%]   .image-overlay[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff;font-size:28px;width:28px;height:28px}.image-info[_ngcontent-%COMP%]{padding:6px 8px;background:#fafafa;border-top:1px solid #e0e0e0}.image-info[_ngcontent-%COMP%]   .image-name[_ngcontent-%COMP%]{margin:0;font-size:11px;color:#666;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.enlarged-view[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000e6;display:flex;align-items:center;justify-content:center;z-index:1000;cursor:pointer}.enlarged-content[_ngcontent-%COMP%]{position:relative;max-width:90vw;max-height:90vh;display:flex;flex-direction:column;background:#fff;border-radius:8px;overflow:hidden;cursor:default}.enlarged-content[_ngcontent-%COMP%]   .close-enlarged-button[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;background:#ffffffe6;z-index:10}.enlarged-content[_ngcontent-%COMP%]   .close-enlarged-button[_ngcontent-%COMP%]:hover{background:#fff}.enlarged-content[_ngcontent-%COMP%]   .enlarged-image[_ngcontent-%COMP%]{max-width:100%;max-height:70vh;object-fit:contain;background:#000}.enlarged-content[_ngcontent-%COMP%]   .enlarged-info[_ngcontent-%COMP%]{padding:16px;background:#fff}.enlarged-content[_ngcontent-%COMP%]   .enlarged-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;font-size:16px;font-weight:500;color:#333}.enlarged-content[_ngcontent-%COMP%]   .enlarged-info[_ngcontent-%COMP%]   .metadata[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.enlarged-content[_ngcontent-%COMP%]   .enlarged-info[_ngcontent-%COMP%]   .metadata-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px;color:#666}.enlarged-content[_ngcontent-%COMP%]   .enlarged-info[_ngcontent-%COMP%]   .metadata-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333}.enlarged-content[_ngcontent-%COMP%]   .enlarged-info[_ngcontent-%COMP%]   .metadata-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.enlarged-content[_ngcontent-%COMP%]   .enlarged-info[_ngcontent-%COMP%]   .metadata-item[_ngcontent-%COMP%]   mat-icon.correct[_ngcontent-%COMP%]{color:#4caf50}.enlarged-content[_ngcontent-%COMP%]   .enlarged-info[_ngcontent-%COMP%]   .metadata-item[_ngcontent-%COMP%]   mat-icon.incorrect[_ngcontent-%COMP%]{color:#f44336}@media (max-width: 768px){.image-row-pair[_ngcontent-%COMP%], .column-headers[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:8px}.enlarged-content[_ngcontent-%COMP%]{max-width:95vw;max-height:95vh}.enlarged-content[_ngcontent-%COMP%]   .enlarged-image[_ngcontent-%COMP%]{max-height:60vh}}"],changeDetection:0})}}return n})();function xM(n,o){n&1&&(l(0,"div",5),k(1,"mat-spinner",6),l(2,"p"),p(3,"Loading confusion matrix..."),c()())}function MM(n,o){if(n&1){let t=j();l(0,"div",7)(1,"mat-icon",8),p(2,"error"),c(),l(3,"p"),p(4),c(),l(5,"button",9),P("click",function(){M(t);let i=C();return b(i.onRetry())}),p(6,"Retry"),c()()}if(n&2){let t=C();g(4),D(t.state.error)}}function bM(n,o){n&1&&(l(0,"div",10)(1,"mat-icon"),p(2,"info"),c(),l(3,"p"),p(4,"No confusion matrix data available"),c(),l(5,"p",11),p(6," Please ensure the model has predictions for the selected evaluation set. "),c()())}function PM(n,o){if(n&1&&(l(0,"div",58),k(1,"div",51),l(2,"p",52),p(3),c()()),n&2){let t=C(3);g(3),E(" ",t.state.selectedCell.predClassName," ")}}function vM(n,o){if(n&1){let t=j();l(0,"div",17)(1,"div",18)(2,"mat-form-field",19),k(3,"input",20),l(4,"mat-icon",21),p(5,"search"),c()(),l(6,"div",22)(7,"div",23)(8,"span",24),p(9),c(),l(10,"button",25)(11,"span",26),p(12,"Clear filter"),c()()(),l(13,"div",27)(14,"span",28),p(15,"Sort by:"),c(),l(16,"mat-form-field",29)(17,"mat-select",30)(18,"mat-option",30),p(19,"Confidence"),c(),l(20,"mat-option",31),p(21,"Filename"),c(),l(22,"mat-option",32),p(23,"Date"),c()()()()()(),l(24,"div",33)(25,"div",34)(26,"div",35)(27,"div",36)(28,"p",37)(29,"strong"),p(30,"Ground Truth"),c()()(),l(31,"div",38)(32,"p",37)(33,"strong"),p(34,"Prediction"),c()()(),l(35,"div",39)(36,"p",37)(37,"strong"),p(38,"Count"),c()()()(),l(39,"div",40)(40,"table",41)(41,"thead")(42,"tr",42)(43,"th",43)(44,"div",44)(45,"p",45),p(46),c(),l(47,"mat-icon",46),p(48,"info"),c(),l(49,"span",47),p(50),c()()()()(),l(51,"tbody")(52,"tr",48)(53,"td",49)(54,"div",50),k(55,"div",51),l(56,"p",52),p(57),c()()(),l(58,"td",49),y(59,PM,4,1,"div",53),c(),l(60,"td",54)(61,"p",55),p(62),c()()()()()()(),l(63,"div",56)(64,"app-detail-panel",57),P("close",function(){M(t);let i=C(2);return b(i.onCloseDetail())}),c()()()()}if(n&2){let t=C(2);g(9),E(" ",t.state.selectedCell.count," images "),g(37),E(" ",t.state.selectedCell.gtClassId===t.state.selectedCell.predClassId?"Correct":t.state.selectedCell.gtClassId!==t.state.selectedCell.predClassId&&t.state.selectedCell.predClassId!==null?"False Positive":"False Negative"," "),g(4),D(t.state.selectedCell.count),g(7),E(" ",t.state.selectedCell.gtClassName," "),g(2),f("ngIf",t.state.selectedCell.gtClassId!==t.state.selectedCell.predClassId),g(3),D(t.state.selectedCell.count),g(2),f("cellSelection",t.state.selectedCell)("modelId",t.state.modelId)("evaluationSet",t.state.evaluationSet)("hideHeader",!0)}}function OM(n,o){if(n&1){let t=j();l(0,"div",12)(1,"div",13)(2,"div",14)(3,"h3"),p(4,"Confusion Matrix"),c()(),l(5,"app-confusion-matrix-grid",15),P("cellClick",function(i){M(t);let a=C();return b(a.onCellClick(i))}),c()(),y(6,vM,65,10,"div",16),c()}if(n&2){let t=C();g(5),f("matrixData",t.state.matrixData),g(),f("ngIf",t.state.selectedCell)}}var kg=(()=>{class n{constructor(t,e,i){this.store=t,this.confusionMatrixService=e,this.cdr=i,this.state={modelId:null,evaluationSet:"train",matrixData:null,selectedCell:null,viewMode:"matrix",loading:!1,error:null},this.destroy$=new Ct,this.selectedModelId$=this.store.select(ln),this.selectedEvaluationSet$=this.store.select(Sn)}ngOnInit(){Yn([this.selectedModelId$,this.selectedEvaluationSet$]).pipe(q(this.destroy$),ce(([t,e])=>{console.log("Confusion Matrix - Model ID:",t,"Evaluation Set:",e),this.state.modelId=t,this.state.evaluationSet=e,this.cdr.markForCheck()}),Ys(([t,e])=>t?this.loadMatrixData(t,e):(this.state.loading=!1,this.state.error=null,this.state.matrixData=null,this.cdr.markForCheck(),ir(null)))).subscribe()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadMatrixData(t,e){return console.log("Loading confusion matrix data for model:",t,"evaluation set:",e),this.state.loading=!0,this.state.error=null,this.cdr.markForCheck(),this.confusionMatrixService.getConfusionMatrix(t,e).pipe(ce(i=>{console.log("Confusion matrix data received:",i),this.state.matrixData=i,this.state.loading=!1,this.state.error=null,this.cdr.markForCheck()}),Oe(i=>(console.error("Error loading confusion matrix:",i),this.state.loading=!1,this.state.error=i.message||"Failed to load confusion matrix",this.state.matrixData=null,this.cdr.markForCheck(),ir(null))))}onCellClick(t){this.state.selectedCell=t,this.cdr.markForCheck()}onCloseDetail(){this.state.selectedCell=null,this.cdr.markForCheck()}onClearFilter(){this.state.selectedCell=null,this.cdr.markForCheck()}onAnalyzeAll(){this.state.viewMode="analyzeAll",this.cdr.markForCheck()}onCloseAnalyzeAll(){this.state.viewMode="matrix",this.cdr.markForCheck()}onRetry(){this.state.modelId&&this.loadMatrixData(this.state.modelId,this.state.evaluationSet).subscribe()}static{this.\u0275fac=function(e){return new(e||n)(T(St),T($i),T(ge))}}static{this.\u0275cmp=A({type:n,selectors:[["app-confusion-matrix"]],standalone:!1,decls:5,vars:4,consts:[[1,"confusion-matrix-container"],["class","loading-state",4,"ngIf"],["class","error-state",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","main-content",4,"ngIf"],[1,"loading-state"],["diameter","50"],[1,"error-state"],["color","warn"],["mat-raised-button","","color","primary",3,"click"],[1,"empty-state"],[1,"hint"],[1,"main-content"],[1,"matrix-section"],[1,"matrix-header"],[3,"cellClick","matrixData"],["class","analyze-section",4,"ngIf"],[1,"analyze-section"],[1,"analyze-controls"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Search by filename..."],["matPrefix",""],[1,"control-group"],[1,"center-group"],[1,"image-count"],["mat-button","",1,"clear-filter-button"],[1,"button-label"],[1,"sort-by-section"],[1,"sort-label"],["appearance","outline",1,"sort-field"],["value","confidence"],["value","filename"],["value","date"],[1,"analyze-content"],[1,"stats-panel"],[1,"column-headers"],[1,"header-item","gt-header"],[1,"header-text"],[1,"header-item","pred-header"],[1,"header-item","count-header"],[1,"stat-table-container"],[1,"stat-table"],[1,"stat-table-header"],["colspan","3",1,"stat-table-cell-header"],[1,"stat-header-content"],[1,"stat-title"],["fontSize","small",1,"info-icon"],[1,"header-count"],[1,"stat-table-row"],[1,"stat-table-cell","label-cell"],[1,"label-box","gt-label"],[1,"label-color-box"],[1,"label-text"],["class","label-box pred-label",4,"ngIf"],[1,"stat-table-cell","count-cell"],[1,"count-value"],[1,"images-panel"],[3,"close","cellSelection","modelId","evaluationSet","hideHeader"],[1,"label-box","pred-label"]],template:function(e,i){e&1&&(l(0,"div",0),y(1,xM,4,0,"div",1)(2,MM,7,1,"div",2)(3,bM,7,0,"div",3)(4,OM,7,2,"div",4),c()),e&2&&(g(),f("ngIf",i.state.loading),g(),f("ngIf",i.state.error&&!i.state.loading),g(),f("ngIf",!i.state.loading&&!i.state.error&&!i.state.matrixData),g(),f("ngIf",!i.state.loading&&!i.state.error&&i.state.matrixData))},dependencies:[N,Z,W,Mt,yn,kt,nt,se,Zt,wg,Sg],styles:[".confusion-matrix-container[_ngcontent-%COMP%]{padding:16px;display:flex;flex-direction:column;height:100%;overflow:visible}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px;gap:16px}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:14px}.error-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px;gap:16px}.error-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px}.error-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#d32f2f;font-size:14px;text-align:center;max-width:400px}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px;gap:8px}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#999}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:14px;text-align:center}.empty-state[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{color:#999;font-size:12px;font-style:italic}.main-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px;flex:1}.matrix-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;flex-shrink:0}.matrix-header[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:40px}.matrix-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:500;color:#333;line-height:40px}.analyze-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;border-top:1px solid #e0e0e0;padding-top:16px;flex:1;min-height:0;overflow:visible}.analyze-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-shrink:0;min-height:40px}.analyze-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:500;color:#333;line-height:40px}.analyze-header[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.analyze-controls[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:nowrap;flex-shrink:0}.analyze-controls[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{flex:0 0 auto;width:250px;min-width:250px;max-width:250px}.analyze-controls[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mat-mdc-form-field-wrapper{padding-bottom:0;margin-bottom:0}.analyze-controls[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mat-mdc-form-field-flex{align-items:center;height:40px}.analyze-controls[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mat-mdc-form-field-icon-prefix{padding-right:8px;display:flex;align-items:center}.analyze-controls[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mat-icon{color:#0000008a}.analyze-controls[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mdc-notched-outline .mdc-notched-outline__leading, .analyze-controls[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mdc-notched-outline .mdc-notched-outline__notch, .analyze-controls[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mdc-notched-outline .mdc-notched-outline__trailing{border-color:#0000001f}.analyze-controls[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mdc-notched-outline .mdc-notched-outline__notch{border-right:none;border-left:none}.analyze-controls[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mat-mdc-input-element{padding:0;line-height:normal;height:auto}.analyze-controls[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mat-form-field-infix{display:flex;align-items:center;padding-top:0;padding-bottom:0;border-top:0;min-height:40px}.analyze-controls[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}.analyze-controls[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mdc-floating-label{display:none}.analyze-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;flex:1;justify-content:space-between}.analyze-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .center-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;flex:1;justify-content:center}.analyze-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .image-count[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#333;white-space:nowrap;line-height:40px}.analyze-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .clear-filter-button[_ngcontent-%COMP%]{flex:0 0 auto;min-width:auto;padding:0 8px;height:32px;line-height:32px}.analyze-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .clear-filter-button[_ngcontent-%COMP%]   .button-label[_ngcontent-%COMP%]{font-size:14px;color:#1976d2;text-transform:none;font-weight:500}.analyze-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .clear-filter-button[_ngcontent-%COMP%]:hover{background-color:#1976d20a}.analyze-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .sort-by-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;flex:0 0 auto;height:40px}.analyze-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .sort-by-section[_ngcontent-%COMP%]   .sort-label[_ngcontent-%COMP%]{font-size:14px;color:#666;white-space:nowrap;line-height:40px}.analyze-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .sort-field[_ngcontent-%COMP%]{width:100px;margin:0}.analyze-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .sort-field[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:0;margin:0}.analyze-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .sort-field[_ngcontent-%COMP%]     .mat-mdc-form-field-flex{align-items:center;height:40px}.analyze-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .sort-field[_ngcontent-%COMP%]     .mat-form-field-infix{padding:0;border-top:0;width:auto;min-width:80px}.analyze-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .sort-field[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper{padding:0}.analyze-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .sort-field[_ngcontent-%COMP%]     .mdc-notched-outline__leading, .analyze-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .sort-field[_ngcontent-%COMP%]     .mdc-notched-outline__notch, .analyze-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .sort-field[_ngcontent-%COMP%]     .mdc-notched-outline__trailing{border:none!important}.analyze-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .sort-field[_ngcontent-%COMP%]     .mat-mdc-select-value-text, .analyze-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .sort-field[_ngcontent-%COMP%]     .mat-mdc-select-min-line{font-size:14px;color:#666;line-height:1.5}.analyze-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .sort-field[_ngcontent-%COMP%]     .mat-mdc-select-arrow-wrapper{padding-left:4px}.analyze-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .sort-field[_ngcontent-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}.analyze-content[_ngcontent-%COMP%]{display:flex;gap:16px;flex:1;min-height:0;overflow:visible}.stats-panel[_ngcontent-%COMP%]{flex:0 0 300px;display:flex;flex-direction:column;gap:0;overflow:visible;padding-top:16px}.column-headers[_ngcontent-%COMP%]{display:flex;background-color:#f5f5f5;border:1px solid #e0e0e0;border-bottom:2px solid #e0e0e0;border-radius:4px 4px 0 0;padding:12px 0;gap:0}.column-headers[_ngcontent-%COMP%]   .header-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:0 16px}.column-headers[_ngcontent-%COMP%]   .header-item.gt-header[_ngcontent-%COMP%], .column-headers[_ngcontent-%COMP%]   .header-item.pred-header[_ngcontent-%COMP%]{flex:1;min-width:0}.column-headers[_ngcontent-%COMP%]   .header-item.count-header[_ngcontent-%COMP%]{flex:0 0 120px;justify-content:flex-end}.column-headers[_ngcontent-%COMP%]   .header-item[_ngcontent-%COMP%]   .header-text[_ngcontent-%COMP%]{margin:0;font-size:12px;color:#333;white-space:nowrap}.stat-table-container[_ngcontent-%COMP%]{background:#fff;border:1px solid #e0e0e0;border-top:none;border-radius:0 0 4px 4px;overflow:hidden}.stat-table[_ngcontent-%COMP%]{width:100%;border-collapse:collapse}.stat-table[_ngcontent-%COMP%]   .stat-table-header[_ngcontent-%COMP%]{background-color:#fafafa;border-bottom:1px solid #e0e0e0}.stat-table[_ngcontent-%COMP%]   .stat-table-cell-header[_ngcontent-%COMP%]{padding:12px 16px;text-align:left;font-weight:500}.stat-table[_ngcontent-%COMP%]   .stat-table-cell-header.count-cell[_ngcontent-%COMP%]{width:120px;text-align:center}.stat-table[_ngcontent-%COMP%]   .stat-header-content[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;width:100%}.stat-table[_ngcontent-%COMP%]   .stat-header-content[_ngcontent-%COMP%]   .stat-title[_ngcontent-%COMP%]{margin:0;font-size:14px;font-weight:500;color:#333}.stat-table[_ngcontent-%COMP%]   .stat-header-content[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;color:#666;margin-left:8px;margin-right:auto}.stat-table[_ngcontent-%COMP%]   .stat-header-content[_ngcontent-%COMP%]   .header-count[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#333;margin-left:auto}.stat-table[_ngcontent-%COMP%]   .count-value[_ngcontent-%COMP%]{margin:0;font-size:14px;font-weight:500;color:#333}.stat-table[_ngcontent-%COMP%]   .stat-table-row[_ngcontent-%COMP%]{background-color:#f0f8ff}.stat-table[_ngcontent-%COMP%]   .stat-table-row[_ngcontent-%COMP%]:hover{background-color:#e3f2fd}.stat-table[_ngcontent-%COMP%]   .stat-table-cell[_ngcontent-%COMP%]{padding:12px 16px;vertical-align:middle}.stat-table[_ngcontent-%COMP%]   .stat-table-cell.label-cell[_ngcontent-%COMP%]{padding:12px 16px}.stat-table[_ngcontent-%COMP%]   .stat-table-cell.count-cell[_ngcontent-%COMP%]{width:120px;text-align:right;padding-right:16px}.label-box[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:0;border-radius:4px;background-color:transparent;border:none;max-width:100%;width:fit-content}.label-box[_ngcontent-%COMP%]   .label-color-box[_ngcontent-%COMP%]{width:12px;height:12px;border-radius:2px;flex-shrink:0}.label-box[_ngcontent-%COMP%]   .label-text[_ngcontent-%COMP%]{margin:0;font-size:13px;color:#333;font-weight:500;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:120px}.label-box.gt-label[_ngcontent-%COMP%]   .label-color-box[_ngcontent-%COMP%]{background-color:#4caf50}.label-box.pred-label[_ngcontent-%COMP%]   .label-color-box[_ngcontent-%COMP%]{background-color:#2196f3}.stat-block[_ngcontent-%COMP%]{background:#fafafa;border-radius:4px;padding:12px;border-left:3px solid #f44336;border:1px solid #e0e0e0}.stat-block.correct[_ngcontent-%COMP%]{border-left-color:#4caf50;background:#f1f8f4}.stat-block[_ngcontent-%COMP%]   .stat-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;margin-bottom:10px;padding:8px 0;border-bottom:1px solid #e0e0e0;min-height:34px}.stat-block[_ngcontent-%COMP%]   .stat-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;color:#f44336}.stat-block[_ngcontent-%COMP%]   .stat-header[_ngcontent-%COMP%]   .stat-title[_ngcontent-%COMP%]{font-size:13px;font-weight:600;color:#333}.stat-block.correct[_ngcontent-%COMP%]   .stat-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#4caf50}.stat-block[_ngcontent-%COMP%]   .stat-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:6px}.stat-block[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:13px}.stat-block[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .label[_ngcontent-%COMP%]{color:#666;font-weight:400}.stat-block[_ngcontent-%COMP%]   .stat-row[_ngcontent-%COMP%]   .value[_ngcontent-%COMP%]{color:#333;font-weight:600}.images-panel[_ngcontent-%COMP%]{flex:1;min-width:0;overflow:visible}@media (max-width: 1200px){.analyze-content[_ngcontent-%COMP%]{flex-direction:column}.stats-panel[_ngcontent-%COMP%]{flex:0 0 auto;width:100%}}@media (max-width: 768px){.confusion-matrix-container[_ngcontent-%COMP%]{padding:16px}.analyze-controls[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.analyze-controls[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{min-width:100%}.analyze-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:8px}.analyze-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .sort-field[_ngcontent-%COMP%]{width:100%}}"],changeDetection:0})}}return n})();function wM(n,o){n&1&&(l(0,"div",5),k(1,"mat-spinner",6),l(2,"p"),p(3,"Loading images..."),c()())}function SM(n,o){if(n&1){let t=j();l(0,"div",7)(1,"mat-icon",8),p(2,"error"),c(),l(3,"p"),p(4),c(),l(5,"button",9),P("click",function(){M(t);let i=C();return b(i.onRetry())}),p(6,"Retry"),c()()}if(n&2){let t=C();g(4),D(t.error)}}function kM(n,o){n&1&&(l(0,"div",24)(1,"mat-icon"),p(2,"image_not_supported"),c(),l(3,"p"),p(4,"No images found"),c()())}function IM(n,o){if(n&1&&(l(0,"span",42),p(1),c()),n&2){let t=C().$implicit;g(),E(" ",t.predictionLabels[0].confidenceRate.toFixed(2)," ")}}function TM(n,o){if(n&1){let t=j();l(0,"div",30)(1,"div",31),P("click",function(){let i=M(t).$implicit,a=C(3);return b(a.onImageClick(i))}),l(2,"div",32),k(3,"img",33),l(4,"div",34)(5,"div",35)(6,"span",36),p(7),c()()(),l(8,"div",37)(9,"mat-icon"),p(10,"zoom_in"),c()()(),l(11,"div",38)(12,"p",39),p(13),c()()(),l(14,"div",31),P("click",function(){let i=M(t).$implicit,a=C(3);return b(a.onImageClick(i))}),l(15,"div",32),k(16,"img",33),l(17,"div",40)(18,"div",35)(19,"span",36),p(20),c(),y(21,IM,2,1,"span",41),c()(),l(22,"div",37)(23,"mat-icon"),p(24,"zoom_in"),c()()(),l(25,"div",38)(26,"p",39),p(27),c()()()()}if(n&2){let t=o.$implicit,e=C(3);g(3),f("src",e.getImageUrl(t.imageId),ae)("alt",t.fileName),g(2),K("border-color","#4caf50"),g(2),D(e.getGroundTruthClassName(t)),g(5),f("title",t.fileName),g(),E(" ",t.fileName," "),g(3),f("src",e.getImageUrl(t.imageId),ae)("alt",t.fileName),g(2),K("border-color","#2196f3"),g(2),D(e.getPredictionClassName(t)),g(),f("ngIf",t.predictionLabels.length>0&&t.predictionLabels[0].confidenceRate!==null),g(5),f("title",t.fileName),g(),E(" ",t.fileName," ")}}function DM(n,o){if(n&1&&(l(0,"div",25)(1,"div",26)(2,"div",27)(3,"mat-icon"),p(4,"label"),c(),l(5,"span"),p(6,"Ground Truth"),c()(),l(7,"div",27)(8,"mat-icon"),p(9,"psychology"),c(),l(10,"span"),p(11,"Prediction"),c()()(),l(12,"div",28),y(13,TM,28,15,"div",29),c()()),n&2){let t=C(2);g(13),f("ngForOf",t.filteredImages)}}function EM(n,o){if(n&1){let t=j();l(0,"div",10)(1,"div",11)(2,"div",12)(3,"div",13)(4,"span",14),p(5),c(),l(6,"button",15),P("click",function(){M(t);let i=C();return b(i.onFilterChange(null))}),l(7,"span",16),p(8,"Clear filter"),c()()(),l(9,"div",17)(10,"span",18),p(11,"Sort by:"),c(),l(12,"mat-form-field",19)(13,"mat-select",20)(14,"mat-option",20),p(15,"Confidence"),c(),l(16,"mat-option",21),p(17,"Filename"),c()()()()()(),y(18,kM,5,0,"div",22)(19,DM,14,1,"div",23),c()}if(n&2){let t=C();g(5),E("",t.filteredImages.length," images"),g(),K("visibility",t.filterCorrect!==null?"visible":"hidden"),g(12),f("ngIf",t.filteredImages.length===0),g(),f("ngIf",t.filteredImages.length>0)}}function jM(n,o){if(n&1){let t=j();l(0,"div",43),P("click",function(){M(t);let i=C();return b(i.onCloseEnlargedView())}),l(1,"div",44),P("click",function(i){return M(t),b(i.stopPropagation())}),l(2,"button",45),P("click",function(){M(t);let i=C();return b(i.onCloseEnlargedView())}),l(3,"mat-icon"),p(4,"close"),c()(),k(5,"img",46),l(6,"div",47)(7,"h4"),p(8),c(),l(9,"div",48)(10,"div",49)(11,"strong"),p(12,"Ground Truth:"),c(),p(13),c(),l(14,"div",49)(15,"strong"),p(16,"Prediction:"),c(),p(17),c(),l(18,"div",49)(19,"strong"),p(20,"Confidence:"),c(),p(21),c(),l(22,"div",49)(23,"strong"),p(24,"Correct:"),c(),l(25,"mat-icon"),p(26),c()()()()()()}if(n&2){let t=C();g(5),f("src",t.getImageUrl(t.selectedImage.imageId),ae)("alt",t.selectedImage.fileName),g(3),D(t.selectedImage.fileName),g(5),E(" ",t.getGroundTruthClassName(t.selectedImage)," "),g(4),E(" ",t.getPredictionClassName(t.selectedImage)," "),g(4),E(" ",t.getConfidence(t.selectedImage)," "),g(4),$("correct",t.selectedImage.isCorrect)("incorrect",!t.selectedImage.isCorrect),g(),E(" ",t.selectedImage.isCorrect?"check_circle":"cancel"," ")}}var Ig=(()=>{class n{constructor(t,e,i){this.confusionMatrixService=t,this.imageService=e,this.cdr=i,this.close=new H,this.images=[],this.selectedImage=null,this.loading=!1,this.error=null,this.filterCorrect=null,this.filteredImages=[]}ngOnInit(){this.loadAllImages()}loadAllImages(){this.loading=!0,this.error=null,this.confusionMatrixService.getAllImages(this.modelId,this.evaluationSet).subscribe({next:t=>{this.images=t,this.applyFilter(),this.loading=!1,this.cdr.markForCheck()},error:t=>{this.error=t.message||"Failed to load images",this.loading=!1,this.cdr.markForCheck()}})}applyFilter(){this.filterCorrect===null?this.filteredImages=this.images:this.filteredImages=this.images.filter(t=>t.isCorrect===this.filterCorrect)}onFilterChange(t){this.filterCorrect=t,this.applyFilter(),this.cdr.markForCheck()}getCorrectCount(){return this.images.filter(t=>t.isCorrect).length}getIncorrectCount(){return this.images.filter(t=>!t.isCorrect).length}onImageClick(t){this.selectedImage=t}onCloseEnlargedView(){this.selectedImage=null}onClose(){this.close.emit()}onRetry(){this.loadAllImages()}getGroundTruthClassName(t){return t.groundTruthLabels.length>0?t.groundTruthLabels[0].className:"Unknown"}getPredictionClassName(t){return t.predictionLabels.length>0?t.predictionLabels[0].className:"No prediction"}getConfidence(t){return t.predictionLabels.length>0&&t.predictionLabels[0].confidenceRate!==null?t.predictionLabels[0].confidenceRate.toFixed(1)+"%":"N/A"}getImageUrl(t){return this.imageService.isMockMode()?this.imageService.getMockImageUrl():`/api/landingai/images/${t}/file`}static{this.\u0275fac=function(e){return new(e||n)(T($i),T(ke),T(ge))}}static{this.\u0275cmp=A({type:n,selectors:[["app-analyze-all-images"]],inputs:{modelId:"modelId",evaluationSet:"evaluationSet"},outputs:{close:"close"},standalone:!1,decls:5,vars:4,consts:[[1,"analyze-all-images"],["class","loading-state",4,"ngIf"],["class","error-state",4,"ngIf"],["class","panel-content",4,"ngIf"],["class","enlarged-view",3,"click",4,"ngIf"],[1,"loading-state"],["diameter","40"],[1,"error-state"],["color","warn"],["mat-raised-button","","color","primary",3,"click"],[1,"panel-content"],[1,"analyze-controls"],[1,"control-group"],[1,"center-group"],[1,"image-count"],["mat-button","",1,"clear-filter-button",3,"click"],[1,"button-label"],[1,"sort-by-section"],[1,"sort-label"],["appearance","outline",1,"sort-field"],["value","confidence"],["value","filename"],["class","empty-state",4,"ngIf"],["class","image-gallery-columns",4,"ngIf"],[1,"empty-state"],[1,"image-gallery-columns"],[1,"column-headers"],[1,"column-header"],[1,"image-rows"],["class","image-row-pair",4,"ngFor","ngForOf"],[1,"image-row-pair"],[1,"image-card",3,"click"],[1,"image-container"],[1,"thumbnail",3,"src","alt"],[1,"label-overlay","gt-overlay"],[1,"label-box"],[1,"label-text"],[1,"image-overlay"],[1,"image-info"],[1,"image-name",3,"title"],[1,"label-overlay","pred-overlay"],["class","confidence-badge",4,"ngIf"],[1,"confidence-badge"],[1,"enlarged-view",3,"click"],[1,"enlarged-content",3,"click"],["mat-icon-button","",1,"close-enlarged-button",3,"click"],[1,"enlarged-image",3,"src","alt"],[1,"enlarged-info"],[1,"metadata"],[1,"metadata-item"]],template:function(e,i){e&1&&(l(0,"div",0),y(1,wM,4,0,"div",1)(2,SM,7,1,"div",2)(3,EM,20,5,"div",3)(4,jM,27,11,"div",4),c()),e&2&&(g(),f("ngIf",i.loading),g(),f("ngIf",i.error&&!i.loading),g(),f("ngIf",!i.loading&&!i.error),g(),f("ngIf",i.selectedImage))},dependencies:[Q,N,Z,at,W,Mt,nt,se,Zt],styles:[".analyze-all-images[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;background-color:#fff}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px;gap:16px}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:14px}.error-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:48px;gap:16px}.error-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px}.error-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#d32f2f;font-size:14px;text-align:center}.panel-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;display:flex;flex-direction:column}.analyze-controls[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;justify-content:space-between;flex-wrap:nowrap;flex-shrink:0;padding:12px 16px}.analyze-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center;flex:1;justify-content:space-between}.analyze-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .center-group[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;flex:1;justify-content:flex-start}.analyze-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .image-count[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#333;white-space:nowrap;line-height:40px}.analyze-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .clear-filter-button[_ngcontent-%COMP%]{flex:0 0 auto;min-width:auto;padding:0 8px;height:32px;line-height:32px}.analyze-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .clear-filter-button[_ngcontent-%COMP%]   .button-label[_ngcontent-%COMP%]{font-size:14px;color:#1976d2;text-transform:none;font-weight:500;cursor:pointer}.analyze-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .clear-filter-button[_ngcontent-%COMP%]:hover{background-color:#1976d20a}.analyze-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .sort-by-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;flex:0 0 auto;height:40px}.analyze-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .sort-by-section[_ngcontent-%COMP%]   .sort-label[_ngcontent-%COMP%]{font-size:14px;color:#666;white-space:nowrap;line-height:40px}.analyze-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .sort-field[_ngcontent-%COMP%]{width:100px;margin:0}.analyze-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .sort-field[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:0;margin:0}.analyze-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .sort-field[_ngcontent-%COMP%]     .mat-mdc-form-field-flex{align-items:center;height:40px}.analyze-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .sort-field[_ngcontent-%COMP%]     .mat-form-field-infix{padding:0;border-top:0;width:auto;min-width:80px}.analyze-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .sort-field[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper{padding:0}.analyze-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .sort-field[_ngcontent-%COMP%]     .mdc-notched-outline__leading, .analyze-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .sort-field[_ngcontent-%COMP%]     .mdc-notched-outline__notch, .analyze-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .sort-field[_ngcontent-%COMP%]     .mdc-notched-outline__trailing{border:none!important}.analyze-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .sort-field[_ngcontent-%COMP%]     .mat-mdc-select-value-text, .analyze-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .sort-field[_ngcontent-%COMP%]     .mat-mdc-select-min-line{font-size:14px;color:#666;line-height:1.5}.analyze-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .sort-field[_ngcontent-%COMP%]     .mat-mdc-select-arrow-wrapper{padding-left:4px}.analyze-controls[_ngcontent-%COMP%]   .control-group[_ngcontent-%COMP%]   .sort-field[_ngcontent-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}.image-gallery-columns[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;padding:16px}.column-headers[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:8px}.column-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;padding:8px 12px;background:#f5f5f5;border-radius:4px;font-size:13px;font-weight:600;color:#333}.column-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;color:#666}.image-rows[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.image-row-pair[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 1fr;gap:12px}.image-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;border:1px solid #e0e0e0;border-radius:4px;overflow:hidden;cursor:pointer;transition:all .2s ease;background:#fff}.image-card[_ngcontent-%COMP%]:hover{box-shadow:0 2px 8px #0000001a;transform:translateY(-2px)}.image-card[_ngcontent-%COMP%]:hover   .image-overlay[_ngcontent-%COMP%]{opacity:1}.image-container[_ngcontent-%COMP%]{position:relative;width:100%;padding-top:75%;background:#f5f5f5;overflow:hidden}.image-container[_ngcontent-%COMP%]   .thumbnail[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:contain}.image-container[_ngcontent-%COMP%]   .label-overlay[_ngcontent-%COMP%]{position:absolute;top:6px;left:6px;right:6px;pointer-events:none;z-index:1}.image-container[_ngcontent-%COMP%]   .label-box[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;padding:3px 6px;background:#fffffff2;border:2px solid;border-radius:3px;font-size:11px;font-weight:600;box-shadow:0 1px 3px #00000026}.image-container[_ngcontent-%COMP%]   .label-box[_ngcontent-%COMP%]   .label-text[_ngcontent-%COMP%]{color:#333}.image-container[_ngcontent-%COMP%]   .label-box[_ngcontent-%COMP%]   .confidence-badge[_ngcontent-%COMP%]{padding:1px 4px;background:#2196f3;color:#fff;border-radius:8px;font-size:9px;font-weight:700}.image-container[_ngcontent-%COMP%]   .image-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#0006;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .2s ease}.image-container[_ngcontent-%COMP%]   .image-overlay[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff;font-size:28px;width:28px;height:28px}.image-info[_ngcontent-%COMP%]{padding:6px 8px;background:#fafafa;border-top:1px solid #e0e0e0}.image-info[_ngcontent-%COMP%]   .image-name[_ngcontent-%COMP%]{margin:0;font-size:11px;color:#666;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.enlarged-view[_ngcontent-%COMP%]{position:fixed;inset:0;background:#000000e6;display:flex;align-items:center;justify-content:center;z-index:1000;cursor:pointer}.enlarged-content[_ngcontent-%COMP%]{position:relative;max-width:90vw;max-height:90vh;display:flex;flex-direction:column;background:#fff;border-radius:8px;overflow:hidden;cursor:default}.enlarged-content[_ngcontent-%COMP%]   .close-enlarged-button[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;background:#ffffffe6;z-index:10}.enlarged-content[_ngcontent-%COMP%]   .close-enlarged-button[_ngcontent-%COMP%]:hover{background:#fff}.enlarged-content[_ngcontent-%COMP%]   .enlarged-image[_ngcontent-%COMP%]{max-width:100%;max-height:70vh;object-fit:contain;background:#000}.enlarged-content[_ngcontent-%COMP%]   .enlarged-info[_ngcontent-%COMP%]{padding:16px;background:#fff}.enlarged-content[_ngcontent-%COMP%]   .enlarged-info[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 12px;font-size:16px;font-weight:500;color:#333}.enlarged-content[_ngcontent-%COMP%]   .enlarged-info[_ngcontent-%COMP%]   .metadata[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.enlarged-content[_ngcontent-%COMP%]   .enlarged-info[_ngcontent-%COMP%]   .metadata-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:14px;color:#666}.enlarged-content[_ngcontent-%COMP%]   .enlarged-info[_ngcontent-%COMP%]   .metadata-item[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#333}.enlarged-content[_ngcontent-%COMP%]   .enlarged-info[_ngcontent-%COMP%]   .metadata-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.enlarged-content[_ngcontent-%COMP%]   .enlarged-info[_ngcontent-%COMP%]   .metadata-item[_ngcontent-%COMP%]   mat-icon.correct[_ngcontent-%COMP%]{color:#4caf50}.enlarged-content[_ngcontent-%COMP%]   .enlarged-info[_ngcontent-%COMP%]   .metadata-item[_ngcontent-%COMP%]   mat-icon.incorrect[_ngcontent-%COMP%]{color:#f44336}@media (max-width: 768px){.control-bar[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.left-section[_ngcontent-%COMP%], .right-section[_ngcontent-%COMP%]{width:100%;justify-content:space-between}.sort-field[_ngcontent-%COMP%]{flex:1}.image-row-pair[_ngcontent-%COMP%], .column-headers[_ngcontent-%COMP%]{grid-template-columns:1fr;gap:8px}.enlarged-content[_ngcontent-%COMP%]{max-width:95vw;max-height:95vh}.enlarged-content[_ngcontent-%COMP%]   .enlarged-image[_ngcontent-%COMP%]{max-height:60vh}}"],changeDetection:0})}}return n})();function AM(n,o){n&1&&(l(0,"p",4),p(1,"Analyze by confusion matrix"),c())}function zM(n,o){n&1&&(l(0,"p",4),p(1,"Analyze all images"),c())}function VM(n,o){if(n&1&&(vt(0),k(1,"app-analyze-all-images",5),Ot()),n&2){let t=o.ngIf,e=C().ngIf;g(),f("modelId",e)("evaluationSet",t)}}function LM(n,o){if(n&1&&(vt(0),y(1,VM,2,2,"ng-container",3),z(2,"async"),Ot()),n&2){let t=C();g(),f("ngIf",V(2,1,t.selectedEvaluationSet$))}}var Tg=(()=>{class n{constructor(t){this.store=t,this.selectedModelId$=this.store.select(ln),this.selectedEvaluationSet$=this.store.select(Sn)}static{this.\u0275fac=function(e){return new(e||n)(T(St))}}static{this.\u0275cmp=A({type:n,selectors:[["app-performance-analysis-tabs"]],standalone:!1,decls:11,vars:3,consts:[[1,"performance-analysis-tabs"],["mat-tab-label",""],[1,"tab-content"],[4,"ngIf"],[1,"tab-label"],[3,"modelId","evaluationSet"]],template:function(e,i){e&1&&(l(0,"div",0)(1,"mat-tab-group")(2,"mat-tab"),y(3,AM,2,0,"ng-template",1),l(4,"div",2),k(5,"app-confusion-matrix"),c()(),l(6,"mat-tab"),y(7,zM,2,0,"ng-template",1),l(8,"div",2),y(9,LM,3,3,"ng-container",3),z(10,"async"),c()()()()),e&2&&(g(9),f("ngIf",V(10,1,i.selectedModelId$)))},dependencies:[N,bl,mi,gi,kg,Ig,Vt],styles:[".performance-analysis-tabs[_ngcontent-%COMP%]{margin-top:24px}.performance-analysis-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-group{background-color:transparent}.performance-analysis-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-header{border-bottom:none;background-color:#f5f5f5;border-radius:24px;padding:4px;width:fit-content!important;max-width:fit-content!important}.performance-analysis-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-header-pagination{display:none!important}.performance-analysis-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-label-container{width:auto!important;flex-grow:0!important}.performance-analysis-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-list{width:auto!important;flex-grow:0!important}.performance-analysis-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-labels{gap:0;justify-content:flex-start;width:auto!important}.performance-analysis-tabs[_ngcontent-%COMP%]     .mat-mdc-tab{min-width:auto!important;width:auto!important;height:40px;padding:0 24px;opacity:1;border-radius:20px;background-color:transparent;transition:background-color .3s ease;flex-grow:0!important;flex-shrink:0!important}.performance-analysis-tabs[_ngcontent-%COMP%]     .mat-mdc-tab.mdc-tab--active{background-color:#fff;box-shadow:0 1px 3px #0000001f}.performance-analysis-tabs[_ngcontent-%COMP%]     .mat-mdc-tab.mdc-tab--active .tab-label{color:#1976d2;font-weight:500}.performance-analysis-tabs[_ngcontent-%COMP%]     .mat-mdc-tab:not(.mdc-tab--active) .tab-label{color:#999}.performance-analysis-tabs[_ngcontent-%COMP%]   .tab-label[_ngcontent-%COMP%]{margin:0;font-size:12px;text-transform:none;font-weight:400;white-space:nowrap}.performance-analysis-tabs[_ngcontent-%COMP%]     .mat-mdc-tab-body-wrapper{padding:24px 0}.performance-analysis-tabs[_ngcontent-%COMP%]     .mdc-tab-indicator{display:none}.performance-analysis-tabs[_ngcontent-%COMP%]     .mat-mdc-tab .mdc-tab__ripple{display:none}.performance-analysis-tabs[_ngcontent-%COMP%]   .tab-content[_ngcontent-%COMP%]{min-height:200px}.performance-analysis-tabs[_ngcontent-%COMP%]   .under-development[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;gap:16px;color:#999}.performance-analysis-tabs[_ngcontent-%COMP%]   .under-development[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;opacity:.5}.performance-analysis-tabs[_ngcontent-%COMP%]   .under-development[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;margin:0;color:#666}"],changeDetection:0})}}return n})();function NM(n,o){n&1&&(l(0,"div",4),k(1,"mat-spinner",5),l(2,"p"),p(3,"Loading performance report..."),c()())}function $M(n,o){if(n&1){let t=j();l(0,"div",6)(1,"div",7)(2,"div",8)(3,"div",9)(4,"div",10)(5,"p"),p(6,"Evaluation set:"),c()(),l(7,"mat-form-field",11)(8,"mat-select",12),z(9,"async"),P("selectionChange",function(i){M(t);let a=C();return b(a.onEvaluationSetChange(i.value))}),l(10,"mat-option",13),p(11,"Train set"),c(),l(12,"mat-option",14),p(13,"Dev set"),c(),l(14,"mat-option",15),p(15,"Test set"),c()()()(),l(16,"div",16)(17,"p"),p(18," Labeled Data: "),l(19,"span"),p(20),z(21,"async"),z(22,"async"),c()()(),l(23,"div",17)(24,"span"),p(25,"Confidence Threshold: "),l(26,"span",18)(27,"p",19),p(28),z(29,"async"),z(30,"number"),c()()(),l(31,"div",20)(32,"button",21),P("click",function(){M(t);let i=C();return b(i.openAdjustThresholdDialog())}),p(33," Adjust "),c()()(),l(34,"div",22)(35,"button",23),z(36,"async"),P("click",function(){M(t);let i=C();return b(i.onExportCsv())}),l(37,"mat-icon"),p(38,"download"),c(),p(39," Download CSV "),c()()(),l(40,"div",24)(41,"div",25)(42,"div",26),k(43,"mat-progress-spinner",27)(44,"mat-progress-spinner",28),z(45,"async"),c(),l(46,"div",29)(47,"div",30)(48,"h2"),p(49),z(50,"async"),c(),l(51,"div",31)(52,"p"),p(53,"F1"),c(),k(54,"div",32),l(55,"mat-icon",33),p(56,"info"),c()()()()(),l(57,"div",25)(58,"div",26),k(59,"mat-progress-spinner",27)(60,"mat-progress-spinner",28),z(61,"async"),c(),l(62,"div",29)(63,"div",30)(64,"h2"),p(65),z(66,"async"),c(),l(67,"div",31)(68,"p"),p(69,"Precision"),c(),k(70,"div",32),l(71,"mat-icon",34),p(72,"info"),c()()()()(),l(73,"div",25)(74,"div",26),k(75,"mat-progress-spinner",27)(76,"mat-progress-spinner",28),z(77,"async"),c(),l(78,"div",29)(79,"div",30)(80,"h2"),p(81),z(82,"async"),c(),l(83,"div",31)(84,"p"),p(85,"Recall"),c(),k(86,"div",32),l(87,"mat-icon",35),p(88,"info"),c()()()()()()(),k(89,"app-performance-analysis-tabs"),c()}if(n&2){let t,e,i,a,r,s,d,m=C();g(8),f("value",V(9,14,m.selectedEvaluationSet$)),g(12),ue("(",V(21,16,m.imageCount$)," images, ",V(22,18,m.instanceCount$)," instances labeled)"),g(8),E(" ",si(30,22,((t=(t=V(29,20,m.confidentialReport$))==null?null:t.confidenceThreshold)!==null&&t!==void 0?t:0)/100,"1.2-2")," "),g(7),f("disabled",V(36,25,m.imageCount$)===0),g(8),f("value",100),g(),f("value",((e=(e=V(45,27,m.currentMetrics$))==null?null:e.f1)!==null&&e!==void 0?e:0)*100),g(5),E(" ",m.formatMetric((i=V(50,29,m.currentMetrics$))==null?null:i.f1)," "),g(10),f("value",100),g(),f("value",((a=(a=V(61,31,m.currentMetrics$))==null?null:a.precision)!==null&&a!==void 0?a:0)*100),g(5),E(" ",m.formatMetric((r=V(66,33,m.currentMetrics$))==null?null:r.precision)," "),g(10),f("value",100),g(),f("value",((s=(s=V(77,35,m.currentMetrics$))==null?null:s.recall)!==null&&s!==void 0?s:0)*100),g(5),E(" ",m.formatMetric((d=V(82,37,m.currentMetrics$))==null?null:d.recall)," ")}}function UM(n,o){n&1&&(l(0,"div",36)(1,"mat-icon"),p(2,"info"),c(),l(3,"p"),p(4,"Performance report unavailable"),c()())}var Dg=(()=>{class n{constructor(t,e){this.store=t,this.dialog=e,this.confidentialReport$=this.store.select(Hc),this.selectedEvaluationSet$=this.store.select(Sn),this.images$=this.store.select(xr),this.isLoadingImages$=this.store.select(Xc),this.currentMetrics$=this.store.select(Yc),this.imageCount$=this.store.select(Ro),this.selectedModelId$=this.store.select(ln),this.modelData$=this.store.select(Pi),this.projectId$=this.modelData$.pipe(Gn(i=>i?.projectId??null)),this.instanceCount$=this.images$.pipe(Gn(i=>i.reduce((a,r)=>a+(r.labels?.length??0),0)))}ngOnInit(){}onEvaluationSetChange(t){this.store.dispatch(ur({evaluationSet:t}))}onExportCsv(){this.selectedModelId$.subscribe(t=>{this.selectedEvaluationSet$.subscribe(e=>{t&&this.store.dispatch(_r({modelId:t,split:e}))}).unsubscribe()}).unsubscribe()}formatMetric(t){return t==null?"--":`${(t*100).toFixed(1)}%`}openAdjustThresholdDialog(){let t=null,e=null,i="",a=.51,r="train";if(this.selectedModelId$.subscribe(m=>t=m).unsubscribe(),this.projectId$.subscribe(m=>e=m).unsubscribe(),this.modelData$.subscribe(m=>{m&&(i=m.modelAlias||"")}).unsubscribe(),this.confidentialReport$.subscribe(m=>{m?.confidenceThreshold&&(a=m.confidenceThreshold/100)}).unsubscribe(),this.selectedEvaluationSet$.subscribe(m=>r=m).unsubscribe(),!t||!e){console.error("Model ID or Project ID not available");return}let s={modelId:t,projectId:e,modelAlias:i,currentThreshold:a,evaluationSet:r};this.dialog.open(yg,{width:"800px",maxWidth:"90vw",maxHeight:"99vh",data:s,disableClose:!1}).afterClosed().subscribe(m=>{m?.success&&(console.log("New model generated:",m.newModelId),this.store.dispatch(xi()),e?this.store.dispatch(jo({projectId:e})):this.store.dispatch(Eo()))})}static{this.\u0275fac=function(e){return new(e||n)(T(St),T(re))}}static{this.\u0275cmp=A({type:n,selectors:[["app-performance-report-tab"]],standalone:!1,decls:9,vars:13,consts:[[1,"performance-report-tab"],["class","loading-state",4,"ngIf"],["class","content-loaded",4,"ngIf"],["class","no-data",4,"ngIf"],[1,"loading-state"],["diameter","50"],[1,"content-loaded"],[1,"evaluation-set-and-performance-summary"],[1,"evaluation-set-and-performance-row"],[1,"evaluation-set-section"],[1,"label-text"],["appearance","outline",1,"evaluation-set-select"],[3,"selectionChange","value"],["value","train"],["value","dev"],["value","test"],[1,"labeled-data-info"],[1,"confidence-threshold-section"],[1,"threshold-value"],[1,"inline-text"],[1,"adjust-button-container"],["mat-button","","color","primary",1,"adjust-threshold",3,"click"],[1,"csv-export-section"],["mat-stroked-button","",1,"download-model-evaluation-report-csv",3,"click","disabled"],[1,"performance-metrics-row"],[1,"metric-container"],[1,"circular-progress-container"],["mode","determinate","diameter","48","strokeWidth","6",1,"background-circle",3,"value"],["mode","determinate","diameter","48","strokeWidth","6",1,"foreground-circle",3,"value"],[1,"metric-info"],[1,"metric-value-container"],[1,"metric-label-with-icon"],[1,"spacer"],["fontSize","small","matTooltip","The F1 score combines precision and recall into a single score, creating a unified measure that assesses the model's effectiveness in minimizing false positives and false negatives. A higher F1 score indicates the model is balancing the two factors well. We calculate F1 using micro-averaging.","matTooltipPosition","above",1,"info-icon"],["fontSize","small","matTooltip","Precision","matTooltipPosition","above",1,"info-icon"],["fontSize","small","matTooltip","Recall","matTooltipPosition","above",1,"info-icon"],[1,"no-data"]],template:function(e,i){e&1&&(l(0,"div",0),y(1,NM,4,0,"div",1),z(2,"async"),y(3,$M,90,39,"div",2),z(4,"async"),z(5,"async"),y(6,UM,5,0,"div",3),z(7,"async"),z(8,"async"),c()),e&2&&(g(),f("ngIf",V(2,3,i.isLoadingImages$)),g(2),f("ngIf",V(4,5,i.confidentialReport$)&&!V(5,7,i.isLoadingImages$)),g(3),f("ngIf",!V(7,9,i.confidentialReport$)&&!V(8,11,i.isLoadingImages$)))},dependencies:[N,Z,W,Mt,jt,nt,se,Zt,Tg,Vt,Mo],styles:[".performance-report-tab[_ngcontent-%COMP%]{padding:24px;background-color:#fff;min-height:100%}.content-loaded[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}.evaluation-set-and-performance-summary[_ngcontent-%COMP%]{background-color:#f5f5f5;border-radius:8px;padding:16px;margin-bottom:24px}.evaluation-set-and-performance-row[_ngcontent-%COMP%]{display:flex;align-items:center;gap:24px;margin-bottom:24px;flex-wrap:wrap}.evaluation-set-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.evaluation-set-section[_ngcontent-%COMP%]   .label-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#666;white-space:nowrap}.evaluation-set-section[_ngcontent-%COMP%]   .evaluation-set-select[_ngcontent-%COMP%]{width:85px;margin:0}.evaluation-set-section[_ngcontent-%COMP%]   .evaluation-set-select[_ngcontent-%COMP%]     .mat-form-field-wrapper{padding-bottom:0;margin:0}.evaluation-set-section[_ngcontent-%COMP%]   .evaluation-set-select[_ngcontent-%COMP%]     .mat-mdc-form-field-flex{align-items:center}.evaluation-set-section[_ngcontent-%COMP%]   .evaluation-set-select[_ngcontent-%COMP%]     .mat-form-field-infix{padding:0;border-top:0;width:auto;min-width:50px}.evaluation-set-section[_ngcontent-%COMP%]   .evaluation-set-select[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper{padding:0}.evaluation-set-section[_ngcontent-%COMP%]   .evaluation-set-select[_ngcontent-%COMP%]     .mdc-notched-outline__leading, .evaluation-set-section[_ngcontent-%COMP%]   .evaluation-set-select[_ngcontent-%COMP%]     .mdc-notched-outline__notch, .evaluation-set-section[_ngcontent-%COMP%]   .evaluation-set-select[_ngcontent-%COMP%]     .mdc-notched-outline__trailing{border:none!important}.evaluation-set-section[_ngcontent-%COMP%]   .evaluation-set-select[_ngcontent-%COMP%]     .mat-mdc-select-value-text, .evaluation-set-section[_ngcontent-%COMP%]   .evaluation-set-select[_ngcontent-%COMP%]     .mat-mdc-select-min-line{font-size:14px;color:#666;line-height:1.5}.evaluation-set-section[_ngcontent-%COMP%]   .evaluation-set-select[_ngcontent-%COMP%]     .mat-mdc-select-value{max-width:none}.evaluation-set-section[_ngcontent-%COMP%]   .evaluation-set-select[_ngcontent-%COMP%]     .mat-mdc-select-arrow-wrapper{padding-left:0;margin-left:2px}.evaluation-set-section[_ngcontent-%COMP%]   .evaluation-set-select[_ngcontent-%COMP%]     .mat-mdc-select-trigger{padding-right:0;display:flex;align-items:center}.evaluation-set-section[_ngcontent-%COMP%]   .evaluation-set-select[_ngcontent-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}.labeled-data-info[_ngcontent-%COMP%]{flex:1;min-width:200px}.labeled-data-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#333}.labeled-data-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#666}.confidence-threshold-section[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.confidence-threshold-section[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:#333;white-space:nowrap}.confidence-threshold-section[_ngcontent-%COMP%]   .threshold-value[_ngcontent-%COMP%]   .inline-text[_ngcontent-%COMP%]{display:inline;margin:0;font-weight:500;color:#1976d2}.confidence-threshold-section[_ngcontent-%COMP%]   .adjust-button-container[_ngcontent-%COMP%]   .adjust-threshold[_ngcontent-%COMP%], .csv-export-section[_ngcontent-%COMP%]   .download-model-evaluation-report-csv[_ngcontent-%COMP%]{text-transform:none;font-size:14px}.csv-export-section[_ngcontent-%COMP%]   .download-model-evaluation-report-csv[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.performance-metrics-row[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:48px;padding:16px 0}.metric-container[_ngcontent-%COMP%]{display:flex;align-items:center;gap:16px}.circular-progress-container[_ngcontent-%COMP%]{position:relative;width:48px;height:48px}.circular-progress-container[_ngcontent-%COMP%]   .background-circle[_ngcontent-%COMP%]{position:absolute;top:0;left:0}.circular-progress-container[_ngcontent-%COMP%]   .background-circle[_ngcontent-%COMP%]     circle{stroke:#e0e0e0}.circular-progress-container[_ngcontent-%COMP%]   .foreground-circle[_ngcontent-%COMP%]{position:absolute;top:0;left:0}.circular-progress-container[_ngcontent-%COMP%]   .foreground-circle[_ngcontent-%COMP%]     circle{stroke:#1976d2}.metric-info[_ngcontent-%COMP%]{display:flex;flex-direction:column}.metric-value-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0 0 4px;font-size:24px;font-weight:500;color:#333}.metric-value-container[_ngcontent-%COMP%]   .metric-label-with-icon[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.metric-value-container[_ngcontent-%COMP%]   .metric-label-with-icon[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#666}.metric-value-container[_ngcontent-%COMP%]   .metric-label-with-icon[_ngcontent-%COMP%]   .spacer[_ngcontent-%COMP%]{width:4px}.metric-value-container[_ngcontent-%COMP%]   .metric-label-with-icon[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;color:#999}.metric-value-container[_ngcontent-%COMP%]   .metric-label-with-icon[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]:hover{color:#666}.analysis-section[_ngcontent-%COMP%]{margin-top:24px}.placeholder-text[_ngcontent-%COMP%]{color:#666;font-size:14px;font-style:italic;text-align:center;padding:40px 20px;border:1px dashed #e0e0e0;border-radius:8px;margin-bottom:16px;background-color:#fafafa}.no-data[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:300px;gap:16px;color:#999}.no-data[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;opacity:.5}.no-data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;margin:0}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:400px;gap:16px}.loading-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:14px;margin:0}  .mat-mdc-option{font-size:14px!important}  .mat-mdc-option .mdc-list-item__primary-text{font-size:14px!important;color:#666}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){.performance-report-tab[_ngcontent-%COMP%]{padding:16px}.evaluation-set-and-performance-row[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.performance-metrics-row[_ngcontent-%COMP%]{flex-direction:column;gap:24px}}"],changeDetection:0})}}return n})();function WM(n,o){n&1&&(l(0,"div",10),k(1,"mat-spinner",11),l(2,"p"),p(3,"Loading model data..."),c()())}function GM(n,o){if(n&1){let t=j();l(0,"div",12)(1,"mat-icon"),p(2,"error_outline"),c(),l(3,"h3"),p(4,"Unable to Load Model Details"),c(),l(5,"p",13),p(6),c(),l(7,"div",14)(8,"button",15),P("click",function(){M(t);let i=C(2);return b(i.onRetry())}),l(9,"mat-icon"),p(10,"refresh"),c(),p(11," Retry "),c(),l(12,"button",16),P("click",function(){M(t);let i=C(2);return b(i.onClosePanel())}),p(13,"Close"),c()()()}if(n&2){let t=o.ngIf,e=C(2);g(6),D(e.getErrorMessage(t))}}function YM(n,o){n&1&&k(0,"app-training-information-tab")}function qM(n,o){n&1&&k(0,"app-performance-report-tab")}function XM(n,o){if(n&1&&(l(0,"div"),y(1,YM,1,0,"app-training-information-tab",9),z(2,"async"),y(3,qM,1,0,"app-performance-report-tab",9),z(4,"async"),c()),n&2){let t=C(2);g(),f("ngIf",V(2,2,t.activeTab$)==="training"),g(2),f("ngIf",V(4,4,t.activeTab$)==="performance")}}function ZM(n,o){if(n&1){let t=j();l(0,"div",1),P("click",function(){M(t);let i=C();return b(i.onOverlayClick())}),l(1,"div",2),z(2,"async"),z(3,"async"),P("click",function(i){M(t);let a=C();return b(a.onPanelClick(i))}),l(4,"div",3)(5,"app-model-detail-header",4),P("close",function(){M(t);let i=C();return b(i.onClosePanel())})("toggleWidth",function(){M(t);let i=C();return b(i.onTogglePanelWidth())}),c()(),l(6,"div",5),k(7,"app-model-detail-tabs"),c(),l(8,"div",6),y(9,WM,4,0,"div",7),z(10,"async"),y(11,GM,14,1,"div",8),z(12,"async"),y(13,XM,5,6,"div",9),z(14,"async"),z(15,"async"),c()()()}if(n&2){let t=C();f("@fadeInOut",void 0),g(),$("panel-normal",V(2,9,t.panelWidth$)==="normal")("panel-expanded",V(3,11,t.panelWidth$)==="expanded"),f("@slideIn",void 0),g(8),f("ngIf",V(10,13,t.isLoading$)),g(2),f("ngIf",V(12,15,t.error$)),g(2),f("ngIf",!V(14,17,t.isLoading$)&&!V(15,19,t.error$))}}var Eg=(()=>{class n{constructor(t){this.store=t,this.selectedModelId=null,this.destroy$=new Ct,this.isPanelOpen$=this.store.select(zo),this.panelWidth$=this.store.select(Vo),this.activeTab$=this.store.select(Lo),this.isLoading$=this.store.select(Zc),this.error$=this.store.select(Kc),this.store.select(ln).pipe(q(this.destroy$)).subscribe(e=>{this.selectedModelId=e})}ngOnInit(){}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onEscapeKey(t){this.store.dispatch(xi())}onClosePanel(){this.store.dispatch(xi())}onTogglePanelWidth(){this.store.dispatch(Rl())}onOverlayClick(){this.store.dispatch(xi())}onPanelClick(t){t.stopPropagation()}getErrorMessage(t){return t.includes("Model not found")||t.includes("404")?"The requested model could not be found. It may have been deleted or you may not have permission to access it.":t.includes("Training record not found")?"Training information is unavailable for this model. The model may not have completed training yet.":t.includes("Confidential report")?"Performance report is unavailable for this model. Please try again later.":t.includes("Network")||t.includes("Connection")||t.includes("timeout")?"Unable to connect to the server. Please check your internet connection and try again.":t||"An unexpected error occurred. Please try again later."}onRetry(){this.selectedModelId&&this.store.dispatch(Bl({modelId:this.selectedModelId,trainingRecordId:0}))}static{this.\u0275fac=function(e){return new(e||n)(T(St))}}static{this.\u0275cmp=A({type:n,selectors:[["app-model-detail-panel"]],hostBindings:function(e,i){e&1&&P("keydown.escape",function(r){return i.onEscapeKey(r)},!1,tl)},standalone:!1,decls:2,vars:3,consts:[["class","model-detail-overlay",3,"click",4,"ngIf"],[1,"model-detail-overlay",3,"click"],[1,"model-detail-panel",3,"click"],[1,"panel-header"],[3,"close","toggleWidth"],[1,"panel-tabs"],[1,"panel-content"],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],[4,"ngIf"],[1,"loading-container"],["diameter","50"],[1,"error-container"],[1,"error-message"],[1,"error-actions"],["mat-raised-button","","color","primary",3,"click"],["mat-stroked-button","",3,"click"]],template:function(e,i){e&1&&(y(0,ZM,16,21,"div",0),z(1,"async")),e&2&&f("ngIf",V(1,1,i.isPanelOpen$))},dependencies:[N,Z,W,nt,Jd,tp,Pg,Dg,Vt],styles:[".model-detail-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#0006;z-index:1000;display:flex;justify-content:flex-end}.model-detail-panel[_ngcontent-%COMP%]{position:relative;height:100%;background-color:#fff;border-left:1px solid #e0e0e0;box-shadow:-4px 0 16px #00000026;display:flex;flex-direction:column;transition:width .3s ease-in-out;will-change:width}.model-detail-panel.panel-normal[_ngcontent-%COMP%]{width:75%}.model-detail-panel.panel-expanded[_ngcontent-%COMP%]{width:100%}.panel-header[_ngcontent-%COMP%]{flex-shrink:0;border-bottom:1px solid #e0e0e0;background-color:#fafafa}.panel-tabs[_ngcontent-%COMP%]{flex-shrink:0;border-bottom:1px solid #e0e0e0;background-color:#fff}.panel-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden;background-color:#f5f5f5}.panel-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.panel-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.panel-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#c1c1c1;border-radius:4px}.panel-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#a8a8a8}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;gap:16px;background-color:#fff}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:14px;margin:0}.error-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;height:100%;gap:16px;padding:24px;text-align:center;background-color:#fff}.error-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#f44336}.error-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:500;color:#333}.error-container[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#666;font-size:14px;max-width:500px;line-height:1.5;margin:0}.error-container[_ngcontent-%COMP%]   .error-actions[_ngcontent-%COMP%]{display:flex;gap:12px;margin-top:8px}.error-container[_ngcontent-%COMP%]   .error-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:120px}@media (max-width: 1024px){.model-detail-panel.panel-normal[_ngcontent-%COMP%]{width:85%}.model-detail-panel.panel-expanded[_ngcontent-%COMP%]{width:100%}}@media (max-width: 768px){.model-detail-panel.panel-normal[_ngcontent-%COMP%], .model-detail-panel.panel-expanded[_ngcontent-%COMP%]{width:100%}.panel-content[_ngcontent-%COMP%]{padding:16px}}"],data:{animation:[Gi("slideIn",[In(":enter",[Ie({transform:"translateX(100%)"}),kn("300ms ease-in-out",Ie({transform:"translateX(0)"}))]),In(":leave",[kn("300ms ease-in-out",Ie({transform:"translateX(100%)"}))])]),Gi("fadeInOut",[In(":enter",[Ie({opacity:0}),kn("300ms ease-in-out",Ie({opacity:1}))]),In(":leave",[kn("300ms ease-in-out",Ie({opacity:0}))])])]},changeDetection:0})}}return n})();var jg=(()=>{class n{constructor(){this.searchTerm="",this.showFavoritesOnly=!1,this.searchChange=new H,this.favoritesFilterChange=new H,this.destroy$=new Ct,this.searchSubject=new Ct}ngOnInit(){this.searchSubject.pipe(ri(300),xo(),q(this.destroy$)).subscribe(t=>{this.searchChange.emit(t)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onSearchInputChange(t){let i=t.target?.value||"";this.searchTerm=i,this.searchSubject.next(i)}onFavoritesCheckboxChange(t){this.showFavoritesOnly=t,this.favoritesFilterChange.emit(t)}clearSearch(){this.searchTerm="",this.searchSubject.next("")}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=A({type:n,selectors:[["app-model-search"]],inputs:{searchTerm:"searchTerm",showFavoritesOnly:"showFavoritesOnly"},outputs:{searchChange:"searchChange",favoritesFilterChange:"favoritesFilterChange"},standalone:!1,decls:13,vars:2,consts:[["role","search","aria-label","Search and filter models",1,"models-search-container"],[1,"search-container"],["appearance","outline",1,"search-field"],["matPrefix","","aria-hidden","true"],["matInput","","placeholder","Search by model name, creator","aria-label","Search models by name or creator","aria-describedby","search-help","autocomplete","off","spellcheck","false",3,"input","value"],["id","search-help",1,"sr-only"],[1,"filter-container"],["aria-label","Only show favorite models","aria-describedby","favorites-help",1,"favorites-filter",3,"change","checked"],["id","favorites-help",1,"sr-only"]],template:function(e,i){e&1&&(l(0,"div",0)(1,"div",1)(2,"mat-form-field",2)(3,"mat-icon",3),p(4,"search"),c(),l(5,"input",4),P("input",function(r){return i.onSearchInputChange(r)}),c()(),l(6,"div",5),p(7," Search will filter models by name or creator as you type. Results update automatically with a short delay. "),c()(),l(8,"div",6)(9,"mat-checkbox",7),P("change",function(r){return i.onFavoritesCheckboxChange(r.checked)}),p(10," Only show favorite models "),c(),l(11,"div",8),p(12," When checked, only models marked as favorites will be displayed in the table. "),c()()()),e&2&&(g(5),f("value",i.searchTerm),g(4),f("checked",i.showFavoritesOnly))},dependencies:[kt,Mt,yn,W,Qe],styles:[".models-search-container[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:flex-start;gap:24px;margin-bottom:24px}@media (max-width: 768px){.models-search-container[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:16px}}.search-container[_ngcontent-%COMP%]{flex:1;max-width:500px;position:relative}@media (max-width: 768px){.search-container[_ngcontent-%COMP%]{max-width:100%}}.search-field[_ngcontent-%COMP%]{width:100%}.search-field[_ngcontent-%COMP%]   .mat-mdc-form-field-subscript-wrapper[_ngcontent-%COMP%]{display:none}.search-field[_ngcontent-%COMP%]   .mat-icon[matPrefix][_ngcontent-%COMP%]{color:#666;margin-right:8px}.search-field[_ngcontent-%COMP%]   .mat-icon[matPrefix][_ngcontent-%COMP%]:hover{color:#333}.search-field[_ngcontent-%COMP%]   .mat-mdc-input-element[_ngcontent-%COMP%]:focus{outline:none}.search-field.mat-focused[_ngcontent-%COMP%]   .mat-mdc-form-field-outline-thick[_ngcontent-%COMP%]{border-color:#1976d2;border-width:2px}.filter-container[_ngcontent-%COMP%]{display:flex;align-items:center;margin-top:8px}@media (max-width: 768px){.filter-container[_ngcontent-%COMP%]{margin-top:0}}.favorites-filter[_ngcontent-%COMP%]{white-space:nowrap;font-size:14px}.favorites-filter[_ngcontent-%COMP%]   .mdc-checkbox[_ngcontent-%COMP%]{margin-right:8px}.favorites-filter[_ngcontent-%COMP%]   .mdc-form-field[_ngcontent-%COMP%]{color:#333}.favorites-filter.mat-mdc-checkbox-checked[_ngcontent-%COMP%]   .mdc-form-field[_ngcontent-%COMP%]{color:#1976d2;font-weight:500}.favorites-filter[_ngcontent-%COMP%]:focus-within{outline:2px solid #1976d2;outline-offset:2px;border-radius:4px}.sr-only[_ngcontent-%COMP%]{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}@media (max-width: 480px){.models-search-container[_ngcontent-%COMP%]{gap:12px}.search-field[_ngcontent-%COMP%]   .mat-mdc-form-field-label[_ngcontent-%COMP%]{font-size:13px}.search-field[_ngcontent-%COMP%]   .mat-mdc-input-element[_ngcontent-%COMP%]{font-size:14px}.favorites-filter[_ngcontent-%COMP%]{font-size:13px}}@media (prefers-contrast: high){.search-field[_ngcontent-%COMP%]   .mat-icon[matSuffix][_ngcontent-%COMP%], .search-field[_ngcontent-%COMP%]   button[matSuffix][_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .favorites-filter[_ngcontent-%COMP%]   .mdc-form-field[_ngcontent-%COMP%]{color:#000}}@media (prefers-reduced-motion: reduce){.search-field[_ngcontent-%COMP%]   *[_ngcontent-%COMP%], .favorites-filter[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{transition:none!important;animation:none!important}}"]})}}return n})();function JM(n,o){if(n&1){let t=j();l(0,"button",10),P("click",function(i){M(t);let a=C();return b(a.onFavoriteToggle(i))}),l(1,"mat-icon"),p(2),c()()}if(n&2){let t=C();lr("favorite-button "+t.getFavoriteButtonClass()),f("matTooltip",t.getFavoriteTooltip()),et("aria-label",t.getFavoriteAriaLabel())("aria-pressed",t.model.isFavorite),g(),$("favorite-star-active",t.model.isFavorite)("favorite-star-inactive",!t.model.isFavorite),g(),E(" ",t.getFavoriteIconName()," ")}}function tb(n,o){if(n&1){let t=j();l(0,"button",11),P("click",function(i){M(t);let a=C();return b(a.onKebabMenuClick(i))}),l(1,"mat-icon"),p(2,"more_vert"),c()()}if(n&2){let t=C(),e=gt(4);f("matMenuTriggerFor",e)("matTooltip",t.getKebabTooltip()),et("aria-label",t.getKebabAriaLabel())}}var Fg=(()=>{class n{constructor(){this.showFavoriteButton=!0,this.showKebabMenu=!0,this.favoriteToggle=new H,this.actionMenuClick=new H}onFavoriteToggle(t){t.stopPropagation(),this.favoriteToggle.emit(this.model.id)}onActionMenuClick(t,e){e&&e.stopPropagation(),this.actionMenuClick.emit({modelId:this.model.id,action:t})}onKebabMenuClick(t){t.stopPropagation()}getFavoriteIconName(){return this.model.isFavorite?"star":"star_border"}getFavoriteAriaLabel(){return`${this.model.isFavorite?"Remove from favorites":"Add to favorites"} for ${this.model.modelName}`}getFavoriteTooltip(){return this.model.isFavorite?"Remove from favorites":"Add to favorites"}getKebabAriaLabel(){return`More actions for ${this.model.modelName}`}getKebabTooltip(){return"More actions"}shouldShowFavoriteButton(){return this.showFavoriteButton&&!!this.model}shouldShowKebabMenu(){return this.showKebabMenu&&!!this.model}getFavoriteButtonClass(){return this.model.isFavorite?"favorite-active":"favorite-inactive"}getActionsContainerClass(){let t=["actions-container"];return this.shouldShowFavoriteButton()||t.push("no-favorite"),this.shouldShowKebabMenu()||t.push("no-kebab"),t.join(" ")}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=A({type:n,selectors:[["app-model-actions"]],inputs:{model:"model",showFavoriteButton:"showFavoriteButton",showKebabMenu:"showKebabMenu"},outputs:{favoriteToggle:"favoriteToggle",actionMenuClick:"actionMenuClick"},standalone:!1,decls:25,vars:10,consts:[["actionMenu","matMenu"],["role","group"],["mat-icon-button","","type","button",3,"matTooltip","class","click",4,"ngIf"],["mat-icon-button","","class","kebab-button","type","button",3,"matMenuTriggerFor","matTooltip","click",4,"ngIf"],[1,"model-action-menu"],["mat-menu-item","",1,"action-item","copy-id-action",3,"click"],["aria-hidden","true"],["mat-menu-item","",1,"action-item","test-model-action",3,"click"],["mat-menu-item","",1,"action-item","download-action",3,"click"],["mat-menu-item","",1,"action-item","delete-action",3,"click"],["mat-icon-button","","type","button",3,"click","matTooltip"],["mat-icon-button","","type","button",1,"kebab-button",3,"click","matMenuTriggerFor","matTooltip"]],template:function(e,i){if(e&1){let a=j();l(0,"div",1),y(1,JM,3,10,"button",2)(2,tb,3,3,"button",3),l(3,"mat-menu",4,0)(5,"button",5),P("click",function(s){return M(a),b(i.onActionMenuClick("copyId",s))}),l(6,"mat-icon",6),p(7,"content_copy"),c(),l(8,"span"),p(9,"Copy Model ID"),c()(),l(10,"button",7),P("click",function(s){return M(a),b(i.onActionMenuClick("testModel",s))}),l(11,"mat-icon",6),p(12,"science"),c(),l(13,"span"),p(14,"Test Model"),c()(),l(15,"button",8),P("click",function(s){return M(a),b(i.onActionMenuClick("download",s))}),l(16,"mat-icon",6),p(17,"download"),c(),l(18,"span"),p(19,"Download Model"),c()(),l(20,"button",9),P("click",function(s){return M(a),b(i.onActionMenuClick("delete",s))}),l(21,"mat-icon",6),p(22,"delete"),c(),l(23,"span"),p(24,"Delete Model"),c()()()()}e&2&&(lr(i.getActionsContainerClass()),et("aria-label","Actions for "+i.model.modelName),g(),f("ngIf",i.shouldShowFavoriteButton()),g(),f("ngIf",i.shouldShowKebabMenu()),g(),et("aria-label","Action menu for "+i.model.modelName),g(2),et("aria-label","Copy Model ID for "+i.model.modelName),g(5),et("aria-label","Test "+i.model.modelName),g(5),et("aria-label","Download "+i.model.modelName),g(5),et("aria-label","Delete "+i.model.modelName))},dependencies:[N,at,W,jt,Xe,qe,Ze],styles:[".actions-container[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:flex-start;gap:4px;min-width:80px;padding:0!important;position:relative;margin:0!important}.actions-container.no-favorite[_ngcontent-%COMP%], .actions-container.no-kebab[_ngcontent-%COMP%]{justify-content:flex-start}.actions-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{overflow:visible!important;flex-shrink:0}.favorite-button[_ngcontent-%COMP%]{width:32px!important;height:32px!important;min-width:32px!important;max-width:32px!important;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .2s ease;position:relative;margin-right:4px!important;padding:0!important}.favorite-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:20px!important;width:20px!important;height:20px!important;line-height:20px!important;transition:all .2s ease}.favorite-button[_ngcontent-%COMP%]     .mat-mdc-button-touch-target{display:none!important}.favorite-button[_ngcontent-%COMP%]     .mat-mdc-button-persistent-ripple, .favorite-button[_ngcontent-%COMP%]     .mat-ripple, .favorite-button[_ngcontent-%COMP%]     .mat-mdc-button-ripple{display:none!important}.favorite-button.favorite-active[_ngcontent-%COMP%]   .favorite-star-active[_ngcontent-%COMP%]{color:#ffc107}.favorite-button.favorite-active[_ngcontent-%COMP%]:hover{background-color:#ffc1071a}.favorite-button.favorite-active[_ngcontent-%COMP%]:hover   .favorite-star-active[_ngcontent-%COMP%]{color:#ffb300;transform:scale(1.1)}.favorite-button.favorite-inactive[_ngcontent-%COMP%]   .favorite-star-inactive[_ngcontent-%COMP%]{color:#bdbdbd}.favorite-button.favorite-inactive[_ngcontent-%COMP%]:hover{background-color:#bdbdbd1a}.favorite-button.favorite-inactive[_ngcontent-%COMP%]:hover   .favorite-star-inactive[_ngcontent-%COMP%]{color:#999;transform:scale(1.1)}.favorite-button[_ngcontent-%COMP%]:focus{outline:2px solid #1976d2;outline-offset:2px;background-color:#1976d21a}.favorite-button[_ngcontent-%COMP%]:focus-visible{outline:3px solid #1976d2;outline-offset:2px}.favorite-button[_ngcontent-%COMP%]:active{transform:scale(.95)}.favorite-button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.favorite-button[_ngcontent-%COMP%]:disabled:hover{background-color:transparent}.favorite-button[_ngcontent-%COMP%]:disabled:hover   .mat-icon[_ngcontent-%COMP%]{transform:none}.kebab-button[_ngcontent-%COMP%]{width:32px!important;height:32px!important;min-width:32px!important;max-width:32px!important;display:flex;align-items:center;justify-content:center;border-radius:50%;transition:all .2s ease;position:relative;margin-right:0!important;padding:0!important;color:#666}.kebab-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:20px!important;width:20px!important;height:20px!important;line-height:20px!important;color:#666;transition:all .2s ease}.kebab-button[_ngcontent-%COMP%]     .mat-mdc-button-touch-target{display:none!important}.kebab-button[_ngcontent-%COMP%]     .mat-mdc-button-persistent-ripple, .kebab-button[_ngcontent-%COMP%]     .mat-ripple, .kebab-button[_ngcontent-%COMP%]     .mat-mdc-button-ripple{display:none!important}.kebab-button[_ngcontent-%COMP%]:hover{background-color:#0000000a}.kebab-button[_ngcontent-%COMP%]:hover   .mat-icon[_ngcontent-%COMP%]{color:#333}.kebab-button[_ngcontent-%COMP%]:hover{background-color:#6666661a}.kebab-button[_ngcontent-%COMP%]:hover   .mat-icon[_ngcontent-%COMP%]{color:#333;transform:scale(1.1)}.kebab-button[_ngcontent-%COMP%]:focus{outline:2px solid #1976d2;outline-offset:2px;background-color:#1976d21a}.kebab-button[_ngcontent-%COMP%]:focus-visible{outline:3px solid #1976d2;outline-offset:2px}.kebab-button[_ngcontent-%COMP%]:active{transform:scale(.95)}.kebab-button[aria-expanded=true][_ngcontent-%COMP%]{background-color:#66666626}.kebab-button[aria-expanded=true][_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#333}.kebab-button[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.kebab-button[_ngcontent-%COMP%]:disabled:hover{background-color:transparent}.kebab-button[_ngcontent-%COMP%]:disabled:hover   .mat-icon[_ngcontent-%COMP%]{transform:none;color:#666}.model-action-menu[_ngcontent-%COMP%]   .mat-mdc-menu-panel[_ngcontent-%COMP%]{min-width:180px;max-width:250px;border:1px solid #e0e0e0;box-shadow:0 4px 12px #00000026}.model-action-menu[_ngcontent-%COMP%]   .action-item[_ngcontent-%COMP%]{font-size:14px;min-height:44px;padding:0 16px;display:flex;align-items:center;transition:background-color .2s ease}.model-action-menu[_ngcontent-%COMP%]   .action-item[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{margin-right:12px;font-size:18px;width:18px;height:18px;color:#666;flex-shrink:0}.model-action-menu[_ngcontent-%COMP%]   .action-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.model-action-menu[_ngcontent-%COMP%]   .action-item.view-action[_ngcontent-%COMP%]:hover{background-color:#e3f2fd}.model-action-menu[_ngcontent-%COMP%]   .action-item.view-action[_ngcontent-%COMP%]:hover   .mat-icon[_ngcontent-%COMP%]{color:#1976d2}.model-action-menu[_ngcontent-%COMP%]   .action-item.edit-action[_ngcontent-%COMP%]:hover{background-color:#f3e5f5}.model-action-menu[_ngcontent-%COMP%]   .action-item.edit-action[_ngcontent-%COMP%]:hover   .mat-icon[_ngcontent-%COMP%]{color:#7b1fa2}.model-action-menu[_ngcontent-%COMP%]   .action-item.download-action[_ngcontent-%COMP%]:hover{background-color:#e8f5e8}.model-action-menu[_ngcontent-%COMP%]   .action-item.download-action[_ngcontent-%COMP%]:hover   .mat-icon[_ngcontent-%COMP%]{color:#388e3c}.model-action-menu[_ngcontent-%COMP%]   .action-item.duplicate-action[_ngcontent-%COMP%]:hover{background-color:#fff3e0}.model-action-menu[_ngcontent-%COMP%]   .action-item.duplicate-action[_ngcontent-%COMP%]:hover   .mat-icon[_ngcontent-%COMP%]{color:#f57c00}.model-action-menu[_ngcontent-%COMP%]   .action-item.delete-action[_ngcontent-%COMP%], .model-action-menu[_ngcontent-%COMP%]   .action-item.delete-action[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#d32f2f}.model-action-menu[_ngcontent-%COMP%]   .action-item.delete-action[_ngcontent-%COMP%]:hover{background-color:#ffebee;color:#c62828}.model-action-menu[_ngcontent-%COMP%]   .action-item.delete-action[_ngcontent-%COMP%]:hover   .mat-icon[_ngcontent-%COMP%]{color:#c62828}.model-action-menu[_ngcontent-%COMP%]   .action-item[_ngcontent-%COMP%]:focus{background-color:#1976d21a;outline:2px solid #1976d2;outline-offset:-2px}.model-action-menu[_ngcontent-%COMP%]   .action-item[_ngcontent-%COMP%]:focus-visible{outline:3px solid #1976d2;outline-offset:-2px}.model-action-menu[_ngcontent-%COMP%]   .action-item[_ngcontent-%COMP%]:disabled{opacity:.6;cursor:not-allowed}.model-action-menu[_ngcontent-%COMP%]   .action-item[_ngcontent-%COMP%]:disabled:hover{background-color:transparent}.model-action-menu[_ngcontent-%COMP%]   .mat-divider[_ngcontent-%COMP%]{margin:4px 0;border-top-color:#e0e0e0}@media (max-width: 768px){.actions-container[_ngcontent-%COMP%]{gap:2px;min-width:70px}.favorite-button[_ngcontent-%COMP%], .kebab-button[_ngcontent-%COMP%]{width:32px!important;height:32px!important;min-width:32px!important}.favorite-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .kebab-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:18px!important;width:18px!important;height:18px!important}.model-action-menu[_ngcontent-%COMP%]   .mat-mdc-menu-panel[_ngcontent-%COMP%]{min-width:160px}.model-action-menu[_ngcontent-%COMP%]   .action-item[_ngcontent-%COMP%]{font-size:13px;min-height:40px;padding:0 12px}.model-action-menu[_ngcontent-%COMP%]   .action-item[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:16px!important;width:16px!important;height:16px!important;margin-right:10px}}@media (max-width: 480px){.actions-container[_ngcontent-%COMP%]{min-width:60px}.favorite-button[_ngcontent-%COMP%], .kebab-button[_ngcontent-%COMP%]{width:28px!important;height:28px!important;min-width:28px!important}.favorite-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%], .kebab-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:16px!important;width:16px!important;height:16px!important}}@media (prefers-contrast: high){.favorite-button[_ngcontent-%COMP%]{border:2px solid transparent}.favorite-button.favorite-active[_ngcontent-%COMP%]   .favorite-star-active[_ngcontent-%COMP%]{color:#ff6f00}.favorite-button.favorite-active[_ngcontent-%COMP%]:focus{border-color:#000;outline:none}.favorite-button.favorite-inactive[_ngcontent-%COMP%]   .favorite-star-inactive[_ngcontent-%COMP%]{color:#424242}.favorite-button.favorite-inactive[_ngcontent-%COMP%]:focus{border-color:#000;outline:none}.kebab-button[_ngcontent-%COMP%]{border:2px solid transparent}.kebab-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#424242}.kebab-button[_ngcontent-%COMP%]:focus{border-color:#000;outline:none}.model-action-menu[_ngcontent-%COMP%]   .mat-mdc-menu-panel[_ngcontent-%COMP%]{border:2px solid #000000}.model-action-menu[_ngcontent-%COMP%]   .action-item.delete-action[_ngcontent-%COMP%], .model-action-menu[_ngcontent-%COMP%]   .action-item.delete-action[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{color:#b71c1c}.model-action-menu[_ngcontent-%COMP%]   .action-item[_ngcontent-%COMP%]:focus{background-color:#000;color:#fff;outline:none}.model-action-menu[_ngcontent-%COMP%]   .action-item[_ngcontent-%COMP%]:focus   .mat-icon[_ngcontent-%COMP%]{color:#fff}}@media (prefers-reduced-motion: reduce){.favorite-button[_ngcontent-%COMP%], .kebab-button[_ngcontent-%COMP%], .action-item[_ngcontent-%COMP%], .mat-icon[_ngcontent-%COMP%]{transition:none!important}.favorite-button[_ngcontent-%COMP%]:hover   .mat-icon[_ngcontent-%COMP%], .kebab-button[_ngcontent-%COMP%]:hover   .mat-icon[_ngcontent-%COMP%]{transform:none!important}}@media print{.actions-container[_ngcontent-%COMP%]{display:none}}"]})}}return n})();function ib(n,o){n&1&&(l(0,"div",5),k(1,"mat-spinner",6),l(2,"span",7),p(3,"Loading models..."),c()())}function ob(n,o){n&1&&(l(0,"div",8)(1,"mat-icon",9),p(2,"inbox"),c(),l(3,"p",10),p(4,"No models found."),c(),l(5,"p",11),p(6," Try adjusting your search criteria or filters. "),c()())}function ab(n,o){if(n&1&&(l(0,"th",30)(1,"strong"),p(2),c()()),n&2){let t=C(2);de(t.getColumnStyle(t.tableColumns[0])),g(2),D(t.tableColumns[0].label)}}function rb(n,o){if(n&1){let t=j();l(0,"td",31),P("click",function(){let i=M(t).$implicit,a=C(2);return b(a.onModelNameClick(i.id))})("keydown.enter",function(){let i=M(t).$implicit,a=C(2);return b(a.onModelNameClick(i.id))})("keydown.space",function(){let i=M(t).$implicit,a=C(2);return b(a.onModelNameClick(i.id))}),l(1,"span",32),p(2),c()()}if(n&2){let t=o.$implicit,e=o.index,i=C(2);de(i.getColumnStyle(i.tableColumns[0])),et("aria-rowindex",e+2),g(),f("title",t.modelName),et("aria-label","Model name: "+t.modelName+", click to view training information"),g(),E(" ",t.modelName," ")}}function sb(n,o){if(n&1&&(l(0,"th",33)(1,"strong"),p(2),c()()),n&2){let t=C(2);de(t.getColumnStyle(t.tableColumns[1])),g(2),D(t.tableColumns[1].label)}}function lb(n,o){if(n&1){let t=j();l(0,"td",34),P("click",function(){let i=M(t).$implicit,a=C(2);return b(a.onMetricClick(i.id,"trainMetric"))})("keydown.enter",function(){let i=M(t).$implicit,a=C(2);return b(a.onMetricClick(i.id,"trainMetric"))})("keydown.space",function(){let i=M(t).$implicit,a=C(2);return b(a.onMetricClick(i.id,"trainMetric"))}),l(1,"span",35),p(2),c()()}if(n&2){let t=o.$implicit,e=o.index,i=C(2);de(i.getColumnStyle(i.tableColumns[1])),et("aria-rowindex",e+2),g(),et("aria-label","Training metric: "+i.formatMetricAsPercentage(t.trainMetric)+", click to view performance report"),g(),E(" ",i.formatMetricAsPercentage(t.trainMetric)," ")}}function cb(n,o){if(n&1&&(l(0,"th",33)(1,"strong"),p(2),c()()),n&2){let t=C(2);de(t.getColumnStyle(t.tableColumns[2])),g(2),D(t.tableColumns[2].label)}}function db(n,o){if(n&1){let t=j();l(0,"td",34),P("click",function(){let i=M(t).$implicit,a=C(2);return b(a.onMetricClick(i.id,"devMetric"))})("keydown.enter",function(){let i=M(t).$implicit,a=C(2);return b(a.onMetricClick(i.id,"devMetric"))})("keydown.space",function(){let i=M(t).$implicit,a=C(2);return b(a.onMetricClick(i.id,"devMetric"))}),l(1,"span",35),p(2),c()()}if(n&2){let t=o.$implicit,e=o.index,i=C(2);de(i.getColumnStyle(i.tableColumns[2])),et("aria-rowindex",e+2),g(),et("aria-label","Development metric: "+i.formatMetricAsPercentage(t.devMetric)+", click to view performance report"),g(),E(" ",i.formatMetricAsPercentage(t.devMetric)," ")}}function pb(n,o){if(n&1&&(l(0,"th",33)(1,"strong"),p(2),c()()),n&2){let t=C(2);de(t.getColumnStyle(t.tableColumns[3])),g(2),D(t.tableColumns[3].label)}}function mb(n,o){if(n&1){let t=j();l(0,"td",34),P("click",function(){let i=M(t).$implicit,a=C(2);return b(a.onMetricClick(i.id,"testMetric"))})("keydown.enter",function(){let i=M(t).$implicit,a=C(2);return b(a.onMetricClick(i.id,"testMetric"))})("keydown.space",function(){let i=M(t).$implicit,a=C(2);return b(a.onMetricClick(i.id,"testMetric"))}),l(1,"span",35),p(2),c()()}if(n&2){let t=o.$implicit,e=o.index,i=C(2);de(i.getColumnStyle(i.tableColumns[3])),et("aria-rowindex",e+2),g(),$("unavailable",t.testMetric===null),et("aria-label",t.testMetric===null?"Test metric: Not available":"Test metric: "+i.formatMetricAsPercentage(t.testMetric)+", click to view performance report"),g(),E(" ",i.formatMetricAsPercentage(t.testMetric)," ")}}function gb(n,o){if(n&1&&(l(0,"th",39)(1,"strong"),p(2),c()()),n&2){let t=C(3);de(t.getColumnStyle(t.tableColumns[4])),g(2),D(t.tableColumns[4].label)}}function hb(n,o){if(n&1){let t=j();l(0,"td",40)(1,"a",41),P("click",function(i){M(t);let a=C(3);return b(a.onAddEvaluationSet(i))}),p(2," + Add "),c()()}if(n&2){let t=o.index,e=C(3);de(e.getColumnStyle(e.tableColumns[4])),K("display",t===0?"table-cell":"none"),et("aria-rowindex",t+2)("rowspan",t===0?e.models.length:null),g(),et("aria-label","Add more evaluation set")}}function fb(n,o){n&1&&(vt(0,36),y(1,gb,3,3,"th",37)(2,hb,3,7,"td",38),Ot())}function ub(n,o){if(n&1&&(l(0,"th",42)(1,"strong"),p(2),c()()),n&2){let t=C(2);de(t.getColumnStyle(t.tableColumns[4])),g(2),D(t.tableColumns[4].label)}}function _b(n,o){if(n&1){let t=j();l(0,"td",43),P("click",function(){let i=M(t).$implicit,a=C(2);return b(a.onConfidenceThresholdClick(i.id))})("keydown.enter",function(){let i=M(t).$implicit,a=C(2);return b(a.onConfidenceThresholdClick(i.id))})("keydown.space",function(){let i=M(t).$implicit,a=C(2);return b(a.onConfidenceThresholdClick(i.id))}),l(1,"span",44),p(2),c()()}if(n&2){let t=o.$implicit,e=o.index,i=C(2);de(i.getColumnStyle(i.tableColumns[4])),et("aria-rowindex",e+2),g(),et("aria-label","Confidence threshold: "+i.formatConfidenceThreshold(t.confidenceThreshold)+", click to view performance report"),g(),E(" ",i.formatConfidenceThreshold(t.confidenceThreshold)," ")}}function Cb(n,o){if(n&1&&(l(0,"th",45)(1,"strong"),p(2),c()()),n&2){let t=C(2);de(t.getColumnStyle(t.tableColumns[5])),g(2),D(t.tableColumns[5].label)}}function xb(n,o){if(n&1){let t=j();l(0,"td",46)(1,"app-model-actions",47),P("favoriteToggle",function(i){M(t);let a=C(2);return b(a.onFavoriteToggle(i))})("actionMenuClick",function(i){M(t);let a=C(2);return b(a.onActionMenuClick(i))}),c()()}if(n&2){let t=o.$implicit,e=o.index,i=C(2);de(i.getColumnStyle(i.tableColumns[5])),K("padding","8px")("overflow","visible"),et("aria-rowindex",e+2),g(),f("model",t)}}function Mb(n,o){n&1&&k(0,"tr",48)}function bb(n,o){if(n&1&&k(0,"tr",49),n&2){let t=o.$implicit,e=o.index,i=C(2);et("aria-rowindex",e+2)("aria-label","Model: "+t.modelName+", row "+(e+1)+" of "+i.models.length)}}function Pb(n,o){if(n&1&&(l(0,"table",12),vt(1,13),y(2,ab,3,3,"th",14)(3,rb,3,6,"td",15),Ot(),vt(4,16),y(5,sb,3,3,"th",17)(6,lb,3,5,"td",18),Ot(),vt(7,19),y(8,cb,3,3,"th",17)(9,db,3,5,"td",18),Ot(),vt(10,20),y(11,pb,3,3,"th",17)(12,mb,3,7,"td",18),Ot(),y(13,fb,3,0,"ng-container",21),vt(14,22),y(15,ub,3,3,"th",23)(16,_b,3,5,"td",24),Ot(),vt(17,25),y(18,Cb,3,3,"th",26)(19,xb,2,8,"td",27),Ot(),y(20,Mb,1,0,"tr",28)(21,bb,1,2,"tr",29),c()),n&2){let t=C();f("dataSource",t.dataSource),et("aria-rowcount",t.models.length+1)("aria-colcount",t.displayedColumns.length),g(13),f("ngIf",!1),g(7),f("matHeaderRowDef",t.displayedColumns),g(),f("matRowDefColumns",t.displayedColumns)}}var Ag=(()=>{class n{constructor(){this.models=[],this.loading=!1,this.favoriteToggle=new H,this.actionMenuClick=new H,this.rowClick=new H,this.dataSource=new nd,this.displayedColumns=["modelName","trainMetric","devMetric","testMetric","confidenceThreshold","actions"],this.tableColumns=[{key:"modelName",label:"Model",sortable:!1,width:"25%",align:"left"},{key:"trainMetric",label:"Train",sortable:!1,width:"10%",align:"center"},{key:"devMetric",label:"Dev",sortable:!1,width:"10%",align:"center"},{key:"testMetric",label:"Test",sortable:!1,width:"10%",align:"center"},{key:"confidenceThreshold",label:"Confidence Threshold",sortable:!1,width:"15%",align:"center"},{key:"actions",label:"Actions",sortable:!1,width:"5%",align:"left"}]}ngOnInit(){this.updateDataSource()}ngOnChanges(){this.updateDataSource()}ngAfterViewInit(){this.dataSource.sort=this.sort}updateDataSource(){this.dataSource.data=this.models}formatMetricAsPercentage(t){return t==null?"--":`${Math.round(t)}%`}formatConfidenceThreshold(t){return t==null?"N/A":(t/100).toFixed(2)}onFavoriteToggle(t){this.favoriteToggle.emit(t)}onActionMenuClick(t){this.actionMenuClick.emit(t)}getColumnClass(t){return`column-${t.key} text-${t.align}`}getColumnStyle(t){return{width:t.width,"text-align":t.align}}isColumnSortable(t){let e=this.tableColumns.find(i=>i.key===t);return e?e.sortable:!1}getSortDirection(t){return!this.sort||!this.isColumnSortable(t)?"none":this.sort.active===t?this.sort.direction==="asc"?"ascending":this.sort.direction==="desc"?"descending":"none":"none"}onModelNameClick(t){this.rowClick.emit({modelId:t,clickedColumn:"modelName"})}onMetricClick(t,e){this.rowClick.emit({modelId:t,clickedColumn:e})}onConfidenceThresholdClick(t){this.rowClick.emit({modelId:t,clickedColumn:"confidenceThreshold"})}onAddEvaluationSet(t){t.preventDefault(),t.stopPropagation(),console.log("Add evaluation set clicked")}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=A({type:n,selectors:[["app-model-table"]],viewQuery:function(e,i){if(e&1&&ve(id,5),e&2){let a;pe(a=me())&&(i.sort=a.first)}},inputs:{models:"models",loading:"loading"},outputs:{favoriteToggle:"favoriteToggle",actionMenuClick:"actionMenuClick",rowClick:"rowClick"},standalone:!1,features:[oe],decls:5,vars:5,consts:[[1,"models-table-container"],["class","loading-overlay","role","status","aria-live","polite","aria-label","Loading models data",4,"ngIf"],[1,"table-wrapper"],["class","empty-state","role","status","aria-live","polite",4,"ngIf"],["mat-table","","class","models-table","role","table","aria-label","Models data table",3,"dataSource",4,"ngIf"],["role","status","aria-live","polite","aria-label","Loading models data",1,"loading-overlay"],["diameter","32","aria-hidden","true"],[1,"loading-text"],["role","status","aria-live","polite",1,"empty-state"],["aria-hidden","true",1,"empty-icon"],[1,"empty-message"],[1,"empty-subtitle"],["mat-table","","role","table","aria-label","Models data table",1,"models-table",3,"dataSource"],["matColumnDef","modelName"],["mat-header-cell","","class","header-cell","role","columnheader","scope","col",3,"style",4,"matHeaderCellDef"],["mat-cell","","class","model-name-cell clickable","role","gridcell","tabindex","0",3,"style","click","keydown.enter","keydown.space",4,"matCellDef"],["matColumnDef","trainMetric"],["mat-header-cell","","class","header-cell metric-header","role","columnheader","scope","col",3,"style",4,"matHeaderCellDef"],["mat-cell","","class","metric-cell clickable","role","gridcell","tabindex","0",3,"style","click","keydown.enter","keydown.space",4,"matCellDef"],["matColumnDef","devMetric"],["matColumnDef","testMetric"],["matColumnDef","moreEvaluationSet",4,"ngIf"],["matColumnDef","confidenceThreshold"],["mat-header-cell","","class","header-cell threshold-header","role","columnheader","scope","col",3,"style",4,"matHeaderCellDef"],["mat-cell","","class","threshold-cell clickable","role","gridcell","tabindex","0",3,"style","click","keydown.enter","keydown.space",4,"matCellDef"],["matColumnDef","actions"],["mat-header-cell","","class","header-cell actions-header","role","columnheader","scope","col",3,"style",4,"matHeaderCellDef"],["mat-cell","","class","actions-cell","role","gridcell",3,"style","padding","overflow",4,"matCellDef"],["mat-header-row","","class","header-row","role","row","aria-rowindex","1",4,"matHeaderRowDef"],["mat-row","","class","data-row","role","row",4,"matRowDef","matRowDefColumns"],["mat-header-cell","","role","columnheader","scope","col",1,"header-cell"],["mat-cell","","role","gridcell","tabindex","0",1,"model-name-cell","clickable",3,"click","keydown.enter","keydown.space"],[1,"model-name",3,"title"],["mat-header-cell","","role","columnheader","scope","col",1,"header-cell","metric-header"],["mat-cell","","role","gridcell","tabindex","0",1,"metric-cell","clickable",3,"click","keydown.enter","keydown.space"],[1,"metric-value"],["matColumnDef","moreEvaluationSet"],["mat-header-cell","","class","header-cell more-eval-header","role","columnheader","scope","col",3,"style",4,"matHeaderCellDef"],["mat-cell","","class","more-eval-cell","role","gridcell",3,"style","display",4,"matCellDef"],["mat-header-cell","","role","columnheader","scope","col",1,"header-cell","more-eval-header"],["mat-cell","","role","gridcell",1,"more-eval-cell"],["href","javascript:void(0)",1,"add-link",3,"click"],["mat-header-cell","","role","columnheader","scope","col",1,"header-cell","threshold-header"],["mat-cell","","role","gridcell","tabindex","0",1,"threshold-cell","clickable",3,"click","keydown.enter","keydown.space"],[1,"threshold-value"],["mat-header-cell","","role","columnheader","scope","col",1,"header-cell","actions-header"],["mat-cell","","role","gridcell",1,"actions-cell"],[3,"favoriteToggle","actionMenuClick","model"],["mat-header-row","","role","row","aria-rowindex","1",1,"header-row"],["mat-row","","role","row",1,"data-row"]],template:function(e,i){e&1&&(l(0,"div",0),y(1,ib,4,0,"div",1),l(2,"div",2),y(3,ob,7,0,"div",3)(4,Pb,22,6,"table",4),c()()),e&2&&(g(),f("ngIf",i.loading),g(),$("loading",i.loading),g(),f("ngIf",i.models.length===0&&!i.loading),g(),f("ngIf",i.models.length>0))},dependencies:[N,Bo,$o,Go,Uo,No,Yo,Ho,Wo,qo,Xo,W,nt,Fg],styles:[".models-table-container[_ngcontent-%COMP%]{position:relative;width:100%;overflow:visible!important}.loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background-color:#fffc;display:flex;flex-direction:column;align-items:center;justify-content:center;z-index:10}.loading-overlay[_ngcontent-%COMP%]   .loading-text[_ngcontent-%COMP%]{margin-top:12px;font-size:14px;color:#666}.table-wrapper[_ngcontent-%COMP%]{width:100%;overflow-x:auto;overflow-y:visible!important;min-height:200px}.table-wrapper.loading[_ngcontent-%COMP%]{opacity:.6;pointer-events:none}.table-wrapper[_ngcontent-%COMP%]   .models-table[_ngcontent-%COMP%]{table-layout:auto!important}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 24px;text-align:center;min-height:300px}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:64px;color:#bdbdbd;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   .empty-message[_ngcontent-%COMP%]{font-size:18px;font-weight:500;color:#757575;margin:0 0 8px}.empty-state[_ngcontent-%COMP%]   .empty-subtitle[_ngcontent-%COMP%]{font-size:14px;color:#999;margin:0}.models-table[_ngcontent-%COMP%]{width:100%;background-color:#fff;table-layout:auto!important}.models-table[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]{background-color:#f5f5f5;border-bottom:2px solid #e0e0e0}.models-table[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]   .header-cell[_ngcontent-%COMP%]{padding:16px 12px;font-size:14px;color:#333;border-bottom:none;background-color:#f5f5f5}.models-table[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]   .header-cell[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{font-weight:600}.models-table[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]   .header-cell[mat-sort-header][_ngcontent-%COMP%]{cursor:pointer}.models-table[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]   .header-cell[mat-sort-header][_ngcontent-%COMP%]:focus{outline:2px solid #1976d2;outline-offset:-2px;background-color:#e3f2fd}.models-table[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]   .header-cell[mat-sort-header][_ngcontent-%COMP%]:hover{background-color:#eee}.models-table[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]   .header-cell[_ngcontent-%COMP%]   .mat-sort-header-arrow[_ngcontent-%COMP%]{color:#666}.models-table[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]   .header-cell.metric-header[_ngcontent-%COMP%]{text-align:center!important}.models-table[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]   .header-cell.metric-header[_ngcontent-%COMP%]     .mat-sort-header-container{justify-content:center!important}.models-table[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]   .header-cell.threshold-header[_ngcontent-%COMP%]{text-align:center!important}.models-table[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]   .header-cell.threshold-header[_ngcontent-%COMP%]     .mat-sort-header-container{justify-content:center!important}.models-table[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]   .header-cell.actions-header[_ngcontent-%COMP%]{text-align:left}.models-table[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]{border-bottom:1px solid #f0f0f0;background-color:#fff!important}.models-table[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]:nth-child(2n), .models-table[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]:nth-child(odd){background-color:#fff!important}.models-table[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]:nth-child(2n):hover, .models-table[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]:nth-child(odd):hover{background-color:#fff!important}.models-table[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.models-table[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]:focus{outline:2px solid #1976d2;outline-offset:-2px;background-color:#e3f2fd}.models-table[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{padding:16px 12px;font-size:14px;line-height:1.4;border-bottom:none}.models-table[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]:focus{outline:2px solid #1976d2;outline-offset:-2px;background-color:#e3f2fd}.model-name-cell[_ngcontent-%COMP%]{cursor:pointer;transition:box-shadow .2s ease}.model-name-cell[_ngcontent-%COMP%]:hover{box-shadow:inset 0 0 0 2px #1976d2}.model-name-cell[_ngcontent-%COMP%]   .model-name[_ngcontent-%COMP%]{font-weight:500;color:#1976d2;font-size:14px;line-height:1.3;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;max-width:300px;display:inline-block}.metric-cell[_ngcontent-%COMP%]{text-align:center!important;cursor:pointer;transition:box-shadow .2s ease}.metric-cell[_ngcontent-%COMP%]:hover{box-shadow:inset 0 0 0 2px #1976d2}.metric-cell[_ngcontent-%COMP%]   .metric-value[_ngcontent-%COMP%]{font-family:Roboto Mono,monospace;font-size:13px;font-weight:500;color:#1976d2}.metric-cell[_ngcontent-%COMP%]   .metric-value.unavailable[_ngcontent-%COMP%]{color:#999;font-style:italic}.threshold-cell[_ngcontent-%COMP%]{text-align:center!important;cursor:pointer;transition:box-shadow .2s ease}.threshold-cell[_ngcontent-%COMP%]:hover{box-shadow:inset 0 0 0 2px #1976d2}.threshold-cell[_ngcontent-%COMP%]   .threshold-value[_ngcontent-%COMP%]{font-family:Roboto Mono,monospace;font-size:13px;font-weight:500;color:#1976d2}.more-eval-cell[_ngcontent-%COMP%]{text-align:center!important;vertical-align:middle!important;border-left:1px solid #e0e0e0;border-right:1px solid #e0e0e0}.more-eval-cell[_ngcontent-%COMP%]   .add-link[_ngcontent-%COMP%]{color:#1976d2;text-decoration:none;font-size:14px;font-weight:400;cursor:pointer;transition:color .2s ease}.more-eval-cell[_ngcontent-%COMP%]   .add-link[_ngcontent-%COMP%]:hover{color:#1565c0;text-decoration:underline}.more-eval-cell[_ngcontent-%COMP%]   .add-link[_ngcontent-%COMP%]:focus{outline:2px solid #1976d2;outline-offset:2px;border-radius:2px}.actions-cell[_ngcontent-%COMP%]{text-align:left!important;padding:8px!important;overflow:visible!important;position:relative}.actions-cell[_ngcontent-%COMP%]   app-model-actions[_ngcontent-%COMP%]{display:block;width:100%;max-width:100%}.actions-cell[_ngcontent-%COMP%]     .actions-container{padding:0!important}.actions-cell[_ngcontent-%COMP%]     .mat-mdc-button-touch-target{display:none!important}.actions-cell[_ngcontent-%COMP%]     .favorite-button, .actions-cell[_ngcontent-%COMP%]     .kebab-button{overflow:visible!important}.text-left[_ngcontent-%COMP%]{text-align:left!important}.text-center[_ngcontent-%COMP%]{text-align:center!important}.text-right[_ngcontent-%COMP%]{text-align:right!important}.sr-only[_ngcontent-%COMP%]{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}@media (max-width: 768px){.models-table[_ngcontent-%COMP%]   .header-cell[_ngcontent-%COMP%], .models-table[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{padding:12px 8px}.models-table[_ngcontent-%COMP%]   .model-name[_ngcontent-%COMP%]{max-width:200px}.actions-cell[_ngcontent-%COMP%]{width:120px!important;min-width:120px!important;padding:8px 16px 8px 6px!important}}@media (max-width: 480px){.models-table[_ngcontent-%COMP%]   .header-cell[_ngcontent-%COMP%], .models-table[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]{padding:8px 6px;font-size:13px}.models-table[_ngcontent-%COMP%]   .model-name[_ngcontent-%COMP%]{max-width:150px;font-size:13px}.models-table[_ngcontent-%COMP%]   .metric-value[_ngcontent-%COMP%], .models-table[_ngcontent-%COMP%]   .threshold-value[_ngcontent-%COMP%]{font-size:12px}.actions-cell[_ngcontent-%COMP%]{width:100px!important;min-width:100px!important;padding:6px 12px 6px 4px!important}}.models-table[_ngcontent-%COMP%]   .mat-mdc-cell[_ngcontent-%COMP%]:focus, .models-table[_ngcontent-%COMP%]   .header-cell[_ngcontent-%COMP%]:focus{outline:2px solid #1976d2;outline-offset:-2px}.models-table[_ngcontent-%COMP%]   .favorite-button[_ngcontent-%COMP%]:focus, .models-table[_ngcontent-%COMP%]   .kebab-button[_ngcontent-%COMP%]:focus{outline:2px solid #1976d2;outline-offset:2px}@media (prefers-contrast: high){.models-table[_ngcontent-%COMP%]   .header-row[_ngcontent-%COMP%]{background-color:#fff;border-bottom:3px solid #000000}.models-table[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]{border-bottom:2px solid #000000}.models-table[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]:hover, .models-table[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]:focus{background-color:#f0f0f0}.models-table[_ngcontent-%COMP%]   .metric-value.unavailable[_ngcontent-%COMP%]{color:#000;text-decoration:line-through}.models-table[_ngcontent-%COMP%]   .model-name[_ngcontent-%COMP%], .models-table[_ngcontent-%COMP%]   .metric-value[_ngcontent-%COMP%], .models-table[_ngcontent-%COMP%]   .threshold-value[_ngcontent-%COMP%]{color:#000}.models-table[_ngcontent-%COMP%]   .model-creator[_ngcontent-%COMP%]{color:#333}}@media (prefers-reduced-motion: reduce){.models-table[_ngcontent-%COMP%]   .data-row[_ngcontent-%COMP%]{transition:none}.models-table[_ngcontent-%COMP%]   *[_ngcontent-%COMP%]{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important}}"]})}}return n})();var yb=n=>["/landingai/projects",n];function wb(n,o){if(n&1&&(l(0,"a",14)(1,"mat-icon",15),p(2,"arrow_back"),c(),l(3,"span"),p(4,"Back to Project"),c()()),n&2){let t=C();f("routerLink",al(1,yb,t.projectId))}}function Sb(n,o){if(n&1){let t=j();l(0,"div",16)(1,"mat-icon",17),p(2,"error"),c(),l(3,"span",18),p(4),c(),l(5,"button",19),P("click",function(){M(t);let i=C();return b(i.clearError())}),l(6,"mat-icon"),p(7,"close"),c()(),l(8,"button",20),P("click",function(){M(t);let i=C();return b(i.onRefresh())}),p(9," Retry "),c()()}if(n&2){let t=C();g(4),D(t.error)}}var Ns=(()=>{class n{constructor(t,e,i,a,r,s){this.store=t,this.route=e,this.dialog=i,this.snackBar=a,this.modelService=r,this.downloadModelService=s,this.displayModels$=this.store.select(zc),this.filteredModels$=this.store.select(Vc),this.loading$=this.store.select(Rc),this.error$=this.store.select(Bc),this.searchFilters$=this.store.select(Lc),this.isPanelOpen$=this.store.select(zo),this.displayModels=[],this.filteredModels=[],this.searchFilters={searchTerm:"",showFavoritesOnly:!1},this.loading=!1,this.error=null,this.projectId=null,this.destroy$=new Ct}ngOnInit(){this.displayModels$.pipe(q(this.destroy$)).subscribe(t=>{this.displayModels=t}),this.filteredModels$.pipe(q(this.destroy$)).subscribe(t=>{this.filteredModels=t}),this.searchFilters$.pipe(q(this.destroy$)).subscribe(t=>{this.searchFilters=t}),this.loading$.pipe(q(this.destroy$)).subscribe(t=>{this.loading=t}),this.error$.pipe(q(this.destroy$)).subscribe(t=>{this.error=t}),this.route.paramMap.pipe(q(this.destroy$)).subscribe(t=>{let e=t.get("projectId");e?(this.projectId=parseInt(e,10),this.loadModelsByProject(this.projectId)):(this.projectId=null,this.loadModels())})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}loadModels(){this.store.dispatch(Eo())}loadModelsByProject(t){this.store.dispatch(jo({projectId:t}))}onSearchChange(t){this.store.dispatch(Al({searchTerm:t}))}onFavoritesFilterChange(t){this.store.dispatch(zl({showFavoritesOnly:t}))}onFavoriteToggle(t){this.store.dispatch(Fl({modelId:t}))}onActionMenuClick(t){let{modelId:e,action:i}=t,a=this.filteredModels.find(r=>r.id===e);if(!a){console.warn(`Model with ID ${e} not found`);return}switch(i){case"copyId":this.handleCopyIdAction(a);break;case"testModel":this.handleTestModelAction(a);break;case"view":this.handleViewAction(a);break;case"edit":this.handleEditAction(a);break;case"download":this.handleDownloadAction(a);break;case"duplicate":this.handleDuplicateAction(a);break;case"delete":this.handleDeleteAction(a);break;default:console.warn("Unknown action:",i)}}handleCopyIdAction(t){let e=t.id.toString();navigator.clipboard.writeText(e).then(()=>{this.snackBar.open("Model ID copied to clipboard","Close",{duration:2e3})}).catch(i=>{console.error("Failed to copy Model ID:",i),this.snackBar.open("Failed to copy Model ID","Close",{duration:3e3})})}handleTestModelAction(t){console.log("Opening Test Model dialog for:",t),this.modelService.getModelById(t.id).subscribe({next:e=>{this.dialog.open(Kd,{width:"90vw",maxWidth:"1400px",height:"95vh",maxHeight:"1000px",data:{modelFullName:t.modelFullName||t.modelName,version:t.version||1,trackId:t.trackId||"",modelId:t.id,projectId:e.projectId},disableClose:!1,panelClass:"test-model-dialog-container"}).afterClosed().subscribe(a=>{console.log("Test Model dialog closed:",a)})},error:e=>{console.error("Failed to load model details:",e),this.snackBar.open("Failed to open Test Model dialog","Close",{duration:3e3})}})}handleViewAction(t){console.log("View model details:",t)}handleEditAction(t){console.log("Edit model:",t)}handleDownloadAction(t){if(!t.modelFullName||!t.version||!t.trackId){this.snackBar.open("Cannot download model: missing required information","Close",{duration:3e3});return}this.snackBar.open("Preparing download...","",{duration:2e3}),this.downloadModelService.downloadModel(t.modelFullName,t.version,t.trackId).subscribe({next:e=>{e.artifact?.downloadUrl?(window.open(e.artifact.downloadUrl,"_blank"),this.snackBar.open("Download started","Close",{duration:2e3})):this.snackBar.open("Download URL not available","Close",{duration:3e3})},error:e=>{console.error("Download model error:",e),this.snackBar.open("Failed to download model","Close",{duration:3e3})}})}handleDuplicateAction(t){console.log("Duplicate model:",t)}handleDeleteAction(t){let e=this.dialog.open(Jo,{width:"400px"});e.componentInstance.title="Delete Model",e.componentInstance.message=`Are you sure you want to delete "${t.modelName}"?`,e.componentInstance.btnOkText="Delete",e.componentInstance.btnCancelText="Cancel",e.afterClosed().subscribe(i=>{i&&this.modelService.deleteModel(t.id).subscribe({next:()=>{this.snackBar.open("Model deleted successfully","Close",{duration:3e3}),this.onRefresh()},error:a=>{console.error("Failed to delete model:",a),this.snackBar.open("Failed to delete model","Close",{duration:3e3})}})})}onRefresh(){this.projectId?this.loadModelsByProject(this.projectId):this.loadModels()}clearError(){this.store.dispatch(Vl())}formatMetric(t){return Nc(t)}formatThreshold(t){return $c(t)}onModelRowClick(t){this.store.dispatch(Ll({modelId:t.modelId,initialTab:"training"}))}static{this.\u0275fac=function(e){return new(e||n)(T(St),T(_i),T(re),T($t),T(ra),T(Nd))}}static{this.\u0275cmp=A({type:n,selectors:[["app-model"]],standalone:!1,decls:20,vars:10,consts:[[1,"model-page"],[1,"models-list-section"],["role","main","aria-label","Model management page",1,"model-container"],[1,"page-header"],["id","page-title","tabindex","-1",1,"page-title"],["class","back-to-project-link","aria-label","Return to project page",3,"routerLink",4,"ngIf"],["class","error-message","role","alert","aria-live","polite",4,"ngIf"],["aria-labelledby","search-section-label",1,"search-section"],["id","search-section-label",1,"sr-only"],[3,"searchChange","favoritesFilterChange","searchTerm","showFavoritesOnly"],["aria-labelledby","table-section-label",1,"table-section"],["id","table-section-label",1,"sr-only"],["role","region","aria-label","Models data table container",1,"model-table-card"],[3,"favoriteToggle","actionMenuClick","rowClick","models","loading"],["aria-label","Return to project page",1,"back-to-project-link",3,"routerLink"],[1,"back-icon"],["role","alert","aria-live","polite",1,"error-message"],[1,"error-icon"],[1,"error-text"],["mat-icon-button","","aria-label","Close error message",1,"error-close",3,"click"],["mat-stroked-button","",1,"error-retry",3,"click"]],template:function(e,i){e&1&&(l(0,"div",0),z(1,"async"),l(2,"div",1)(3,"div",2)(4,"div",3)(5,"h1",4),p(6,"Models"),c(),y(7,wb,5,3,"a",5),c(),y(8,Sb,10,1,"div",6),l(9,"section",7)(10,"h2",8),p(11," Search and filter models "),c(),l(12,"app-model-search",9),P("searchChange",function(r){return i.onSearchChange(r)})("favoritesFilterChange",function(r){return i.onFavoritesFilterChange(r)}),c()(),l(13,"section",10)(14,"h2",11),p(15,"Models data table"),c(),l(16,"mat-card",12)(17,"mat-card-content")(18,"app-model-table",13),P("favoriteToggle",function(r){return i.onFavoriteToggle(r)})("actionMenuClick",function(r){return i.onActionMenuClick(r)})("rowClick",function(r){return i.onModelRowClick(r)}),c()()()()()(),k(19,"app-model-detail-panel"),c()),e&2&&($("panel-open",V(1,8,i.isPanelOpen$)),g(7),f("ngIf",i.projectId),g(),f("ngIf",i.error),g(4),f("searchTerm",i.searchFilters.searchTerm)("showFavoritesOnly",i.searchFilters.showFavoritesOnly),g(6),f("models",i.filteredModels)("loading",i.loading))},dependencies:[N,yl,Z,at,W,Oi,yi,Eg,jg,Ag,Vt],styles:[".model-page[_ngcontent-%COMP%]{display:flex;width:100%;min-height:100vh;background-color:#fafafa}.model-page[_ngcontent-%COMP%]   .models-list-section[_ngcontent-%COMP%]{width:100%;transition:width .3s ease-in-out}.model-page.panel-open[_ngcontent-%COMP%]   .models-list-section[_ngcontent-%COMP%]{width:25%}.model-container[_ngcontent-%COMP%]{padding:24px;max-width:100%;min-height:100vh}@media (max-width: 768px){.model-container[_ngcontent-%COMP%]{padding:16px}}.page-header[_ngcontent-%COMP%]{margin-bottom:24px}.page-title[_ngcontent-%COMP%]{font-size:28px;font-weight:600;margin:0;color:#1a1a1a;letter-spacing:-.5px}.page-title[_ngcontent-%COMP%]:focus{outline:2px solid #1976d2;outline-offset:4px}@media (max-width: 768px){.page-title[_ngcontent-%COMP%]{font-size:24px}}.back-to-project-link[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;margin-top:8px;padding:6px 12px;color:#1976d2;text-decoration:none;font-size:14px;font-weight:500;border-radius:6px;transition:all .2s ease-in-out}.back-to-project-link[_ngcontent-%COMP%]   .back-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.back-to-project-link[_ngcontent-%COMP%]:hover{background-color:#1976d214;color:#1565c0}.back-to-project-link[_ngcontent-%COMP%]:focus{outline:2px solid #1976d2;outline-offset:2px;background-color:#1976d21f}.back-to-project-link[_ngcontent-%COMP%]:active{background-color:#1976d229}@media (max-width: 768px){.back-to-project-link[_ngcontent-%COMP%]{font-size:13px;padding:4px 8px}.back-to-project-link[_ngcontent-%COMP%]   .back-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}}.search-section[_ngcontent-%COMP%], .table-section[_ngcontent-%COMP%]{margin-bottom:24px}.search-section[_ngcontent-%COMP%]:last-child, .table-section[_ngcontent-%COMP%]:last-child{margin-bottom:0}.sr-only[_ngcontent-%COMP%]{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}.model-table-card[_ngcontent-%COMP%]{width:100%;border:1px solid #e0e0e0;border-radius:12px;box-shadow:0 2px 8px #00000014;background-color:#fff;overflow:visible!important}.model-table-card[_ngcontent-%COMP%]:focus-within{box-shadow:0 2px 8px #00000014,0 0 0 2px #1976d2}.model-table-card[_ngcontent-%COMP%]   .mat-mdc-card-content[_ngcontent-%COMP%]{padding:0;overflow:visible!important}@media (prefers-contrast: high){.model-container[_ngcontent-%COMP%]{background-color:#fff}.page-title[_ngcontent-%COMP%]{color:#000}.model-table-card[_ngcontent-%COMP%]{border:2px solid #000000;box-shadow:none}}@media (prefers-reduced-motion: reduce){*[_ngcontent-%COMP%]{animation-duration:.01ms!important;animation-iteration-count:1!important;transition-duration:.01ms!important}}@media (max-width: 480px){.model-container[_ngcontent-%COMP%]{padding:12px}.page-title[_ngcontent-%COMP%]{font-size:22px}.search-section[_ngcontent-%COMP%], .table-section[_ngcontent-%COMP%]{margin-bottom:16px}}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:12px 16px;margin-bottom:16px;background-color:#ffebee;border:1px solid #f44336;border-radius:8px;color:#c62828;font-size:14px}.error-message[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{color:#f44336;font-size:20px;flex-shrink:0}.error-message[_ngcontent-%COMP%]   .error-text[_ngcontent-%COMP%]{flex:1;line-height:1.4}.error-message[_ngcontent-%COMP%]   .error-close[_ngcontent-%COMP%]{color:#c62828}.error-message[_ngcontent-%COMP%]   .error-close[_ngcontent-%COMP%]:hover{background-color:#f443361a}.error-message[_ngcontent-%COMP%]   .error-close[_ngcontent-%COMP%]:focus{outline:2px solid #f44336;outline-offset:2px}.error-message[_ngcontent-%COMP%]   .error-retry[_ngcontent-%COMP%]{color:#c62828;border-color:#c62828;font-size:12px;min-width:auto;padding:4px 12px}.error-message[_ngcontent-%COMP%]   .error-retry[_ngcontent-%COMP%]:hover{background-color:#f443361a}.error-message[_ngcontent-%COMP%]   .error-retry[_ngcontent-%COMP%]:focus{outline:2px solid #f44336;outline-offset:2px}@media (prefers-contrast: high){.error-message[_ngcontent-%COMP%]{background-color:#fff;border:2px solid #d32f2f;color:#d32f2f}.error-message[_ngcontent-%COMP%]   .error-icon[_ngcontent-%COMP%]{color:#d32f2f}.error-message[_ngcontent-%COMP%]   .error-close[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%]   .error-retry[_ngcontent-%COMP%]{color:#d32f2f;border-color:#d32f2f}}@media (max-width: 480px){.error-message[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:8px}.error-message[_ngcontent-%COMP%]   .error-retry[_ngcontent-%COMP%]{align-self:flex-end}}"]})}}return n})();function kb(n,o){n&1&&(vt(0),p(1,"insert_drive_file "),Ot())}function Ib(n,o){n&1&&(vt(0),p(1,"cloud_upload "),Ot())}function Tb(n,o){n&1&&(vt(0),p(1,"check_circle "),Ot())}function Db(n,o){n&1&&(vt(0),p(1,"error"),Ot())}function Eb(n,o){if(n&1&&(l(0,"div",31),p(1),c()),n&2){let t=C().$implicit;g(),D(t.error)}}function jb(n,o){if(n&1&&(l(0,"div",32),k(1,"mat-progress-bar",33),l(2,"span",34),p(3),c()()),n&2){let t=C().$implicit;g(),f("value",t.progress),g(2),E("",t.progress,"%")}}function Fb(n,o){if(n&1){let t=j();l(0,"button",35),P("click",function(){M(t);let i=C().index,a=C(2);return b(a.removeFile(i))}),l(1,"mat-icon"),p(2,"close"),c()()}if(n&2){let t=C().$implicit;f("disabled",t.status==="uploading")}}function Ab(n,o){if(n&1&&(l(0,"div",20)(1,"div",21)(2,"mat-icon",22),vt(3,23),y(4,kb,2,0,"ng-container",24)(5,Ib,2,0,"ng-container",24)(6,Tb,2,0,"ng-container",24)(7,Db,2,0,"ng-container",24),Ot(),c(),l(8,"div",25)(9,"div",26),p(10),c(),l(11,"div",27),p(12),c(),y(13,Eb,2,1,"div",28),c()(),y(14,jb,4,2,"div",29)(15,Fb,3,1,"button",30),c()),n&2){let t=o.$implicit,e=C(2);$("error",t.status==="error")("success",t.status==="success")("uploading",t.status==="uploading"),g(3),f("ngSwitch",t.status),g(),f("ngSwitchCase","pending"),g(),f("ngSwitchCase","uploading"),g(),f("ngSwitchCase","success"),g(),f("ngSwitchCase","error"),g(3),D(t.file.name),g(2),D(e.formatFileSize(t.file.size)),g(),f("ngIf",t.error),g(),f("ngIf",t.status==="uploading"),g(),f("ngIf",t.status!=="success")}}function zb(n,o){if(n&1&&(l(0,"div",38)(1,"mat-icon",39),p(2,"check_circle"),c(),l(3,"span"),p(4),c()()),n&2){let t=C(3);g(4),E("",t.getFileCountByStatus("success")," uploaded successfully")}}function Vb(n,o){if(n&1&&(l(0,"div",38)(1,"mat-icon",40),p(2,"error"),c(),l(3,"span"),p(4),c()()),n&2){let t=C(3);g(4),E("",t.getFileCountByStatus("error")," failed")}}function Lb(n,o){if(n&1&&(l(0,"div",38),k(1,"mat-spinner",41),l(2,"span"),p(3),c()()),n&2){let t=C(3);g(3),E("Uploading ",t.getFileCountByStatus("uploading")," files...")}}function Rb(n,o){if(n&1&&(l(0,"div",36),y(1,zb,5,1,"div",37)(2,Vb,5,1,"div",37)(3,Lb,4,1,"div",37),c()),n&2){let t=C(2);g(),f("ngIf",t.getFileCountByStatus("success")>0),g(),f("ngIf",t.getFileCountByStatus("error")>0),g(),f("ngIf",t.getFileCountByStatus("uploading")>0)}}function Bb(n,o){if(n&1&&(l(0,"div",14)(1,"div",15)(2,"h3"),p(3),c(),l(4,"span",16),p(5),c()(),l(6,"div",17),y(7,Ab,16,16,"div",18),c(),y(8,Rb,4,3,"div",19),c()),n&2){let t=C();g(3),E("Selected Files (",t.files.length,")"),g(2),E("Total: ",t.getTotalSize()," MB"),g(2),f("ngForOf",t.files),g(),f("ngIf",t.isUploading||t.getFileCountByStatus("success")>0)}}var zg=(()=>{class n{constructor(t,e,i){this.dialogRef=t,this.data=e,this.imageService=i,this.files=[],this.isDragging=!1,this.isUploading=!1,this.destroy$=new Ct,this.SUPPORTED_FORMATS=["image/png","image/jpeg","image/jpg"],this.SUPPORTED_EXTENSIONS=[".png",".jpg",".jpeg"]}get isUploadDisabled(){return this.isUploading||this.files.length===0||this.files.every(t=>t.status!=="pending")}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}onFileSelect(t){let e=t.target;e.files&&e.files.length>0&&this.addFiles(Array.from(e.files)),e.value=""}onDragOver(t){t.preventDefault(),t.stopPropagation(),this.isDragging=!0}onDragLeave(t){t.preventDefault(),t.stopPropagation(),this.isDragging=!1}onDrop(t){t.preventDefault(),t.stopPropagation(),this.isDragging=!1,t.dataTransfer?.files&&t.dataTransfer.files.length>0&&this.addFiles(Array.from(t.dataTransfer.files))}removeFile(t){this.files.splice(t,1)}uploadFiles(){let t=this.files.filter(i=>i.status==="pending");if(t.length===0)return;this.isUploading=!0;let e=t.map(i=>i.file);this.imageService.uploadImagesWithProgress(e,this.data.projectId).pipe(q(this.destroy$)).subscribe({next:i=>{t.forEach(a=>{a.status="uploading",a.progress=i.progress}),i.results&&(i.results.forEach((r,s)=>{s<t.length&&(r.success?(t[s].status="success",t[s].progress=100):(t[s].status="error",t[s].error=r.errorMessage||"Upload failed"))}),this.isUploading=!1,this.files.every(r=>r.status==="success"||r.status==="error")&&setTimeout(()=>{this.dialogRef.close({success:!0,uploadedCount:i.results?.length||0})},1e3))},error:i=>{t.forEach(a=>{a.status="error",a.error=i.message||"Upload failed"}),this.isUploading=!1}})}cancel(){this.dialogRef.close({success:!1})}getTotalSize(){return(this.files.reduce((i,a)=>i+a.file.size,0)/(1024*1024)).toFixed(2)}getFileCountByStatus(t){return this.files.filter(e=>e.status===t).length}formatFileSize(t){return t<1024?t+" B":t<1024*1024?(t/1024).toFixed(2)+" KB":(t/(1024*1024)).toFixed(2)+" MB"}addFiles(t){t.forEach(e=>{let i=this.validateFile(e);i?this.files.push({file:e,progress:0,status:"error",error:i}):this.files.push({file:e,progress:0,status:"pending"})})}validateFile(t){if(!this.SUPPORTED_FORMATS.includes(t.type)){let e=t.name.toLowerCase().substring(t.name.lastIndexOf("."));if(!this.SUPPORTED_EXTENSIONS.includes(e))return"Only JPG, JPEG, and PNG formats are supported"}return null}static{this.\u0275fac=function(e){return new(e||n)(T(pt),T(mt),T(ke))}}static{this.\u0275cmp=A({type:n,selectors:[["app-upload-dialog"]],standalone:!1,decls:27,vars:8,consts:[["fileInput",""],[1,"upload-dialog"],["mat-dialog-title",""],[1,"drop-zone",3,"click","dragleave","dragover","drop"],[1,"upload-icon"],[1,"drop-text"],[1,"or-text"],["color","primary","mat-raised-button","","type","button"],[1,"format-text"],["accept",".png,.jpg,.jpeg","multiple","","type","file",2,"display","none",3,"change"],["class","file-list",4,"ngIf"],["align","end"],["mat-button","",3,"click","disabled"],["color","primary","mat-raised-button","",3,"click","disabled"],[1,"file-list"],[1,"file-list-header"],[1,"total-size"],[1,"file-items"],["class","file-item",3,"error","success","uploading",4,"ngFor","ngForOf"],["class","upload-summary",4,"ngIf"],[1,"file-item"],[1,"file-info"],[1,"file-icon"],[3,"ngSwitch"],[4,"ngSwitchCase"],[1,"file-details"],[1,"file-name"],[1,"file-size"],["class","file-error",4,"ngIf"],["class","file-progress",4,"ngIf"],["class","remove-btn","mat-icon-button","",3,"disabled","click",4,"ngIf"],[1,"file-error"],[1,"file-progress"],["mode","determinate",3,"value"],[1,"progress-text"],["mat-icon-button","",1,"remove-btn",3,"click","disabled"],[1,"upload-summary"],["class","summary-item",4,"ngIf"],[1,"summary-item"],[1,"success-icon"],[1,"error-icon"],["diameter","20"]],template:function(e,i){if(e&1){let a=j();l(0,"div",1)(1,"h2",2),p(2,"Upload Images"),c(),l(3,"mat-dialog-content")(4,"div",3),P("click",function(){M(a);let s=gt(18);return b(s.click())})("dragleave",function(s){return M(a),b(i.onDragLeave(s))})("dragover",function(s){return M(a),b(i.onDragOver(s))})("drop",function(s){return M(a),b(i.onDrop(s))}),l(5,"mat-icon",4),p(6,"cloud_upload"),c(),l(7,"p",5),p(8,"Drag and drop images here"),c(),l(9,"p",6),p(10,"or"),c(),l(11,"button",7)(12,"mat-icon"),p(13,"folder_open"),c(),p(14," Browse Files "),c(),l(15,"p",8),p(16,"Supported formats: JPG, JPEG, PNG"),c(),l(17,"input",9,0),P("change",function(s){return M(a),b(i.onFileSelect(s))}),c()(),y(19,Bb,9,4,"div",10),c(),l(20,"mat-dialog-actions",11)(21,"button",12),P("click",function(){return M(a),b(i.cancel())}),p(22," Cancel "),c(),l(23,"button",13),P("click",function(){return M(a),b(i.uploadFiles())}),l(24,"mat-icon"),p(25,"cloud_upload"),c(),p(26),c()()()}e&2&&(g(4),$("dragging",i.isDragging)("has-files",i.files.length>0),g(15),f("ngIf",i.files.length>0),g(2),f("disabled",i.isUploading),g(2),f("disabled",i.isUploadDisabled),g(3),E(" Upload ",i.files.length>0?"("+i.files.length+")":""," "))},dependencies:[Q,N,rl,sl,Z,at,W,nt,Tn,xt,yt,ht],styles:[".upload-dialog[_ngcontent-%COMP%]{min-width:600px;max-width:800px}.upload-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]{padding:20px;min-height:300px}.upload-dialog[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]{border:2px dashed #ccc;border-radius:8px;padding:40px;text-align:center;cursor:pointer;transition:all .3s ease;background-color:#fafafa}.upload-dialog[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]:hover{border-color:#1976d2;background-color:#f0f7ff}.upload-dialog[_ngcontent-%COMP%]   .drop-zone.dragging[_ngcontent-%COMP%]{border-color:#1976d2;background-color:#e3f2fd;border-style:solid}.upload-dialog[_ngcontent-%COMP%]   .drop-zone.has-files[_ngcontent-%COMP%]{padding:20px;margin-bottom:20px}.upload-dialog[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#1976d2;margin-bottom:16px}.upload-dialog[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]   .drop-text[_ngcontent-%COMP%]{font-size:18px;font-weight:500;margin:0 0 8px;color:#333}.upload-dialog[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]   .or-text[_ngcontent-%COMP%]{font-size:14px;color:#666;margin:16px 0}.upload-dialog[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]   .format-text[_ngcontent-%COMP%]{font-size:12px;color:#999;margin:16px 0 0}.upload-dialog[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin:0}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]{margin-top:20px}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-list-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px;padding-bottom:8px;border-bottom:1px solid #e0e0e0}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-list-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:500;color:#333}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-list-header[_ngcontent-%COMP%]   .total-size[_ngcontent-%COMP%]{font-size:14px;color:#666}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-items[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:12px;margin-bottom:8px;border:1px solid #e0e0e0;border-radius:4px;background-color:#fff;transition:all .2s ease}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-item.uploading[_ngcontent-%COMP%]{border-color:#1976d2;background-color:#f0f7ff}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-item.success[_ngcontent-%COMP%]{border-color:#4caf50;background-color:#f1f8f4}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-item.success[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%]{color:#4caf50}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-item.error[_ngcontent-%COMP%]{border-color:#f44336;background-color:#ffebee}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-item.error[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%]{color:#f44336}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]{display:flex;align-items:center;flex:1;min-width:0}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px;margin-right:12px;color:#666;flex-shrink:0}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-details[_ngcontent-%COMP%]{flex:1;min-width:0}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-details[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#333;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-details[_ngcontent-%COMP%]   .file-size[_ngcontent-%COMP%]{font-size:12px;color:#666;margin-top:2px}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-details[_ngcontent-%COMP%]   .file-error[_ngcontent-%COMP%]{font-size:12px;color:#f44336;margin-top:4px}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-progress[_ngcontent-%COMP%]{display:flex;align-items:center;margin:0 12px;flex:0 0 150px}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-progress[_ngcontent-%COMP%]   mat-progress-bar[_ngcontent-%COMP%]{flex:1;margin-right:8px}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-progress[_ngcontent-%COMP%]   .progress-text[_ngcontent-%COMP%]{font-size:12px;color:#666;min-width:40px;text-align:right}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]{flex-shrink:0;color:#666}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]:hover:not(:disabled){color:#f44336}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]:disabled{opacity:.5}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .upload-summary[_ngcontent-%COMP%]{margin-top:16px;padding:12px;background-color:#f5f5f5;border-radius:4px}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .upload-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:8px}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .upload-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]:last-child{margin-bottom:0}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .upload-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px;font-size:20px;width:20px;height:20px}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .upload-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   mat-icon.success-icon[_ngcontent-%COMP%]{color:#4caf50}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .upload-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   mat-icon.error-icon[_ngcontent-%COMP%]{color:#f44336}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .upload-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-right:8px}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .upload-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:14px;color:#333}.upload-dialog[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]{padding:16px 24px;margin:0}.upload-dialog[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:8px}.upload-dialog[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:4px}@media (max-width: 768px){.upload-dialog[_ngcontent-%COMP%]{min-width:100%;max-width:100%}.upload-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]{padding:16px;min-height:250px}.upload-dialog[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]{padding:20px}.upload-dialog[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px}.upload-dialog[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]   .drop-text[_ngcontent-%COMP%]{font-size:16px}.upload-dialog[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]   .or-text[_ngcontent-%COMP%]{font-size:13px;margin:12px 0}.upload-dialog[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]   .format-text[_ngcontent-%COMP%]{font-size:11px}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-list-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:14px}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-list-header[_ngcontent-%COMP%]   .total-size[_ngcontent-%COMP%]{font-size:12px}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-items[_ngcontent-%COMP%]{max-height:300px}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]{flex-wrap:wrap;padding:10px}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%]{font-size:28px;width:28px;height:28px;margin-right:10px}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-details[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{font-size:13px}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-details[_ngcontent-%COMP%]   .file-size[_ngcontent-%COMP%], .upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-details[_ngcontent-%COMP%]   .file-error[_ngcontent-%COMP%]{font-size:11px}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-progress[_ngcontent-%COMP%]{flex:1 1 100%;margin:8px 0 0}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-progress[_ngcontent-%COMP%]   .progress-text[_ngcontent-%COMP%]{font-size:11px}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .upload-summary[_ngcontent-%COMP%]{padding:10px}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .upload-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]{margin-bottom:6px}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .upload-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .upload-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:13px}.upload-dialog[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]{padding:12px 16px}.upload-dialog[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:6px;font-size:14px}}@media (max-width: 480px){.upload-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]{padding:12px;min-height:200px}.upload-dialog[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]{padding:16px}.upload-dialog[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]{font-size:40px;width:40px;height:40px;margin-bottom:12px}.upload-dialog[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]   .drop-text[_ngcontent-%COMP%]{font-size:14px}.upload-dialog[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]   .or-text[_ngcontent-%COMP%]{font-size:12px;margin:10px 0}.upload-dialog[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]   .format-text[_ngcontent-%COMP%]{font-size:10px;margin:12px 0 0}.upload-dialog[_ngcontent-%COMP%]   .drop-zone[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:13px;padding:6px 12px}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]{margin-top:16px}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-list-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:4px}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-list-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:13px}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-list-header[_ngcontent-%COMP%]   .total-size[_ngcontent-%COMP%]{font-size:11px}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-items[_ngcontent-%COMP%]{max-height:250px}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]{padding:8px;margin-bottom:6px}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%]{font-size:24px;width:24px;height:24px;margin-right:8px}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-details[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{font-size:12px}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-details[_ngcontent-%COMP%]   .file-size[_ngcontent-%COMP%], .upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-details[_ngcontent-%COMP%]   .file-error[_ngcontent-%COMP%]{font-size:10px}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-progress[_ngcontent-%COMP%]{margin:6px 0 0}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-progress[_ngcontent-%COMP%]   mat-progress-bar[_ngcontent-%COMP%]{margin-right:6px}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .file-progress[_ngcontent-%COMP%]   .progress-text[_ngcontent-%COMP%]{font-size:10px;min-width:35px}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .file-item[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .upload-summary[_ngcontent-%COMP%]{padding:8px;margin-top:12px}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .upload-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]{margin-bottom:4px}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .upload-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px;margin-right:6px}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .upload-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-right:6px}.upload-dialog[_ngcontent-%COMP%]   .file-list[_ngcontent-%COMP%]   .upload-summary[_ngcontent-%COMP%]   .summary-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:12px}.upload-dialog[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]{padding:10px 12px;flex-direction:column-reverse;gap:8px}.upload-dialog[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;margin-left:0;font-size:13px}}"]})}}return n})();function Nb(n,o){if(n&1){let t=j();l(0,"div",16),P("click",function(){M(t);let i=gt(14);return b(i.click())})("dragleave",function(i){M(t);let a=C();return b(a.onDragLeave(i))})("dragover",function(i){M(t);let a=C();return b(a.onDragOver(i))})("drop",function(i){M(t);let a=C();return b(a.onDrop(i))}),l(1,"mat-icon",17),p(2,"folder_zip"),c(),l(3,"p",18),p(4,"Drag and drop a ZIP file here"),c(),l(5,"p",19),p(6,"or"),c(),l(7,"button",20)(8,"mat-icon"),p(9,"folder_open"),c(),p(10," Browse Files "),c(),l(11,"p",21),p(12,"Supported format: ZIP"),c(),l(13,"input",22,0),P("change",function(i){M(t);let a=C();return b(a.onFileSelect(i))}),c()()}if(n&2){let t=C();$("dragging",t.isDragging)}}function $b(n,o){if(n&1&&(l(0,"div",23)(1,"mat-icon"),p(2,"error"),c(),l(3,"span"),p(4),c()()),n&2){let t=C();g(4),D(t.errorMessage)}}function Ub(n,o){if(n&1){let t=j();l(0,"button",32),P("click",function(){M(t);let i=C(2);return b(i.removeFile())}),l(1,"mat-icon"),p(2,"close"),c()()}}function Hb(n,o){if(n&1&&(l(0,"div",33),k(1,"mat-progress-bar",34),l(2,"span",35),p(3),c()()),n&2){let t=C(2);g(),f("value",t.uploadProgress),g(2),E("",t.uploadProgress,"%")}}function Wb(n,o){if(n&1&&(l(0,"div",24)(1,"div",25)(2,"mat-icon",26),p(3,"folder_zip"),c(),l(4,"div",27)(5,"div",28),p(6),c(),l(7,"div",29),p(8),c()(),y(9,Ub,3,0,"button",30),c(),y(10,Hb,4,2,"div",31),c()),n&2){let t=C();g(6),D(t.selectedFile.name),g(2),D(t.formatFileSize(t.selectedFile.size)),g(),f("ngIf",!t.isUploading),g(),f("ngIf",t.isUploading)}}function Gb(n,o){if(n&1&&(l(0,"div",39)(1,"mat-icon"),p(2,"add_circle"),c(),l(3,"span"),p(4),c()()),n&2){let t=C(2);g(4),E("",t.uploadResult.classesCreated," new classes created")}}function Yb(n,o){if(n&1&&(l(0,"div",39)(1,"mat-icon"),p(2,"check"),c(),l(3,"span"),p(4),c()()),n&2){let t=C(2);g(4),E("",t.uploadResult.classesReused," existing classes used")}}function qb(n,o){if(n&1&&(l(0,"li"),p(1),c()),n&2){let t=o.$implicit;g(),D(t)}}function Xb(n,o){if(n&1&&(l(0,"div",42)(1,"div",43)(2,"mat-icon"),p(3,"warning"),c(),l(4,"span"),p(5),c()(),l(6,"ul",44),y(7,qb,2,1,"li",45),c()()),n&2){let t=C(2);g(5),E("",t.uploadResult.errors.length," errors occurred:"),g(2),f("ngForOf",t.uploadResult.errors)}}function Zb(n,o){if(n&1&&(l(0,"div",36)(1,"div",37)(2,"mat-icon"),p(3),c(),l(4,"span"),p(5),c()(),l(6,"div",38)(7,"div",39)(8,"mat-icon"),p(9,"image"),c(),l(10,"span"),p(11),c()(),y(12,Gb,5,1,"div",40)(13,Yb,5,1,"div",40),c(),y(14,Xb,8,2,"div",41),c()),n&2){let t=C();g(),$("error",!t.uploadResult.success)("success",t.uploadResult.success),g(2),D(t.uploadResult.success?"check_circle":"error"),g(2),D(t.uploadResult.success?"Upload Complete":"Upload Failed"),g(6),E("",t.uploadResult.totalImages," images uploaded"),g(),f("ngIf",t.uploadResult.classesCreated>0),g(),f("ngIf",t.uploadResult.classesReused>0),g(),f("ngIf",t.uploadResult.errors.length>0)}}function Qb(n,o){if(n&1){let t=j();l(0,"button",46),P("click",function(){M(t);let i=C();return b(i.cancel())}),p(1," Cancel "),c()}if(n&2){let t=C();f("disabled",t.isUploading)}}function Kb(n,o){if(n&1){let t=j();l(0,"button",47),P("click",function(){M(t);let i=C();return b(i.uploadFile())}),l(1,"mat-icon"),p(2,"cloud_upload"),c(),p(3," Upload "),c()}if(n&2){let t=C();f("disabled",t.isUploadDisabled)}}function Jb(n,o){if(n&1){let t=j();l(0,"button",48),P("click",function(){M(t);let i=C();return b(i.close())}),p(1," Close "),c()}}var Vg=(()=>{class n{constructor(t,e,i){this.dialogRef=t,this.data=e,this.imageService=i,this.selectedFile=null,this.isDragging=!1,this.isUploading=!1,this.uploadProgress=0,this.uploadResult=null,this.errorMessage=null,this.destroy$=new Ct}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}get isUploadDisabled(){return this.isUploading||!this.selectedFile}onFileSelect(t){let e=t.target;e.files&&e.files.length>0&&this.selectFile(e.files[0]),e.value=""}onDragOver(t){t.preventDefault(),t.stopPropagation(),this.isDragging=!0}onDragLeave(t){t.preventDefault(),t.stopPropagation(),this.isDragging=!1}onDrop(t){t.preventDefault(),t.stopPropagation(),this.isDragging=!1,t.dataTransfer?.files&&t.dataTransfer.files.length>0&&this.selectFile(t.dataTransfer.files[0])}selectFile(t){if(this.errorMessage=null,this.uploadResult=null,!t.name.toLowerCase().endsWith(".zip")){this.errorMessage="Only ZIP files are supported";return}let e=2048*1024*1024;if(t.size>e){this.errorMessage="File size exceeds maximum allowed size of 2048MB";return}this.selectedFile=t}removeFile(){this.selectedFile=null,this.errorMessage=null,this.uploadResult=null}uploadFile(){this.selectedFile&&(this.isUploading=!0,this.uploadProgress=0,this.errorMessage=null,this.imageService.uploadClassifiedImagesZip(this.selectedFile,this.data.projectId).pipe(q(this.destroy$)).subscribe({next:t=>{t.progress!==void 0&&(this.uploadProgress=t.progress),t.result&&(this.uploadResult=t.result,this.isUploading=!1,t.result.success&&t.result.errors.length===0&&setTimeout(()=>{this.dialogRef.close({success:!0,uploadedCount:t.result.totalImages})},2e3))},error:t=>{this.errorMessage=t.message||"Upload failed",this.isUploading=!1}}))}cancel(){this.dialogRef.close({success:!1})}close(){this.dialogRef.close({success:this.uploadResult?.success||!1,uploadedCount:this.uploadResult?.totalImages||0})}formatFileSize(t){return t<1024?t+" B":t<1024*1024?(t/1024).toFixed(2)+" KB":(t/(1024*1024)).toFixed(2)+" MB"}static{this.\u0275fac=function(e){return new(e||n)(T(pt),T(mt),T(ke))}}static{this.\u0275cmp=A({type:n,selectors:[["app-upload-classified-dialog"]],standalone:!1,decls:39,vars:7,consts:[["fileInput",""],[1,"upload-classified-dialog"],["mat-dialog-title",""],[1,"instructions"],[1,"info-icon"],[1,"instruction-text"],[1,"example"],[1,"note"],["class","drop-zone",3,"dragging","click","dragleave","dragover","drop",4,"ngIf"],["class","error-message",4,"ngIf"],["class","selected-file",4,"ngIf"],["class","upload-result",4,"ngIf"],["align","end"],["mat-button","",3,"disabled","click",4,"ngIf"],["color","primary","mat-raised-button","",3,"disabled","click",4,"ngIf"],["color","primary","mat-raised-button","",3,"click",4,"ngIf"],[1,"drop-zone",3,"click","dragleave","dragover","drop"],[1,"upload-icon"],[1,"drop-text"],[1,"or-text"],["color","primary","mat-raised-button","","type","button"],[1,"format-text"],["accept",".zip","type","file",2,"display","none",3,"change"],[1,"error-message"],[1,"selected-file"],[1,"file-info"],[1,"file-icon"],[1,"file-details"],[1,"file-name"],[1,"file-size"],["class","remove-btn","mat-icon-button","",3,"click",4,"ngIf"],["class","upload-progress",4,"ngIf"],["mat-icon-button","",1,"remove-btn",3,"click"],[1,"upload-progress"],["mode","determinate",3,"value"],[1,"progress-text"],[1,"upload-result"],[1,"result-header"],[1,"result-details"],[1,"result-item"],["class","result-item",4,"ngIf"],["class","result-errors",4,"ngIf"],[1,"result-errors"],[1,"errors-header"],[1,"error-list"],[4,"ngFor","ngForOf"],["mat-button","",3,"click","disabled"],["color","primary","mat-raised-button","",3,"click","disabled"],["color","primary","mat-raised-button","",3,"click"]],template:function(e,i){e&1&&(l(0,"div",1)(1,"h2",2),p(2,"Upload Classified Images"),c(),l(3,"mat-dialog-content")(4,"div",3)(5,"mat-icon",4),p(6,"info"),c(),l(7,"div",5)(8,"p"),p(9,"Upload a ZIP file containing folders organized by class name."),c(),l(10,"p",6),p(11," Example structure:"),k(12,"br"),l(13,"code"),p(14," \u251C\u2500\u2500 airplane/"),k(15,"br"),p(16," \u2502 \u251C\u2500\u2500 image1.jpg"),k(17,"br"),p(18," \u2502 \u2514\u2500\u2500 image2.png"),k(19,"br"),p(20," \u251C\u2500\u2500 automobile/"),k(21,"br"),p(22," \u2502 \u251C\u2500\u2500 car1.jpg"),k(23,"br"),p(24," \u2502 \u2514\u2500\u2500 car2.jpg"),k(25,"br"),p(26," \u2514\u2500\u2500 bird/"),k(27,"br"),p(28," \xA0\xA0\xA0\xA0\u2514\u2500\u2500 bird1.png "),c()(),l(29,"p",7),p(30," Each folder name becomes a class. New classes will be created automatically with random colors. "),c()()(),y(31,Nb,15,2,"div",8)(32,$b,5,1,"div",9)(33,Wb,11,4,"div",10)(34,Zb,15,10,"div",11),c(),l(35,"mat-dialog-actions",12),y(36,Qb,2,1,"button",13)(37,Kb,4,1,"button",14)(38,Jb,2,0,"button",15),c()()),e&2&&(g(31),f("ngIf",!i.selectedFile&&!i.uploadResult),g(),f("ngIf",i.errorMessage),g(),f("ngIf",i.selectedFile&&!i.uploadResult),g(),f("ngIf",i.uploadResult),g(2),f("ngIf",!i.uploadResult),g(),f("ngIf",!i.uploadResult),g(),f("ngIf",i.uploadResult))},dependencies:[Q,N,Z,at,W,Tn,xt,yt,ht],styles:[".upload-classified-dialog[_ngcontent-%COMP%]{min-width:500px;max-width:600px}.upload-classified-dialog[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;padding:16px 24px;border-bottom:1px solid #e0e0e0}.upload-classified-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]{padding:24px;overflow:visible}.upload-classified-dialog[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]{padding:16px 24px;border-top:1px solid #e0e0e0}.instructions[_ngcontent-%COMP%]{display:flex;gap:12px;padding:16px;background-color:#e3f2fd;border-radius:8px;margin-bottom:24px}.instructions[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{color:#1976d2;flex-shrink:0}.instructions[_ngcontent-%COMP%]   .instruction-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px;font-size:14px;color:#333}.instructions[_ngcontent-%COMP%]   .instruction-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}.instructions[_ngcontent-%COMP%]   .instruction-text[_ngcontent-%COMP%]   .example[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{display:block;font-family:monospace;font-size:12px;background-color:#0000000d;padding:12px;border-radius:4px;white-space:pre;line-height:1.5}.instructions[_ngcontent-%COMP%]   .instruction-text[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]{font-size:12px;color:#666;font-style:italic}.drop-zone[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;border:2px dashed #ccc;border-radius:8px;background-color:#fafafa;cursor:pointer;transition:all .2s ease}.drop-zone[_ngcontent-%COMP%]:hover{border-color:#1976d2;background-color:#e3f2fd}.drop-zone.dragging[_ngcontent-%COMP%]{border-color:#1976d2;background-color:#e3f2fd;border-style:solid}.drop-zone[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#9e9e9e;margin-bottom:16px}.drop-zone[_ngcontent-%COMP%]   .drop-text[_ngcontent-%COMP%]{font-size:16px;color:#666;margin:0 0 8px}.drop-zone[_ngcontent-%COMP%]   .or-text[_ngcontent-%COMP%]{font-size:14px;color:#999;margin:8px 0}.drop-zone[_ngcontent-%COMP%]   .format-text[_ngcontent-%COMP%]{font-size:12px;color:#999;margin:16px 0 0}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 16px;background-color:#ffebee;border-radius:4px;margin-top:16px}.error-message[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#f44336}.error-message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#c62828;font-size:14px}.selected-file[_ngcontent-%COMP%]{margin-top:16px;padding:16px;background-color:#f5f5f5;border-radius:8px}.selected-file[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.selected-file[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%]{font-size:40px;width:40px;height:40px;color:#ff9800}.selected-file[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-details[_ngcontent-%COMP%]{flex:1}.selected-file[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-details[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{font-weight:500;font-size:14px;color:#333;word-break:break-all}.selected-file[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-details[_ngcontent-%COMP%]   .file-size[_ngcontent-%COMP%]{font-size:12px;color:#666;margin-top:4px}.selected-file[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]{color:#666}.selected-file[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]:hover{color:#f44336}.selected-file[_ngcontent-%COMP%]   .upload-progress[_ngcontent-%COMP%]{margin-top:16px;display:flex;align-items:center;gap:12px}.selected-file[_ngcontent-%COMP%]   .upload-progress[_ngcontent-%COMP%]   mat-progress-bar[_ngcontent-%COMP%]{flex:1}.selected-file[_ngcontent-%COMP%]   .upload-progress[_ngcontent-%COMP%]   .progress-text[_ngcontent-%COMP%]{font-size:14px;color:#666;min-width:40px;text-align:right}.upload-result[_ngcontent-%COMP%]{margin-top:16px}.upload-result[_ngcontent-%COMP%]   .result-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 16px;border-radius:4px;font-weight:500}.upload-result[_ngcontent-%COMP%]   .result-header.success[_ngcontent-%COMP%]{background-color:#e8f5e9;color:#2e7d32}.upload-result[_ngcontent-%COMP%]   .result-header.success[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#4caf50}.upload-result[_ngcontent-%COMP%]   .result-header.error[_ngcontent-%COMP%]{background-color:#ffebee;color:#c62828}.upload-result[_ngcontent-%COMP%]   .result-header.error[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#f44336}.upload-result[_ngcontent-%COMP%]   .result-details[_ngcontent-%COMP%]{margin-top:16px;padding:0 16px}.upload-result[_ngcontent-%COMP%]   .result-details[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 0;font-size:14px;color:#333}.upload-result[_ngcontent-%COMP%]   .result-details[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;color:#666}.upload-result[_ngcontent-%COMP%]   .result-errors[_ngcontent-%COMP%]{margin-top:16px;padding:12px 16px;background-color:#fff3e0;border-radius:4px}.upload-result[_ngcontent-%COMP%]   .result-errors[_ngcontent-%COMP%]   .errors-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-weight:500;color:#e65100;margin-bottom:8px}.upload-result[_ngcontent-%COMP%]   .result-errors[_ngcontent-%COMP%]   .errors-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ff9800}.upload-result[_ngcontent-%COMP%]   .result-errors[_ngcontent-%COMP%]   .error-list[_ngcontent-%COMP%]{margin:0;padding-left:28px;font-size:13px;color:#666}.upload-result[_ngcontent-%COMP%]   .result-errors[_ngcontent-%COMP%]   .error-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:4px 0}"]})}}return n})();function t1(n,o){if(n&1){let t=j();l(0,"div",16),P("click",function(){M(t);let i=gt(14);return b(i.click())})("dragleave",function(i){M(t);let a=C();return b(a.onDragLeave(i))})("dragover",function(i){M(t);let a=C();return b(a.onDragOver(i))})("drop",function(i){M(t);let a=C();return b(a.onDrop(i))}),l(1,"mat-icon",17),p(2,"folder_zip"),c(),l(3,"p",18),p(4,"Drag and drop a ZIP file here"),c(),l(5,"p",19),p(6,"or"),c(),l(7,"button",20)(8,"mat-icon"),p(9,"folder_open"),c(),p(10," Browse Files "),c(),l(11,"p",21),p(12,"Supported format: ZIP"),c(),l(13,"input",22,0),P("change",function(i){M(t);let a=C();return b(a.onFileSelect(i))}),c()()}if(n&2){let t=C();$("dragging",t.isDragging)}}function e1(n,o){if(n&1&&(l(0,"div",23)(1,"mat-icon"),p(2,"error"),c(),l(3,"span"),p(4),c()()),n&2){let t=C();g(4),D(t.errorMessage)}}function n1(n,o){if(n&1){let t=j();l(0,"button",32),P("click",function(){M(t);let i=C(2);return b(i.removeFile())}),l(1,"mat-icon"),p(2,"close"),c()()}}function i1(n,o){if(n&1&&(l(0,"div",33),k(1,"mat-progress-bar",34),l(2,"span",35),p(3),c()()),n&2){let t=C(2);g(),f("value",t.uploadProgress),g(2),E("",t.uploadProgress,"%")}}function o1(n,o){if(n&1&&(l(0,"div",24)(1,"div",25)(2,"mat-icon",26),p(3,"folder_zip"),c(),l(4,"div",27)(5,"div",28),p(6),c(),l(7,"div",29),p(8),c()(),y(9,n1,3,0,"button",30),c(),y(10,i1,4,2,"div",31),c()),n&2){let t=C();g(6),D(t.selectedFile.name),g(2),D(t.formatFileSize(t.selectedFile.size)),g(),f("ngIf",!t.isUploading),g(),f("ngIf",t.isUploading)}}function a1(n,o){if(n&1&&(l(0,"li"),p(1),c()),n&2){let t=o.$implicit;g(),D(t)}}function r1(n,o){if(n&1&&(l(0,"div",41)(1,"div",42)(2,"mat-icon"),p(3,"warning"),c(),l(4,"span"),p(5),c()(),l(6,"ul",43),y(7,a1,2,1,"li",44),c()()),n&2){let t=C(2);g(5),E("",t.uploadResult.errors.length," errors occurred:"),g(2),f("ngForOf",t.uploadResult.errors)}}function s1(n,o){if(n&1&&(l(0,"div",36)(1,"div",37)(2,"mat-icon"),p(3),c(),l(4,"span"),p(5),c()(),l(6,"div",38)(7,"div",39)(8,"mat-icon"),p(9,"image"),c(),l(10,"span"),p(11),c()()(),y(12,r1,8,2,"div",40),c()),n&2){let t=C();g(),$("error",!t.uploadResult.success)("success",t.uploadResult.success),g(2),D(t.uploadResult.success?"check_circle":"error"),g(2),D(t.uploadResult.success?"Upload Complete":"Upload Failed"),g(6),E("",t.uploadResult.totalImages," images uploaded"),g(),f("ngIf",t.uploadResult.errors.length>0)}}function l1(n,o){if(n&1){let t=j();l(0,"button",45),P("click",function(){M(t);let i=C();return b(i.cancel())}),p(1," Cancel "),c()}if(n&2){let t=C();f("disabled",t.isUploading)}}function c1(n,o){if(n&1){let t=j();l(0,"button",46),P("click",function(){M(t);let i=C();return b(i.uploadFile())}),l(1,"mat-icon"),p(2,"cloud_upload"),c(),p(3," Upload "),c()}if(n&2){let t=C();f("disabled",t.isUploadDisabled)}}function d1(n,o){if(n&1){let t=j();l(0,"button",47),P("click",function(){M(t);let i=C();return b(i.close())}),p(1," Close "),c()}}var Lg=(()=>{class n{constructor(t,e,i){this.dialogRef=t,this.data=e,this.imageService=i,this.selectedFile=null,this.isDragging=!1,this.isUploading=!1,this.uploadProgress=0,this.uploadResult=null,this.errorMessage=null,this.destroy$=new Ct}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}get isUploadDisabled(){return this.isUploading||!this.selectedFile}onFileSelect(t){let e=t.target;e.files&&e.files.length>0&&this.selectFile(e.files[0]),e.value=""}onDragOver(t){t.preventDefault(),t.stopPropagation(),this.isDragging=!0}onDragLeave(t){t.preventDefault(),t.stopPropagation(),this.isDragging=!1}onDrop(t){t.preventDefault(),t.stopPropagation(),this.isDragging=!1,t.dataTransfer?.files&&t.dataTransfer.files.length>0&&this.selectFile(t.dataTransfer.files[0])}selectFile(t){if(this.errorMessage=null,this.uploadResult=null,!t.name.toLowerCase().endsWith(".zip")){this.errorMessage="Only ZIP files are supported";return}let e=2048*1024*1024;if(t.size>e){this.errorMessage="File size exceeds maximum allowed size of 2048MB";return}this.selectedFile=t}removeFile(){this.selectedFile=null,this.errorMessage=null,this.uploadResult=null}uploadFile(){this.selectedFile&&(this.isUploading=!0,this.uploadProgress=0,this.errorMessage=null,this.imageService.uploadBatchImagesZip(this.selectedFile,this.data.projectId).pipe(q(this.destroy$)).subscribe({next:t=>{t.progress!==void 0&&(this.uploadProgress=t.progress),t.result&&(this.uploadResult=t.result,this.isUploading=!1,t.result.success&&t.result.errors.length===0&&setTimeout(()=>{this.dialogRef.close({success:!0,uploadedCount:t.result.totalImages})},2e3))},error:t=>{this.errorMessage=t.message||"Upload failed",this.isUploading=!1}}))}cancel(){this.dialogRef.close({success:!1})}close(){this.dialogRef.close({success:this.uploadResult?.success||!1,uploadedCount:this.uploadResult?.totalImages||0})}formatFileSize(t){return t<1024?t+" B":t<1024*1024?(t/1024).toFixed(2)+" KB":(t/(1024*1024)).toFixed(2)+" MB"}static{this.\u0275fac=function(e){return new(e||n)(T(pt),T(mt),T(ke))}}static{this.\u0275cmp=A({type:n,selectors:[["app-upload-batch-dialog"]],standalone:!1,decls:37,vars:7,consts:[["fileInput",""],[1,"upload-batch-dialog"],["mat-dialog-title",""],[1,"instructions"],[1,"info-icon"],[1,"instruction-text"],[1,"example"],[1,"note"],["class","drop-zone",3,"dragging","click","dragleave","dragover","drop",4,"ngIf"],["class","error-message",4,"ngIf"],["class","selected-file",4,"ngIf"],["class","upload-result",4,"ngIf"],["align","end"],["mat-button","",3,"disabled","click",4,"ngIf"],["color","primary","mat-raised-button","",3,"disabled","click",4,"ngIf"],["color","primary","mat-raised-button","",3,"click",4,"ngIf"],[1,"drop-zone",3,"click","dragleave","dragover","drop"],[1,"upload-icon"],[1,"drop-text"],[1,"or-text"],["color","primary","mat-raised-button","","type","button"],[1,"format-text"],["accept",".zip","type","file",2,"display","none",3,"change"],[1,"error-message"],[1,"selected-file"],[1,"file-info"],[1,"file-icon"],[1,"file-details"],[1,"file-name"],[1,"file-size"],["class","remove-btn","mat-icon-button","",3,"click",4,"ngIf"],["class","upload-progress",4,"ngIf"],["mat-icon-button","",1,"remove-btn",3,"click"],[1,"upload-progress"],["mode","determinate",3,"value"],[1,"progress-text"],[1,"upload-result"],[1,"result-header"],[1,"result-details"],[1,"result-item"],["class","result-errors",4,"ngIf"],[1,"result-errors"],[1,"errors-header"],[1,"error-list"],[4,"ngFor","ngForOf"],["mat-button","",3,"click","disabled"],["color","primary","mat-raised-button","",3,"click","disabled"],["color","primary","mat-raised-button","",3,"click"]],template:function(e,i){e&1&&(l(0,"div",1)(1,"h2",2),p(2,"Upload Batch Images"),c(),l(3,"mat-dialog-content")(4,"div",3)(5,"mat-icon",4),p(6,"info"),c(),l(7,"div",5)(8,"p"),p(9," Upload a ZIP file containing images. Images can be at any folder depth. "),c(),l(10,"p",6),p(11," Example structures:"),k(12,"br"),l(13,"code"),p(14," \u251C\u2500\u2500 image1.jpg"),k(15,"br"),p(16," \u251C\u2500\u2500 folder1/"),k(17,"br"),p(18," \u2502 \u251C\u2500\u2500 image2.png"),k(19,"br"),p(20," \u2502 \u2514\u2500\u2500 subfolder/"),k(21,"br"),p(22," \u2502 \xA0\xA0\xA0\xA0\u2514\u2500\u2500 image3.jpeg"),k(23,"br"),p(24," \u2514\u2500\u2500 folder2/"),k(25,"br"),p(26," \xA0\xA0\xA0\xA0\u2514\u2500\u2500 image4.jpg "),c()(),l(27,"p",7),p(28," Supported formats: JPG, JPEG, PNG. All images will be extracted regardless of folder structure. "),c()()(),y(29,t1,15,2,"div",8)(30,e1,5,1,"div",9)(31,o1,11,4,"div",10)(32,s1,13,8,"div",11),c(),l(33,"mat-dialog-actions",12),y(34,l1,2,1,"button",13)(35,c1,4,1,"button",14)(36,d1,2,0,"button",15),c()()),e&2&&(g(29),f("ngIf",!i.selectedFile&&!i.uploadResult),g(),f("ngIf",i.errorMessage),g(),f("ngIf",i.selectedFile&&!i.uploadResult),g(),f("ngIf",i.uploadResult),g(2),f("ngIf",!i.uploadResult),g(),f("ngIf",!i.uploadResult),g(),f("ngIf",i.uploadResult))},dependencies:[Q,N,Z,at,W,Tn,xt,yt,ht],styles:[".upload-batch-dialog[_ngcontent-%COMP%]{min-width:500px;max-width:600px}.upload-batch-dialog[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;padding:16px 24px;border-bottom:1px solid #e0e0e0}.upload-batch-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]{padding:24px;overflow:visible}.upload-batch-dialog[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]{padding:16px 24px;border-top:1px solid #e0e0e0}.instructions[_ngcontent-%COMP%]{display:flex;gap:12px;padding:16px;background-color:#e3f2fd;border-radius:8px;margin-bottom:24px}.instructions[_ngcontent-%COMP%]   .info-icon[_ngcontent-%COMP%]{color:#1976d2;flex-shrink:0}.instructions[_ngcontent-%COMP%]   .instruction-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0 0 8px;font-size:14px;color:#333}.instructions[_ngcontent-%COMP%]   .instruction-text[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]:last-child{margin-bottom:0}.instructions[_ngcontent-%COMP%]   .instruction-text[_ngcontent-%COMP%]   .example[_ngcontent-%COMP%]   code[_ngcontent-%COMP%]{display:block;font-family:monospace;font-size:12px;background-color:#0000000d;padding:12px;border-radius:4px;white-space:pre;line-height:1.5}.instructions[_ngcontent-%COMP%]   .instruction-text[_ngcontent-%COMP%]   .note[_ngcontent-%COMP%]{font-size:12px;color:#666;font-style:italic}.drop-zone[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;border:2px dashed #ccc;border-radius:8px;background-color:#fafafa;cursor:pointer;transition:all .2s ease}.drop-zone[_ngcontent-%COMP%]:hover{border-color:#1976d2;background-color:#e3f2fd}.drop-zone.dragging[_ngcontent-%COMP%]{border-color:#1976d2;background-color:#e3f2fd;border-style:solid}.drop-zone[_ngcontent-%COMP%]   .upload-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#9e9e9e;margin-bottom:16px}.drop-zone[_ngcontent-%COMP%]   .drop-text[_ngcontent-%COMP%]{font-size:16px;color:#666;margin:0 0 8px}.drop-zone[_ngcontent-%COMP%]   .or-text[_ngcontent-%COMP%]{font-size:14px;color:#999;margin:8px 0}.drop-zone[_ngcontent-%COMP%]   .format-text[_ngcontent-%COMP%]{font-size:12px;color:#999;margin:16px 0 0}.error-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 16px;background-color:#ffebee;border-radius:4px;margin-top:16px}.error-message[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#f44336}.error-message[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{color:#c62828;font-size:14px}.selected-file[_ngcontent-%COMP%]{margin-top:16px;padding:16px;background-color:#f5f5f5;border-radius:8px}.selected-file[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.selected-file[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-icon[_ngcontent-%COMP%]{font-size:40px;width:40px;height:40px;color:#ff9800}.selected-file[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-details[_ngcontent-%COMP%]{flex:1}.selected-file[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-details[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{font-weight:500;font-size:14px;color:#333;word-break:break-all}.selected-file[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .file-details[_ngcontent-%COMP%]   .file-size[_ngcontent-%COMP%]{font-size:12px;color:#666;margin-top:4px}.selected-file[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]{color:#666}.selected-file[_ngcontent-%COMP%]   .file-info[_ngcontent-%COMP%]   .remove-btn[_ngcontent-%COMP%]:hover{color:#f44336}.selected-file[_ngcontent-%COMP%]   .upload-progress[_ngcontent-%COMP%]{margin-top:16px;display:flex;align-items:center;gap:12px}.selected-file[_ngcontent-%COMP%]   .upload-progress[_ngcontent-%COMP%]   mat-progress-bar[_ngcontent-%COMP%]{flex:1}.selected-file[_ngcontent-%COMP%]   .upload-progress[_ngcontent-%COMP%]   .progress-text[_ngcontent-%COMP%]{font-size:14px;color:#666;min-width:40px;text-align:right}.upload-result[_ngcontent-%COMP%]{margin-top:16px}.upload-result[_ngcontent-%COMP%]   .result-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 16px;border-radius:4px;font-weight:500}.upload-result[_ngcontent-%COMP%]   .result-header.success[_ngcontent-%COMP%]{background-color:#e8f5e9;color:#2e7d32}.upload-result[_ngcontent-%COMP%]   .result-header.success[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#4caf50}.upload-result[_ngcontent-%COMP%]   .result-header.error[_ngcontent-%COMP%]{background-color:#ffebee;color:#c62828}.upload-result[_ngcontent-%COMP%]   .result-header.error[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#f44336}.upload-result[_ngcontent-%COMP%]   .result-details[_ngcontent-%COMP%]{margin-top:16px;padding:0 16px}.upload-result[_ngcontent-%COMP%]   .result-details[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:8px 0;font-size:14px;color:#333}.upload-result[_ngcontent-%COMP%]   .result-details[_ngcontent-%COMP%]   .result-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px;color:#666}.upload-result[_ngcontent-%COMP%]   .result-errors[_ngcontent-%COMP%]{margin-top:16px;padding:12px 16px;background-color:#fff3e0;border-radius:4px}.upload-result[_ngcontent-%COMP%]   .result-errors[_ngcontent-%COMP%]   .errors-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-weight:500;color:#e65100;margin-bottom:8px}.upload-result[_ngcontent-%COMP%]   .result-errors[_ngcontent-%COMP%]   .errors-header[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#ff9800}.upload-result[_ngcontent-%COMP%]   .result-errors[_ngcontent-%COMP%]   .error-list[_ngcontent-%COMP%]{margin:0;padding-left:28px;font-size:13px;color:#666}.upload-result[_ngcontent-%COMP%]   .result-errors[_ngcontent-%COMP%]   .error-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin:4px 0}"]})}}return n})();function p1(n,o){n&1&&(l(0,"mat-error"),p(1," Snapshot name is required "),c())}function m1(n,o){n&1&&(l(0,"mat-error"),p(1," Snapshot name must be 100 characters or less "),c())}function g1(n,o){n&1&&(l(0,"mat-error"),p(1," Description must be 500 characters or less "),c())}var Rg=(()=>{class n{constructor(t,e,i){this.fb=t,this.dialogRef=e,this.data=i,this.snapshotForm=this.fb.group({snapshotName:["",[qt.required,qt.maxLength(100)]],description:["",[qt.maxLength(500)]]})}ngOnInit(){let t=this.generateDefaultSnapshotName();this.snapshotForm.patchValue({snapshotName:t})}generateDefaultSnapshotName(){let t=new Date,e=String(t.getMonth()+1).padStart(2,"0"),i=String(t.getDate()).padStart(2,"0"),a=t.getFullYear(),r=String(t.getHours()).padStart(2,"0"),s=String(t.getMinutes()).padStart(2,"0");return`Snapshot-${e}-${i}-${a} ${r}:${s}`}getImageStatusBarWidth(t){let e=this.data.totalImages||1,i=this.data.previewStats;if(!i)return 0;switch(t){case"labeled":return i.labeled/e*100;case"unlabeled":return i.unlabeled/e*100;case"noClass":return i.noClass/e*100;default:return 0}}getSplitBarWidth(t){let e=this.data.previewStats;if(!e)return 0;let i=e.labeled||1;switch(t){case"train":return e.trainCount/i*100;case"dev":return e.devCount/i*100;case"test":return e.testCount/i*100;case"unassigned":return e.unassignedCount/i*100;default:return 0}}onSubmit(){if(this.snapshotForm.valid){let t={snapshotName:this.snapshotForm.value.snapshotName,description:this.snapshotForm.value.description||""};this.dialogRef.close(t)}}onCancel(){this.dialogRef.close()}static{this.\u0275fac=function(e){return new(e||n)(T(Ge),T(pt),T(mt))}}static{this.\u0275cmp=A({type:n,selectors:[["app-snapshot-create-dialog"]],standalone:!1,decls:83,vars:27,consts:[[1,"snapshot-create-dialog"],[1,"dialog-header"],["mat-icon-button","",1,"close-btn",3,"click"],[3,"formGroup"],[1,"form-field"],["appearance","outline",1,"full-width"],["formControlName","snapshotName","matInput","","maxlength","100","placeholder","Enter snapshot name"],[4,"ngIf"],["formControlName","description","matInput","","maxlength","500","placeholder","e.g. Backup current data, training on subset, holdout for evaluation etc.","rows","3"],[1,"preview-settings-section"],[1,"section-header"],[1,"stats-card"],[1,"stats-title"],[2,"height","8px","background","#e0e0e0","border-radius","4px","display","flex","overflow","hidden","margin-bottom","10px","width","100%"],[2,"height","100%","background-color","#1565c0"],[2,"height","100%","background-color","#42a5f5"],[2,"height","100%","background-color","#90caf9"],[1,"stats-values"],[1,"stat-item"],[1,"stat-number"],[1,"stat-label"],[2,"height","100%","background-color","#2e7d32"],[2,"height","100%","background-color","#66bb6a"],[2,"height","100%","background-color","#a5d6a7"],[2,"height","100%","background-color","#fff59d"],[1,"stats-values","split-values"],[1,"total-images"],["color","primary","mat-raised-button","",1,"save-btn",3,"click","disabled"]],template:function(e,i){if(e&1&&(l(0,"div",0)(1,"div",1)(2,"h2"),p(3,"Create Snapshot"),c(),l(4,"button",2),P("click",function(){return i.onCancel()}),l(5,"mat-icon"),p(6,"close"),c()()(),l(7,"mat-dialog-content")(8,"form",3)(9,"div",4)(10,"label"),p(11,"Snapshot Name"),c(),l(12,"mat-form-field",5),k(13,"input",6),y(14,p1,2,0,"mat-error",7)(15,m1,2,0,"mat-error",7),c()(),l(16,"div",4)(17,"label"),p(18,"Description"),c(),l(19,"mat-form-field",5),k(20,"textarea",8),y(21,g1,2,0,"mat-error",7),c()()(),l(22,"div",9)(23,"div",10)(24,"span"),p(25,"Snapshot Preview & Settings"),c()(),l(26,"div",11)(27,"div",12),p(28,"Image status"),c(),l(29,"div",13),k(30,"div",14)(31,"div",15)(32,"div",16),c(),l(33,"div",17)(34,"div",18)(35,"span",19),p(36),c(),l(37,"span",20),p(38,"labeled"),c()(),l(39,"div",18)(40,"span",19),p(41),c(),l(42,"span",20),p(43,"no_class"),c()(),l(44,"div",18)(45,"span",19),p(46),c(),l(47,"span",20),p(48,"unlabeled"),c()()()(),l(49,"div",11)(50,"div",12),p(51,"Split distribution on labeled images"),c(),l(52,"div",13),k(53,"div",21)(54,"div",22)(55,"div",23)(56,"div",24),c(),l(57,"div",25)(58,"div",18)(59,"span",19),p(60),c(),l(61,"span",20),p(62,"train"),c()(),l(63,"div",18)(64,"span",19),p(65),c(),l(66,"span",20),p(67,"dev"),c()(),l(68,"div",18)(69,"span",19),p(70),c(),l(71,"span",20),p(72,"test"),c()(),l(73,"div",18)(74,"span",19),p(75),c(),l(76,"span",20),p(77,"unassigned"),c()()()()()(),l(78,"mat-dialog-actions")(79,"div",26),p(80),c(),l(81,"button",27),P("click",function(){return i.onSubmit()}),p(82," Save snapshot "),c()()()),e&2){let a,r,s;g(8),f("formGroup",i.snapshotForm),g(6),f("ngIf",(a=i.snapshotForm.get("snapshotName"))==null?null:a.hasError("required")),g(),f("ngIf",(r=i.snapshotForm.get("snapshotName"))==null?null:r.hasError("maxlength")),g(6),f("ngIf",(s=i.snapshotForm.get("description"))==null?null:s.hasError("maxlength")),g(9),K("width",i.getImageStatusBarWidth("labeled")+"%"),g(),K("width",i.getImageStatusBarWidth("noClass")+"%"),g(),K("width",i.getImageStatusBarWidth("unlabeled")+"%"),g(4),D(i.data.previewStats.labeled||0),g(5),D(i.data.previewStats.noClass||0),g(5),D(i.data.previewStats.unlabeled||0),g(7),K("width",i.getSplitBarWidth("train")+"%"),g(),K("width",i.getSplitBarWidth("dev")+"%"),g(),K("width",i.getSplitBarWidth("test")+"%"),g(),K("width",i.getSplitBarWidth("unassigned")+"%"),g(4),D(i.data.previewStats.trainCount||0),g(5),D(i.data.previewStats.devCount||0),g(5),D(i.data.previewStats.testCount||0),g(5),D(i.data.previewStats.unassignedCount||0),g(5),E("Total: ",i.data.totalImages||0," images"),g(),f("disabled",!i.snapshotForm.valid)}},dependencies:[N,$e,Lt,Ft,Ne,We,Ue,He,Z,at,W,Mt,Se,kt,yt,ht],styles:[".snapshot-create-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 20px 0}.snapshot-create-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:500}.snapshot-create-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{margin-right:-12px}.snapshot-create-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]{padding:12px 20px;min-width:450px;max-height:80vh;overflow-y:auto}.snapshot-create-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{margin-bottom:12px}.snapshot-create-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:14px;font-weight:500;color:#0009;margin-bottom:6px}.snapshot-create-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%}.snapshot-create-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .preview-settings-section[_ngcontent-%COMP%]{margin-top:12px}.snapshot-create-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .preview-settings-section[_ngcontent-%COMP%]   .section-header[_ngcontent-%COMP%]{font-size:14px;color:#0009;margin-bottom:12px;padding-bottom:6px;border-bottom:1px solid rgba(0,0,0,.12)}.snapshot-create-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .preview-settings-section[_ngcontent-%COMP%]   .stats-card[_ngcontent-%COMP%]{background:#f8f9fa;border-radius:8px;padding:12px;margin-bottom:10px}.snapshot-create-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .preview-settings-section[_ngcontent-%COMP%]   .stats-card[_ngcontent-%COMP%]   .stats-title[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#000000de;margin-bottom:10px}.snapshot-create-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .preview-settings-section[_ngcontent-%COMP%]   .stats-card[_ngcontent-%COMP%]   .stats-values[_ngcontent-%COMP%]{display:flex;gap:32px}.snapshot-create-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .preview-settings-section[_ngcontent-%COMP%]   .stats-card[_ngcontent-%COMP%]   .stats-values.split-values[_ngcontent-%COMP%]{gap:24px}.snapshot-create-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .preview-settings-section[_ngcontent-%COMP%]   .stats-card[_ngcontent-%COMP%]   .stats-values[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{display:flex;flex-direction:column}.snapshot-create-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .preview-settings-section[_ngcontent-%COMP%]   .stats-card[_ngcontent-%COMP%]   .stats-values[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-number[_ngcontent-%COMP%]{font-size:18px;font-weight:600;color:#000000de}.snapshot-create-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .preview-settings-section[_ngcontent-%COMP%]   .stats-card[_ngcontent-%COMP%]   .stats-values[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:12px;color:#0009}.snapshot-create-dialog[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 20px;border-top:1px solid rgba(0,0,0,.12)}.snapshot-create-dialog[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]   .total-images[_ngcontent-%COMP%]{font-size:14px;color:#0009}.snapshot-create-dialog[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]   .save-btn[_ngcontent-%COMP%]{background-color:#2196f3;color:#fff}.progress-bar[_ngcontent-%COMP%]{height:8px;background:#e0e0e0;border-radius:4px;display:flex;overflow:hidden;margin-bottom:10px;width:100%}.progress-segment[_ngcontent-%COMP%]{height:100%;flex-shrink:0}  .mat-mdc-form-field-subscript-wrapper{height:auto}"]})}}return n})();function h1(n,o){n&1&&(l(0,"div",7),k(1,"mat-spinner",8),l(2,"p"),p(3,"Loading snapshots..."),c()())}function f1(n,o){if(n&1&&(l(0,"div",9)(1,"mat-icon",10),p(2,"error"),c(),l(3,"p"),p(4),c()()),n&2){let t=C();g(4),D(t.error)}}function u1(n,o){n&1&&(l(0,"div",11)(1,"mat-icon"),p(2,"photo_camera"),c(),l(3,"p"),p(4,"No snapshots found for this project"),c(),l(5,"p",12),p(6," Create a snapshot to preserve the current state of your dataset "),c()())}function _1(n,o){n&1&&(l(0,"th",25),p(1,"Name"),c())}function C1(n,o){if(n&1&&(l(0,"td",26)(1,"strong"),p(2),c()()),n&2){let t=o.$implicit;g(2),D(t.name)}}function x1(n,o){n&1&&(l(0,"th",25),p(1,"Description"),c())}function M1(n,o){if(n&1&&(l(0,"td",26),p(1),c()),n&2){let t=o.$implicit;g(),E(" ",t.description||"-"," ")}}function b1(n,o){n&1&&(l(0,"th",25),p(1,"Images"),c())}function P1(n,o){if(n&1&&(l(0,"td",26),p(1),c()),n&2){let t=o.$implicit;g(),E(" ",t.imageCount," ")}}function v1(n,o){n&1&&(l(0,"th",25),p(1,"Labels"),c())}function O1(n,o){if(n&1&&(l(0,"td",26),p(1),c()),n&2){let t=o.$implicit;g(),E(" ",t.labelCount," ")}}function y1(n,o){n&1&&(l(0,"th",25),p(1,"Created"),c())}function w1(n,o){if(n&1&&(l(0,"td",26),p(1),c()),n&2){let t=o.$implicit,e=C(2);g(),E(" ",e.formatDate(t.createdAt)," ")}}function S1(n,o){n&1&&(l(0,"th",25),p(1,"Created By"),c())}function k1(n,o){if(n&1&&(l(0,"td",26),p(1),c()),n&2){let t=o.$implicit;g(),E(" ",t.createdBy," ")}}function I1(n,o){n&1&&k(0,"tr",27)}function T1(n,o){n&1&&k(0,"tr",28)}function D1(n,o){if(n&1&&(l(0,"div",13)(1,"table",14),vt(2,15),y(3,_1,2,0,"th",16)(4,C1,3,1,"td",17),Ot(),vt(5,18),y(6,x1,2,0,"th",16)(7,M1,2,1,"td",17),Ot(),vt(8,19),y(9,b1,2,0,"th",16)(10,P1,2,1,"td",17),Ot(),vt(11,20),y(12,v1,2,0,"th",16)(13,O1,2,1,"td",17),Ot(),vt(14,21),y(15,y1,2,0,"th",16)(16,w1,2,1,"td",17),Ot(),vt(17,22),y(18,S1,2,0,"th",16)(19,k1,2,1,"td",17),Ot(),y(20,I1,1,0,"tr",23)(21,T1,1,0,"tr",24),c()()),n&2){let t=C();g(),f("dataSource",t.snapshots),g(19),f("matHeaderRowDef",t.displayedColumns),g(),f("matRowDefColumns",t.displayedColumns)}}var Ng=(()=>{class n{constructor(t,e,i){this.snapshotService=t,this.dialogRef=e,this.data=i,this.snapshots=[],this.loading=!0,this.error=null,this.displayedColumns=["snapshotName","description","imageCount","labelCount","createdAt","createdBy"]}ngOnInit(){console.log("snapshots are",this.snapshots),this.loadSnapshots()}formatDate(t){return new Date(t).toLocaleString()}onClose(){this.dialogRef.close()}loadSnapshots(){this.loading=!0,this.error=null,this.snapshotService.getSnapshotsForProject(this.data.projectId).subscribe({next:t=>{this.snapshots=t,this.loading=!1},error:t=>{this.error=t.error?.message||"Failed to load snapshots",this.loading=!1}})}static{this.\u0275fac=function(e){return new(e||n)(T(bi),T(pt),T(mt))}}static{this.\u0275cmp=A({type:n,selectors:[["app-snapshot-list-dialog"]],standalone:!1,decls:10,vars:4,consts:[["mat-dialog-title",""],["class","loading-container",4,"ngIf"],["class","error-container",4,"ngIf"],["class","empty-container",4,"ngIf"],["class","table-container",4,"ngIf"],["align","end"],["mat-button","",3,"click"],[1,"loading-container"],["diameter","50"],[1,"error-container"],["color","warn"],[1,"empty-container"],[1,"hint"],[1,"table-container"],["mat-table","",1,"snapshots-table",3,"dataSource"],["matColumnDef","snapshotName"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","description"],["matColumnDef","imageCount"],["matColumnDef","labelCount"],["matColumnDef","createdAt"],["matColumnDef","createdBy"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(e,i){e&1&&(l(0,"h2",0),p(1,"Snapshots"),c(),l(2,"mat-dialog-content"),y(3,h1,4,0,"div",1)(4,f1,5,1,"div",2)(5,u1,7,0,"div",3)(6,D1,22,3,"div",4),c(),l(7,"mat-dialog-actions",5)(8,"button",6),P("click",function(){return i.onClose()}),p(9,"Close"),c()()),e&2&&(g(3),f("ngIf",i.loading),g(),f("ngIf",i.error&&!i.loading),g(),f("ngIf",!i.loading&&!i.error&&i.snapshots.length===0),g(),f("ngIf",!i.loading&&!i.error&&i.snapshots.length>0))},dependencies:[N,Z,W,nt,xt,yt,ht,Bo,$o,Go,Uo,No,Yo,Ho,Wo,qo,Xo],styles:["mat-dialog-content[_ngcontent-%COMP%]{min-width:700px;min-height:300px;padding:20px}.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%], .empty-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;text-align:center}.loading-container[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-bottom:16px}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#0009}.error-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;margin-bottom:16px}.error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#f44336;font-weight:500}.empty-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;margin-bottom:16px;color:#0000004d}.empty-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0;color:#0009}.empty-container[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{font-size:14px;color:#0006}.table-container[_ngcontent-%COMP%]{overflow-x:auto}.snapshots-table[_ngcontent-%COMP%]{width:100%}.snapshots-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-weight:600;color:#000000de}.snapshots-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:12px 8px}.snapshots-table[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:#000000de}mat-dialog-actions[_ngcontent-%COMP%]{padding:16px 20px}@media (max-width: 768px){mat-dialog-content[_ngcontent-%COMP%]{min-width:100%;max-width:100%;padding:16px;min-height:250px}.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%], .empty-container[_ngcontent-%COMP%]{padding:30px 16px}.error-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:40px;width:40px;height:40px}.error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.empty-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px}.empty-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.empty-container[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{font-size:12px}.snapshots-table[_ngcontent-%COMP%]{font-size:14px}.snapshots-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:13px;padding:10px 6px}.snapshots-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:10px 6px;font-size:13px}mat-dialog-actions[_ngcontent-%COMP%]{padding:12px 16px}mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:14px}}@media (max-width: 480px){mat-dialog-content[_ngcontent-%COMP%]{padding:12px;min-height:200px}.loading-container[_ngcontent-%COMP%], .error-container[_ngcontent-%COMP%], .empty-container[_ngcontent-%COMP%]{padding:20px 12px}.loading-container[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-bottom:12px}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px}.error-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:32px;width:32px;height:32px;margin-bottom:12px}.error-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px}.empty-container[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:40px;width:40px;height:40px;margin-bottom:12px}.empty-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:13px;margin:6px 0}.empty-container[_ngcontent-%COMP%]   .hint[_ngcontent-%COMP%]{font-size:11px}.snapshots-table[_ngcontent-%COMP%]{font-size:12px}.snapshots-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{font-size:11px;padding:8px 4px}.snapshots-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:8px 4px;font-size:12px}.snapshots-table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{display:none}.snapshots-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{display:block;margin-bottom:12px;border:1px solid #e0e0e0;border-radius:4px;padding:8px}.snapshots-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{display:block;text-align:left;padding:4px 0;border:none}.snapshots-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]:before{content:attr(data-label);font-weight:600;display:inline-block;width:100px;color:#0009}mat-dialog-actions[_ngcontent-%COMP%]{padding:10px 12px}mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;font-size:13px}}"]})}}return n})();function E1(n,o){if(n&1){let t=j();l(0,"button",10),P("click",function(){M(t);let i=C();return b(i.onCreateClass())}),l(1,"mat-icon"),p(2,"add"),c(),p(3," Create Class "),c()}}function j1(n,o){n&1&&(l(0,"div",11),k(1,"mat-spinner",12),c())}function F1(n,o){if(n&1){let t=j();l(0,"div",17)(1,"div",18),P("click",function(){let i=M(t).$implicit,a=C(2);return b(a.onClassClick(i))}),k(2,"div",19),l(3,"div",20)(4,"div",21),p(5),c(),l(6,"div",22),p(7),z(8,"date"),c()()(),l(9,"div",23)(10,"button",24),P("click",function(i){let a=M(t).$implicit,r=C(2);return b(r.onEditClick(a,i))}),l(11,"mat-icon"),p(12,"edit"),c()(),l(13,"button",25),P("click",function(i){let a=M(t).$implicit,r=C(2);return b(r.onDeleteClick(a,i))}),l(14,"mat-icon"),p(15,"delete"),c()()()()}if(n&2){let t=o.$implicit;g(2),K("background-color",t.colorCode),g(3),D(t.className),g(2),E(" Last updated: ",si(8,4,t.createdAt,"M/d/yy, h:mm a")," ")}}function A1(n,o){n&1&&(l(0,"div",26)(1,"mat-icon"),p(2,"category"),c(),l(3,"p"),p(4,"No classes yet. Create your first class to get started."),c()())}function z1(n,o){if(n&1&&(l(0,"div",13)(1,"div",14),y(2,F1,16,7,"div",15)(3,A1,5,0,"div",16),c()()),n&2){let t=C();g(2),f("ngForOf",t.classes),g(),f("ngIf",t.classes.length===0)}}function V1(n,o){n&1&&(l(0,"mat-icon"),p(1,"check"),c())}function L1(n,o){if(n&1){let t=j();l(0,"button",46),P("click",function(){let i=M(t).$implicit,a=C(2);return b(a.onColorSelect(i))}),y(1,V1,2,0,"mat-icon",47),c()}if(n&2){let t=o.$implicit,e=C(2);K("background-color",t),$("selected",e.editingColorCode===t),g(),f("ngIf",e.editingColorCode===t)}}function R1(n,o){if(n&1){let t=j();l(0,"div",27)(1,"div",28)(2,"button",29),P("click",function(){M(t);let i=C();return b(i.onBackToCardView())}),l(3,"mat-icon"),p(4,"arrow_back"),c(),p(5," Back to card view "),c()(),l(6,"div",30)(7,"div",31),k(8,"div",32),l(9,"div",33),p(10),c()(),l(11,"div",34)(12,"label"),p(13,"Class Color"),c(),l(14,"div",35),y(15,L1,2,5,"button",36),c()(),l(16,"div",34)(17,"label"),p(18,"Class name"),c(),l(19,"mat-form-field",37)(20,"input",38),Yt("ngModelChange",function(i){M(t);let a=C();return Gt(a.editingClassName,i)||(a.editingClassName=i),b(i)}),c()(),l(21,"p",39),p(22," Class names are permanent and cannot be changed "),c()(),l(23,"div",40)(24,"div",41)(25,"span",42),p(26),c(),l(27,"span",43),p(28,"labeled media"),c()()()(),l(29,"div",44)(30,"button",45),P("click",function(){M(t);let i=C();return b(i.onSaveEdit())}),p(31," Save "),c()()()}if(n&2){let t=C();g(8),K("background-color",t.editingColorCode),g(2),D(t.selectedClass.className),g(5),f("ngForOf",t.colorPalette),g(5),Wt("ngModel",t.editingClassName),g(6),D(t.selectedClass.labelCount||0)}}function B1(n,o){n&1&&(l(0,"mat-icon"),p(1,"check"),c())}function N1(n,o){if(n&1){let t=j();l(0,"button",46),P("click",function(){let i=M(t).$implicit,a=C(2);return b(a.onColorSelect(i))}),y(1,B1,2,0,"mat-icon",47),c()}if(n&2){let t=o.$implicit,e=C(2);K("background-color",t),$("selected",e.editingColorCode===t),g(),f("ngIf",e.editingColorCode===t)}}function $1(n,o){if(n&1){let t=j();l(0,"div",48)(1,"div",49)(2,"h3"),p(3,"Create a Class"),c()(),l(4,"div",50)(5,"div",34)(6,"label"),p(7,"Class Color"),c(),l(8,"div",35),y(9,N1,2,5,"button",36),c()(),l(10,"div",34)(11,"label"),p(12,"Class name"),c(),l(13,"mat-form-field",37)(14,"input",38),Yt("ngModelChange",function(i){M(t);let a=C();return Gt(a.editingClassName,i)||(a.editingClassName=i),b(i)}),c()(),l(15,"p",51),p(16," Class names are permanent and cannot be changed "),c()(),l(17,"div",52)(18,"mat-icon"),p(19,"info"),c(),l(20,"p"),p(21," If you want to rename an unused class, you must delete it and create a new class. "),c()()(),l(22,"div",53)(23,"button",54),P("click",function(){M(t);let i=C();return b(i.onCancelCreate())}),p(24,"Cancel"),c(),l(25,"button",55),P("click",function(){M(t);let i=C();return b(i.onSaveNewClass())}),p(26," Create "),c()()()}if(n&2){let t=C();g(9),f("ngForOf",t.colorPalette),g(5),Wt("ngModel",t.editingClassName),g(11),f("disabled",!t.editingClassName.trim())}}var $g=(()=>{class n{constructor(t,e,i,a){this.dialogRef=t,this.data=e,this.projectClassService=i,this.snackBar=a,this.classes=[],this.loading=!1,this.selectedClass=null,this.isCreating=!1,this.editingClassName="",this.editingColorCode="",this.colorPalette=["#9C27B0","#FFEB3B","#00BCD4","#E91E63","#2196F3","#FF9800","#8B4513","#4E342E","#CDDC39","#8BC34A","#26A69A","#B0BEC5","#F06292","#673AB7","#3F51B5"],this.hasChanges=!1}ngOnInit(){this.loadClasses()}loadClasses(){this.loading=!0,console.log("Loading classes for project:",this.data.projectId),this.projectClassService.getClassesByProjectId(this.data.projectId).subscribe({next:t=>{console.log("Classes loaded:",t),this.classes=t,this.loading=!1},error:t=>{console.error("Error loading classes:",t),console.error("Error status:",t.status),console.error("Error message:",t.message),console.error("Error body:",t.error),console.error("Response headers:",t.headers),this.snackBar.open("Failed to load classes","Close",{duration:3e3}),this.loading=!1}})}onClassClick(t){this.isCreating||(this.selectedClass=t,this.editingClassName=t.className,this.editingColorCode=t.colorCode)}onEditClick(t,e){e.stopPropagation(),this.onClassClick(t)}onDeleteClick(t,e){e.stopPropagation(),confirm(`Are you sure you want to delete the class "${t.className}"?`)&&(this.loading=!0,this.projectClassService.deleteClass(t.id).subscribe({next:()=>{this.classes=this.classes.filter(i=>i.id!==t.id),this.hasChanges=!0,this.snackBar.open("Class deleted successfully","Close",{duration:3e3}),this.loading=!1},error:i=>{console.error("Error deleting class:",i);let a=i.status===409?"Cannot delete class: it is being used by labels":"Failed to delete class";this.snackBar.open(a,"Close",{duration:3e3}),this.loading=!1}}))}onBackToCardView(){this.selectedClass=null,this.isCreating=!1}onCreateClass(){this.isCreating=!0,this.selectedClass=null,this.editingClassName="",this.editingColorCode=this.colorPalette[0]}onColorSelect(t){this.editingColorCode=t}onSaveNewClass(){if(!this.editingClassName.trim()){this.snackBar.open("Class name is required","Close",{duration:3e3});return}let t={className:this.editingClassName.trim(),colorCode:this.editingColorCode};this.loading=!0,this.projectClassService.createClass(this.data.projectId,t).subscribe({next:e=>{this.classes.push(e),this.isCreating=!1,this.hasChanges=!0,this.snackBar.open("Class created successfully","Close",{duration:3e3}),this.loading=!1},error:e=>{console.error("Error creating class:",e),this.snackBar.open("Failed to create class","Close",{duration:3e3}),this.loading=!1}})}onSaveEdit(){if(!this.selectedClass)return;if(!this.editingClassName.trim()){this.snackBar.open("Class name is required","Close",{duration:3e3});return}let t={className:this.editingClassName.trim(),colorCode:this.editingColorCode};this.loading=!0,this.projectClassService.updateClass(this.selectedClass.id,t).subscribe({next:e=>{let i=this.classes.findIndex(a=>a.id===e.id);i!==-1&&(this.classes[i]=e),this.selectedClass=null,this.hasChanges=!0,this.snackBar.open("Class updated successfully","Close",{duration:3e3}),this.loading=!1},error:e=>{console.error("Error updating class:",e),this.snackBar.open("Failed to update class","Close",{duration:3e3}),this.loading=!1}})}onDeleteClass(){this.selectedClass&&confirm(`Are you sure you want to delete the class "${this.selectedClass.className}"?`)&&(this.loading=!0,this.projectClassService.deleteClass(this.selectedClass.id).subscribe({next:()=>{this.classes=this.classes.filter(t=>t.id!==this.selectedClass.id),this.selectedClass=null,this.hasChanges=!0,this.snackBar.open("Class deleted successfully","Close",{duration:3e3}),this.loading=!1},error:t=>{console.error("Error deleting class:",t);let e=t.status===409?"Cannot delete class: it is being used by labels":"Failed to delete class";this.snackBar.open(e,"Close",{duration:3e3}),this.loading=!1}}))}onCancelCreate(){this.isCreating=!1}onClose(){this.dialogRef.close({hasChanges:this.hasChanges})}static{this.\u0275fac=function(e){return new(e||n)(T(pt),T(mt),T(Dn),T($t))}}static{this.\u0275cmp=A({type:n,selectors:[["app-manage-classes-dialog"]],standalone:!1,decls:14,vars:5,consts:[[1,"manage-classes-dialog"],[1,"dialog-header"],["mat-dialog-title",""],[1,"header-actions"],["class","create-btn","color","primary","mat-raised-button","",3,"click",4,"ngIf"],["mat-icon-button","",1,"close-button",3,"click"],["class","loading-container",4,"ngIf"],["class","card-view",4,"ngIf"],["class","detail-view",4,"ngIf"],["class","create-view",4,"ngIf"],["color","primary","mat-raised-button","",1,"create-btn",3,"click"],[1,"loading-container"],["diameter","40"],[1,"card-view"],[1,"classes-list"],["class","class-item",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],[1,"class-item"],[1,"class-item-content",3,"click"],[1,"class-color-box"],[1,"class-details"],[1,"class-name"],[1,"class-updated"],[1,"class-actions"],["mat-icon-button","","matTooltip","Edit",3,"click"],["color","warn","mat-icon-button","","matTooltip","Delete",3,"click"],[1,"empty-state"],[1,"detail-view"],[1,"detail-header"],["mat-button","",1,"back-button",3,"click"],[1,"detail-content"],[1,"class-preview"],[1,"preview-color"],[1,"preview-name"],[1,"form-section"],[1,"color-palette"],["class","color-option","type","button",3,"selected","background-color","click",4,"ngFor","ngForOf"],["appearance","outline",1,"full-width"],["matInput","","maxlength","100","placeholder","Enter class name",3,"ngModelChange","ngModel"],[1,"info-text"],[1,"stats-section"],[1,"stat-item"],[1,"stat-value"],[1,"stat-label"],[1,"detail-actions"],["color","primary","mat-raised-button","",1,"save-button",3,"click"],["type","button",1,"color-option",3,"click"],[4,"ngIf"],[1,"create-view"],[1,"create-header"],[1,"create-content"],[1,"warning-text"],[1,"info-box"],[1,"create-actions"],["mat-button","",3,"click"],["color","primary","mat-raised-button","",3,"click","disabled"]],template:function(e,i){e&1&&(l(0,"div",0)(1,"div",1)(2,"h2",2),p(3,"Classes"),c(),l(4,"div",3),y(5,E1,4,0,"button",4),l(6,"button",5),P("click",function(){return i.onClose()}),l(7,"mat-icon"),p(8,"close"),c()()()(),l(9,"mat-dialog-content"),y(10,j1,2,0,"div",6)(11,z1,4,2,"div",7)(12,R1,32,6,"div",8)(13,$1,27,3,"div",9),c()()),e&2&&(g(5),f("ngIf",!i.selectedClass&&!i.isCreating),g(5),f("ngIf",i.loading),g(),f("ngIf",!i.selectedClass&&!i.isCreating&&!i.loading),g(),f("ngIf",i.selectedClass&&!i.loading),g(),f("ngIf",i.isCreating&&!i.loading))},dependencies:[Q,N,Lt,Ft,We,we,Z,at,W,Mt,kt,nt,jt,xt,ht,cl],styles:[".manage-classes-dialog[_ngcontent-%COMP%]{width:1000px;max-width:95vw;max-height:90vh;display:flex;flex-direction:column}.manage-classes-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 20px;border-bottom:1px solid #e0e0e0}.manage-classes-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:500}.manage-classes-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.manage-classes-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .create-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:8px}.manage-classes-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{margin-right:-12px}.manage-classes-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]{padding:16px 20px;overflow-y:auto;flex:1}.manage-classes-dialog[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:200px}.manage-classes-dialog[_ngcontent-%COMP%]   .card-view[_ngcontent-%COMP%]   .classes-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:0}.manage-classes-dialog[_ngcontent-%COMP%]   .card-view[_ngcontent-%COMP%]   .classes-list[_ngcontent-%COMP%]   .class-item[_ngcontent-%COMP%]{display:flex;align-items:center;padding:20px 24px;border-bottom:1px solid #e0e0e0;transition:background-color .2s ease}.manage-classes-dialog[_ngcontent-%COMP%]   .card-view[_ngcontent-%COMP%]   .classes-list[_ngcontent-%COMP%]   .class-item[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.manage-classes-dialog[_ngcontent-%COMP%]   .card-view[_ngcontent-%COMP%]   .classes-list[_ngcontent-%COMP%]   .class-item[_ngcontent-%COMP%]   .class-item-content[_ngcontent-%COMP%]{display:flex;align-items:center;flex:1;cursor:pointer}.manage-classes-dialog[_ngcontent-%COMP%]   .card-view[_ngcontent-%COMP%]   .classes-list[_ngcontent-%COMP%]   .class-item[_ngcontent-%COMP%]   .class-color-box[_ngcontent-%COMP%]{width:60px;height:60px;border-radius:4px;flex-shrink:0;margin-right:20px}.manage-classes-dialog[_ngcontent-%COMP%]   .card-view[_ngcontent-%COMP%]   .classes-list[_ngcontent-%COMP%]   .class-item[_ngcontent-%COMP%]   .class-details[_ngcontent-%COMP%]{flex:1}.manage-classes-dialog[_ngcontent-%COMP%]   .card-view[_ngcontent-%COMP%]   .classes-list[_ngcontent-%COMP%]   .class-item[_ngcontent-%COMP%]   .class-details[_ngcontent-%COMP%]   .class-name[_ngcontent-%COMP%]{font-size:16px;font-weight:500;margin-bottom:4px;color:#333}.manage-classes-dialog[_ngcontent-%COMP%]   .card-view[_ngcontent-%COMP%]   .classes-list[_ngcontent-%COMP%]   .class-item[_ngcontent-%COMP%]   .class-details[_ngcontent-%COMP%]   .class-updated[_ngcontent-%COMP%]{font-size:13px;color:#666}.manage-classes-dialog[_ngcontent-%COMP%]   .card-view[_ngcontent-%COMP%]   .classes-list[_ngcontent-%COMP%]   .class-item[_ngcontent-%COMP%]   .class-actions[_ngcontent-%COMP%]{display:flex;gap:4px;margin-left:16px}.manage-classes-dialog[_ngcontent-%COMP%]   .card-view[_ngcontent-%COMP%]   .classes-list[_ngcontent-%COMP%]   .class-item[_ngcontent-%COMP%]   .class-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{opacity:.7;transition:opacity .2s ease}.manage-classes-dialog[_ngcontent-%COMP%]   .card-view[_ngcontent-%COMP%]   .classes-list[_ngcontent-%COMP%]   .class-item[_ngcontent-%COMP%]   .class-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{opacity:1}.manage-classes-dialog[_ngcontent-%COMP%]   .card-view[_ngcontent-%COMP%]   .classes-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{text-align:center;padding:48px 24px;color:#999}.manage-classes-dialog[_ngcontent-%COMP%]   .card-view[_ngcontent-%COMP%]   .classes-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;margin-bottom:16px;opacity:.3}.manage-classes-dialog[_ngcontent-%COMP%]   .card-view[_ngcontent-%COMP%]   .classes-list[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}.manage-classes-dialog[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.manage-classes-dialog[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .detail-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:16px}.manage-classes-dialog[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .detail-header[_ngcontent-%COMP%]   .back-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:4px}.manage-classes-dialog[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]{flex:1}.manage-classes-dialog[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .class-preview[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;padding:16px;background-color:#f5f5f5;border-radius:8px;margin-bottom:16px}.manage-classes-dialog[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .class-preview[_ngcontent-%COMP%]   .preview-color[_ngcontent-%COMP%]{width:48px;height:48px;border-radius:8px}.manage-classes-dialog[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .class-preview[_ngcontent-%COMP%]   .preview-name[_ngcontent-%COMP%]{font-size:20px;font-weight:500}.manage-classes-dialog[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]{margin-bottom:16px}.manage-classes-dialog[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:13px;font-weight:500;margin-bottom:8px;color:#333}.manage-classes-dialog[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .color-palette[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px}.manage-classes-dialog[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .color-palette[_ngcontent-%COMP%]   .color-option[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;border:2px solid transparent;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease;padding:0}.manage-classes-dialog[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .color-palette[_ngcontent-%COMP%]   .color-option[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.manage-classes-dialog[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .color-palette[_ngcontent-%COMP%]   .color-option.selected[_ngcontent-%COMP%]{border-color:#333;box-shadow:0 0 0 2px #fff,0 0 0 4px #333}.manage-classes-dialog[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .color-palette[_ngcontent-%COMP%]   .color-option[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff;font-size:18px;width:18px;height:18px}.manage-classes-dialog[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%}.manage-classes-dialog[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]{margin:4px 0 0;font-size:11px;color:#666}.manage-classes-dialog[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .warning-text[_ngcontent-%COMP%]{margin:4px 0 0;font-size:11px;color:#f57c00}.manage-classes-dialog[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]{display:flex;gap:20px;padding:12px;background-color:#f5f5f5;border-radius:8px}.manage-classes-dialog[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.manage-classes-dialog[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:28px;font-weight:500;color:#1976d2}.manage-classes-dialog[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .detail-content[_ngcontent-%COMP%]   .stats-section[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:13px;color:#666}.manage-classes-dialog[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .detail-actions[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px;padding-top:16px;margin-top:16px;border-top:1px solid #e0e0e0}.manage-classes-dialog[_ngcontent-%COMP%]   .detail-view[_ngcontent-%COMP%]   .detail-actions[_ngcontent-%COMP%]   .save-button[_ngcontent-%COMP%]{width:100%;height:44px;font-size:15px}.manage-classes-dialog[_ngcontent-%COMP%]   .create-view[_ngcontent-%COMP%]   .create-header[_ngcontent-%COMP%]{margin-bottom:16px}.manage-classes-dialog[_ngcontent-%COMP%]   .create-view[_ngcontent-%COMP%]   .create-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:500}.manage-classes-dialog[_ngcontent-%COMP%]   .create-view[_ngcontent-%COMP%]   .create-content[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]{margin-bottom:16px}.manage-classes-dialog[_ngcontent-%COMP%]   .create-view[_ngcontent-%COMP%]   .create-content[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-size:13px;font-weight:500;margin-bottom:8px;color:#333}.manage-classes-dialog[_ngcontent-%COMP%]   .create-view[_ngcontent-%COMP%]   .create-content[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .color-palette[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:6px}.manage-classes-dialog[_ngcontent-%COMP%]   .create-view[_ngcontent-%COMP%]   .create-content[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .color-palette[_ngcontent-%COMP%]   .color-option[_ngcontent-%COMP%]{width:36px;height:36px;border-radius:50%;border:2px solid transparent;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease;padding:0}.manage-classes-dialog[_ngcontent-%COMP%]   .create-view[_ngcontent-%COMP%]   .create-content[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .color-palette[_ngcontent-%COMP%]   .color-option[_ngcontent-%COMP%]:hover{transform:scale(1.1)}.manage-classes-dialog[_ngcontent-%COMP%]   .create-view[_ngcontent-%COMP%]   .create-content[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .color-palette[_ngcontent-%COMP%]   .color-option.selected[_ngcontent-%COMP%]{border-color:#333;box-shadow:0 0 0 2px #fff,0 0 0 4px #333}.manage-classes-dialog[_ngcontent-%COMP%]   .create-view[_ngcontent-%COMP%]   .create-content[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .color-palette[_ngcontent-%COMP%]   .color-option[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff;font-size:18px;width:18px;height:18px}.manage-classes-dialog[_ngcontent-%COMP%]   .create-view[_ngcontent-%COMP%]   .create-content[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%}.manage-classes-dialog[_ngcontent-%COMP%]   .create-view[_ngcontent-%COMP%]   .create-content[_ngcontent-%COMP%]   .form-section[_ngcontent-%COMP%]   .warning-text[_ngcontent-%COMP%]{margin:4px 0 0;font-size:11px;color:#f57c00}.manage-classes-dialog[_ngcontent-%COMP%]   .create-view[_ngcontent-%COMP%]   .create-content[_ngcontent-%COMP%]   .info-box[_ngcontent-%COMP%]{display:flex;align-items:flex-start;gap:10px;padding:12px;background-color:#e3f2fd;border-radius:8px;margin-bottom:16px}.manage-classes-dialog[_ngcontent-%COMP%]   .create-view[_ngcontent-%COMP%]   .create-content[_ngcontent-%COMP%]   .info-box[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#1976d2;flex-shrink:0;font-size:20px;width:20px;height:20px}.manage-classes-dialog[_ngcontent-%COMP%]   .create-view[_ngcontent-%COMP%]   .create-content[_ngcontent-%COMP%]   .info-box[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:13px;color:#1565c0}.manage-classes-dialog[_ngcontent-%COMP%]   .create-view[_ngcontent-%COMP%]   .create-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:10px;padding-top:12px;border-top:1px solid #e0e0e0}@media (max-width: 768px){.manage-classes-dialog[_ngcontent-%COMP%]{width:100%;max-width:100vw;max-height:100vh}.manage-classes-dialog[_ngcontent-%COMP%]   .card-view[_ngcontent-%COMP%]   .classes-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}"]})}}return n})();var H1=["tagDialog"];function W1(n,o){n&1&&(l(0,"div",13),k(1,"mat-spinner",14),c())}function G1(n,o){if(n&1){let t=j();l(0,"div",23)(1,"div",17)(2,"span",24),p(3),c()(),l(4,"div",18)(5,"button",25),P("click",function(){let i=M(t).$implicit,a=C(2);return b(a.onRenameTag(i))}),l(6,"mat-icon"),p(7,"edit"),c()()(),l(8,"div",19)(9,"button",26),P("click",function(){let i=M(t).$implicit,a=C(2);return b(a.onDeleteTag(i))}),l(10,"mat-icon"),p(11,"delete"),c()()()()}if(n&2){let t=o.$implicit;g(3),D(t.name)}}function Y1(n,o){if(n&1&&(l(0,"p"),p(1),c()),n&2){let t=C(3);g(),E('No tags found matching "',t.searchQuery,'"')}}function q1(n,o){n&1&&(l(0,"p"),p(1," No tags yet. Create your first tag to get started. "),c())}function X1(n,o){if(n&1&&(l(0,"div",27),y(1,Y1,2,1,"p",28)(2,q1,2,0,"p",28),c()),n&2){let t=C(2);g(),f("ngIf",t.searchQuery),g(),f("ngIf",!t.searchQuery)}}function Z1(n,o){if(n&1&&(l(0,"div",15)(1,"div",16)(2,"div",17),p(3,"Name"),c(),l(4,"div",18),p(5,"Rename"),c(),l(6,"div",19),p(7,"Delete"),c()(),l(8,"div",20),y(9,G1,12,1,"div",21)(10,X1,3,2,"div",22),c()()),n&2){let t=C();g(9),f("ngForOf",t.filteredTags),g(),f("ngIf",t.filteredTags.length===0)}}function Q1(n,o){if(n&1){let t=j();l(0,"div",29)(1,"h2",3),p(2),c(),l(3,"button",30)(4,"mat-icon"),p(5,"close"),c()(),l(6,"mat-dialog-content")(7,"mat-form-field",31)(8,"mat-label"),p(9,"Tag Name"),c(),l(10,"input",32),P("keyup.enter",function(){M(t);let i=C();return b(i.onSaveTag())}),Yt("ngModelChange",function(i){M(t);let a=C();return Gt(a.editingTagName,i)||(a.editingTagName=i),b(i)}),c()()(),l(11,"mat-dialog-actions",33)(12,"button",34),p(13,"Discard"),c(),l(14,"button",35),P("click",function(){M(t);let i=C();return b(i.onSaveTag())}),p(15),c()()()}if(n&2){let t=C();g(2),D(t.isEditMode?"Rename Tag":"Create Tag"),g(8),Wt("ngModel",t.editingTagName),g(4),f("disabled",!t.editingTagName.trim()),g(),E(" ",(t.isEditMode,"Save Tag")," ")}}var Ug=(()=>{class n{constructor(t,e,i,a,r){this.dialogRef=t,this.data=e,this.projectTagService=i,this.snackBar=a,this.dialog=r,this.tags=[],this.filteredTags=[],this.loading=!1,this.searchQuery="",this.editingTagName="",this.editingTag=null,this.isEditMode=!1,this.tagDialogRef=null,this.hasChanges=!1}ngOnInit(){this.loadTags()}loadTags(){this.loading=!0,this.projectTagService.getTagsByProjectId(this.data.projectId).subscribe({next:t=>{this.tags=t,this.filteredTags=t,this.loading=!1},error:t=>{console.error("Error loading tags:",t),this.snackBar.open("Failed to load tags","Close",{duration:3e3}),this.loading=!1}})}onSearchChange(){let t=this.searchQuery.toLowerCase().trim();t?this.filteredTags=this.tags.filter(e=>e.name.toLowerCase().includes(t)):this.filteredTags=this.tags}onAddNewTag(){this.isEditMode=!1,this.editingTag=null,this.editingTagName="",this.openTagDialog()}onRenameTag(t){this.isEditMode=!0,this.editingTag=t,this.editingTagName=t.name,this.openTagDialog()}openTagDialog(){this.tagDialogRef=this.dialog.open(this.tagDialogTemplate,{width:"500px",disableClose:!1}),this.tagDialogRef.afterClosed().subscribe(()=>{this.editingTag=null,this.editingTagName="",this.tagDialogRef=null})}onSaveTag(){let t=this.editingTagName.trim();if(!t){this.snackBar.open("Tag name is required","Close",{duration:3e3});return}let e=this.tags.find(i=>i.name.toLowerCase()===t.toLowerCase()&&(!this.isEditMode||i.id!==this.editingTag?.id));if(e){this.snackBar.open(`Tag "${e.name}" already exists in this project`,"Close",{duration:3e3});return}if(this.isEditMode&&this.editingTag)this.loading=!0,this.projectTagService.updateTag(this.editingTag.id,{name:t}).subscribe({next:i=>{let a=this.tags.findIndex(r=>r.id===i.id);a!==-1&&(this.tags[a]=i),this.onSearchChange(),this.hasChanges=!0,this.snackBar.open("Tag updated successfully","Close",{duration:3e3}),this.loading=!1,this.tagDialogRef&&this.tagDialogRef.close()},error:i=>{console.error("Error updating tag:",i);let a=i.error?.message?.includes("already exists")?i.error.message:"Failed to update tag";this.snackBar.open(a,"Close",{duration:3e3}),this.loading=!1}});else{let i={name:t};this.loading=!0,this.projectTagService.createTag(this.data.projectId,i).subscribe({next:a=>{this.tags.push(a),this.onSearchChange(),this.hasChanges=!0,this.snackBar.open("Tag created successfully","Close",{duration:3e3}),this.loading=!1,this.tagDialogRef&&this.tagDialogRef.close()},error:a=>{console.error("Error creating tag:",a);let r=a.error?.message?.includes("already exists")?a.error.message:"Failed to create tag";this.snackBar.open(r,"Close",{duration:3e3}),this.loading=!1}})}}onDeleteTag(t){confirm(`Are you sure you want to delete the tag "${t.name}"?`)&&(this.loading=!0,this.projectTagService.deleteTag(t.id).subscribe({next:()=>{this.tags=this.tags.filter(e=>e.id!==t.id),this.onSearchChange(),this.hasChanges=!0,this.snackBar.open("Tag deleted successfully","Close",{duration:3e3}),this.loading=!1},error:e=>{console.error("Error deleting tag:",e);let i=e.status===409?"Cannot delete tag: it is being used by images":"Failed to delete tag";this.snackBar.open(i,"Close",{duration:3e3}),this.loading=!1}}))}onClose(){this.dialogRef.close({hasChanges:this.hasChanges})}static{this.\u0275fac=function(e){return new(e||n)(T(pt),T(mt),T(sa),T($t),T(re))}}static{this.\u0275cmp=A({type:n,selectors:[["app-manage-tags-dialog"]],viewQuery:function(e,i){if(e&1&&ve(H1,5),e&2){let a;pe(a=me())&&(i.tagDialogTemplate=a.first)}},standalone:!1,decls:20,vars:3,consts:[["tagDialog",""],[1,"manage-tags-dialog"],[1,"dialog-header"],["mat-dialog-title",""],[1,"header-actions"],["color","primary","mat-raised-button","",1,"create-tag-btn",3,"click"],["mat-icon-button","",1,"close-button",3,"click"],[1,"search-section"],["appearance","fill",1,"search-field"],["matPrefix",""],["matInput","","placeholder","Search",3,"input","ngModelChange","ngModel"],["class","loading-container",4,"ngIf"],["class","tags-table",4,"ngIf"],[1,"loading-container"],["diameter","40"],[1,"tags-table"],[1,"table-header"],[1,"col-name"],[1,"col-rename"],[1,"col-delete"],[1,"table-body"],["class","table-row",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],[1,"table-row"],[1,"tag-badge"],["mat-icon-button","","matTooltip","Rename",3,"click"],["color","warn","mat-icon-button","","matTooltip","Delete",3,"click"],[1,"empty-state"],[4,"ngIf"],[1,"tag-dialog"],["mat-dialog-close","","mat-icon-button","",1,"close-button"],["appearance","fill",1,"full-width"],["matInput","","maxlength","100","placeholder","Enter tag name",3,"keyup.enter","ngModelChange","ngModel"],["align","end"],["color","primary","mat-button","","mat-dialog-close",""],["color","primary","mat-raised-button","",3,"click","disabled"]],template:function(e,i){if(e&1){let a=j();l(0,"div",1)(1,"div",2)(2,"h2",3),p(3,"Manage Tags"),c(),l(4,"div",4)(5,"button",5),P("click",function(){return M(a),b(i.onAddNewTag())}),p(6," Create Tag "),c(),l(7,"button",6),P("click",function(){return M(a),b(i.onClose())}),l(8,"mat-icon"),p(9,"close"),c()()()(),l(10,"mat-dialog-content")(11,"div",7)(12,"mat-form-field",8)(13,"mat-icon",9),p(14,"search"),c(),l(15,"input",10),P("input",function(){return M(a),b(i.onSearchChange())}),Yt("ngModelChange",function(s){return M(a),Gt(i.searchQuery,s)||(i.searchQuery=s),b(s)}),c()()(),y(16,W1,2,0,"div",11)(17,Z1,11,2,"div",12),c()(),y(18,Q1,16,4,"ng-template",null,0,li)}e&2&&(g(15),Wt("ngModel",i.searchQuery),g(),f("ngIf",i.loading),g(),f("ngIf",!i.loading))},dependencies:[Q,N,Lt,Ft,We,we,Z,at,W,Mt,_e,yn,kt,nt,jt,Po,xt,yt,ht],styles:[".manage-tags-dialog[_ngcontent-%COMP%]{width:800px;max-width:95vw;max-height:90vh;display:flex;flex-direction:column}.manage-tags-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 20px;border-bottom:1px solid #e0e0e0}.manage-tags-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:500}.manage-tags-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.manage-tags-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .create-tag-btn[_ngcontent-%COMP%]{margin-right:8px;padding:0 24px;font-size:15px;height:40px;line-height:40px}.manage-tags-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{margin-right:-12px}.manage-tags-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]{padding:20px;overflow-y:auto;flex:1}.manage-tags-dialog[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]{margin-bottom:20px}.manage-tags-dialog[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{width:100%;margin-bottom:0}.manage-tags-dialog[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#666}.manage-tags-dialog[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mat-mdc-form-field .mat-mdc-text-field-wrapper{background-color:#fff!important}.manage-tags-dialog[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mat-mdc-form-field .mat-mdc-form-field-flex{background-color:#fff!important}.manage-tags-dialog[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mat-mdc-form-field .mdc-text-field{background-color:#fff!important}.manage-tags-dialog[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mat-mdc-form-field .mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:#fff!important}.manage-tags-dialog[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:200px}.manage-tags-dialog[_ngcontent-%COMP%]   .tags-table[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:4px;overflow:hidden}.manage-tags-dialog[_ngcontent-%COMP%]   .tags-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 100px 100px;background-color:#f5f5f5;padding:12px 16px;font-weight:500;font-size:14px;color:#666;border-bottom:1px solid #e0e0e0}.manage-tags-dialog[_ngcontent-%COMP%]   .tags-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .col-name[_ngcontent-%COMP%]{text-align:left}.manage-tags-dialog[_ngcontent-%COMP%]   .tags-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .col-rename[_ngcontent-%COMP%], .manage-tags-dialog[_ngcontent-%COMP%]   .tags-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .col-delete[_ngcontent-%COMP%]{text-align:center}.manage-tags-dialog[_ngcontent-%COMP%]   .tags-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:1fr 100px 100px;padding:12px 16px;border-bottom:1px solid #e0e0e0;align-items:center;transition:background-color .2s ease}.manage-tags-dialog[_ngcontent-%COMP%]   .tags-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]:hover{background-color:#f9f9f9}.manage-tags-dialog[_ngcontent-%COMP%]   .tags-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.manage-tags-dialog[_ngcontent-%COMP%]   .tags-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   .col-name[_ngcontent-%COMP%]   .tag-badge[_ngcontent-%COMP%]{display:inline-block;padding:6px 12px;background-color:#e3f2fd;color:#1976d2;border-radius:16px;font-size:13px;font-weight:500}.manage-tags-dialog[_ngcontent-%COMP%]   .tags-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   .col-rename[_ngcontent-%COMP%], .manage-tags-dialog[_ngcontent-%COMP%]   .tags-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   .col-delete[_ngcontent-%COMP%]{display:flex;justify-content:center}.manage-tags-dialog[_ngcontent-%COMP%]   .tags-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{padding:48px 24px;text-align:center;color:#999}.manage-tags-dialog[_ngcontent-%COMP%]   .tags-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}.tag-dialog[_ngcontent-%COMP%]{position:relative}.tag-dialog[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;padding-right:40px}.tag-dialog[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px}.tag-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]{padding:20px 24px;min-width:400px}.tag-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%}.tag-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]     .mat-mdc-form-field .mat-mdc-text-field-wrapper{background-color:#fff!important}.tag-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]     .mat-mdc-form-field .mat-mdc-form-field-flex{background-color:#fff!important}.tag-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]     .mat-mdc-form-field .mdc-text-field{background-color:#fff!important}.tag-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]     .mat-mdc-form-field .mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:#fff!important}.tag-dialog[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]{padding:12px 24px;border-top:1px solid #e0e0e0}@media (max-width: 768px){.manage-tags-dialog[_ngcontent-%COMP%]{width:100%;max-width:100vw;max-height:100vh}.manage-tags-dialog[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]{flex-direction:column}.manage-tags-dialog[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .add-tag-btn[_ngcontent-%COMP%]{width:100%}.manage-tags-dialog[_ngcontent-%COMP%]   .tags-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%], .manage-tags-dialog[_ngcontent-%COMP%]   .tags-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]{grid-template-columns:1fr 80px 80px}}"]})}}return n})();var Ja=(()=>{class n{constructor(t,e){this.http=t,this.baseUrl=`${e.ServerWithApiUrl}landingai/project-metadata`}getMetadataByProjectId(t){return this.http.get(`${this.baseUrl}/project/${t}`)}getMetadataById(t){return this.http.get(`${this.baseUrl}/${t}`)}createMetadata(t,e){return this.http.post(`${this.baseUrl}?projectId=${t}`,e)}updateMetadata(t,e){return this.http.put(`${this.baseUrl}/${t}`,e)}deleteMetadata(t){return this.http.delete(`${this.baseUrl}/${t}`)}static{this.\u0275fac=function(e){return new(e||n)(Ht(Re),Ht(Be))}}static{this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var K1=["metadataDialog"];function J1(n,o){n&1&&(l(0,"div",13),k(1,"mat-spinner",14),c())}function tP(n,o){n&1&&(l(0,"mat-icon",31),p(1,"check "),c())}function eP(n,o){n&1&&(l(0,"span"),p(1,"-"),c())}function nP(n,o){if(n&1){let t=j();l(0,"div",26)(1,"div",17),p(2),c(),l(3,"div",18),p(4),c(),l(5,"div",19),p(6),c(),l(7,"div",20),p(8),c(),l(9,"div",21),y(10,tP,2,0,"mat-icon",27)(11,eP,2,0,"span",28),c(),l(12,"div",22)(13,"button",29),P("click",function(){let i=M(t).$implicit,a=C(2);return b(a.onEditMetadata(i))}),l(14,"mat-icon"),p(15,"edit"),c()(),l(16,"button",30),P("click",function(){let i=M(t).$implicit,a=C(2);return b(a.onDeleteMetadata(i))}),l(17,"mat-icon"),p(18,"delete"),c()()()()}if(n&2){let t=o.$implicit;g(2),D(t.id),g(2),D(t.name),g(2),D(t.type),g(2),D(t.valueFrom),g(2),f("ngIf",t.multipleValues),g(),f("ngIf",!t.multipleValues)}}function iP(n,o){if(n&1&&(l(0,"p"),p(1),c()),n&2){let t=C(3);g(),E(' No metadata found matching "',t.searchQuery,'" ')}}function oP(n,o){n&1&&(l(0,"p"),p(1," No metadata fields yet. Create your first field to get started. "),c())}function aP(n,o){if(n&1&&(l(0,"div",32),y(1,iP,2,1,"p",28)(2,oP,2,0,"p",28),c()),n&2){let t=C(2);g(),f("ngIf",t.searchQuery),g(),f("ngIf",!t.searchQuery)}}function rP(n,o){if(n&1&&(l(0,"div",15)(1,"div",16)(2,"div",17),p(3,"ID"),c(),l(4,"div",18),p(5,"Name"),c(),l(6,"div",19),p(7,"Type"),c(),l(8,"div",20),p(9,"Value From"),c(),l(10,"div",21),p(11,"Allow Multiple"),c(),l(12,"div",22),p(13,"Actions"),c()(),l(14,"div",23),y(15,nP,19,6,"div",24)(16,aP,3,2,"div",25),c()()),n&2){let t=C();g(15),f("ngForOf",t.filteredMetadata),g(),f("ngIf",t.filteredMetadata.length===0)}}function sP(n,o){if(n&1&&(l(0,"mat-option",44),p(1),c()),n&2){let t=o.$implicit;f("value",t),g(),E(" ",t," ")}}function lP(n,o){if(n&1&&(l(0,"mat-option",44),p(1),c()),n&2){let t=o.$implicit;f("value",t),g(),E(" ",t," ")}}function cP(n,o){n&1&&(l(0,"mat-error"),p(1," Predefined values are required "),c())}function dP(n,o){if(n&1){let t=j();l(0,"mat-form-field",35)(1,"mat-label"),p(2,"Predefined Values (comma-separated)"),c(),l(3,"input",45),Yt("ngModelChange",function(i){M(t);let a=C(2);return Gt(a.metadataPredefinedValues,i)||(a.metadataPredefinedValues=i),b(i)}),c(),y(4,cP,2,0,"mat-error",28),c()}if(n&2){let t=C(2);g(3),Wt("ngModel",t.metadataPredefinedValues),g(),f("ngIf",t.metadataValueFrom==="PREDEFINED"&&!t.metadataPredefinedValues.trim())}}function pP(n,o){if(n&1){let t=j();l(0,"div",46)(1,"mat-checkbox",37),Yt("ngModelChange",function(i){M(t);let a=C(2);return Gt(a.metadataMultipleValues,i)||(a.metadataMultipleValues=i),b(i)}),p(2," Allow Multiple Selection "),c()()}if(n&2){let t=C(2);g(),Wt("ngModel",t.metadataMultipleValues)}}function mP(n,o){if(n&1){let t=j();l(0,"div",33)(1,"h2",3),p(2),c(),l(3,"button",34)(4,"mat-icon"),p(5,"close"),c()(),l(6,"mat-dialog-content")(7,"mat-form-field",35)(8,"mat-label"),p(9,"Name"),c(),l(10,"input",36),Yt("ngModelChange",function(i){M(t);let a=C();return Gt(a.metadataName,i)||(a.metadataName=i),b(i)}),c()(),l(11,"mat-form-field",35)(12,"mat-label"),p(13,"Type"),c(),l(14,"mat-select",37),Yt("ngModelChange",function(i){M(t);let a=C();return Gt(a.metadataType,i)||(a.metadataType=i),b(i)}),y(15,sP,2,2,"mat-option",38),c()(),l(16,"mat-form-field",35)(17,"mat-label"),p(18,"Value From"),c(),l(19,"mat-select",37),Yt("ngModelChange",function(i){M(t);let a=C();return Gt(a.metadataValueFrom,i)||(a.metadataValueFrom=i),b(i)}),y(20,lP,2,2,"mat-option",38),c()(),y(21,dP,5,2,"mat-form-field",39)(22,pP,3,1,"div",40),c(),l(23,"mat-dialog-actions",41)(24,"button",42),p(25,"Cancel"),c(),l(26,"button",43),P("click",function(){M(t);let i=C();return b(i.onSaveMetadata())}),p(27," Save "),c()()()}if(n&2){let t=C();g(2),E(" ",t.isEditMode?"Edit Metadata Field":"Add/Edit Metadata Field"," "),g(8),Wt("ngModel",t.metadataName),g(4),Wt("ngModel",t.metadataType),g(),f("ngForOf",t.typeOptions),g(4),Wt("ngModel",t.metadataValueFrom),g(),f("ngForOf",t.valueFromOptions),g(),f("ngIf",t.metadataValueFrom==="PREDEFINED"),g(),f("ngIf",t.metadataValueFrom==="PREDEFINED"),g(4),f("disabled",!t.isFormValid())}}var Wg=(()=>{class n{constructor(t,e,i,a,r){this.dialogRef=t,this.data=e,this.projectMetadataService=i,this.snackBar=a,this.dialog=r,this.metadata=[],this.filteredMetadata=[],this.loading=!1,this.searchQuery="",this.editingMetadata=null,this.isEditMode=!1,this.metadataDialogRef=null,this.metadataName="",this.metadataType="TEXT",this.metadataValueFrom="INPUT",this.metadataPredefinedValues="",this.metadataMultipleValues=!1,this.hasChanges=!1,this.typeOptions=["TEXT","NUMBER","BOOLEAN"],this.valueFromOptions=["PREDEFINED","INPUT"]}ngOnInit(){this.loadMetadata()}loadMetadata(){this.loading=!0,this.projectMetadataService.getMetadataByProjectId(this.data.projectId).subscribe({next:t=>{this.metadata=t,this.filteredMetadata=t,this.loading=!1},error:t=>{console.error("Error loading metadata:",t),this.snackBar.open("Failed to load metadata","Close",{duration:3e3}),this.loading=!1}})}onSearchChange(){let t=this.searchQuery.toLowerCase().trim();t?this.filteredMetadata=this.metadata.filter(e=>e.name.toLowerCase().includes(t)):this.filteredMetadata=this.metadata}onAddNewMetadata(){this.isEditMode=!1,this.editingMetadata=null,this.resetForm(),this.openMetadataDialog()}onEditMetadata(t){this.isEditMode=!0,this.editingMetadata=t,this.metadataName=t.name,this.metadataType=t.type,this.metadataValueFrom=t.valueFrom,this.metadataPredefinedValues=t.predefinedValues||"",this.metadataMultipleValues=t.multipleValues,this.openMetadataDialog()}resetForm(){this.metadataName="",this.metadataType="TEXT",this.metadataValueFrom="INPUT",this.metadataPredefinedValues="",this.metadataMultipleValues=!1}openMetadataDialog(){this.metadataDialogRef=this.dialog.open(this.metadataDialogTemplate,{width:"600px",disableClose:!1}),this.metadataDialogRef.afterClosed().subscribe(()=>{this.editingMetadata=null,this.resetForm(),this.metadataDialogRef=null})}onSaveMetadata(){if(!this.isFormValid()){this.metadataName.trim()?this.metadataValueFrom==="PREDEFINED"&&!this.metadataPredefinedValues.trim()&&this.snackBar.open("Predefined values are required when Value From is PREDEFINED","Close",{duration:3e3}):this.snackBar.open("Metadata name is required","Close",{duration:3e3});return}if(this.isEditMode&&this.editingMetadata){this.loading=!0;let t={name:this.metadataName.trim(),type:this.metadataType,valueFrom:this.metadataValueFrom,predefinedValues:this.metadataPredefinedValues.trim()||void 0,multipleValues:this.metadataMultipleValues};this.projectMetadataService.updateMetadata(this.editingMetadata.id,t).subscribe({next:e=>{let i=this.metadata.findIndex(a=>a.id===e.id);i!==-1&&(this.metadata[i]=e),this.onSearchChange(),this.hasChanges=!0,this.snackBar.open("Metadata updated successfully","Close",{duration:3e3}),this.loading=!1,this.metadataDialogRef&&this.metadataDialogRef.close()},error:e=>{console.error("Error updating metadata:",e),this.snackBar.open("Failed to update metadata","Close",{duration:3e3}),this.loading=!1}})}else{let t={name:this.metadataName.trim(),type:this.metadataType,valueFrom:this.metadataValueFrom,predefinedValues:this.metadataPredefinedValues.trim()||void 0,multipleValues:this.metadataMultipleValues};this.loading=!0,this.projectMetadataService.createMetadata(this.data.projectId,t).subscribe({next:e=>{this.metadata.push(e),this.onSearchChange(),this.hasChanges=!0,this.snackBar.open("Metadata created successfully","Close",{duration:3e3}),this.loading=!1,this.metadataDialogRef&&this.metadataDialogRef.close()},error:e=>{console.error("Error creating metadata:",e),this.snackBar.open("Failed to create metadata","Close",{duration:3e3}),this.loading=!1}})}}onDeleteMetadata(t){confirm(`Are you sure you want to delete the metadata "${t.name}"?`)&&(this.loading=!0,this.projectMetadataService.deleteMetadata(t.id).subscribe({next:()=>{this.metadata=this.metadata.filter(e=>e.id!==t.id),this.onSearchChange(),this.hasChanges=!0,this.snackBar.open("Metadata deleted successfully","Close",{duration:3e3}),this.loading=!1},error:e=>{console.error("Error deleting metadata:",e);let i=e.status===409?"Cannot delete metadata: it is being used by images":"Failed to delete metadata";this.snackBar.open(i,"Close",{duration:3e3}),this.loading=!1}}))}onClose(){this.dialogRef.close({hasChanges:this.hasChanges})}isFormValid(){return!(!this.metadataName.trim()||this.metadataValueFrom==="PREDEFINED"&&!this.metadataPredefinedValues.trim())}static{this.\u0275fac=function(e){return new(e||n)(T(pt),T(mt),T(Ja),T($t),T(re))}}static{this.\u0275cmp=A({type:n,selectors:[["app-manage-metadata-dialog"]],viewQuery:function(e,i){if(e&1&&ve(K1,5),e&2){let a;pe(a=me())&&(i.metadataDialogTemplate=a.first)}},standalone:!1,decls:20,vars:3,consts:[["metadataDialog",""],[1,"manage-metadata-dialog"],[1,"dialog-header"],["mat-dialog-title",""],[1,"header-actions"],["color","primary","mat-raised-button","",1,"create-metadata-btn",3,"click"],["mat-icon-button","",1,"close-button",3,"click"],[1,"search-section"],["appearance","fill",1,"search-field"],["matPrefix",""],["matInput","","placeholder","Search",3,"input","ngModelChange","ngModel"],["class","loading-container",4,"ngIf"],["class","metadata-table",4,"ngIf"],[1,"loading-container"],["diameter","40"],[1,"metadata-table"],[1,"table-header"],[1,"col-id"],[1,"col-name"],[1,"col-type"],[1,"col-value"],[1,"col-multiple"],[1,"col-actions"],[1,"table-body"],["class","table-row",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],[1,"table-row"],["class","check-icon",4,"ngIf"],[4,"ngIf"],["mat-icon-button","","matTooltip","Edit",3,"click"],["color","warn","mat-icon-button","","matTooltip","Delete",3,"click"],[1,"check-icon"],[1,"empty-state"],[1,"metadata-dialog"],["mat-dialog-close","","mat-icon-button","",1,"close-button"],["appearance","fill",1,"full-width"],["matInput","","maxlength","100","placeholder","Name",3,"ngModelChange","ngModel"],[3,"ngModelChange","ngModel"],[3,"value",4,"ngFor","ngForOf"],["appearance","fill","class","full-width",4,"ngIf"],["class","checkbox-field",4,"ngIf"],["align","end"],["color","primary","mat-button","","mat-dialog-close",""],["color","primary","mat-raised-button","",3,"click","disabled"],[3,"value"],["matInput","","maxlength","100","placeholder","value1, value2, value3","required","",3,"ngModelChange","ngModel"],[1,"checkbox-field"]],template:function(e,i){if(e&1){let a=j();l(0,"div",1)(1,"div",2)(2,"h2",3),p(3,"Manage Metadata"),c(),l(4,"div",4)(5,"button",5),P("click",function(){return M(a),b(i.onAddNewMetadata())}),p(6," Create Metadata "),c(),l(7,"button",6),P("click",function(){return M(a),b(i.onClose())}),l(8,"mat-icon"),p(9,"close"),c()()()(),l(10,"mat-dialog-content")(11,"div",7)(12,"mat-form-field",8)(13,"mat-icon",9),p(14,"search"),c(),l(15,"input",10),P("input",function(){return M(a),b(i.onSearchChange())}),Yt("ngModelChange",function(s){return M(a),Gt(i.searchQuery,s)||(i.searchQuery=s),b(s)}),c()()(),y(16,J1,2,0,"div",11)(17,rP,17,2,"div",12),c()(),y(18,mP,28,9,"ng-template",null,0,li)}e&2&&(g(15),Wt("ngModel",i.searchQuery),g(),f("ngIf",i.loading),g(),f("ngIf",!i.loading))},dependencies:[Q,N,Lt,Ft,hi,We,we,Z,at,W,Mt,_e,Se,yn,kt,se,Zt,nt,jt,Po,xt,yt,ht,Qe],styles:[".manage-metadata-dialog[_ngcontent-%COMP%]{width:1000px;max-width:95vw;max-height:90vh;display:flex;flex-direction:column}.manage-metadata-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 20px;border-bottom:1px solid #e0e0e0}.manage-metadata-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:500}.manage-metadata-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.manage-metadata-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .create-metadata-btn[_ngcontent-%COMP%]{margin-right:8px;padding:0 24px;font-size:15px;height:40px;line-height:40px}.manage-metadata-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .header-actions[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{margin-right:-12px}.manage-metadata-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]{padding:20px;overflow-y:auto;flex:1}.manage-metadata-dialog[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]{margin-bottom:20px}.manage-metadata-dialog[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]{width:100%;margin-bottom:0}.manage-metadata-dialog[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#666}.manage-metadata-dialog[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mat-mdc-form-field .mat-mdc-text-field-wrapper{background-color:#fff!important}.manage-metadata-dialog[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mat-mdc-form-field .mat-mdc-form-field-flex{background-color:#fff!important}.manage-metadata-dialog[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mat-mdc-form-field .mdc-text-field{background-color:#fff!important}.manage-metadata-dialog[_ngcontent-%COMP%]   .search-section[_ngcontent-%COMP%]   .search-field[_ngcontent-%COMP%]     .mat-mdc-form-field .mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:#fff!important}.manage-metadata-dialog[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:200px}.manage-metadata-dialog[_ngcontent-%COMP%]   .metadata-table[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:4px;overflow:hidden}.manage-metadata-dialog[_ngcontent-%COMP%]   .metadata-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]{display:grid;grid-template-columns:80px 200px 120px 150px 120px 120px;background-color:#f5f5f5;padding:12px 16px;font-weight:500;font-size:14px;color:#666;border-bottom:1px solid #e0e0e0}.manage-metadata-dialog[_ngcontent-%COMP%]   .metadata-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .col-id[_ngcontent-%COMP%], .manage-metadata-dialog[_ngcontent-%COMP%]   .metadata-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .col-name[_ngcontent-%COMP%], .manage-metadata-dialog[_ngcontent-%COMP%]   .metadata-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .col-type[_ngcontent-%COMP%], .manage-metadata-dialog[_ngcontent-%COMP%]   .metadata-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .col-value[_ngcontent-%COMP%], .manage-metadata-dialog[_ngcontent-%COMP%]   .metadata-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .col-multiple[_ngcontent-%COMP%], .manage-metadata-dialog[_ngcontent-%COMP%]   .metadata-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .col-actions[_ngcontent-%COMP%]{text-align:left}.manage-metadata-dialog[_ngcontent-%COMP%]   .metadata-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%]   .col-actions[_ngcontent-%COMP%]{text-align:center}.manage-metadata-dialog[_ngcontent-%COMP%]   .metadata-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]{display:grid;grid-template-columns:80px 200px 120px 150px 120px 120px;padding:12px 16px;border-bottom:1px solid #e0e0e0;align-items:center;transition:background-color .2s ease}.manage-metadata-dialog[_ngcontent-%COMP%]   .metadata-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]:hover{background-color:#f9f9f9}.manage-metadata-dialog[_ngcontent-%COMP%]   .metadata-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]:last-child{border-bottom:none}.manage-metadata-dialog[_ngcontent-%COMP%]   .metadata-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   .col-id[_ngcontent-%COMP%]{color:#666;font-size:13px}.manage-metadata-dialog[_ngcontent-%COMP%]   .metadata-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   .col-name[_ngcontent-%COMP%]{font-weight:500}.manage-metadata-dialog[_ngcontent-%COMP%]   .metadata-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   .col-type[_ngcontent-%COMP%], .manage-metadata-dialog[_ngcontent-%COMP%]   .metadata-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   .col-value[_ngcontent-%COMP%]{font-size:13px;color:#666}.manage-metadata-dialog[_ngcontent-%COMP%]   .metadata-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   .col-multiple[_ngcontent-%COMP%]{display:flex;align-items:center}.manage-metadata-dialog[_ngcontent-%COMP%]   .metadata-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   .col-multiple[_ngcontent-%COMP%]   .check-icon[_ngcontent-%COMP%]{color:#4caf50;font-size:20px;width:20px;height:20px}.manage-metadata-dialog[_ngcontent-%COMP%]   .metadata-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]   .col-actions[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:4px}.manage-metadata-dialog[_ngcontent-%COMP%]   .metadata-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]{padding:48px 24px;text-align:center;color:#999}.manage-metadata-dialog[_ngcontent-%COMP%]   .metadata-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}.metadata-dialog[_ngcontent-%COMP%]{position:relative}.metadata-dialog[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;padding-right:40px}.metadata-dialog[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px}.metadata-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]{padding:20px 24px;min-width:500px}.metadata-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.metadata-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]     .mat-mdc-form-field .mat-mdc-text-field-wrapper{background-color:#fff!important}.metadata-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]     .mat-mdc-form-field .mat-mdc-form-field-flex{background-color:#fff!important}.metadata-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]     .mat-mdc-form-field .mdc-text-field{background-color:#fff!important}.metadata-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]     .mat-mdc-form-field .mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:#fff!important}.metadata-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .checkbox-field[_ngcontent-%COMP%]{margin:16px 0}.metadata-dialog[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]{padding:12px 24px;border-top:1px solid #e0e0e0}@media (max-width: 768px){.manage-metadata-dialog[_ngcontent-%COMP%]{width:100%;max-width:100vw;max-height:100vh}.manage-metadata-dialog[_ngcontent-%COMP%]   .metadata-table[_ngcontent-%COMP%]   .table-header[_ngcontent-%COMP%], .manage-metadata-dialog[_ngcontent-%COMP%]   .metadata-table[_ngcontent-%COMP%]   .table-body[_ngcontent-%COMP%]   .table-row[_ngcontent-%COMP%]{grid-template-columns:60px 150px 100px 120px 100px 100px;font-size:12px}}"]})}}return n})();function gP(n,o){if(n&1&&(l(0,"mat-option",15),p(1),c()),n&2){let t=o.$implicit;f("value",t),g(),E(" ",t," ")}}function hP(n,o){if(n&1&&(l(0,"mat-form-field",11)(1,"mat-label"),p(2),c(),l(3,"mat-select",12)(4,"mat-option",13),p(5,"-- Select --"),c(),y(6,gP,2,2,"mat-option",14),c()()),n&2){let t=C().$implicit,e=C();g(2),D(t.name),g(),f("formControlName",t.name),g(3),f("ngForOf",e.getPredefinedValues(t))}}function fP(n,o){if(n&1&&(l(0,"mat-option",15),p(1),c()),n&2){let t=o.$implicit;f("value",t),g(),E(" ",t," ")}}function uP(n,o){if(n&1&&(l(0,"mat-form-field",11)(1,"mat-label"),p(2),c(),l(3,"mat-select",16),y(4,fP,2,2,"mat-option",14),c()()),n&2){let t=C().$implicit,e=C();g(2),D(t.name),g(),f("formControlName",t.name),g(),f("ngForOf",e.getPredefinedValues(t))}}function _P(n,o){if(n&1&&(l(0,"mat-form-field",11)(1,"mat-label"),p(2),c(),k(3,"input",17),c()),n&2){let t=C().$implicit;g(2),D(t.name),g(),f("formControlName",t.name)("placeholder","Enter "+t.name)}}function CP(n,o){if(n&1&&(l(0,"div",9),y(1,hP,7,3,"mat-form-field",10)(2,uP,5,3,"mat-form-field",10)(3,_P,4,3,"mat-form-field",10),c()),n&2){let t=o.$implicit,e=C();g(),f("ngIf",e.isPredefined(t)&&!e.allowsMultiple(t)),g(),f("ngIf",e.isPredefined(t)&&e.allowsMultiple(t)),g(),f("ngIf",!e.isPredefined(t))}}function xP(n,o){n&1&&(l(0,"div",18)(1,"mat-icon"),p(2,"warning"),c(),l(3,"p"),p(4,"No metadata fields configured for this project."),c(),l(5,"p",19),p(6," Go to Manage \u2192 Manage Metadata to create metadata fields first. "),c()())}var Gg=(()=>{class n{constructor(t,e,i){this.dialogRef=t,this.data=e,this.fb=i,this.availableMetadata=[],this.selectedImageCount=0,this.availableMetadata=e.availableMetadata,this.selectedImageCount=e.selectedImageIds.length;let a={};this.availableMetadata.forEach(r=>{let s=r.multipleValues?[]:"";a[r.name]=[s]}),this.metadataForm=this.fb.group(a)}ngOnInit(){}getPredefinedValues(t){return t.predefinedValues?t.predefinedValues.split(",").map(e=>e.trim()):[]}isPredefined(t){return t.valueFrom==="PREDEFINED"}allowsMultiple(t){return t.multipleValues===!0}onSave(){let t={};this.availableMetadata.forEach(e=>{let i=this.metadataForm.get(e.name)?.value;i&&(Array.isArray(i)&&i.length>0?t[e.name]=i.join(","):typeof i=="string"&&i.trim()&&(t[e.name]=i.trim()))}),this.dialogRef.close({metadata:t,imageIds:this.data.selectedImageIds})}onCancel(){this.dialogRef.close()}hasValues(){return this.availableMetadata.some(t=>{let e=this.metadataForm.get(t.name)?.value;return Array.isArray(e)?e.length>0:e&&e.trim()})}static{this.\u0275fac=function(e){return new(e||n)(T(pt),T(mt),T(Ge))}}static{this.\u0275cmp=A({type:n,selectors:[["app-batch-set-metadata-dialog"]],standalone:!1,decls:19,vars:5,consts:[[1,"batch-set-metadata-dialog"],["mat-dialog-title",""],[1,"info-message"],[1,"metadata-form",3,"formGroup"],["class","metadata-field",4,"ngFor","ngForOf"],["class","no-metadata-message",4,"ngIf"],["align","end"],["mat-button","",3,"click"],["mat-raised-button","","color","primary",3,"click","disabled"],[1,"metadata-field"],["appearance","outline","class","full-width",4,"ngIf"],["appearance","outline",1,"full-width"],[3,"formControlName"],["value",""],[3,"value",4,"ngFor","ngForOf"],[3,"value"],["multiple","",3,"formControlName"],["matInput","",3,"formControlName","placeholder"],[1,"no-metadata-message"],[1,"hint"]],template:function(e,i){e&1&&(l(0,"div",0)(1,"h2",1)(2,"mat-icon"),p(3,"info"),c(),p(4," Batch Set Metadata "),c(),l(5,"mat-dialog-content")(6,"div",2)(7,"mat-icon"),p(8,"info_outline"),c(),l(9,"span"),p(10),c()(),l(11,"form",3),y(12,CP,4,3,"div",4)(13,xP,7,0,"div",5),c()(),l(14,"mat-dialog-actions",6)(15,"button",7),P("click",function(){return i.onCancel()}),p(16,"Cancel"),c(),l(17,"button",8),P("click",function(){return i.onSave()}),p(18," Save "),c()()()),e&2&&(g(10),E("Setting metadata for ",i.selectedImageCount," selected image(s)"),g(),f("formGroup",i.metadataForm),g(),f("ngForOf",i.availableMetadata),g(),f("ngIf",i.availableMetadata.length===0),g(4),f("disabled",!i.hasValues()||i.availableMetadata.length===0))},dependencies:[Q,N,$e,Lt,Ft,Ne,Ue,He,Z,W,Mt,_e,kt,se,Zt,xt,yt,ht],styles:[".batch-set-metadata-dialog[_ngcontent-%COMP%]{min-width:500px;max-width:600px}.batch-set-metadata-dialog[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin:0;font-size:20px;font-weight:500}.batch-set-metadata-dialog[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#1976d2}.batch-set-metadata-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]{padding:20px 24px;max-height:60vh;overflow-y:auto}.batch-set-metadata-dialog[_ngcontent-%COMP%]   .info-message[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px;background-color:#e3f2fd;border-radius:4px;margin-bottom:20px;color:#1976d2;font-size:14px}.batch-set-metadata-dialog[_ngcontent-%COMP%]   .info-message[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}.batch-set-metadata-dialog[_ngcontent-%COMP%]   .metadata-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:16px}.batch-set-metadata-dialog[_ngcontent-%COMP%]   .metadata-form[_ngcontent-%COMP%]   .metadata-field[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%}.batch-set-metadata-dialog[_ngcontent-%COMP%]   .metadata-form[_ngcontent-%COMP%]   .metadata-field[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper .mdc-notched-outline__notch{border-left:none!important;border-right:none!important}.batch-set-metadata-dialog[_ngcontent-%COMP%]   .metadata-form[_ngcontent-%COMP%]   .metadata-field[_ngcontent-%COMP%]     .mdc-notched-outline .mdc-notched-outline__leading, .batch-set-metadata-dialog[_ngcontent-%COMP%]   .metadata-form[_ngcontent-%COMP%]   .metadata-field[_ngcontent-%COMP%]     .mdc-notched-outline .mdc-notched-outline__notch, .batch-set-metadata-dialog[_ngcontent-%COMP%]   .metadata-form[_ngcontent-%COMP%]   .metadata-field[_ngcontent-%COMP%]     .mdc-notched-outline .mdc-notched-outline__trailing{border-color:#00000061}.batch-set-metadata-dialog[_ngcontent-%COMP%]   .metadata-form[_ngcontent-%COMP%]   .metadata-field[_ngcontent-%COMP%]     mat-form-field:hover .mdc-notched-outline .mdc-notched-outline__leading, .batch-set-metadata-dialog[_ngcontent-%COMP%]   .metadata-form[_ngcontent-%COMP%]   .metadata-field[_ngcontent-%COMP%]     mat-form-field:hover .mdc-notched-outline .mdc-notched-outline__notch, .batch-set-metadata-dialog[_ngcontent-%COMP%]   .metadata-form[_ngcontent-%COMP%]   .metadata-field[_ngcontent-%COMP%]     mat-form-field:hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:#000000de}.batch-set-metadata-dialog[_ngcontent-%COMP%]   .metadata-form[_ngcontent-%COMP%]   .metadata-field[_ngcontent-%COMP%]     mat-form-field.mat-focused .mdc-notched-outline .mdc-notched-outline__leading, .batch-set-metadata-dialog[_ngcontent-%COMP%]   .metadata-form[_ngcontent-%COMP%]   .metadata-field[_ngcontent-%COMP%]     mat-form-field.mat-focused .mdc-notched-outline .mdc-notched-outline__notch, .batch-set-metadata-dialog[_ngcontent-%COMP%]   .metadata-form[_ngcontent-%COMP%]   .metadata-field[_ngcontent-%COMP%]     mat-form-field.mat-focused .mdc-notched-outline .mdc-notched-outline__trailing{border-color:#1976d2;border-width:2px}.batch-set-metadata-dialog[_ngcontent-%COMP%]   .no-metadata-message[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px 20px;text-align:center;color:#666}.batch-set-metadata-dialog[_ngcontent-%COMP%]   .no-metadata-message[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;color:#ff9800;margin-bottom:16px}.batch-set-metadata-dialog[_ngcontent-%COMP%]   .no-metadata-message[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0;font-size:14px}.batch-set-metadata-dialog[_ngcontent-%COMP%]   .no-metadata-message[_ngcontent-%COMP%]   p.hint[_ngcontent-%COMP%]{color:#999;font-size:13px}.batch-set-metadata-dialog[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]{padding:16px 24px;border-top:1px solid #e0e0e0;margin:0}.batch-set-metadata-dialog[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-left:8px}"]})}}return n})();var _o=(()=>{class n{constructor(t,e){this.dialogRef=t,this.data=e,this.elapsedTime=0,t.disableClose=!0}ngOnInit(){this.timerSubscription=Ws(1e3).subscribe(()=>{this.elapsedTime++})}ngOnDestroy(){this.timerSubscription&&this.timerSubscription.unsubscribe()}getFormattedTime(){let t=Math.floor(this.elapsedTime/60),e=this.elapsedTime%60;return`${t.toString().padStart(2,"0")}:${e.toString().padStart(2,"0")}`}static{this.\u0275fac=function(e){return new(e||n)(T(pt),T(mt))}}static{this.\u0275cmp=A({type:n,selectors:[["app-download-progress-dialog"]],standalone:!1,decls:16,vars:3,consts:[[1,"download-progress-dialog"],["mat-dialog-title",""],[1,"progress-content"],["diameter","60"],[1,"message"],[1,"timer"],[1,"time"],["color","primary","mode","indeterminate"],[1,"info-text"]],template:function(e,i){e&1&&(l(0,"div",0)(1,"h2",1),p(2),c(),l(3,"mat-dialog-content")(4,"div",2),k(5,"mat-spinner",3),l(6,"p",4),p(7),c(),l(8,"div",5)(9,"mat-icon"),p(10,"schedule"),c(),l(11,"span",6),p(12),c()(),k(13,"mat-progress-bar",7),l(14,"p",8),p(15,"Please wait while we prepare your download..."),c()()()()),e&2&&(g(2),D(i.data.title),g(5),D(i.data.message),g(5),D(i.getFormattedTime()))},dependencies:[W,nt,Tn,xt,ht],styles:[".download-progress-dialog[_ngcontent-%COMP%]{min-width:400px}.download-progress-dialog[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:0}.download-progress-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]{padding:24px}.download-progress-dialog[_ngcontent-%COMP%]   .progress-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:20px}.download-progress-dialog[_ngcontent-%COMP%]   .progress-content[_ngcontent-%COMP%]   .message[_ngcontent-%COMP%]{font-size:16px;font-weight:500;text-align:center;margin:0;color:#333}.download-progress-dialog[_ngcontent-%COMP%]   .progress-content[_ngcontent-%COMP%]   .timer[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;font-size:24px;font-weight:600;color:#1976d2}.download-progress-dialog[_ngcontent-%COMP%]   .progress-content[_ngcontent-%COMP%]   .timer[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:28px;width:28px;height:28px}.download-progress-dialog[_ngcontent-%COMP%]   .progress-content[_ngcontent-%COMP%]   .timer[_ngcontent-%COMP%]   .time[_ngcontent-%COMP%]{font-family:Courier New,monospace}.download-progress-dialog[_ngcontent-%COMP%]   .progress-content[_ngcontent-%COMP%]   mat-progress-bar[_ngcontent-%COMP%]{width:100%;height:8px;border-radius:4px}.download-progress-dialog[_ngcontent-%COMP%]   .progress-content[_ngcontent-%COMP%]   .info-text[_ngcontent-%COMP%]{font-size:14px;color:#666;text-align:center;margin:0}"]})}}return n})();function MP(n,o){if(n&1){let t=j();l(0,"div",13),P("click",function(){let i=M(t).$implicit,a=C();return b(a.toggleTag(i.id))}),l(1,"mat-checkbox",14),P("click",function(i){return M(t),b(i.stopPropagation())})("change",function(){let i=M(t).$implicit,a=C();return b(a.toggleTag(i.id))}),p(2),c()()}if(n&2){let t=o.$implicit,e=C();$("selected",e.isTagSelected(t.id)),g(),f("checked",e.isTagSelected(t.id)),g(),E(" ",t.name," ")}}function bP(n,o){n&1&&(l(0,"div",15),p(1," No tags found "),c())}var Yg=(()=>{class n{constructor(t,e){this.dialogRef=t,this.data=e,this.availableTags=[],this.filteredTags=[],this.selectedTagIds=new Set,this.selectedImageCount=0,this.searchText="",this.availableTags=e.availableTags,this.filteredTags=[...this.availableTags],this.selectedImageCount=e.selectedImageIds.length}ngOnInit(){}onSearchChange(){let t=this.searchText.toLowerCase().trim();t?this.filteredTags=this.availableTags.filter(e=>e.name.toLowerCase().includes(t)):this.filteredTags=[...this.availableTags]}toggleTag(t){this.selectedTagIds.has(t)?this.selectedTagIds.delete(t):this.selectedTagIds.add(t)}isTagSelected(t){return this.selectedTagIds.has(t)}onApply(){let t=Array.from(this.selectedTagIds);this.dialogRef.close({tagIds:t,imageIds:this.data.selectedImageIds})}onCancel(){this.dialogRef.close()}canApply(){return this.selectedTagIds.size>0}static{this.\u0275fac=function(e){return new(e||n)(T(pt),T(mt))}}static{this.\u0275cmp=A({type:n,selectors:[["app-batch-set-tags-dialog"]],standalone:!1,decls:19,vars:6,consts:[[1,"dialog-container"],["mat-dialog-title",""],[1,"info-text"],["appearance","outline",1,"search-field"],["matInput","","placeholder","Find or create tags",3,"ngModelChange","ngModel"],["matSuffix",""],[1,"tags-container"],[1,"tags-grid"],["class","tag-item",3,"selected","click",4,"ngFor","ngForOf"],["class","no-results",4,"ngIf"],["align","end"],["mat-button","",3,"click"],["mat-flat-button","","color","primary",3,"click","disabled"],[1,"tag-item",3,"click"],[3,"click","change","checked"],[1,"no-results"]],template:function(e,i){e&1&&(l(0,"div",0)(1,"h2",1),p(2,"Set Tags"),c(),l(3,"mat-dialog-content")(4,"div",2),p(5),c(),l(6,"mat-form-field",3)(7,"input",4),Yt("ngModelChange",function(r){return Gt(i.searchText,r)||(i.searchText=r),r}),P("ngModelChange",function(){return i.onSearchChange()}),c(),l(8,"mat-icon",5),p(9,"search"),c()(),l(10,"div",6)(11,"div",7),y(12,MP,3,4,"div",8),c(),y(13,bP,2,0,"div",9),c()(),l(14,"mat-dialog-actions",10)(15,"button",11),P("click",function(){return i.onCancel()}),p(16,"Cancel"),c(),l(17,"button",12),P("click",function(){return i.onApply()}),p(18," Apply "),c()()()),e&2&&(g(5),ue(" Set tags for ",i.selectedImageCount," selected image",i.selectedImageCount!==1?"s":""," "),g(2),Wt("ngModel",i.searchText),g(5),f("ngForOf",i.filteredTags),g(),f("ngIf",i.filteredTags.length===0),g(4),f("disabled",!i.canApply()))},dependencies:[Q,N,Lt,Ft,we,Z,W,Mt,yo,kt,xt,yt,ht,Qe],styles:[".dialog-container[_ngcontent-%COMP%]{width:600px;max-width:90vw}.info-text[_ngcontent-%COMP%]{margin-bottom:16px;color:#0009;font-size:14px}.search-field[_ngcontent-%COMP%]{width:100%;margin-bottom:16px}.search-field[_ngcontent-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}.tags-container[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto;border:1px solid rgba(0,0,0,.12);border-radius:4px;padding:12px}.tags-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:8px}.tag-item[_ngcontent-%COMP%]{padding:10px 12px;cursor:pointer;border-radius:4px;border:1px solid rgba(0,0,0,.12);transition:all .2s;background-color:#fff}.tag-item[_ngcontent-%COMP%]:hover{background-color:#0000000a;border-color:#0000003d}.tag-item.selected[_ngcontent-%COMP%]{background-color:#3f51b514;border-color:#3f51b5}.tag-item[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{width:100%;pointer-events:none}.tag-item[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .mat-checkbox-inner-container{pointer-events:auto}.tag-item[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .mat-checkbox-label{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.no-results[_ngcontent-%COMP%]{padding:24px;text-align:center;color:#00000061;grid-column:1/-1}mat-dialog-actions[_ngcontent-%COMP%]{padding:16px 24px;margin:0}"]})}}return n})();function PP(n,o){if(n&1){let t=j();l(0,"div",10),P("click",function(){let i=M(t).$implicit,a=C();return b(a.onClassSelect(i.id))}),l(1,"mat-radio-button",11)(2,"div",12),k(3,"span",13),l(4,"span",14),p(5),c()()()()}if(n&2){let t=o.$implicit,e=C();$("selected",e.isClassSelected(t.id)),g(),f("value",t.id),g(2),K("background-color",t.colorCode),g(2),D(t.className)}}function vP(n,o){n&1&&(l(0,"div",15),p(1," No classes available. Please create classes first. "),c())}var qg=(()=>{class n{constructor(t,e){this.dialogRef=t,this.data=e,this.availableClasses=[],this.selectedClassId=null,this.selectedImageCount=0,this.availableClasses=e.availableClasses,this.selectedImageCount=e.selectedImageIds.length}ngOnInit(){}onClassSelect(t){this.selectedClassId=t}isClassSelected(t){return this.selectedClassId===t}onSave(){this.selectedClassId!==null&&this.dialogRef.close({classId:this.selectedClassId,imageIds:this.data.selectedImageIds})}onCancel(){this.dialogRef.close()}canSave(){return this.selectedClassId!==null}static{this.\u0275fac=function(e){return new(e||n)(T(pt),T(mt))}}static{this.\u0275cmp=A({type:n,selectors:[["app-batch-set-class-dialog"]],standalone:!1,decls:15,vars:6,consts:[[1,"dialog-container"],["mat-dialog-title",""],[1,"info-text"],[1,"classes-container",3,"ngModelChange","change","ngModel"],[1,"classes-grid"],["class","class-item",3,"selected","click",4,"ngFor","ngForOf"],["class","no-results",4,"ngIf"],["align","end"],["mat-button","",3,"click"],["mat-flat-button","","color","primary",3,"click","disabled"],[1,"class-item",3,"click"],[3,"value"],[1,"class-content"],[1,"class-color"],[1,"class-name"],[1,"no-results"]],template:function(e,i){e&1&&(l(0,"div",0)(1,"h2",1),p(2,"Set Class"),c(),l(3,"mat-dialog-content")(4,"div",2),p(5),c(),l(6,"mat-radio-group",3),Yt("ngModelChange",function(r){return Gt(i.selectedClassId,r)||(i.selectedClassId=r),r}),P("change",function(r){return i.onClassSelect(r.value)}),l(7,"div",4),y(8,PP,6,6,"div",5),c(),y(9,vP,2,0,"div",6),c()(),l(10,"mat-dialog-actions",7)(11,"button",8),P("click",function(){return i.onCancel()}),p(12,"Cancel"),c(),l(13,"button",9),P("click",function(){return i.onSave()}),p(14," Save "),c()()()),e&2&&(g(5),ue(" Set class for ",i.selectedImageCount," selected image",i.selectedImageCount!==1?"s":""," "),g(),Wt("ngModel",i.selectedClassId),g(2),f("ngForOf",i.availableClasses),g(),f("ngIf",i.availableClasses.length===0),g(4),f("disabled",!i.canSave()))},dependencies:[Q,N,Ft,we,Z,xt,yt,ht,br,ca],styles:[".dialog-container[_ngcontent-%COMP%]{width:600px;max-width:90vw}.info-text[_ngcontent-%COMP%]{margin-bottom:16px;color:#0009;font-size:14px}.classes-container[_ngcontent-%COMP%]{max-height:400px;overflow-y:auto;border:1px solid rgba(0,0,0,.12);border-radius:4px;padding:12px}.classes-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:8px}.class-item[_ngcontent-%COMP%]{padding:10px 12px;cursor:pointer;border-radius:4px;border:1px solid rgba(0,0,0,.12);transition:all .2s;background-color:#fff}.class-item[_ngcontent-%COMP%]:hover{background-color:#0000000a;border-color:#0000003d}.class-item.selected[_ngcontent-%COMP%]{background-color:#3f51b514;border-color:#3f51b5}.class-item[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]{width:100%}.class-item[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]     .mat-radio-label{width:100%;margin:0;padding:0}.class-item[_ngcontent-%COMP%]   mat-radio-button[_ngcontent-%COMP%]     .mat-radio-label-content{width:100%;padding-left:8px}.class-content[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;width:100%}.class-color[_ngcontent-%COMP%]{width:20px;height:20px;border-radius:4px;flex-shrink:0;border:1px solid rgba(0,0,0,.12)}.class-name[_ngcontent-%COMP%]{flex:1;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.no-results[_ngcontent-%COMP%]{padding:24px;text-align:center;color:#00000061;grid-column:1/-1}mat-dialog-actions[_ngcontent-%COMP%]{padding:16px 24px;margin:0}"]})}}return n})();var OP=()=>({});function yP(n,o){if(n&1){let t=j();l(0,"div",16),P("click",function(i){return M(t),b(i.stopPropagation())}),l(1,"mat-checkbox",17),P("change",function(){M(t);let i=C();return b(i.onCheckboxToggle())}),c()()}if(n&2){let t=C();g(),f("checked",t.isSelected)}}function wP(n,o){if(n&1&&(l(0,"span"),p(1),c()),n&2){let t=C(2).$implicit,e=C(2);g(),E("(",e.formatConfidence(t.confidenceRate),")")}}function SP(n,o){if(n&1&&(l(0,"span",21),p(1),y(2,wP,2,1,"span",22),c()),n&2){let t=C().$implicit,e=C(2);K("background-color",e.getLabelColor(t))("color","white"),$("position-bottom",e.shouldShowLabelTextBottom(t))("position-top",!e.shouldShowLabelTextBottom(t)),g(),E(" ",e.getLabelClassName(t),""),g(),f("ngIf",e.isPredictionLabel(t)&&t.confidenceRate!=null)}}function kP(n,o){if(n&1&&(l(0,"div"),y(1,SP,3,10,"span",20),c()),n&2){let t=o.$implicit,e=C(2);K("border-color",e.getLabelColor(t))("height",e.getLabelPosition(t).height,"%")("left",e.getLabelPosition(t).x,"%")("top",e.getLabelPosition(t).y,"%")("width",e.getLabelPosition(t).width,"%"),$("label-box",!0)("prediction",e.isPredictionLabel(t)),g(),f("ngIf",e.showLabelDetails&&!e.isInstanceView()&&e.projectType!=="Classification")}}function IP(n,o){if(n&1&&(l(0,"div",18),y(1,kP,2,15,"div",19),c()),n&2){let t=C();f("ngStyle",t.getOverlayStyles()),g(),f("ngForOf",t.getDisplayLabels())}}function TP(n,o){if(n&1&&(l(0,"span",25),p(1),c()),n&2){let t=o.$implicit,e=C(2);K("background-color",e.getLabelColor(t)),g(),E(" ",e.getLabelClassName(t)," ")}}function DP(n,o){if(n&1&&(l(0,"div",23),y(1,TP,2,3,"span",24),c()),n&2){let t=C();$("position-bottom",t.shouldPositionLabelBadgeAtBottom()),g(),f("ngForOf",t.getDisplayLabels())}}function EP(n,o){if(n&1&&(l(0,"div",26)(1,"mat-icon"),p(2,"label"),c(),l(3,"span"),p(4),c()()),n&2){let t=C();g(4),D(t.getLabelCount())}}function jP(n,o){if(n&1&&(l(0,"span",27),p(1),c()),n&2){let t=C();g(),D(t.image.split)}}function FP(n,o){n&1&&(l(0,"span",28)(1,"mat-icon"),p(2,"block"),c(),p(3," No Class "),c())}function AP(n,o){if(n&1&&(l(0,"span",34),k(1,"span",35),l(2,"span",36),p(3),c()()),n&2){let t=C(2);g(),K("background-color",t.getClassColor(t.getCurrentClassId())),g(2),D(t.getClassName(t.getCurrentClassId()))}}function zP(n,o){n&1&&(l(0,"span",37),p(1,"Select class..."),c())}function VP(n,o){if(n&1&&(l(0,"mat-option",38)(1,"span",34),k(2,"span",35),l(3,"span",36),p(4),c()()()),n&2){let t=o.$implicit;f("value",t.id),g(2),K("background-color",t.colorCode),g(2),D(t.className)}}function LP(n,o){if(n&1){let t=j();l(0,"div",29),P("click",function(i){M(t);let a=C();return b(a.onDropdownClick(i))}),l(1,"mat-select",30),P("selectionChange",function(i){M(t);let a=C();return b(a.onMatClassChange(i.value))}),l(2,"mat-select-trigger"),y(3,AP,4,3,"span",31)(4,zP,2,0,"ng-template",null,0,li),c(),l(6,"mat-option",32),p(7,"Select class..."),c(),y(8,VP,5,4,"mat-option",33),c()()}if(n&2){let t=gt(5),e=C();g(),f("value",e.getCurrentClassId()),g(2),f("ngIf",e.getCurrentClassId())("ngIfElse",t),g(3),f("value",null),g(2),f("ngForOf",e.availableClasses)}}var Xg=(()=>{class n{constructor(){this.viewMode="images",this.projectType="Object Detection",this.availableClasses=[],this.showLabelDetails=!0,this.selectMode=!1,this.isSelected=!1,this.cardClick=new H,this.classChange=new H,this.selectionToggle=new H,this._cachedInstanceViewStyles=null,this._lastFocusedLabelId=null}getOverlayStyles(){if(!this.image?.width||!this.image?.height)return{top:"0",left:"0",width:"100%",height:"100%"};let t=this.image.width/this.image.height,e=1;if(t>e){let i=e/t*100;return{left:"0",top:(100-i)/2+"%",width:"100%",height:i+"%"}}else if(t<e){let i=t/e*100;return{top:"0",left:(100-i)/2+"%",width:i+"%",height:"100%"}}else return{top:"0",left:"0",width:"100%",height:"100%"}}onCardClick(){this.selectMode?this.onCheckboxToggle():this.cardClick.emit(this.image)}onCheckboxToggle(){this.selectionToggle.emit({imageId:this.image.id,selected:!this.isSelected})}getImageUrl(){return this.image.thumbnailImage?this.image.thumbnailImage.startsWith("data:image")?this.image.thumbnailImage:`data:image/jpeg;base64,${this.image.thumbnailImage}`:this.image.fileUrl||""}getLabelPosition(t){try{if(!t.position)return{x:0,y:0,width:0,height:0};let e=JSON.parse(t.position);if(!e||typeof e!="object")return{x:0,y:0,width:0,height:0};let i=(e.width||0)*100,a=(e.height||0)*100,r=(e.x||0)*100-i/2,s=(e.y||0)*100-a/2;return{x:Math.max(0,r),y:Math.max(0,s),width:i,height:a}}catch(e){return console.error("Error parsing label position:",e),{x:0,y:0,width:0,height:0}}}getLabelColor(t){return t.colorCode||t.projectClass?.colorCode||"#00ff00"}getLabelClassName(t){return t.className||t.projectClass?.className||"Unknown"}isPredictionLabel(t){return t.annotationType==="Prediction"}shouldShowLabelTextBottom(t){return this.getLabelPosition(t).y<30}shouldShowConfidenceTopLeft(t){let e=this.getLabelPosition(t),i=e.y+e.height,a=e.x+e.width;return i>70&&a>30}formatConfidence(t){return`${(t>1?t:t*100).toFixed(0)}%`}hasLabels(){return!!this.image.labels&&this.image.labels.length>0}getLabelCount(){return this.image.labels?.length||0}isClassificationProject(){return this.projectType==="Classification"}shouldShowClassBadge(){return this.isClassificationProject()&&this.hasLabels()&&!this.image.isNoClass}getClassificationLabel(){return!this.image.labels||this.image.labels.length===0?null:this.image.labels.find(e=>e.annotationType==="Ground Truth"||e.annotationType==="Ground-Truth"||e.annotationType==="GroundTruth")||this.image.labels[0]}getDisplayLabels(){if(!this.image.labels||this.image.labels.length===0)return[];if(this.isClassificationProject()){let t=this.image.labels.filter(e=>e.annotationType==="Ground Truth"||e.annotationType==="Ground-Truth"||e.annotationType==="GroundTruth");return t.length>0?t:this.image.labels}return this.image.labels}getCurrentClassId(){let t=this.getClassificationLabel();if(!t)return null;let e=t.classId;return e?Number(e):null}shouldShowClassDropdown(){return this.isClassificationProject()&&!this.image.isNoClass}onMatClassChange(t){let e=this.getCurrentClassId();t!==e&&this.classChange.emit({imageId:this.image.id,classId:t,previousClassId:e})}onClassChange(t){t.stopPropagation();let e=t.target,i=e.value?parseInt(e.value,10):null,a=this.getCurrentClassId();i!==a&&this.classChange.emit({imageId:this.image.id,classId:i,previousClassId:a})}onDropdownClick(t){t.stopPropagation()}getClassColor(t){return this.availableClasses.find(i=>i.id===t)?.colorCode||"#9e9e9e"}getClassName(t){return this.availableClasses.find(i=>i.id===t)?.className||""}isInstanceView(){return this.viewMode==="instances"&&!!this.image.focusedLabel}getInstanceViewStyles(){if(!this.isInstanceView()||!this.image.focusedLabel)return{};let t=this.image.focusedLabel.id;if(this._cachedInstanceViewStyles&&this._lastFocusedLabelId===t)return this._cachedInstanceViewStyles;let e=this.getLabelPosition(this.image.focusedLabel),i=e.width,a=e.height,r=e.x+e.width/2,s=e.y+e.height/2,d=e.width+i*2,m=e.height+a*2,h=Math.max(d,m),u=r-h/2,_=s-h/2,x=u+h,v=_+h;u<0&&(x=Math.min(100,x-u),u=0),x>100&&(u=Math.max(0,u-(x-100)),x=100),_<0&&(v=Math.min(100,v-_),_=0),v>100&&(_=Math.max(0,_-(v-100)),v=100);let O=x-u,w=v-_,S=100/O,I=100/w,L=Math.max(S,I),R=-u,F=-_;return this._cachedInstanceViewStyles={transform:`scale(${L}) translate(${R}%, ${F}%)`,"transform-origin":"0 0"},this._lastFocusedLabelId=t,this._cachedInstanceViewStyles}shouldPositionLabelBadgeAtBottom(){if(!this.isInstanceView()||!this.image.focusedLabel)return!1;let t=this.getLabelPosition(this.image.focusedLabel);return t.y<30&&t.x<30}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=A({type:n,selectors:[["app-image-card"]],inputs:{image:"image",viewMode:"viewMode",projectType:"projectType",availableClasses:"availableClasses",showLabelDetails:"showLabelDetails",selectMode:"selectMode",isSelected:"isSelected"},outputs:{cardClick:"cardClick",classChange:"classChange",selectionToggle:"selectionToggle"},standalone:!1,decls:17,vars:23,consts:[["noClassTpl",""],[1,"image-card",3,"click"],[1,"image-container"],["class","selection-checkbox",3,"click",4,"ngIf"],[1,"image-labels-wrapper",3,"ngStyle"],["loading","lazy",1,"thumbnail-image",3,"alt","src"],["class","labels-overlay",3,"ngStyle",4,"ngIf"],["class","instance-label-text",3,"position-bottom",4,"ngIf"],["class","label-badge",4,"ngIf"],[1,"image-info"],[1,"file-name",3,"title"],[1,"image-meta"],["class","split-badge",4,"ngIf"],[1,"dimensions"],["class","no-class-badge","matTooltip","No Class",4,"ngIf"],["class","class-dropdown-container",3,"click",4,"ngIf"],[1,"selection-checkbox",3,"click"],["color","primary",3,"change","checked"],[1,"labels-overlay",3,"ngStyle"],[3,"label-box","prediction","border-color","height","left","top","width",4,"ngFor","ngForOf"],["class","label-text",3,"position-bottom","position-top","background-color","color",4,"ngIf"],[1,"label-text"],[4,"ngIf"],[1,"instance-label-text"],["class","label-badge-text",3,"background-color",4,"ngFor","ngForOf"],[1,"label-badge-text"],[1,"label-badge"],[1,"split-badge"],["matTooltip","No Class",1,"no-class-badge"],[1,"class-dropdown-container",3,"click"],["panelClass","image-card-class-panel",1,"class-mat-select",3,"selectionChange","value"],["class","class-option-item",4,"ngIf","ngIfElse"],[3,"value"],["class","class-colored-option",3,"value",4,"ngFor","ngForOf"],[1,"class-option-item"],[1,"class-color-swatch"],[1,"class-option-name"],[1,"class-placeholder"],[1,"class-colored-option",3,"value"]],template:function(e,i){e&1&&(l(0,"div",1),P("click",function(){return i.onCardClick()}),l(1,"div",2),y(2,yP,2,1,"div",3),l(3,"div",4),k(4,"img",5),y(5,IP,2,2,"div",6),c(),y(6,DP,2,3,"div",7)(7,EP,5,1,"div",8),c(),l(8,"div",9)(9,"div",10),p(10),c(),l(11,"div",11),y(12,jP,2,1,"span",12),l(13,"span",13),p(14),c(),y(15,FP,4,0,"span",14)(16,LP,9,5,"div",15),c()()()),e&2&&($("instance-card",i.isInstanceView())("select-mode",i.selectMode)("selected",i.isSelected),g(),$("instance-view-container",i.isInstanceView()),g(),f("ngIf",i.selectMode),g(),f("ngStyle",i.isInstanceView()?i.getInstanceViewStyles():Le(22,OP)),g(),f("alt",i.image.fileName)("src",i.getImageUrl(),ae),g(),f("ngIf",i.hasLabels()),g(),f("ngIf",i.isInstanceView()&&i.hasLabels()&&i.showLabelDetails&&i.projectType!=="Classification"),g(),f("ngIf",i.hasLabels()&&i.projectType==="Segmentation"),g(2),f("title",i.image.fileName),g(),E(" ",i.image.fileName," "),g(2),f("ngIf",i.image.split),g(2),ue("",i.image.width," \xD7 ",i.image.height,""),g(),f("ngIf",i.image.isNoClass),g(),f("ngIf",i.shouldShowClassDropdown()))},dependencies:[Q,N,ll,W,se,ad,Zt,jt,Qe],styles:[".image-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;background:#fff;border-radius:8px;overflow:hidden;box-shadow:0 2px 4px #0000001a;transition:all .2s ease;cursor:pointer}.image-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 12px #00000026;transform:translateY(-2px)}.image-card.select-mode[_ngcontent-%COMP%]{cursor:pointer}.image-card.select-mode.selected[_ngcontent-%COMP%]{border:2px solid #1976d2;box-shadow:0 0 0 2px #1976d233}.image-card.instance-card[_ngcontent-%COMP%]{width:200px;flex-shrink:0}.image-container[_ngcontent-%COMP%]{position:relative;width:100%;background:#f5f5f5;overflow:hidden;display:flex;align-items:center;justify-content:center;aspect-ratio:1}.image-container.instance-view-container[_ngcontent-%COMP%]{width:200px;height:200px;aspect-ratio:unset;flex-shrink:0;overflow:hidden}.image-labels-wrapper[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;display:flex;align-items:center;justify-content:center}.image-labels-wrapper[_ngcontent-%COMP%]   .thumbnail-image[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:contain;display:block}.instance-view-container[_ngcontent-%COMP%]   .image-labels-wrapper[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:200px;height:200px}.instance-view-container[_ngcontent-%COMP%]   .image-labels-wrapper[_ngcontent-%COMP%]   .thumbnail-image[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:contain}.instance-view-container[_ngcontent-%COMP%]   .image-labels-wrapper[_ngcontent-%COMP%]   .labels-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%}.instance-label-text[_ngcontent-%COMP%]{position:absolute;top:8px;left:8px;z-index:10;display:flex;flex-wrap:wrap;gap:4px;max-width:calc(100% - 16px)}.instance-label-text.position-bottom[_ngcontent-%COMP%]{top:auto;bottom:8px}.instance-label-text[_ngcontent-%COMP%]   .label-badge-text[_ngcontent-%COMP%]{padding:4px 8px;font-size:.75rem;font-weight:500;color:#fff;border-radius:4px;white-space:nowrap;box-shadow:0 1px 3px #0000004d}.selection-checkbox[_ngcontent-%COMP%]{position:absolute;top:8px;left:8px;z-index:10;background-color:#fff;border-radius:4px;padding:4px;box-shadow:0 1px 3px #0000004d;display:flex;align-items:center;justify-content:center}.selection-checkbox[_ngcontent-%COMP%]     .mat-mdc-checkbox{display:flex;align-items:center;justify-content:center;margin:0}.selection-checkbox[_ngcontent-%COMP%]     .mat-mdc-checkbox .mdc-checkbox{padding:0;margin:0}.selection-checkbox[_ngcontent-%COMP%]     .mat-mdc-checkbox .mdc-checkbox__background{top:0;left:0}.labels-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none}.labels-overlay[_ngcontent-%COMP%]   .label-box[_ngcontent-%COMP%]{position:absolute;border:2px solid;box-sizing:border-box;pointer-events:none}.labels-overlay[_ngcontent-%COMP%]   .label-box.prediction[_ngcontent-%COMP%]{border-style:dashed}.labels-overlay[_ngcontent-%COMP%]   .label-box[_ngcontent-%COMP%]   .label-name[_ngcontent-%COMP%]{position:absolute;top:-2px;left:-2px;padding:2px 6px;font-size:.75rem;font-weight:500;color:#fff;white-space:nowrap;border-radius:2px;max-width:100%;overflow:hidden;text-overflow:ellipsis}.labels-overlay[_ngcontent-%COMP%]   .label-box[_ngcontent-%COMP%]   .label-text[_ngcontent-%COMP%]{position:absolute;padding:2px 6px;font-size:.75rem;font-weight:500;color:#fff;white-space:nowrap;border-radius:2px;z-index:1;max-width:200px;overflow:hidden;text-overflow:ellipsis}.labels-overlay[_ngcontent-%COMP%]   .label-box[_ngcontent-%COMP%]   .label-text.position-top[_ngcontent-%COMP%]{bottom:100%;left:-2px;margin-bottom:2px}.labels-overlay[_ngcontent-%COMP%]   .label-box[_ngcontent-%COMP%]   .label-text.position-bottom[_ngcontent-%COMP%]{top:100%;left:-2px;margin-top:2px}.labels-overlay[_ngcontent-%COMP%]   .label-box[_ngcontent-%COMP%]   .confidence-badge[_ngcontent-%COMP%]{position:absolute;padding:1px 4px;font-size:.625rem;font-weight:600;color:#fff;white-space:nowrap;border-radius:2px;z-index:1}.labels-overlay[_ngcontent-%COMP%]   .label-box[_ngcontent-%COMP%]   .confidence-badge.position-bottom-right[_ngcontent-%COMP%]{bottom:-2px;right:-2px;transform:translateY(100%)}.labels-overlay[_ngcontent-%COMP%]   .label-box[_ngcontent-%COMP%]   .confidence-badge.position-top-left[_ngcontent-%COMP%]{top:-2px;left:-2px;transform:translateY(-100%)}.label-badge[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;display:flex;align-items:center;gap:4px;padding:4px 8px;background:#000000b3;color:#fff;border-radius:12px;font-size:.75rem;font-weight:500}.label-badge[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1rem;width:1rem;height:1rem}.no-class-badge[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;margin-left:auto;padding:2px 8px;background:#9e9e9e26;color:#757575;border-radius:4px;font-size:.75rem;font-weight:500}.no-class-badge[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:.875rem;width:.875rem;height:.875rem}.class-dropdown-container[_ngcontent-%COMP%]{margin-left:auto;max-width:140px}.class-mat-select[_ngcontent-%COMP%]{width:100%;font-size:.75rem;font-weight:500}.class-mat-select[_ngcontent-%COMP%]     .mat-mdc-select-trigger{height:24px;border:1px solid #ccc;border-radius:4px;padding:0 6px;background:#fff}.class-mat-select[_ngcontent-%COMP%]     .mat-mdc-select-value{font-size:.75rem;color:#000000de}.class-mat-select[_ngcontent-%COMP%]     .mat-mdc-select-arrow{color:#0000008a}.class-option-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px}.class-color-swatch[_ngcontent-%COMP%]{display:inline-block;width:12px;height:12px;border-radius:2px;flex-shrink:0;border:1px solid rgba(0,0,0,.15)}.class-option-name[_ngcontent-%COMP%]{color:#000000de;font-size:.75rem;font-weight:500;white-space:nowrap}.class-placeholder[_ngcontent-%COMP%]{color:#0000006b;font-size:.75rem}  .image-card-class-panel{min-width:160px!important}  .image-card-class-panel .mat-mdc-option.class-colored-option{min-height:36px;padding:6px 16px!important}  .image-card-class-panel .mat-mdc-option.class-colored-option .mdc-list-item__primary-text{color:#000000de!important;width:100%}  .image-card-class-panel .mat-mdc-option.class-colored-option .class-option-name{color:#000000de!important;white-space:nowrap;overflow:visible;text-overflow:unset}.image-info[_ngcontent-%COMP%]{padding:.75rem;display:flex;flex-direction:column;gap:.5rem}.image-info[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{font-size:.875rem;font-weight:500;color:#000000de;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.image-info[_ngcontent-%COMP%]   .image-meta[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.5rem;font-size:.75rem;color:#0009}.image-info[_ngcontent-%COMP%]   .image-meta[_ngcontent-%COMP%]   .split-badge[_ngcontent-%COMP%]{padding:2px 6px;background:#e3f2fd;color:#1976d2;border-radius:4px;font-weight:500;text-transform:uppercase}.image-info[_ngcontent-%COMP%]   .image-meta[_ngcontent-%COMP%]   .dimensions[_ngcontent-%COMP%]{color:#0000008a}@media (max-width: 768px){.image-card[_ngcontent-%COMP%]   .labels-overlay[_ngcontent-%COMP%]   .label-box[_ngcontent-%COMP%]   .label-name[_ngcontent-%COMP%]{font-size:.625rem;padding:1px 4px}.image-card[_ngcontent-%COMP%]   .labels-overlay[_ngcontent-%COMP%]   .label-box[_ngcontent-%COMP%]   .label-text[_ngcontent-%COMP%]{font-size:.625rem;padding:1px 4px;max-width:150px}.image-card[_ngcontent-%COMP%]   .labels-overlay[_ngcontent-%COMP%]   .label-box[_ngcontent-%COMP%]   .confidence-badge[_ngcontent-%COMP%]{font-size:.5rem;padding:1px 3px}.image-card[_ngcontent-%COMP%]   .label-badge[_ngcontent-%COMP%]{padding:2px 6px;font-size:.625rem}.image-card[_ngcontent-%COMP%]   .label-badge[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:.875rem;width:.875rem;height:.875rem}.image-info[_ngcontent-%COMP%]{padding:.5rem}.image-info[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{font-size:.75rem}.image-info[_ngcontent-%COMP%]   .image-meta[_ngcontent-%COMP%]{font-size:.625rem;gap:.375rem}.image-info[_ngcontent-%COMP%]   .image-meta[_ngcontent-%COMP%]   .split-badge[_ngcontent-%COMP%]{padding:1px 4px;font-size:.625rem}.image-info[_ngcontent-%COMP%]   .image-meta[_ngcontent-%COMP%]   .no-class-badge[_ngcontent-%COMP%]{padding:1px 6px;font-size:.625rem}.image-info[_ngcontent-%COMP%]   .image-meta[_ngcontent-%COMP%]   .no-class-badge[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:.75rem;width:.75rem;height:.75rem}.image-info[_ngcontent-%COMP%]   .image-meta[_ngcontent-%COMP%]   .class-dropdown-container[_ngcontent-%COMP%]{max-width:110px}.image-info[_ngcontent-%COMP%]   .image-meta[_ngcontent-%COMP%]   .class-mat-select[_ngcontent-%COMP%]{font-size:.625rem}}@media (max-width: 480px){.image-card[_ngcontent-%COMP%]{border-radius:4px}.image-card[_ngcontent-%COMP%]:hover{transform:translateY(-1px)}.image-card[_ngcontent-%COMP%]   .labels-overlay[_ngcontent-%COMP%]   .label-box[_ngcontent-%COMP%]   .label-name[_ngcontent-%COMP%]{font-size:.5rem;padding:1px 3px}.image-card[_ngcontent-%COMP%]   .labels-overlay[_ngcontent-%COMP%]   .label-box[_ngcontent-%COMP%]   .label-text[_ngcontent-%COMP%]{font-size:.5rem;padding:1px 3px;max-width:120px}.image-card[_ngcontent-%COMP%]   .labels-overlay[_ngcontent-%COMP%]   .label-box[_ngcontent-%COMP%]   .confidence-badge[_ngcontent-%COMP%]{font-size:.4rem;padding:1px 2px}.image-card[_ngcontent-%COMP%]   .label-badge[_ngcontent-%COMP%]{top:4px;right:4px;padding:2px 4px;font-size:.5rem;gap:2px}.image-card[_ngcontent-%COMP%]   .label-badge[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:.75rem;width:.75rem;height:.75rem}.image-container[_ngcontent-%COMP%]{padding-top:100%}.image-info[_ngcontent-%COMP%]{padding:.375rem;gap:.375rem}.image-info[_ngcontent-%COMP%]   .file-name[_ngcontent-%COMP%]{font-size:.625rem}.image-info[_ngcontent-%COMP%]   .image-meta[_ngcontent-%COMP%]{font-size:.5rem;gap:.25rem;flex-wrap:wrap}.image-info[_ngcontent-%COMP%]   .image-meta[_ngcontent-%COMP%]   .split-badge[_ngcontent-%COMP%]{padding:1px 3px;font-size:.5rem}.image-info[_ngcontent-%COMP%]   .image-meta[_ngcontent-%COMP%]   .no-class-badge[_ngcontent-%COMP%]{padding:1px 4px;font-size:.5rem}.image-info[_ngcontent-%COMP%]   .image-meta[_ngcontent-%COMP%]   .no-class-badge[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:.625rem;width:.625rem;height:.625rem}.image-info[_ngcontent-%COMP%]   .image-meta[_ngcontent-%COMP%]   .class-dropdown-container[_ngcontent-%COMP%]{max-width:90px}.image-info[_ngcontent-%COMP%]   .image-meta[_ngcontent-%COMP%]   .class-mat-select[_ngcontent-%COMP%]{font-size:.5rem}}"],changeDetection:0})}}return n})();function BP(n,o){if(n&1){let t=j();l(0,"app-image-card",5),P("cardClick",function(i){M(t);let a=C();return b(a.onImageClick(i))})("classChange",function(i){M(t);let a=C();return b(a.onClassChange(i))})("selectionToggle",function(i){M(t);let a=C();return b(a.onImageSelectionToggle(i.imageId,i.selected))}),c()}if(n&2){let t=o.$implicit,e=C();f("image",t)("viewMode",e.viewMode)("projectType",e.projectType)("availableClasses",e.availableClasses)("showLabelDetails",e.showLabelDetails)("selectMode",e.selectMode)("isSelected",e.isImageSelected(t.id))}}function NP(n,o){n&1&&(l(0,"div",6)(1,"mat-icon"),p(2,"image_not_supported"),c(),l(3,"p"),p(4,"No images found"),c()())}function $P(n,o){if(n&1){let t=j();l(0,"div",7)(1,"button",8),P("click",function(){M(t);let i=C();return b(i.previousPage())}),l(2,"mat-icon"),p(3,"chevron_left"),c()(),l(4,"span",9),p(5),c(),l(6,"button",10),P("click",function(){M(t);let i=C();return b(i.nextPage())}),l(7,"mat-icon"),p(8,"chevron_right"),c()()()}if(n&2){let t=C();g(),f("disabled",t.isPreviousDisabled()),g(4),nl(" ",t.getImageRange()," of ",t.totalElements," images | Page ",t.currentPage," of ",t.totalPages," "),g(),f("disabled",t.isNextDisabled())}}var tr=(()=>{class n{constructor(){this.images=[],this.viewMode="images",this.zoomLevel=3,this.currentPage=1,this.totalPages=1,this.totalElements=0,this.projectType="Object Detection",this.availableClasses=[],this.showLabelDetails=!0,this.selectMode=!1,this.selectedImageIds=new Set,this.imageClick=new H,this.pageChange=new H,this.classChange=new H,this.imageSelectionToggle=new H}getGridColumns(){return{1:6,2:5,3:4,4:3,5:2}[this.zoomLevel]||4}onImageClick(t){this.imageClick.emit(t)}onClassChange(t){this.classChange.emit(t)}onPageChange(t){this.pageChange.emit(t)}previousPage(){this.currentPage>1&&this.onPageChange(this.currentPage-1)}nextPage(){this.currentPage<this.totalPages&&this.onPageChange(this.currentPage+1)}isPreviousDisabled(){return this.currentPage<=1}isNextDisabled(){return this.currentPage>=this.totalPages}onImageSelectionToggle(t,e){this.imageSelectionToggle.emit({imageId:t,selected:e})}isImageSelected(t){return this.selectedImageIds.has(t)}getImageRange(){if(this.totalElements===0)return"0";let t=20,e=(this.currentPage-1)*t+1,i=Math.min(this.currentPage*t,this.totalElements);return e===i?`${e}`:`${e}-${i}`}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=A({type:n,selectors:[["app-image-grid"]],inputs:{images:"images",viewMode:"viewMode",zoomLevel:"zoomLevel",currentPage:"currentPage",totalPages:"totalPages",totalElements:"totalElements",projectType:"projectType",availableClasses:"availableClasses",showLabelDetails:"showLabelDetails",selectMode:"selectMode",selectedImageIds:"selectedImageIds"},outputs:{imageClick:"imageClick",pageChange:"pageChange",classChange:"classChange",imageSelectionToggle:"imageSelectionToggle"},standalone:!1,decls:5,vars:5,consts:[[1,"image-grid-container"],[1,"image-grid"],[3,"image","viewMode","projectType","availableClasses","showLabelDetails","selectMode","isSelected","cardClick","classChange","selectionToggle",4,"ngFor","ngForOf"],["class","empty-state",4,"ngIf"],["class","pagination-controls",4,"ngIf"],[3,"cardClick","classChange","selectionToggle","image","viewMode","projectType","availableClasses","showLabelDetails","selectMode","isSelected"],[1,"empty-state"],[1,"pagination-controls"],["aria-label","Previous page","mat-icon-button","",3,"click","disabled"],[1,"page-info"],["aria-label","Next page","mat-icon-button","",3,"click","disabled"]],template:function(e,i){e&1&&(l(0,"div",0)(1,"div",1),y(2,BP,1,7,"app-image-card",2),c(),y(3,NP,5,0,"div",3)(4,$P,9,6,"div",4),c()),e&2&&(g(),$("instance-view-grid",i.viewMode==="instances"),g(),f("ngForOf",i.images),g(),f("ngIf",!i.images||i.images.length===0),g(),f("ngIf",i.images&&i.images.length>0))},dependencies:[Q,N,at,W,Xg],styles:[".image-grid-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem;padding:1rem}.image-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(280px,1fr));gap:1rem;width:100%}.image-grid.instance-view-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,200px);gap:.5rem;justify-content:start}@media (max-width: 1200px){.image-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:.75rem}}@media (max-width: 768px){.image-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:.5rem}}@media (max-width: 480px){.image-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:.5rem}}@media (max-width: 360px){.image-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fill,minmax(120px,1fr));gap:.5rem}}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:4rem 2rem;color:#0000008a}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:4rem;width:4rem;height:4rem;margin-bottom:1rem;opacity:.5}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.125rem;margin:0}@media (max-width: 768px){.empty-state[_ngcontent-%COMP%]{padding:3rem 1.5rem}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:3rem;width:3rem;height:3rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}}@media (max-width: 480px){.empty-state[_ngcontent-%COMP%]{padding:2rem 1rem}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:2.5rem;width:2.5rem;height:2.5rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.875rem}}.pagination-controls[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;gap:1rem;padding:1rem 0}.pagination-controls[_ngcontent-%COMP%]   .page-info[_ngcontent-%COMP%]{font-size:.875rem;color:#000000de;min-width:120px;text-align:center}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{opacity:.3;cursor:not-allowed}@media (max-width: 768px){.pagination-controls[_ngcontent-%COMP%]{gap:.75rem;padding:.75rem 0}.pagination-controls[_ngcontent-%COMP%]   .page-info[_ngcontent-%COMP%]{font-size:.75rem;min-width:100px}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:6px}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px;width:20px;height:20px}}@media (max-width: 480px){.pagination-controls[_ngcontent-%COMP%]{gap:.5rem;padding:.5rem 0}.pagination-controls[_ngcontent-%COMP%]   .page-info[_ngcontent-%COMP%]{font-size:.625rem;min-width:80px}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:4px}.pagination-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}}"]})}}return n})();var HP=()=>[];function WP(n,o){if(n&1){let t=j();l(0,"mat-checkbox",10),P("change",function(){let i=M(t).$implicit,a=C();return b(a.toggleMediaStatus(i.value))}),p(1),c()}if(n&2){let t=o.$implicit,e=C();f("checked",e.isMediaStatusSelected(t.value)),g(),E(" ",t.label," ")}}function GP(n,o){if(n&1){let t=j();l(0,"mat-checkbox",10),P("change",function(){let i=M(t).$implicit,a=C();return b(a.toggleGroundTruthLabel(i.id))}),l(1,"span",19),k(2,"span",20),l(3,"span",21),p(4),c()()()}if(n&2){let t=o.$implicit,e=C();f("checked",e.isGroundTruthLabelSelected(t.id)),g(2),K("background-color",t.colorCode),g(2),D(t.className)}}function YP(n,o){if(n&1){let t=j();l(0,"mat-checkbox",10),P("change",function(){let i=M(t).$implicit,a=C(2);return b(a.togglePredictionLabel(i.id))}),l(1,"span",19),k(2,"span",20),l(3,"span",21),p(4),c()()()}if(n&2){let t=o.$implicit,e=C(2);f("checked",e.isPredictionLabelSelected(t.id)),g(2),K("background-color",t.colorCode),g(2),D(t.className)}}function qP(n,o){if(n&1){let t=j();l(0,"div",7)(1,"h4"),p(2,"Prediction Labels"),c(),l(3,"div",8),y(4,YP,5,4,"mat-checkbox",9),l(5,"mat-checkbox",10),P("change",function(){M(t);let i=C();return b(i.togglePredictionNoClass())}),p(6," No Class "),c()()()}if(n&2){let t=C();g(4),f("ngForOf",t.availableClasses),g(),f("checked",t.isPredictionNoClassSelected())}}function XP(n,o){if(n&1){let t=j();l(0,"mat-checkbox",10),P("change",function(){let i=M(t).$implicit,a=C();return b(a.toggleSplit(i.value))}),p(1),c()}if(n&2){let t=o.$implicit,e=C();f("checked",e.isSplitSelected(t.value)),g(),E(" ",t.label," ")}}function ZP(n,o){if(n&1){let t=j();l(0,"mat-chip-row",26),P("removed",function(){let i=M(t).$implicit,a=C(2);return b(a.removeTag(i))}),p(1),l(2,"button",27)(3,"mat-icon"),p(4,"cancel"),c()()()}if(n&2){let t=o.$implicit,e=C(2);g(),E(" ",e.getTagName(t)," ")}}function QP(n,o){if(n&1&&(l(0,"mat-option",28),p(1),c()),n&2){let t=o.$implicit;f("value",t.id),g(),E(" ",t.name," ")}}function KP(n,o){if(n&1){let t=j();l(0,"div",7)(1,"h4"),p(2,"Tags"),c(),l(3,"mat-form-field",12)(4,"mat-chip-grid",null,0),y(6,ZP,5,1,"mat-chip-row",22),c(),l(7,"input",23,1),P("ngModelChange",function(i){M(t);let a=C();return b(a.filterTags(i))}),Yt("ngModelChange",function(i){M(t);let a=C();return Gt(a.tagSearchText,i)||(a.tagSearchText=i),b(i)}),c(),l(9,"mat-autocomplete",24,2),P("optionSelected",function(i){M(t);let a=gt(8);return C().selectTag(i),b(a.value="")}),y(11,QP,2,2,"mat-option",25),c()()()}if(n&2){let t=gt(5),e=gt(10),i=C();g(6),f("ngForOf",i.localFilters.tags||Le(5,HP)),g(),Wt("ngModel",i.tagSearchText),f("matAutocomplete",e)("matChipInputFor",t),g(4),f("ngForOf",i.filteredTags)}}var Zg=(()=>{class n{constructor(){this.activeFilters={},this.availableClasses=[],this.availableTags=[],this.availableMetadata=[],this.hidePredictionLabels=!1,this.filterChange=new H,this.filterClear=new H,this.closePanel=new H,this.localFilters={},this.tagSearchText="",this.filteredTags=[],this.mediaStatusOptions=[{value:"labeled",label:"Labeled"},{value:"unlabeled",label:"Unlabeled"}],this.splitOptions=[{value:"training",label:"Training"},{value:"dev",label:"Dev"},{value:"test",label:"Test"},{value:"unassigned",label:"Unassigned"}]}ngOnInit(){this.initLocalFilters(),this.filteredTags=this.getUnselectedTags(),console.log("FilterPanelComponent initialized with:",{availableClasses:this.availableClasses,availableTags:this.availableTags,availableMetadata:this.availableMetadata})}ngOnChanges(){this.initLocalFilters(),this.filteredTags=this.getUnselectedTags()}toggleNoClass(){this.localFilters.noClass=!this.localFilters.noClass}isNoClassSelected(){return this.localFilters.noClass===!0}togglePredictionNoClass(){this.localFilters.predictionNoClass=!this.localFilters.predictionNoClass}isPredictionNoClassSelected(){return this.localFilters.predictionNoClass===!0}toggleMediaStatus(t){let e=this.localFilters.mediaStatus||[];e.indexOf(t)>-1?this.localFilters.mediaStatus=e.filter(a=>a!==t):this.localFilters.mediaStatus=[...e,t]}isMediaStatusSelected(t){return this.localFilters.mediaStatus?.includes(t)||!1}toggleGroundTruthLabel(t){let e=this.localFilters.groundTruthLabels||[];e.indexOf(t)>-1?this.localFilters.groundTruthLabels=e.filter(a=>a!==t):this.localFilters.groundTruthLabels=[...e,t]}isGroundTruthLabelSelected(t){return this.localFilters.groundTruthLabels?.includes(t)||!1}togglePredictionLabel(t){let e=this.localFilters.predictionLabels||[];e.indexOf(t)>-1?this.localFilters.predictionLabels=e.filter(a=>a!==t):this.localFilters.predictionLabels=[...e,t]}isPredictionLabelSelected(t){return this.localFilters.predictionLabels?.includes(t)||!1}toggleSplit(t){let e=this.localFilters.split||[];e.indexOf(t)>-1?this.localFilters.split=e.filter(a=>a!==t):this.localFilters.split=[...e,t]}isSplitSelected(t){return this.localFilters.split?.includes(t)||!1}toggleTag(t){let e=this.localFilters.tags||[];e.indexOf(t)>-1?this.localFilters.tags=e.filter(a=>a!==t):this.localFilters.tags=[...e,t]}onTagsSelectionChange(t){this.localFilters.tags=t.length>0?t:void 0}isTagSelected(t){return this.localFilters.tags?.includes(t)||!1}getTagName(t){return this.availableTags.find(i=>i.id===t)?.name||`Tag ${t}`}filterTags(t){this.tagSearchText=t;let e=this.getUnselectedTags();if(!t)this.filteredTags=e;else{let i=t.toLowerCase();this.filteredTags=e.filter(a=>a.name.toLowerCase().includes(i))}}selectTag(t){let e=t.option.value,i=this.localFilters.tags||[];i.includes(e)||(this.localFilters.tags=[...i,e]),this.tagSearchText="",this.filteredTags=this.getUnselectedTags()}removeTag(t){let e=this.localFilters.tags||[];this.localFilters.tags=e.filter(i=>i!==t),this.localFilters.tags.length===0&&(this.localFilters.tags=void 0),this.filteredTags=this.getUnselectedTags()}updateMediaName(t){this.localFilters.mediaName=t||void 0}updateLabeler(t){this.localFilters.labeler=t||void 0}updateMediaId(t){this.localFilters.mediaId=t||void 0}updateMetadata(t,e){this.localFilters.metadata||(this.localFilters.metadata={}),e?this.localFilters.metadata[t]=e:delete this.localFilters.metadata[t]}getMetadataValue(t){return this.localFilters.metadata?.[t]||""}applyFilters(){console.log("FilterPanel: applyFilters called"),console.log("FilterPanel: localFilters =",this.localFilters),console.log("FilterPanel: activeFilters =",this.activeFilters);let t=ne(_t({},this.localFilters),{annotationType:this.activeFilters.annotationType,modelId:this.activeFilters.modelId||this.selectedModelId});console.log("FilterPanel: emitting filterChange with mergedFilters =",t),this.filterChange.emit(t)}onClose(){this.closePanel.emit()}clearFilters(){this.localFilters={},this.tagSearchText="",this.filteredTags=this.availableTags;let t={annotationType:this.activeFilters.annotationType,modelId:this.activeFilters.modelId};this.filterChange.emit(t)}hasActiveFilters(){return(this.localFilters.mediaStatus?.length||0)>0||(this.localFilters.groundTruthLabels?.length||0)>0||(this.localFilters.predictionLabels?.length||0)>0||(this.localFilters.split?.length||0)>0||(this.localFilters.tags?.length||0)>0||!!this.localFilters.mediaName||!!this.localFilters.labeler||!!this.localFilters.mediaId||!!this.localFilters.noClass||!!this.localFilters.predictionNoClass||Object.keys(this.localFilters.metadata||{}).length>0}getActiveFilterCount(){let t=0;return this.localFilters.mediaStatus?.length&&t++,this.localFilters.groundTruthLabels?.length&&t++,this.localFilters.predictionLabels?.length&&t++,this.localFilters.split?.length&&t++,this.localFilters.tags?.length&&t++,this.localFilters.mediaName&&t++,this.localFilters.labeler&&t++,this.localFilters.mediaId&&t++,this.localFilters.noClass&&t++,this.localFilters.predictionNoClass&&t++,Object.keys(this.localFilters.metadata||{}).length>0&&t++,t}initLocalFilters(){let a=this.activeFilters,{annotationType:t,modelId:e}=a,i=Us(a,["annotationType","modelId"]);this.localFilters=ne(_t({},i),{mediaStatus:i.mediaStatus?[...i.mediaStatus]:void 0,groundTruthLabels:i.groundTruthLabels?[...i.groundTruthLabels]:void 0,predictionLabels:i.predictionLabels?[...i.predictionLabels]:void 0,split:i.split?[...i.split]:void 0,tags:i.tags?[...i.tags]:void 0,metadata:i.metadata?_t({},i.metadata):void 0,noClass:i.noClass,predictionNoClass:i.predictionNoClass})}getUnselectedTags(){let t=this.localFilters.tags||[];return this.availableTags.filter(e=>e.id!==void 0&&!t.includes(e.id))}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=A({type:n,selectors:[["app-filter-panel"]],inputs:{activeFilters:"activeFilters",availableClasses:"availableClasses",availableTags:"availableTags",availableMetadata:"availableMetadata",selectedModelId:"selectedModelId",hidePredictionLabels:"hidePredictionLabels"},outputs:{filterChange:"filterChange",filterClear:"filterClear",closePanel:"closePanel"},standalone:!1,features:[oe],decls:50,vars:9,consts:[["chipGrid",""],["tagInput",""],["tagAutocomplete","matAutocomplete"],[1,"filter-panel"],[1,"filter-header"],["mat-icon-button","","matTooltip","Close",1,"close-button",3,"click"],[1,"filter-content"],[1,"filter-section"],[1,"filter-options"],[3,"checked","change",4,"ngFor","ngForOf"],[3,"change","checked"],["class","filter-section",4,"ngIf"],["appearance","outline",1,"full-width"],["matInput","","placeholder","Search by name",3,"input","value"],["matSuffix",""],["matInput","","placeholder","Search by labeler",3,"input","value"],[1,"filter-footer"],["mat-stroked-button","",1,"clear-filters-btn",3,"click","disabled"],["color","primary","mat-raised-button","",1,"apply-filters-btn",3,"click"],[1,"checkbox-label-content"],[1,"class-indicator"],[1,"label-text"],[3,"removed",4,"ngFor","ngForOf"],["matInput","","placeholder","Type to search tags...",3,"ngModelChange","ngModel","matAutocomplete","matChipInputFor"],[3,"optionSelected"],[3,"value",4,"ngFor","ngForOf"],[3,"removed"],["matChipRemove",""],[3,"value"]],template:function(e,i){e&1&&(l(0,"div",3)(1,"div",4)(2,"h3"),p(3,"Filters"),c(),l(4,"button",5),P("click",function(){return i.onClose()}),l(5,"mat-icon"),p(6,"close"),c()()(),l(7,"div",6)(8,"div",7)(9,"h4"),p(10,"Media Status"),c(),l(11,"div",8),y(12,WP,2,2,"mat-checkbox",9),c()(),l(13,"div",7)(14,"h4"),p(15,"Ground Truth Labels"),c(),l(16,"div",8),y(17,GP,5,4,"mat-checkbox",9),l(18,"mat-checkbox",10),P("change",function(){return i.toggleNoClass()}),p(19," No Class "),c()()(),y(20,qP,7,2,"div",11),l(21,"div",7)(22,"h4"),p(23,"Split"),c(),l(24,"div",8),y(25,XP,2,2,"mat-checkbox",9),c()(),y(26,KP,12,6,"div",11),l(27,"div",7)(28,"h4"),p(29,"Media Name"),c(),l(30,"mat-form-field",12)(31,"mat-label"),p(32,"Search by name"),c(),l(33,"input",13),P("input",function(r){return i.updateMediaName(r.target.value)}),c(),l(34,"mat-icon",14),p(35,"search"),c()()(),l(36,"div",7)(37,"h4"),p(38,"Labeler"),c(),l(39,"mat-form-field",12)(40,"mat-label"),p(41,"Search by labeler"),c(),l(42,"input",15),P("input",function(r){return i.updateLabeler(r.target.value)}),c(),l(43,"mat-icon",14),p(44,"person"),c()()()(),l(45,"div",16)(46,"button",17),P("click",function(){return i.clearFilters()}),p(47," Clear Filters "),c(),l(48,"button",18),P("click",function(){return i.applyFilters()}),p(49," Apply Filters "),c()()()),e&2&&(g(12),f("ngForOf",i.mediaStatusOptions),g(5),f("ngForOf",i.availableClasses),g(),f("checked",i.isNoClassSelected()),g(2),f("ngIf",!i.hidePredictionLabels&&i.availableClasses.length>0),g(5),f("ngForOf",i.splitOptions),g(),f("ngIf",i.availableTags.length>0),g(7),f("value",i.localFilters.mediaName||""),g(9),f("value",i.localFilters.labeler||""),g(4),f("disabled",!i.hasActiveFilters()))},dependencies:[Q,N,Lt,Ft,we,Z,at,W,Mt,_e,yo,kt,Zt,jt,Cd,xd,ud,_d,Qe,gd,hd],styles:[".filter-panel[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;max-height:100vh;background:#fff;width:100%;overflow:hidden;font-size:14px}.filter-panel[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;border-bottom:1px solid #e0e0e0;flex-shrink:0}.filter-panel[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:18px;font-weight:500}.filter-panel[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]   .clear-button[_ngcontent-%COMP%]{color:#666}.filter-panel[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]   .clear-button[_ngcontent-%COMP%]:disabled{color:#ccc}.filter-panel[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]{color:#666}.filter-panel[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]   .close-button[_ngcontent-%COMP%]:hover{color:#333}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;overflow-x:hidden;padding:12px 16px;min-height:0;box-sizing:border-box}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]{margin-bottom:16px;max-width:100%}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]:last-child{margin-bottom:0}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{margin:0 0 8px;font-size:14px;font-weight:500;color:#333}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   .filter-options[_ngcontent-%COMP%]{display:flex;flex-direction:row;flex-wrap:wrap;gap:8px 16px;align-items:flex-start;max-width:100%}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   .filter-options[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{display:inline-flex;align-items:center;flex:0 0 auto;min-width:0}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   .filter-options[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .mdc-form-field{font-size:14px;display:inline-flex;align-items:center;vertical-align:middle}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   .filter-options[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .mdc-checkbox{padding:0;flex-shrink:0;margin:0;width:18px;height:18px}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   .filter-options[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .mdc-checkbox__ripple{display:none}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   .filter-options[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .mat-mdc-checkbox-touch-target{width:18px;height:18px}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   .filter-options[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .mdc-checkbox__background{top:0;left:0;width:18px;height:18px}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   .filter-options[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]     .mdc-label{font-size:14px;display:inline-flex;align-items:center;padding-left:6px;line-height:1;vertical-align:middle}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   .filter-options[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]   .checkbox-label-content[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:6px;line-height:1}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   .filter-options[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]   .checkbox-label-content[_ngcontent-%COMP%]   .label-text[_ngcontent-%COMP%]{line-height:1}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   .filter-options[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]   .class-indicator[_ngcontent-%COMP%]{display:inline-block;width:14px;height:14px;border-radius:2px;flex-shrink:0}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   .filter-options[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]   .class-indicator.no-class-indicator[_ngcontent-%COMP%]{background:linear-gradient(135deg,#9e9e9e 25%,transparent 25%),linear-gradient(-135deg,#9e9e9e 25%,transparent 25%),linear-gradient(45deg,#9e9e9e 25%,transparent 25%),linear-gradient(-45deg,#9e9e9e 25%,transparent 25%);background-size:6px 6px;background-color:#e0e0e0;border:1px solid #9e9e9e}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%;max-width:100%;margin-top:0;box-sizing:border-box}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]     .mat-mdc-form-field-flex{align-items:center;max-width:100%}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper{background:#fff;padding:0 12px;max-width:100%;box-sizing:border-box;border:1px solid rgba(0,0,0,.38);border-radius:4px}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper:hover{border-color:#000000de}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]     .mat-focused .mat-mdc-text-field-wrapper{border-color:#3f51b5;border-width:2px;padding:0 11px}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]     .mdc-notched-outline{display:none!important}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]     .mat-mdc-form-field-infix{padding-top:12px;padding-bottom:12px;min-height:44px;width:100%;max-width:100%;display:flex;align-items:center;box-sizing:border-box}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]     .mat-mdc-select{font-size:14px}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]     input{font-size:14px;width:100%;max-width:100%;overflow:hidden;text-overflow:ellipsis;line-height:normal;box-sizing:border-box}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]     .mat-mdc-input-element{width:100%;max-width:100%;box-sizing:border-box}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]     .mat-mdc-form-field-text-prefix, .filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]     .mat-mdc-form-field-text-suffix{display:flex;align-items:center;flex-shrink:0}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   .metadata-filters[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:8px}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section.inline-input[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:8px;padding-right:8px}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section.inline-input[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#333;min-width:80px;flex-shrink:0}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section.inline-input[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1;min-width:0}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section.inline-input[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mat-mdc-form-field-flex{align-items:center}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section.inline-input[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper{background:transparent;padding:0 12px}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section.inline-input[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mdc-notched-outline__notch{border-right:none}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section.inline-input[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section.inline-input[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mat-mdc-form-field-infix{padding-top:12px;padding-bottom:12px;min-height:44px;width:100%;display:flex;align-items:center}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section.inline-input[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     input{font-size:14px;width:100%;overflow:hidden;text-overflow:ellipsis;line-height:normal}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section.inline-input[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mat-mdc-input-element{width:100%}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section.inline-input[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mat-mdc-form-field-text-prefix, .filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section.inline-input[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mat-mdc-form-field-text-suffix{display:flex;align-items:center}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .inline-input[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;margin-bottom:8px;padding-right:8px}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .inline-input[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]{font-size:14px;font-weight:500;color:#333;min-width:80px;flex-shrink:0}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .inline-input[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{flex:1;min-width:0}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .inline-input[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mat-mdc-form-field-flex{align-items:center}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .inline-input[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mat-mdc-text-field-wrapper{background:transparent;padding:0 12px}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .inline-input[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mdc-notched-outline__notch{border-right:none}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .inline-input[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mat-mdc-form-field-subscript-wrapper{display:none}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .inline-input[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mat-mdc-form-field-infix{padding-top:12px;padding-bottom:12px;min-height:44px;width:100%;display:flex;align-items:center}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .inline-input[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     input{font-size:14px;width:100%;overflow:hidden;text-overflow:ellipsis;line-height:normal}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .inline-input[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mat-mdc-input-element{width:100%}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .inline-input[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mat-mdc-form-field-text-prefix, .filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .inline-input[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]     .mat-mdc-form-field-text-suffix{display:flex;align-items:center}.filter-panel[_ngcontent-%COMP%]   .filter-footer[_ngcontent-%COMP%]{padding:12px 16px;border-top:1px solid #e0e0e0;display:flex;gap:12px;flex-shrink:0}.filter-panel[_ngcontent-%COMP%]   .filter-footer[_ngcontent-%COMP%]   .clear-filters-btn[_ngcontent-%COMP%]{flex:0 0 auto;font-size:14px}.filter-panel[_ngcontent-%COMP%]   .filter-footer[_ngcontent-%COMP%]   .apply-filters-btn[_ngcontent-%COMP%]{flex:1;font-size:14px}.filter-panel[_ngcontent-%COMP%]   .filter-footer[_ngcontent-%COMP%]   .apply-filters-btn[_ngcontent-%COMP%]   .filter-count[_ngcontent-%COMP%]{margin-left:6px;font-weight:600}.filter-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.filter-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f1f1f1}.filter-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#888;border-radius:4px}.filter-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#555}@media (max-width: 1024px){.filter-panel[_ngcontent-%COMP%]{width:380px}.filter-panel[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]{padding:12px}.filter-panel[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]{padding:12px}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]{margin-bottom:20px}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:13px}.filter-panel[_ngcontent-%COMP%]   .filter-footer[_ngcontent-%COMP%]{padding:12px}}@media (max-width: 768px){.filter-panel[_ngcontent-%COMP%]{width:100%;max-width:520px}.filter-panel[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%], .filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%], .filter-panel[_ngcontent-%COMP%]   .filter-footer[_ngcontent-%COMP%]{padding:12px 16px}}@media (max-width: 480px){.filter-panel[_ngcontent-%COMP%]{width:100%;max-width:100%}.filter-panel[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]{padding:10px 12px}.filter-panel[_ngcontent-%COMP%]   .filter-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:14px}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]{padding:10px 12px}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]{margin-bottom:16px}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:12px;margin-bottom:8px}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   .filter-options[_ngcontent-%COMP%]{gap:6px}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   .filter-options[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{font-size:13px}.filter-panel[_ngcontent-%COMP%]   .filter-content[_ngcontent-%COMP%]   .filter-section[_ngcontent-%COMP%]   .filter-options[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]   .class-indicator[_ngcontent-%COMP%]{width:10px;height:10px;margin-right:6px}.filter-panel[_ngcontent-%COMP%]   .filter-footer[_ngcontent-%COMP%]{padding:10px 12px}.filter-panel[_ngcontent-%COMP%]   .filter-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:13px;padding:8px 16px}}"]})}}return n})();var er=(()=>{class n{constructor(t,e){this.dialogRef=t,this.data=e}onFilterChange(t){console.log("FilterDialog: onFilterChange called with filters =",t),console.log("FilterDialog: closing dialog with result =",{filters:t}),this.dialogRef.close({filters:t})}onFilterClear(){console.log("FilterDialog: onFilterClear called"),this.dialogRef.close({cleared:!0})}onClosePanel(){console.log("FilterDialog: onClosePanel called"),this.dialogRef.close()}static{this.\u0275fac=function(e){return new(e||n)(T(pt),T(mt))}}static{this.\u0275cmp=A({type:n,selectors:[["app-filter-dialog"]],standalone:!1,decls:2,vars:6,consts:[[1,"filter-dialog"],[3,"filterChange","filterClear","closePanel","activeFilters","availableClasses","availableTags","availableMetadata","selectedModelId","hidePredictionLabels"]],template:function(e,i){e&1&&(l(0,"div",0)(1,"app-filter-panel",1),P("filterChange",function(r){return i.onFilterChange(r)})("filterClear",function(){return i.onFilterClear()})("closePanel",function(){return i.onClosePanel()}),c()()),e&2&&(g(),f("activeFilters",i.data.activeFilters)("availableClasses",i.data.availableClasses)("availableTags",i.data.availableTags)("availableMetadata",i.data.availableMetadata)("selectedModelId",i.data.selectedModelId)("hidePredictionLabels",i.data.hidePredictionLabels||!1))},dependencies:[Zg],styles:[".filter-dialog[_ngcontent-%COMP%]{display:flex;flex-direction:column;max-height:80vh;min-height:400px}.filter-dialog[_ngcontent-%COMP%]     app-filter-panel{display:flex;flex-direction:column;height:100%}.filter-dialog[_ngcontent-%COMP%]     app-filter-panel .filter-panel{border-left:none;width:100%;max-height:80vh}"]})}}return n})();function ev(n,o){if(n&1&&(l(0,"span",49)(1,"mat-icon",50),p(2),c(),p(3),c()),n&2){let t=C();g(2),D(t.getProjectTypeIcon()),g(),E(" ",t.projectType," ")}}function nv(n,o){if(n&1&&(l(0,"span",51),p(1),c()),n&2){let t=C();g(),E(" ",t.totalImageCount," images ")}}function iv(n,o){if(n&1&&(l(0,"button",52)(1,"mat-icon"),p(2,"cloud_upload"),c(),l(3,"span",18),p(4,"Upload"),c()()),n&2){C();let t=gt(176);f("matMenuTriggerFor",t)}}function ov(n,o){if(n&1&&(l(0,"button",52)(1,"mat-icon"),p(2,"cloud_upload"),c(),l(3,"span",18),p(4,"Upload"),c()()),n&2){C();let t=gt(164);f("matMenuTriggerFor",t)}}function av(n,o){if(n&1){let t=j();l(0,"div",53)(1,"mat-slide-toggle",54),P("change",function(i){M(t);let a=C();return b(a.onShowLabelDetailsToggle(i))}),l(2,"span",18),p(3,"Label Details"),c()()()}if(n&2){let t=C();g(),f("checked",t.showLabelDetails)}}function rv(n,o){if(n&1&&(l(0,"span",55),p(1),c()),n&2){let t=C();g(),D(t.activeFilterCount)}}function sv(n,o){if(n&1&&(l(0,"span",56),p(1),c()),n&2){let t=C();g(),D(t.selectedCount)}}function lv(n,o){if(n&1){let t=j();l(0,"div",57),P("click",function(i){return M(t),b(i.stopPropagation())}),l(1,"mat-icon"),p(2,"info"),c(),l(3,"p"),p(4,"No trained models available. Train a model first."),c()()}}function cv(n,o){n&1&&(l(0,"mat-icon"),p(1,"check"),c())}function dv(n,o){n&1&&(l(0,"mat-icon",58),p(1,"check "),c())}function pv(n,o){if(n&1){let t=j();l(0,"button",42),P("click",function(){let i=M(t).$implicit,a=C();return b(a.onModelSelect(i.id))}),y(1,cv,2,0,"mat-icon",45)(2,dv,2,0,"mat-icon",46),l(3,"span"),p(4),z(5,"number"),c()()}if(n&2){let t=o.$implicit,e=o.first,i=C();$("active",i.isModelSelected(t.id,e)),g(),f("ngIf",i.isModelSelected(t.id,e)),g(),f("ngIf",!i.isModelSelected(t.id,e)),g(2),ue("",t.modelAlias||"Model-"+t.id," (F1: ",si(5,6,(t.devF1Rate||0)/100,"1.2-2"),")")}}function mv(n,o){n&1&&(l(0,"mat-icon"),p(1,"check"),c())}function gv(n,o){n&1&&(l(0,"mat-icon",58),p(1,"check "),c())}function hv(n,o){n&1&&(l(0,"mat-icon"),p(1,"check"),c())}function fv(n,o){n&1&&(l(0,"mat-icon",58),p(1,"check "),c())}function uv(n,o){n&1&&(l(0,"mat-icon"),p(1,"check"),c())}function _v(n,o){n&1&&(l(0,"mat-icon",58),p(1,"check"),c())}var Qg=(()=>{class n{constructor(t){this.dialog=t,this.viewMode="images",this.activeFilters={},this.sortMethod="upload_time_desc",this.zoomLevel=3,this.availableModels=[],this.availableClasses=[],this.availableTags=[],this.availableMetadata=[],this.showLabelDetails=!0,this.projectType="Object Detection",this.projectName="",this.selectMode=!1,this.selectedCount=0,this.currentPageImageCount=0,this.totalImageCount=0,this.lastSelectAction="none",this.viewModeChange=new H,this.selectModeToggle=new H,this.selectPage=new H,this.selectAll=new H,this.deselectAll=new H,this.batchSetClass=new H,this.batchSetTags=new H,this.batchSetMetadata=new H,this.batchDelete=new H,this.exportDataset=new H,this.exportAllDataset=new H,this.filterClick=new H,this.filterChange=new H,this.filterClear=new H,this.sortChange=new H,this.actionSelect=new H,this.snapshotAction=new H,this.uploadClick=new H,this.uploadClassifiedClick=new H,this.uploadBatchZipClick=new H,this.trainingAction=new H,this.zoomChange=new H,this.annotationTypeChange=new H,this.modelChange=new H,this.modelPageClick=new H,this.showLabelDetailsChange=new H,this.minZoom=1,this.maxZoom=5}get isZoomInDisabled(){return this.zoomLevel<=this.minZoom}get isZoomOutDisabled(){return this.zoomLevel>=this.maxZoom}get activeFilterCount(){let t=0;return this.activeFilters.mediaStatus?.length&&t++,this.activeFilters.groundTruthLabels?.length&&t++,this.activeFilters.predictionLabels?.length&&t++,this.activeFilters.split?.length&&t++,this.activeFilters.tags?.length&&t++,this.activeFilters.mediaName&&t++,this.activeFilters.labeler&&t++,this.activeFilters.mediaId&&t++,this.activeFilters.noClass&&t++,this.activeFilters.predictionNoClass&&t++,this.activeFilters.metadata&&Object.keys(this.activeFilters.metadata).length&&t++,t}onAnnotationTypeChange(t){let e=t.value==="all"?void 0:t.value;this.annotationTypeChange.emit(e)}onAnnotationTypeSelect(t){let e=t==="all"?void 0:t;this.annotationTypeChange.emit(e)}onPredictionClick(){this.annotationTypeChange.emit("Prediction")}onPredictionSelect(t){this.modelChange.emit(t)}onModelSelect(t){this.modelChange.emit(t)}getSelectedModelDisplayName(){if(this.availableModels.length===0)return"No Models";let t=this.selectedModelId||this.availableModels[0]?.id,e=this.availableModels.find(i=>i.id===t);return e?e.modelAlias||"Model-"+e.id:"Select Model"}isModelSelected(t,e){return this.selectedModelId?this.selectedModelId===t:e}getPredictionButtonLabel(){if(this.availableModels.length===0)return"Prediction";let t=this.selectedModelId||this.availableModels[0]?.id,e=this.availableModels.find(i=>i.id===t);return e?`Prediction (${e.modelAlias||"Model-"+e.id})`:"Prediction"}onModelChange(t){this.modelChange.emit(t)}getSelectedModelName(){if(!this.selectedModelId||this.availableModels.length===0)return"Select Model";let t=this.availableModels.find(i=>i.id===this.selectedModelId);if(!t)return"Select Model";let e=t.devF1Rate?(t.devF1Rate/100).toFixed(2):"0.00";return`${t.modelAlias||"Model-"+t.id}(${e})`}onViewModeChange(t){this.viewModeChange.emit(t),t==="instances"&&this.annotationTypeChange.emit("Ground-Truth")}getProjectTypeIcon(){switch(this.projectType){case"Classification":return"category";case"Object Detection":return"crop_free";case"Segmentation":return"polyline";default:return"image"}}get isAnnotationTypeSelectorDisabled(){return this.viewMode==="instances"}onFilterClick(){let t={activeFilters:this.activeFilters,availableClasses:this.availableClasses,availableTags:this.availableTags,availableMetadata:this.availableMetadata,selectedModelId:this.selectedModelId};this.dialog.open(er,{width:"650px",maxHeight:"85vh",data:t,panelClass:"filter-dialog-panel"}).afterClosed().subscribe(i=>{i&&(i.cleared?this.filterClear.emit():i.filters&&this.filterChange.emit(i.filters))})}onFilterChange(t){this.filterChange.emit(t)}onFilterClear(){this.filterClear.emit()}onSortChange(t){this.sortChange.emit(t)}onActionSelect(t){this.actionSelect.emit(t)}onSnapshotAction(t){this.snapshotAction.emit(t)}onUploadClick(){this.uploadClick.emit()}onUploadUnclassified(){this.uploadClick.emit()}onUploadClassified(){this.uploadClassifiedClick.emit()}onUploadBatchZip(){this.uploadBatchZipClick.emit()}onTrainingAction(t){this.trainingAction.emit(t)}onZoomIn(){this.zoomChange.emit("in")}onZoomOut(){this.zoomChange.emit("out")}onModelPageClick(){this.modelPageClick.emit()}onShowLabelDetailsToggle(t){this.showLabelDetailsChange.emit(t.checked)}getSortMethodText(){switch(this.sortMethod){case"upload_time_desc":return"Upload Time (Newest)";case"upload_time_asc":return"Upload Time (Oldest)";case"label_time_desc":return"Label Time (Newest)";case"label_time_asc":return"Label Time (Oldest)";default:return"Sort"}}onSelectModeToggle(){this.selectModeToggle.emit(!this.selectMode)}onSelectManually(){this.selectModeToggle.emit(!0)}onSelectPage(){this.selectMode||this.selectModeToggle.emit(!0),this.selectPage.emit()}onSelectAll(){this.selectMode||this.selectModeToggle.emit(!0),this.selectAll.emit()}onDeselectAll(){this.deselectAll.emit(),this.selectModeToggle.emit(!1)}onBatchSetClass(){this.batchSetClass.emit()}onBatchSetTags(){this.batchSetTags.emit()}onBatchSetMetadata(){this.batchSetMetadata.emit()}onBatchDelete(){this.batchDelete.emit()}onExportDataset(){this.exportDataset.emit()}onExportAllDataset(){this.exportAllDataset.emit()}getSelectButtonText(){return this.selectMode?this.lastSelectAction==="page"?"Select page":this.lastSelectAction==="all"?"Select all":this.lastSelectAction==="manual"?"Select image":"Select":"Select"}get isBatchActionsEnabled(){return this.selectedCount>0}get isManualSelectActive(){return this.selectMode&&this.lastSelectAction==="manual"}get isPageSelectActive(){return this.selectMode&&this.lastSelectAction==="page"&&this.selectedCount>0}get isAllSelectActive(){return this.selectMode&&this.lastSelectAction==="all"&&this.selectedCount>0}static{this.\u0275fac=function(e){return new(e||n)(T(re))}}static{this.\u0275cmp=A({type:n,selectors:[["app-toolbar"]],inputs:{viewMode:"viewMode",activeFilters:"activeFilters",sortMethod:"sortMethod",zoomLevel:"zoomLevel",annotationType:"annotationType",selectedModelId:"selectedModelId",availableModels:"availableModels",availableClasses:"availableClasses",availableTags:"availableTags",availableMetadata:"availableMetadata",showLabelDetails:"showLabelDetails",projectType:"projectType",projectName:"projectName",selectMode:"selectMode",selectedCount:"selectedCount",currentPageImageCount:"currentPageImageCount",totalImageCount:"totalImageCount",lastSelectAction:"lastSelectAction"},outputs:{viewModeChange:"viewModeChange",selectModeToggle:"selectModeToggle",selectPage:"selectPage",selectAll:"selectAll",deselectAll:"deselectAll",batchSetClass:"batchSetClass",batchSetTags:"batchSetTags",batchSetMetadata:"batchSetMetadata",batchDelete:"batchDelete",exportDataset:"exportDataset",exportAllDataset:"exportAllDataset",filterClick:"filterClick",filterChange:"filterChange",filterClear:"filterClear",sortChange:"sortChange",actionSelect:"actionSelect",snapshotAction:"snapshotAction",uploadClick:"uploadClick",uploadClassifiedClick:"uploadClassifiedClick",uploadBatchZipClick:"uploadBatchZipClick",trainingAction:"trainingAction",zoomChange:"zoomChange",annotationTypeChange:"annotationTypeChange",modelChange:"modelChange",modelPageClick:"modelPageClick",showLabelDetailsChange:"showLabelDetailsChange"},standalone:!1,decls:261,vars:66,consts:[["sortMenu","matMenu"],["actionsMenu","matMenu"],["snapshotMenu","matMenu"],["trainingMenu","matMenu"],["uploadMenu","matMenu"],["uploadMenuOther","matMenu"],["modelMenu","matMenu"],["selectMenu","matMenu"],["batchUpdateMenuClassification","matMenu"],["batchUpdateMenuOther","matMenu"],[1,"toolbar"],[1,"toolbar-row-1"],[1,"project-info"],[1,"project-title"],["class","project-type-badge",4,"ngIf"],["class","image-count-badge",4,"ngIf"],[1,"action-buttons"],["mat-raised-button","",1,"manage-btn",3,"matMenuTriggerFor"],[1,"btn-text"],["mat-raised-button","",1,"export-all-btn",2,"background-color","#ffeb3b","color","#000000",3,"click"],["mat-raised-button","",1,"snapshot-btn",3,"matMenuTriggerFor"],["class","upload-btn","color","primary","mat-raised-button","",3,"matMenuTriggerFor",4,"ngIf"],["color","accent","mat-raised-button","",1,"training-btn",3,"click"],["mat-raised-button","",1,"model-btn",3,"click"],[1,"toolbar-row-2"],[1,"view-mode-toggle"],["mat-button","",1,"view-mode-btn",3,"click"],[1,"annotation-type-toggle"],[1,"toggle-group-container"],["mat-button","",1,"toggle-btn",3,"click","disabled"],["mat-button","",1,"model-selector-btn",3,"disabled","matMenuTriggerFor"],[1,"model-name"],[1,"dropdown-icon"],["class","label-details-toggle",4,"ngIf"],[1,"filter-sort-buttons"],["mat-raised-button","",1,"filter-btn",3,"click"],["class","filter-badge",4,"ngIf"],["mat-raised-button","",1,"sort-btn",3,"matMenuTriggerFor"],[1,"select-batch-buttons"],["mat-button","",1,"select-btn",3,"matMenuTriggerFor"],["color","primary","mat-raised-button","",1,"batch-update-btn",3,"disabled","matMenuTriggerFor"],["class","selection-badge",4,"ngIf"],["mat-menu-item","",3,"click"],["class","no-models-message",3,"click",4,"ngIf"],["mat-menu-item","",3,"active","click",4,"ngFor","ngForOf"],[4,"ngIf"],["style","visibility: hidden",4,"ngIf"],["mat-menu-item","",3,"click","disabled"],["mat-menu-item","",1,"delete-menu-item",3,"click","disabled"],[1,"project-type-badge"],[1,"type-icon"],[1,"image-count-badge"],["color","primary","mat-raised-button","",1,"upload-btn",3,"matMenuTriggerFor"],[1,"label-details-toggle"],["color","primary",3,"change","checked"],[1,"filter-badge"],[1,"selection-badge"],[1,"no-models-message",3,"click"],[2,"visibility","hidden"]],template:function(e,i){if(e&1){let a=j();l(0,"div",10)(1,"div",11)(2,"div",12)(3,"h1",13),p(4),y(5,ev,4,2,"span",14)(6,nv,2,1,"span",15),c()(),l(7,"div",16)(8,"button",17)(9,"mat-icon"),p(10,"settings"),c(),l(11,"span",18),p(12,"Manage"),c()(),l(13,"button",19),P("click",function(){return M(a),b(i.onExportAllDataset())}),l(14,"mat-icon"),p(15,"download"),c(),l(16,"span",18),p(17,"Download"),c()(),l(18,"button",20)(19,"mat-icon"),p(20,"photo_camera"),c(),l(21,"span",18),p(22,"Snapshot"),c()(),y(23,iv,5,1,"button",21)(24,ov,5,1,"button",21),l(25,"button",22),P("click",function(){return M(a),b(i.onTrainingAction("custom_training"))}),l(26,"mat-icon"),p(27,"tune"),c(),l(28,"span",18),p(29,"Training"),c()(),l(30,"button",23),P("click",function(){return M(a),b(i.onModelPageClick())}),l(31,"mat-icon"),p(32,"psychology"),c(),l(33,"span",18),p(34,"Model"),c()()()(),l(35,"div",24)(36,"div",25)(37,"button",26),P("click",function(){return M(a),b(i.onViewModeChange("images"))}),l(38,"mat-icon"),p(39,"image"),c(),l(40,"span",18),p(41,"Images"),c()(),l(42,"button",26),P("click",function(){return M(a),b(i.onViewModeChange("instances"))}),l(43,"mat-icon"),p(44,"grid_view"),c(),l(45,"span",18),p(46,"Instances"),c()()(),l(47,"div",27)(48,"div",28)(49,"button",29),P("click",function(){return M(a),b(i.onAnnotationTypeSelect("all"))}),p(50," All "),c(),l(51,"button",29),P("click",function(){return M(a),b(i.onAnnotationTypeSelect("Ground-Truth"))}),p(52," Ground truth "),c(),l(53,"button",29),P("click",function(){return M(a),b(i.onPredictionClick())}),p(54," Prediction "),c()()(),l(55,"button",30)(56,"span",31),p(57),c(),l(58,"mat-icon",32),p(59,"arrow_drop_down"),c()(),y(60,av,4,1,"div",33),l(61,"div",34)(62,"button",35),P("click",function(){return M(a),b(i.onFilterClick())}),l(63,"mat-icon"),p(64,"filter_list"),c(),l(65,"span",18),p(66,"Filter"),c(),y(67,rv,2,1,"span",36),c(),l(68,"button",37)(69,"mat-icon"),p(70,"sort"),c(),l(71,"span",18),p(72,"Sort"),c()()(),l(73,"div",38)(74,"button",39)(75,"mat-icon"),p(76,"check_box"),c(),l(77,"span",18),p(78),c()(),l(79,"button",40)(80,"mat-icon"),p(81,"edit"),c(),l(82,"span",18),p(83,"Batch Update"),c(),y(84,sv,2,1,"span",41),c()()()(),l(85,"mat-menu",null,0)(87,"button",42),P("click",function(){return M(a),b(i.onSortChange("upload_time_desc"))}),l(88,"mat-icon"),p(89,"arrow_downward"),c(),l(90,"span"),p(91,"Upload Time (Newest)"),c()(),l(92,"button",42),P("click",function(){return M(a),b(i.onSortChange("upload_time_asc"))}),l(93,"mat-icon"),p(94,"arrow_upward"),c(),l(95,"span"),p(96,"Upload Time (Oldest)"),c()(),l(97,"button",42),P("click",function(){return M(a),b(i.onSortChange("label_time_desc"))}),l(98,"mat-icon"),p(99,"arrow_downward"),c(),l(100,"span"),p(101,"Label Time (Newest)"),c()(),l(102,"button",42),P("click",function(){return M(a),b(i.onSortChange("label_time_asc"))}),l(103,"mat-icon"),p(104,"arrow_upward"),c(),l(105,"span"),p(106,"Label Time (Oldest)"),c()(),l(107,"button",42),P("click",function(){return M(a),b(i.onSortChange("name_asc"))}),l(108,"mat-icon"),p(109,"text_rotation_none"),c(),l(110,"span"),p(111,"Name (A-Z)"),c()(),l(112,"button",42),P("click",function(){return M(a),b(i.onSortChange("name_desc"))}),l(113,"mat-icon"),p(114,"text_rotation_none"),c(),l(115,"span"),p(116,"Name (Z-A)"),c()()(),l(117,"mat-menu",null,1)(119,"button",42),P("click",function(){return M(a),b(i.onActionSelect("manage_classes"))}),l(120,"mat-icon"),p(121,"category"),c(),l(122,"span"),p(123,"Manage Classes"),c()(),l(124,"button",42),P("click",function(){return M(a),b(i.onActionSelect("manage_tags"))}),l(125,"mat-icon"),p(126,"label"),c(),l(127,"span"),p(128,"Manage Tags"),c()(),l(129,"button",42),P("click",function(){return M(a),b(i.onActionSelect("manage_metadata"))}),l(130,"mat-icon"),p(131,"info"),c(),l(132,"span"),p(133,"Manage Metadata"),c()(),l(134,"button",42),P("click",function(){return M(a),b(i.onActionSelect("auto_split"))}),l(135,"mat-icon"),p(136,"call_split"),c(),l(137,"span"),p(138,"Auto Split"),c()()(),l(139,"mat-menu",null,2)(141,"button",42),P("click",function(){return M(a),b(i.onSnapshotAction("snapshot_entire_dataset"))}),l(142,"mat-icon"),p(143,"photo_camera"),c(),l(144,"span"),p(145,"Snapshot entire dataset"),c()(),l(146,"button",42),P("click",function(){return M(a),b(i.onSnapshotAction("view_snapshots"))}),l(147,"mat-icon"),p(148,"visibility"),c(),l(149,"span"),p(150,"View Snapshots"),c()()(),l(151,"mat-menu",null,3)(153,"button",42),P("click",function(){return M(a),b(i.onTrainingAction("train"))}),l(154,"mat-icon"),p(155,"flash_on"),c(),l(156,"span"),p(157,"Train"),c()(),l(158,"button",42),P("click",function(){return M(a),b(i.onTrainingAction("custom_training"))}),l(159,"mat-icon"),p(160,"tune"),c(),l(161,"span"),p(162,"Custom Training"),c()()(),l(163,"mat-menu",null,4)(165,"button",42),P("click",function(){return M(a),b(i.onUploadUnclassified())}),l(166,"mat-icon"),p(167,"photo_library"),c(),l(168,"span"),p(169,"Upload Images"),c()(),l(170,"button",42),P("click",function(){return M(a),b(i.onUploadClassified())}),l(171,"mat-icon"),p(172,"folder_zip"),c(),l(173,"span"),p(174,"Upload Classified Images(ZIP)"),c()()(),l(175,"mat-menu",null,5)(177,"button",42),P("click",function(){return M(a),b(i.onUploadClick())}),l(178,"mat-icon"),p(179,"photo_library"),c(),l(180,"span"),p(181,"Upload Images"),c()(),l(182,"button",42),P("click",function(){return M(a),b(i.onUploadBatchZip())}),l(183,"mat-icon"),p(184,"folder_zip"),c(),l(185,"span"),p(186,"Upload Batch Images (ZIP)"),c()()(),l(187,"mat-menu",null,6),y(189,lv,5,0,"div",43)(190,pv,6,9,"button",44),c(),l(191,"mat-menu",null,7)(193,"button",42),P("click",function(){return M(a),b(i.onSelectManually())}),y(194,mv,2,0,"mat-icon",45)(195,gv,2,0,"mat-icon",46),l(196,"span"),p(197,"Select image"),c()(),l(198,"button",42),P("click",function(){return M(a),b(i.onSelectPage())}),y(199,hv,2,0,"mat-icon",45)(200,fv,2,0,"mat-icon",46),l(201,"span"),p(202,"Select page"),c()(),l(203,"button",42),P("click",function(){return M(a),b(i.onDeselectAll())}),y(204,uv,2,0,"mat-icon",45)(205,_v,2,0,"mat-icon",46),l(206,"span"),p(207,"Deselect all"),c()()(),l(208,"mat-menu",null,8)(210,"button",47),P("click",function(){return M(a),b(i.onBatchSetClass())}),l(211,"mat-icon"),p(212,"category"),c(),l(213,"span"),p(214,"Set class"),c()(),l(215,"button",47),P("click",function(){return M(a),b(i.onBatchSetTags())}),l(216,"mat-icon"),p(217,"label"),c(),l(218,"span"),p(219,"Set tags"),c()(),l(220,"button",47),P("click",function(){return M(a),b(i.onBatchSetMetadata())}),l(221,"mat-icon"),p(222,"info"),c(),l(223,"span"),p(224,"Set Metadata"),c()(),k(225,"mat-divider"),l(226,"button",42),P("click",function(){return M(a),b(i.onExportDataset())}),l(227,"mat-icon"),p(228,"download"),c(),l(229,"span"),p(230,"Download"),c()(),k(231,"mat-divider"),l(232,"button",48),P("click",function(){return M(a),b(i.onBatchDelete())}),l(233,"mat-icon"),p(234,"delete"),c(),l(235,"span"),p(236,"Delete"),c()()(),l(237,"mat-menu",null,9)(239,"button",47),P("click",function(){return M(a),b(i.onBatchSetMetadata())}),l(240,"mat-icon"),p(241,"info"),c(),l(242,"span"),p(243,"Set metadata"),c()(),l(244,"button",47),P("click",function(){return M(a),b(i.onBatchSetTags())}),l(245,"mat-icon"),p(246,"label"),c(),l(247,"span"),p(248,"Set Tags"),c()(),k(249,"mat-divider"),l(250,"button",42),P("click",function(){return M(a),b(i.onExportDataset())}),l(251,"mat-icon"),p(252,"download"),c(),l(253,"span"),p(254,"Download"),c()(),k(255,"mat-divider"),l(256,"button",48),P("click",function(){return M(a),b(i.onBatchDelete())}),l(257,"mat-icon"),p(258,"delete"),c(),l(259,"span"),p(260,"Delete"),c()()()}if(e&2){let a=gt(86),r=gt(118),s=gt(140),d=gt(188),m=gt(192),h=gt(209),u=gt(238);g(4),E(" ",i.projectName," "),g(),f("ngIf",i.projectType),g(),f("ngIf",i.totalImageCount),g(2),f("matMenuTriggerFor",r),g(10),f("matMenuTriggerFor",s),g(5),f("ngIf",i.projectType!=="Classification"),g(),f("ngIf",i.projectType==="Classification"),g(13),$("active",i.viewMode==="images"),g(5),$("active",i.viewMode==="instances"),g(7),$("active",!i.annotationType||i.annotationType==="all"),f("disabled",i.isAnnotationTypeSelectorDisabled),g(2),$("active",i.annotationType==="Ground-Truth"),f("disabled",i.isAnnotationTypeSelectorDisabled),g(2),$("active",i.annotationType==="Prediction"),f("disabled",i.availableModels.length===0||i.isAnnotationTypeSelectorDisabled),g(2),f("disabled",i.availableModels.length===0)("matMenuTriggerFor",d),g(2),D(i.getSelectedModelDisplayName()),g(3),f("ngIf",i.projectType!=="Classification"),g(2),$("filter-active",i.activeFilterCount>0),g(5),f("ngIf",i.activeFilterCount>0),g(),f("matMenuTriggerFor",a),g(6),f("matMenuTriggerFor",m),g(4),D(i.getSelectButtonText()),g(),f("disabled",!i.isBatchActionsEnabled)("matMenuTriggerFor",i.projectType==="Classification"?h:u),g(5),f("ngIf",i.selectedCount>0),g(3),$("active",i.sortMethod==="upload_time_desc"),g(5),$("active",i.sortMethod==="upload_time_asc"),g(5),$("active",i.sortMethod==="label_time_desc"),g(5),$("active",i.sortMethod==="label_time_asc"),g(5),$("active",i.sortMethod==="name_asc"),g(5),$("active",i.sortMethod==="name_desc"),g(77),f("ngIf",i.availableModels.length===0),g(),f("ngForOf",i.availableModels),g(3),$("active",i.isManualSelectActive),g(),f("ngIf",i.isManualSelectActive),g(),f("ngIf",!i.isManualSelectActive),g(3),$("active",i.isPageSelectActive),g(),f("ngIf",i.isPageSelectActive),g(),f("ngIf",!i.isPageSelectActive),g(3),$("active",!i.selectMode),g(),f("ngIf",!i.selectMode),g(),f("ngIf",i.selectMode),g(5),f("disabled",!i.isBatchActionsEnabled),g(5),f("disabled",!i.isBatchActionsEnabled),g(5),f("disabled",!i.isBatchActionsEnabled),g(12),f("disabled",!i.isBatchActionsEnabled),g(7),f("disabled",!i.isBatchActionsEnabled),g(5),f("disabled",!i.isBatchActionsEnabled),g(12),f("disabled",!i.isBatchActionsEnabled)}},dependencies:[Q,N,Z,W,Xe,qe,Ze,Pd,na,Mo],styles:[".toolbar[_ngcontent-%COMP%]{display:flex;flex-direction:column;background:#f5f5f5;border-radius:8px;box-shadow:0 2px 4px #0000001a;margin-bottom:20px}.toolbar[_ngcontent-%COMP%]   .toolbar-row-1[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:20px;gap:20px;border-bottom:1px solid #e0e0e0}.toolbar[_ngcontent-%COMP%]   .toolbar-row-1[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]{flex:0 1 auto;min-width:0}.toolbar[_ngcontent-%COMP%]   .toolbar-row-1[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]   .project-title[_ngcontent-%COMP%]{margin:0;font-size:24px;font-weight:500;color:#333;display:flex;align-items:center;gap:12px;flex-wrap:wrap}.toolbar[_ngcontent-%COMP%]   .toolbar-row-1[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]   .project-title[_ngcontent-%COMP%]   .image-count-badge[_ngcontent-%COMP%]{font-size:16px;font-weight:400;color:#757575;white-space:nowrap}.toolbar[_ngcontent-%COMP%]   .toolbar-row-1[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]   .project-title[_ngcontent-%COMP%]   .project-type-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:4px;font-size:14px;font-weight:500;color:#1976d2;background-color:#e3f2fd;padding:4px 12px;border-radius:16px;white-space:nowrap}.toolbar[_ngcontent-%COMP%]   .toolbar-row-1[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]   .project-title[_ngcontent-%COMP%]   .project-type-badge[_ngcontent-%COMP%]   .type-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.toolbar[_ngcontent-%COMP%]   .toolbar-row-1[_ngcontent-%COMP%]   .action-buttons[_ngcontent-%COMP%]{flex:0 0 auto;display:flex;align-items:center;gap:8px;flex-wrap:wrap}.toolbar[_ngcontent-%COMP%]   .toolbar-row-2[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:center;padding:12px 20px;gap:12px}.toolbar[_ngcontent-%COMP%]   .toolbar-row-2[_ngcontent-%COMP%]   .filter-sort-buttons[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.toolbar[_ngcontent-%COMP%]   .toolbar-row-2[_ngcontent-%COMP%]   .select-batch-buttons[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;margin-left:auto}.annotation-type-toggle[_ngcontent-%COMP%]   .toggle-group-container[_ngcontent-%COMP%]{display:flex;border:1px solid #e0e0e0;border-radius:4px;overflow:hidden}.annotation-type-toggle[_ngcontent-%COMP%]   .toggle-group-container[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]{border-radius:0;border:none;padding:0 12px;min-width:auto;line-height:36px;font-size:14px;background-color:#fff;color:#000000de;transition:all .2s ease}.annotation-type-toggle[_ngcontent-%COMP%]   .toggle-group-container[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]:not(:last-child){border-right:1px solid #e0e0e0}.annotation-type-toggle[_ngcontent-%COMP%]   .toggle-group-container[_ngcontent-%COMP%]   .toggle-btn.active[_ngcontent-%COMP%]{background-color:#2e7d32;color:#fff}.annotation-type-toggle[_ngcontent-%COMP%]   .toggle-group-container[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]:not(.active):hover{background-color:#f5f5f5}.annotation-type-toggle[_ngcontent-%COMP%]   .toggle-group-container[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;background-color:#f5f5f5;color:#00000061}.annotation-type-toggle[_ngcontent-%COMP%]   .toggle-group-container[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]:disabled.active{opacity:1;background-color:#2e7d32;color:#fff;cursor:not-allowed}.model-selector-btn[_ngcontent-%COMP%]{border:1px solid #e0e0e0;border-radius:4px;background-color:#fff;transition:all .2s ease;font-size:14px;max-width:220px;min-width:0}.model-selector-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#f5f5f5;border-color:#2e7d32}.model-selector-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed;background-color:#f5f5f5;color:#00000061}.model-selector-btn[_ngcontent-%COMP%]     .mat-mdc-button-touch-target, .model-selector-btn[_ngcontent-%COMP%]     .mdc-button__label{display:flex;align-items:center;gap:4px;min-width:0;overflow:hidden;width:100%}.model-selector-btn[_ngcontent-%COMP%]   .model-name[_ngcontent-%COMP%]{flex:1 1 0;min-width:0;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;text-align:left}.model-selector-btn[_ngcontent-%COMP%]   .dropdown-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px;flex-shrink:0}.view-mode-toggle[_ngcontent-%COMP%]{display:flex;border:1px solid #e0e0e0;border-radius:4px;overflow:hidden}.view-mode-toggle[_ngcontent-%COMP%]   .view-mode-btn[_ngcontent-%COMP%]{border-radius:0;border:none;padding:6px 12px;transition:all .2s ease;display:flex;align-items:center;gap:4px}.view-mode-toggle[_ngcontent-%COMP%]   .view-mode-btn.active[_ngcontent-%COMP%]{background-color:#2e7d32;color:#fff}.view-mode-toggle[_ngcontent-%COMP%]   .view-mode-btn.active[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#fff}.view-mode-toggle[_ngcontent-%COMP%]   .view-mode-btn[_ngcontent-%COMP%]:not(.active):hover{background-color:#f5f5f5}.view-mode-toggle[_ngcontent-%COMP%]   .view-mode-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.filter-btn[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;gap:4px;padding:0 12px!important;min-width:auto!important;height:36px;background-color:#ff9800;color:#fff}.filter-btn[_ngcontent-%COMP%]:hover{background-color:#f57c00}.filter-btn.has-filters[_ngcontent-%COMP%], .filter-btn.filter-active[_ngcontent-%COMP%]{background-color:#fb8c00}.filter-btn[_ngcontent-%COMP%]   .filter-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;min-width:18px;height:18px;padding:0 5px;background-color:#f44336;color:#fff;border-radius:9px;font-size:11px;font-weight:500;margin-left:4px}.filter-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.sort-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;padding:0 12px!important;min-width:auto!important;height:36px;background-color:#2196f3;color:#fff}.sort-btn[_ngcontent-%COMP%]:hover{background-color:#1976d2}.sort-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.label-details-toggle[_ngcontent-%COMP%]{display:flex;align-items:center}.label-details-toggle[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{font-size:13px}.select-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px}.select-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.select-btn[_ngcontent-%COMP%]   .dropdown-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.batch-update-btn[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center;gap:4px;padding:0 12px;height:36px}.batch-update-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.batch-update-btn[_ngcontent-%COMP%]   .selection-badge[_ngcontent-%COMP%]{display:inline-flex;align-items:center;justify-content:center;min-width:18px;height:18px;padding:0 5px;background-color:#fff;color:#2e7d32;border-radius:9px;font-size:11px;font-weight:500;margin-left:4px}.batch-update-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.manage-btn[_ngcontent-%COMP%], .snapshot-btn[_ngcontent-%COMP%], .upload-btn[_ngcontent-%COMP%], .training-btn[_ngcontent-%COMP%], .model-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;padding:0 12px;height:36px}.manage-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .snapshot-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .upload-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .training-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .model-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.manage-btn[_ngcontent-%COMP%]{background-color:#ff9800;color:#fff}.manage-btn[_ngcontent-%COMP%]:hover{background-color:#f57c00}.snapshot-btn[_ngcontent-%COMP%]{background-color:#2196f3;color:#fff}.snapshot-btn[_ngcontent-%COMP%]:hover{background-color:#1976d2}.upload-btn[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.upload-btn[_ngcontent-%COMP%]:hover{background-color:#388e3c}.training-btn[_ngcontent-%COMP%]{background-color:#00bcd4;color:#fff}.training-btn[_ngcontent-%COMP%]:hover{background-color:#00acc1}.model-btn[_ngcontent-%COMP%]{background-color:#9c27b0;color:#fff}.model-btn[_ngcontent-%COMP%]:hover{background-color:#7b1fa2}  .mat-mdc-menu-panel .mat-mdc-menu-item.active{background-color:#e8f5e9;color:#2e7d32}  .mat-mdc-menu-panel .mat-mdc-menu-item.active mat-icon{color:#2e7d32}  .mat-mdc-menu-panel .mat-mdc-menu-item mat-icon{margin-right:12px;font-size:20px;width:20px;height:20px}  .mat-mdc-menu-panel .no-models-message{padding:16px;text-align:center;color:#666;max-width:250px}  .mat-mdc-menu-panel .no-models-message mat-icon{font-size:48px;width:48px;height:48px;color:#999;margin-bottom:8px}  .mat-mdc-menu-panel .no-models-message p{margin:0;font-size:14px;line-height:1.4}@media (max-width: 900px){.toolbar[_ngcontent-%COMP%]{gap:6px}.model-selector-btn[_ngcontent-%COMP%]{max-width:200px;padding:4px 8px;font-size:13px}}@media (max-width: 768px){.toolbar[_ngcontent-%COMP%]{padding:10px 12px}.manage-btn[_ngcontent-%COMP%], .snapshot-btn[_ngcontent-%COMP%], .upload-btn[_ngcontent-%COMP%], .training-btn[_ngcontent-%COMP%], .model-btn[_ngcontent-%COMP%]{padding:0 10px}.manage-btn[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%], .snapshot-btn[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%], .upload-btn[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%], .training-btn[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%], .model-btn[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%], .label-details-toggle[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%]{display:none}}@media (max-width: 640px){.toolbar[_ngcontent-%COMP%]{padding:8px 10px;gap:6px}.filter-btn[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%], .sort-btn[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%]{display:none}.model-selector-btn[_ngcontent-%COMP%]{max-width:150px}.view-mode-toggle[_ngcontent-%COMP%]   .view-mode-btn[_ngcontent-%COMP%]{padding:6px 8px}.view-mode-toggle[_ngcontent-%COMP%]   .view-mode-btn[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%]{display:none}}@media (max-width: 480px){.toolbar[_ngcontent-%COMP%]{padding:8px;gap:4px}.annotation-type-toggle[_ngcontent-%COMP%]   .toggle-group-container[_ngcontent-%COMP%]   .toggle-btn[_ngcontent-%COMP%]{padding:0 8px;font-size:12px;line-height:32px}.model-selector-btn[_ngcontent-%COMP%]{max-width:120px;padding:4px 6px;font-size:12px}.manage-btn[_ngcontent-%COMP%], .snapshot-btn[_ngcontent-%COMP%], .upload-btn[_ngcontent-%COMP%], .training-btn[_ngcontent-%COMP%], .model-btn[_ngcontent-%COMP%]{padding:0 8px;height:32px}.manage-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .snapshot-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .upload-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .training-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .model-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.view-mode-toggle[_ngcontent-%COMP%]   .view-mode-btn[_ngcontent-%COMP%]{padding:4px 6px}.view-mode-toggle[_ngcontent-%COMP%]   .view-mode-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}.filter-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .sort-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}}  .mat-mdc-menu-panel .delete-menu-item{color:#d32f2f!important}  .mat-mdc-menu-panel .delete-menu-item mat-icon{color:#d32f2f!important}  .mat-mdc-menu-panel .delete-menu-item:hover{background-color:#ffebee!important}"]})}}return n})();var xv=()=>({}),Mv=()=>[];function bv(n,o){if(n&1&&(l(0,"div",4)(1,"mat-icon",5),p(2,"error"),c(),l(3,"p"),p(4),c()()),n&2){let t=o.ngIf;g(4),D(t)}}function Pv(n,o){n&1&&(l(0,"div",6),k(1,"mat-spinner"),l(2,"p"),p(3,"Loading images..."),c()())}function vv(n,o){if(n&1){let t=j();l(0,"div",7)(1,"app-toolbar",8),z(2,"async"),z(3,"async"),z(4,"async"),z(5,"async"),z(6,"async"),z(7,"async"),z(8,"async"),z(9,"async"),P("viewModeChange",function(i){M(t);let a=C();return b(a.onViewModeChange(i))})("actionSelect",function(i){M(t);let a=C();return b(a.onActionSelect(i))})("annotationTypeChange",function(i){M(t);let a=C();return b(a.onAnnotationTypeChange(i))})("modelChange",function(i){M(t);let a=C();return b(a.onModelChange(i))})("filterChange",function(i){M(t);let a=C();return b(a.onFilterChange(i))})("filterClear",function(){M(t);let i=C();return b(i.onFilterClear())})("snapshotAction",function(i){M(t);let a=C();return b(a.onSnapshotAction(i))})("sortChange",function(i){M(t);let a=C();return b(a.onSortChange(i))})("trainingAction",function(i){M(t);let a=C();return b(a.onTrainingAction(i))})("uploadClick",function(){M(t);let i=C();return b(i.onUploadClick())})("uploadClassifiedClick",function(){M(t);let i=C();return b(i.onUploadClassifiedClick())})("uploadBatchZipClick",function(){M(t);let i=C();return b(i.onUploadBatchZipClick())})("zoomChange",function(i){M(t);let a=C();return b(a.onZoomChange(i))})("modelPageClick",function(){M(t);let i=C();return b(i.onModelPageClick())})("showLabelDetailsChange",function(i){M(t);let a=C();return b(a.onShowLabelDetailsChange(i))})("selectModeToggle",function(i){M(t);let a=C();return b(a.onSelectModeToggle(i))})("selectPage",function(){M(t);let i=C();return b(i.onSelectPage())})("selectAll",function(){M(t);let i=C();return b(i.onSelectAll())})("deselectAll",function(){M(t);let i=C();return b(i.onDeselectAll())})("batchSetClass",function(){M(t);let i=C();return b(i.onBatchSetClass())})("batchSetTags",function(){M(t);let i=C();return b(i.onBatchSetTags())})("batchSetMetadata",function(){M(t);let i=C();return b(i.onBatchSetMetadata())})("batchDelete",function(){M(t);let i=C();return b(i.onBatchDelete())})("exportDataset",function(){M(t);let i=C();return b(i.onExportDataset())})("exportAllDataset",function(){M(t);let i=C();return b(i.onExportAllDataset())}),c(),l(10,"div",9)(11,"app-image-grid",10),z(12,"async"),z(13,"async"),z(14,"async"),z(15,"async"),z(16,"async"),z(17,"async"),z(18,"async"),P("imageClick",function(i){M(t);let a=C();return b(a.onImageClick(i))})("pageChange",function(i){M(t);let a=C();return b(a.onPageChange(i))})("classChange",function(i){M(t);let a=C();return b(a.onClassChange(i))})("imageSelectionToggle",function(i){M(t);let a=C();return b(a.onImageSelectionToggle(i.imageId,i.selected))}),c()()()}if(n&2){let t,e,i,a,r=C();g(),f("viewMode",V(2,29,r.viewMode$)||"images")("activeFilters",V(3,31,r.filters$)||Le(59,xv))("sortMethod",V(4,33,r.sortMethod$)||"upload_time_desc")("zoomLevel",V(5,35,r.zoomLevel$)||3)("annotationType",(t=V(6,37,r.filters$))==null?null:t.annotationType)("selectedModelId",r.selectedModelId)("availableModels",r.availableModels)("availableClasses",r.availableClasses)("availableTags",r.availableTags)("availableMetadata",r.availableMetadata)("showLabelDetails",r.showLabelDetails)("projectType",((e=V(7,39,r.project$))==null?null:e.type)||"Object Detection")("projectName",((i=V(8,41,r.project$))==null?null:i.name)||"Loading...")("selectMode",r.selectMode)("selectedCount",r.getSelectedCount())("currentPageImageCount",r.currentPageImageIds.length)("totalImageCount",V(9,43,r.totalElements$)||0)("lastSelectAction",r.lastSelectAction),g(10),f("currentPage",V(12,45,r.currentPage$)||1)("images",V(13,47,r.images$)||Le(60,Mv))("totalPages",V(14,49,r.totalPages$)||1)("totalElements",V(15,51,r.totalElements$)||0)("viewMode",V(16,53,r.viewMode$)||"images")("zoomLevel",V(17,55,r.zoomLevel$)||3)("projectType",((a=V(18,57,r.project$))==null?null:a.type)||"Object Detection")("availableClasses",r.availableClasses)("showLabelDetails",r.showLabelDetails)("selectMode",r.selectMode)("selectedImageIds",r.selectedImageIds)}}var Kg=(()=>{class n{constructor(t,e,i,a,r,s,d,m,h,u,_,x,v){this.route=t,this.router=e,this.store=i,this.dialog=a,this.snackBar=r,this.snapshotService=s,this.trainingService=d,this.projectClassService=m,this.projectTagService=h,this.projectMetadataService=u,this.modelService=_,this.imageService=x,this.labelService=v,this.availableClasses=[],this.availableTags=[],this.availableMetadata=[],this.availableModels=[],this.showLabelDetails=!0,this.selectMode=!1,this.selectedImageIds=new Set,this.currentPageImageIds=[],this.lastSelectAction="none",this.destroy$=new Ct,this.images$=this.store.select(Zl),this.viewMode$=this.store.select(Ql),this.filters$=this.store.select(Kl),this.sortMethod$=this.store.select(Jl),this.zoomLevel$=this.store.select(tc),this.loading$=this.store.select(oc),this.currentPage$=this.store.select(ec),this.totalPages$=this.store.select(nc),this.totalElements$=this.store.select(ic),this.error$=this.store.select(ac)}ngOnInit(){this.store.dispatch(wn({viewAll:!0})),Yn([this.route.params,this.route.queryParams]).pipe(q(this.destroy$),ce(([t,e])=>{this.projectId=+t.id,this.project$=this.store.select(Do(this.projectId)),e.modelId&&(this.selectedModelId=+e.modelId,console.log("[ngOnInit] \u2713 Pre-setting modelId from query params:",this.selectedModelId)),this.loadFilterOptions(),e&&Object.keys(e).length>0?(console.log("Restoring state from query params:",e),this.loadImagesFromQueryParams(e)):console.log("[ngOnInit] Fresh page load - waiting for models to load")})).subscribe(),this.images$.pipe(q(this.destroy$)).subscribe(t=>{this.currentPageImageIds=t.map(e=>e.id)})}ngOnDestroy(){this.store.dispatch(Xl()),this.destroy$.next(),this.destroy$.complete()}onViewModeChange(t){this.store.dispatch(Ul({viewMode:t})),t==="instances"&&this.filters$.pipe(rt(1)).subscribe(e=>{let i=ne(_t({},e||{}),{annotationType:"Ground-Truth",modelId:e?.modelId||this.selectedModelId});this.store.dispatch(Mi({filters:i}))})}onFilterChange(t){this.store.dispatch(Mi({filters:t}))}onFilterClear(){this.store.dispatch(Hl())}onSortChange(t){this.store.dispatch(Wl({sortMethod:t}))}onAnnotationTypeChange(t){this.filters$.pipe(rt(1)).subscribe(e=>{let i=ne(_t({},e||{}),{annotationType:t,modelId:e?.modelId||this.selectedModelId});this.store.dispatch(Mi({filters:i}))})}onModelChange(t){console.log(`[onModelChange] Model changed to: ${t}`),this.selectedModelId=t,this.filters$.pipe(rt(1)).subscribe(e=>{let i=ne(_t({},e||{}),{modelId:t});console.log("[onModelChange] Applying filters:",i),this.store.dispatch(Mi({filters:i}))})}onActionSelect(t){switch(t){case"manage_classes":this.openManageClassesDialog();break;case"manage_tags":this.openManageTagsDialog();break;case"manage_metadata":this.openManageMetadataDialog();break;case"auto_split":this.openAutoSplitDialog();break}}onSnapshotAction(t){t==="snapshot_entire_dataset"?this.openSnapshotCreateDialog():t==="view_snapshots"&&this.navigateToSnapshotListView()}onUploadClick(){this.dialog.open(zg,{width:"800px",maxWidth:"90vw",disableClose:!1,data:{projectId:this.projectId}}).afterClosed().subscribe(e=>{e?.success&&(this.snackBar.open(`Successfully uploaded ${e.uploadedCount} image(s)`,"Close",{duration:3e3,horizontalPosition:"center",verticalPosition:"bottom"}),this.loadImages())})}onUploadClassifiedClick(){this.dialog.open(Vg,{width:"600px",maxWidth:"90vw",disableClose:!1,panelClass:"upload-classified-dialog-panel",data:{projectId:this.projectId}}).afterClosed().subscribe(e=>{e?.success&&(this.snackBar.open(`Successfully uploaded ${e.uploadedCount} classified image(s)`,"Close",{duration:3e3,horizontalPosition:"center",verticalPosition:"bottom"}),this.loadImages(),this.reloadClasses())})}onUploadBatchZipClick(){this.dialog.open(Lg,{width:"600px",maxWidth:"90vw",disableClose:!1,panelClass:"upload-batch-dialog-panel",data:{projectId:this.projectId}}).afterClosed().subscribe(e=>{e?.success&&(this.snackBar.open(`Successfully uploaded ${e.uploadedCount} image(s)`,"Close",{duration:3e3,horizontalPosition:"center",verticalPosition:"bottom"}),this.loadImages())})}onTrainingAction(t){t==="train"?this.startTraining(!1):t==="custom_training"&&this.startTraining(!0)}onZoomChange(t){t==="in"?this.store.dispatch(Gl()):this.store.dispatch(Yl())}onShowLabelDetailsChange(t){this.showLabelDetails=t}onModelPageClick(){this.router.navigate(["/landingai/model",this.projectId])}onImageClick(t){console.log("Image clicked:",t),Yn([this.currentPage$,this.filters$,this.viewMode$,this.sortMethod$]).pipe(rt(1)).subscribe(([e,i,a,r])=>{this.router.navigate(["/landingai/labelling",this.projectId,t.id],{queryParams:_t(_t(_t(_t(_t(_t(_t(_t(_t(_t(_t(_t({page:e-1,size:20,viewMode:a,sortBy:r},i.mediaStatus&&i.mediaStatus.length>0&&{mediaStatus:i.mediaStatus.join(",")}),i.groundTruthLabels&&i.groundTruthLabels.length>0&&{groundTruthLabels:i.groundTruthLabels.join(",")}),i.predictionLabels&&i.predictionLabels.length>0&&{predictionLabels:i.predictionLabels.join(",")}),i.split&&i.split.length>0&&{split:i.split.join(",")}),i.tags&&i.tags.length>0&&{tags:i.tags.join(",")}),i.mediaName&&{mediaName:i.mediaName}),i.labeler&&{labeler:i.labeler}),i.mediaId&&{mediaId:i.mediaId}),i.noClass!==void 0&&{noClass:i.noClass}),i.predictionNoClass!==void 0&&{predictionNoClass:i.predictionNoClass}),(i.modelId||this.selectedModelId)&&{modelId:i.modelId||this.selectedModelId}),i.annotationType&&{annotationType:i.annotationType})})})}onClassChange(t){console.log("Class change:",t);let e=t.classId?this.availableClasses.find(a=>a.id===t.classId):null;if(t.classId===null){t.previousClassId!==null&&this.images$.pipe(rt(1)).subscribe(a=>{let r=a.find(s=>s.id===t.imageId);if(r?.labels&&r.labels.length>0){let s=r.labels.find(d=>d.annotationType==="Ground Truth");s?.id&&this.labelService.deleteLabel(s.id).pipe(q(this.destroy$)).subscribe({next:()=>{this.store.dispatch(Ao({imageId:t.imageId,classId:null,className:null,colorCode:null})),this.snackBar.open("Class removed","Close",{duration:2e3})},error:d=>{console.error("Failed to remove class:",d),this.snackBar.open("Failed to remove class","Close",{duration:3e3})}})}});return}let i={imageId:t.imageId,classId:t.classId,position:null,annotationType:"Ground Truth"};t.previousClassId!==null?this.images$.pipe(rt(1)).subscribe(a=>{let r=a.find(s=>s.id===t.imageId);if(r?.labels&&r.labels.length>0){let s=r.labels.find(d=>d.annotationType==="Ground Truth");s?.id&&(i.id=s.id,this.labelService.updateLabel(s.id,i).pipe(q(this.destroy$)).subscribe({next:d=>{this.store.dispatch(Ao({imageId:t.imageId,classId:t.classId,className:e?.className||null,colorCode:e?.colorCode||null,labelId:d?.id||s.id})),this.snackBar.open(`Class changed to "${e?.className}"`,"Close",{duration:2e3})},error:d=>{console.error("Failed to update class:",d),this.snackBar.open("Failed to update class","Close",{duration:3e3})}}))}}):this.labelService.saveLabel(i).pipe(q(this.destroy$)).subscribe({next:a=>{this.store.dispatch(Ao({imageId:t.imageId,classId:t.classId,className:e?.className||null,colorCode:e?.colorCode||null,labelId:a?.id})),this.snackBar.open(`Class set to "${e?.className}"`,"Close",{duration:2e3})},error:a=>{console.error("Failed to set class:",a),this.snackBar.open("Failed to set class","Close",{duration:3e3})}})}onPageChange(t){this.store.dispatch(ql({page:t-1}))}getProjectTypeIcon(t){switch(t){case"Classification":return"category";case"Object Detection":return"crop_free";case"Segmentation":return"polyline";default:return"image"}}onSelectModeToggle(t){this.selectMode=t,t?this.lastSelectAction="manual":(this.selectedImageIds.clear(),this.lastSelectAction="none")}onSelectPage(){this.currentPageImageIds.forEach(t=>this.selectedImageIds.add(t)),this.lastSelectAction="page"}onSelectAll(){this.filters$.pipe(rt(1)).subscribe(t=>{this.imageService.getAllImageIds(this.projectId,t||{}).pipe(q(this.destroy$)).subscribe({next:e=>{e.forEach(i=>this.selectedImageIds.add(i)),this.lastSelectAction="all",this.snackBar.open(`Selected ${e.length} image(s) across all pages`,"Close",{duration:2e3})},error:e=>{console.error("Failed to fetch all image IDs:",e),this.snackBar.open("Failed to select all images. Please try again.","Close",{duration:3e3})}})})}onDeselectAll(){this.selectedImageIds.clear(),this.lastSelectAction="none"}onImageSelectionToggle(t,e){e?this.selectedImageIds.add(t):this.selectedImageIds.delete(t),this.lastSelectAction!=="manual"&&(this.lastSelectAction="manual")}isImageSelected(t){return this.selectedImageIds.has(t)}getSelectedCount(){return this.selectedImageIds.size}isBatchActionsEnabled(){return this.selectedImageIds.size>0}onBatchSetMetadata(){if(this.selectedImageIds.size===0){this.snackBar.open("Please select at least 1 image for batch update","Close",{duration:3e3});return}let t=Array.from(this.selectedImageIds);console.log("Selected image IDs for batch metadata update:",t),console.log("Total selected:",t.length),this.dialog.open(Gg,{width:"600px",maxWidth:"90vw",disableClose:!1,data:{projectId:this.projectId,selectedImageIds:t,availableMetadata:this.availableMetadata}}).afterClosed().subscribe(i=>{i&&i.metadata&&this.imageService.batchSetMetadata(i.imageIds,i.metadata).pipe(q(this.destroy$)).subscribe({next:()=>{this.snackBar.open(`Successfully updated metadata for ${i.imageIds.length} image(s)`,"Close",{duration:3e3}),this.onDeselectAll(),this.selectMode=!1,this.reloadCurrentPage()},error:a=>{console.error("Failed to batch update metadata:",a),this.snackBar.open("Failed to update metadata. Please try again.","Close",{duration:3e3})}})})}onBatchSetTags(){if(this.selectedImageIds.size===0){this.snackBar.open("Please select at least 1 image for batch update","Close",{duration:3e3});return}let t=Array.from(this.selectedImageIds);console.log("Selected image IDs for batch tags update:",t),console.log("Total selected:",t.length),this.dialog.open(Yg,{width:"600px",maxWidth:"90vw",disableClose:!1,data:{projectId:this.projectId,selectedImageIds:t,availableTags:this.availableTags}}).afterClosed().subscribe(i=>{i&&i.tagIds&&this.imageService.batchSetTags(i.imageIds,i.tagIds).pipe(q(this.destroy$)).subscribe({next:()=>{this.snackBar.open(`Successfully updated tags for ${i.imageIds.length} image(s)`,"Close",{duration:3e3}),this.onDeselectAll(),this.selectMode=!1,this.reloadCurrentPage()},error:a=>{console.error("Failed to batch update tags:",a),this.snackBar.open("Failed to update tags. Please try again.","Close",{duration:3e3})}})})}onBatchSetClass(){if(this.selectedImageIds.size===0){this.snackBar.open("Please select at least 1 image for batch update","Close",{duration:3e3});return}let t=Array.from(this.selectedImageIds);console.log("Selected image IDs for batch class update:",t),console.log("Total selected:",t.length),this.dialog.open(qg,{width:"600px",maxWidth:"90vw",disableClose:!1,data:{projectId:this.projectId,selectedImageIds:t,availableClasses:this.availableClasses}}).afterClosed().subscribe(i=>{i&&i.classId&&this.imageService.batchSetClass(i.imageIds,i.classId).pipe(q(this.destroy$)).subscribe({next:()=>{this.snackBar.open(`Successfully set class for ${i.imageIds.length} image(s)`,"Close",{duration:3e3}),this.onDeselectAll(),this.selectMode=!1,this.reloadCurrentPage()},error:a=>{console.error("Failed to batch set class:",a),this.snackBar.open("Failed to set class. Please try again.","Close",{duration:3e3})}})})}onBatchDelete(){if(this.selectedImageIds.size===0){this.snackBar.open("Please select at least 1 image to delete","Close",{duration:3e3});return}let t=Array.from(this.selectedImageIds),e=t.length,i=this.dialog.open(Jo,{width:"400px"});i.componentInstance.title="Delete Images",i.componentInstance.message=`Are you sure you want to delete ${e} image(s)? This action cannot be undone. All associated data (labels, tags, metadata, files) will be permanently removed.`,i.componentInstance.btnOkText="Delete",i.componentInstance.btnCancelText="Cancel",i.afterClosed().subscribe(a=>{a&&this.imageService.deleteImages(t).pipe(q(this.destroy$)).subscribe({next:()=>{this.snackBar.open(`Successfully deleted ${e} image(s)`,"Close",{duration:3e3}),this.onDeselectAll(),this.selectMode=!1,this.reloadCurrentPage()},error:r=>{console.error("Failed to batch delete images:",r),this.snackBar.open("Failed to delete images. Please try again.","Close",{duration:3e3})}})})}onExportDataset(){let t=Array.from(this.selectedImageIds);if(t.length===0){this.snackBar.open("Please select images to export","Close",{duration:3e3});return}console.log("Exporting selected images:",t.length);let e=this.dialog.open(_o,{width:"450px",disableClose:!0,data:{title:"Downloading Dataset",message:`Preparing ${t.length} selected images...`}});this.imageService.exportDataset(this.projectId,t).pipe(q(this.destroy$)).subscribe({next:i=>{e.close();let a=window.URL.createObjectURL(i),r=document.createElement("a");r.href=a;let s=new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5);r.download=`dataset-project-${this.projectId}-selected-${s}.zip`,document.body.appendChild(r),r.click(),document.body.removeChild(r),window.URL.revokeObjectURL(a),this.snackBar.open(`Dataset downloaded successfully (${t.length} images)`,"Close",{duration:3e3})},error:i=>{e.close(),console.error("Failed to export dataset:",i),this.snackBar.open("Failed to download dataset. Please try again.","Close",{duration:3e3})}})}onExportAllDataset(){console.log("Exporting all images for project:",this.projectId);let t=this.dialog.open(_o,{width:"450px",disableClose:!0,data:{title:"Downloading Dataset",message:"Preparing all images for download..."}});this.imageService.exportDataset(this.projectId).pipe(q(this.destroy$)).subscribe({next:e=>{t.close();let i=window.URL.createObjectURL(e),a=document.createElement("a");a.href=i;let r=new Date().toISOString().replace(/[:.]/g,"-").slice(0,-5);a.download=`dataset-project-${this.projectId}-all-${r}.zip`,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(i),this.snackBar.open("Dataset downloaded successfully (all images)","Close",{duration:3e3})},error:e=>{t.close(),console.error("Failed to export dataset:",e),this.snackBar.open("Failed to download dataset. Please try again.","Close",{duration:3e3})}})}loadImages(){this.filters$.pipe(rt(1)).subscribe(t=>{this.viewMode$.pipe(rt(1)).subscribe(e=>{this.sortMethod$.pipe(rt(1)).subscribe(i=>{let a=ne(_t({},t||{}),{modelId:t?.modelId||this.selectedModelId});console.log("[loadImages] Loading with filters:",a),this.store.dispatch(Fo({projectId:this.projectId,page:0,size:20,viewMode:e||"images",filters:a,sortBy:i||"upload_time_desc"}))})})})}loadImagesFromQueryParams(t){let e=t.page?+t.page:0,i=t.size?+t.size:20,a=t.viewMode||"images",r=t.sortBy||"upload_time_desc",s={};t.mediaStatus&&(s.mediaStatus=t.mediaStatus.split(",")),t.groundTruthLabels&&(s.groundTruthLabels=t.groundTruthLabels.split(",").map(d=>+d)),t.predictionLabels&&(s.predictionLabels=t.predictionLabels.split(",").map(d=>+d)),t.split&&(s.split=t.split.split(",")),t.tags&&(s.tags=t.tags.split(",").map(d=>+d)),t.mediaName&&(s.mediaName=t.mediaName),t.labeler&&(s.labeler=t.labeler),t.mediaId&&(s.mediaId=t.mediaId),t.noClass!==void 0&&(s.noClass=t.noClass==="true"),t.predictionNoClass!==void 0&&(s.predictionNoClass=t.predictionNoClass==="true"),t.modelId?(s.modelId=+t.modelId,this.selectedModelId=+t.modelId,console.log(`[loadImagesFromQueryParams] \u2713 Model ID restored from query params: ${this.selectedModelId}`)):console.log("[loadImagesFromQueryParams] \u26A0 No modelId in query params!"),t.annotationType&&(s.annotationType=t.annotationType),console.log(`[loadImagesFromQueryParams] Restoring state: page=${e}, size=${i}, viewMode=${a}, sortBy=${r}`),console.log("[loadImagesFromQueryParams] Filters:",s),this.store.dispatch(Fo({projectId:this.projectId,page:e,size:i,viewMode:a,filters:s,sortBy:r}))}reloadCurrentPage(){this.filters$.pipe(rt(1)).subscribe(t=>{this.viewMode$.pipe(rt(1)).subscribe(e=>{this.sortMethod$.pipe(rt(1)).subscribe(i=>{this.currentPage$.pipe(rt(1)).subscribe(a=>{let r=(a||1)-1,s=ne(_t({},t||{}),{modelId:t?.modelId||this.selectedModelId});console.log("[reloadCurrentPage] UI page:",a,"-> Backend page:",r),console.log("[reloadCurrentPage] Filters:",s),console.log("[reloadCurrentPage] Sort:",i),this.store.dispatch(Fo({projectId:this.projectId,page:r,size:20,viewMode:e||"images",filters:s,sortBy:i||"upload_time_desc"}))})})})})}loadFilterOptions(){this.projectClassService.getClassesByProjectId(this.projectId).pipe(q(this.destroy$)).subscribe({next:t=>{this.availableClasses=t},error:t=>{console.error("Failed to load classes:",t)}}),this.projectTagService.getTagsByProjectId(this.projectId).pipe(q(this.destroy$)).subscribe({next:t=>{this.availableTags=t},error:t=>{console.error("Failed to load tags:",t)}}),this.projectMetadataService.getMetadataByProjectId(this.projectId).pipe(q(this.destroy$)).subscribe({next:t=>{this.availableMetadata=t},error:t=>{console.error("Failed to load metadata:",t)}}),this.modelService.getModelsByProjectId(this.projectId).pipe(q(this.destroy$)).subscribe({next:t=>{this.availableModels=t,console.log(`[loadFilterOptions] Loaded ${t.length} models`),t.length>0&&!this.selectedModelId?(this.selectedModelId=t[0].id,console.log("[loadFilterOptions] \u2713 Auto-selected latest model:",this.selectedModelId),this.images$.pipe(rt(1)).subscribe(e=>{e.length===0?(console.log("[loadFilterOptions] Loading images with selected model:",this.selectedModelId),this.loadImages()):console.log("[loadFilterOptions] Images already loaded, skipping")})):this.selectedModelId?console.log("[loadFilterOptions] \u2713 Model already selected (from query params):",this.selectedModelId):(console.log("[loadFilterOptions] \u26A0 No models available for this project"),this.images$.pipe(rt(1)).subscribe(e=>{e.length===0&&(console.log("[loadFilterOptions] Loading images without model filter"),this.loadImages())}))},error:t=>{console.error("Failed to load models:",t),this.images$.pipe(rt(1)).subscribe(e=>{e.length===0&&this.loadImages()})}})}reloadImagesWithModel(t){this.filters$.pipe(rt(1)).subscribe(e=>{let i=ne(_t({},e||{}),{modelId:t});this.store.dispatch(Mi({filters:i}))})}openManageClassesDialog(){this.dialog.open($g,{width:"1000px",maxWidth:"95vw",maxHeight:"90vh",disableClose:!1,data:{projectId:this.projectId}}).afterClosed().subscribe(e=>{e?.hasChanges&&this.reloadClasses()})}openManageTagsDialog(){this.dialog.open(Ug,{width:"800px",maxWidth:"95vw",maxHeight:"90vh",disableClose:!1,data:{projectId:this.projectId}}).afterClosed().subscribe(e=>{e?.hasChanges&&this.reloadTags()})}openManageMetadataDialog(){this.dialog.open(Wg,{width:"1000px",maxWidth:"95vw",maxHeight:"90vh",disableClose:!1,data:{projectId:this.projectId}}).afterClosed().subscribe(e=>{e?.hasChanges&&this.reloadMetadata()})}reloadClasses(){this.projectClassService.getClassesByProjectId(this.projectId).pipe(q(this.destroy$)).subscribe({next:t=>{this.availableClasses=t},error:t=>{console.error("Failed to reload classes:",t)}})}reloadTags(){this.projectTagService.getTagsByProjectId(this.projectId).pipe(q(this.destroy$)).subscribe({next:t=>{this.availableTags=t},error:t=>{console.error("Failed to reload tags:",t)}})}reloadMetadata(){this.projectMetadataService.getMetadataByProjectId(this.projectId).pipe(q(this.destroy$)).subscribe({next:t=>{this.availableMetadata=t},error:t=>{console.error("Failed to reload metadata:",t)}})}openAutoSplitDialog(){this.dialog.open(Id,{width:"1200px",maxWidth:"95vw",disableClose:!1,autoFocus:!1,data:{projectId:this.projectId}}).afterClosed().subscribe(e=>{e&&this.loadImages()})}openSnapshotCreateDialog(){this.totalElements$.pipe(rt(1)).subscribe(t=>{this.snapshotService.getSnapshotPreviewStats(this.projectId).pipe(q(this.destroy$)).subscribe({next:e=>{this.openSnapshotDialogWithStats(t,e)},error:e=>{console.error("Failed to load preview stats:",e),this.openSnapshotDialogWithStats(t,{labeled:0,unlabeled:t,noClass:0,trainCount:0,devCount:0,testCount:0,unassignedCount:0})}})})}openSnapshotDialogWithStats(t,e){this.dialog.open(Rg,{width:"520px",disableClose:!1,data:{projectId:this.projectId,totalImages:t,previewStats:e}}).afterClosed().subscribe(a=>{a&&this.snapshotService.createSnapshot({projectId:this.projectId,snapshotName:a.snapshotName,description:a.description}).pipe(q(this.destroy$)).subscribe({next:r=>{this.snackBar.open(`Snapshot "${r.name}" created successfully`,"Close",{duration:3e3,horizontalPosition:"center",verticalPosition:"bottom"})},error:r=>{let s=r.error?.message||"Failed to create snapshot";this.snackBar.open(s,"Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"bottom",panelClass:["error-snackbar"]})}})})}openSnapshotListDialog(){this.dialog.open(Ng,{width:"800px",maxWidth:"90vw",disableClose:!1,data:{projectId:this.projectId}})}navigateToSnapshotListView(){this.snapshotService.getSnapshotsForProject(this.projectId).pipe(rt(1)).subscribe({next:t=>{t&&t.length>0?this.filters$.pipe(rt(1)).subscribe(e=>{this.viewMode$.pipe(rt(1)).subscribe(i=>{this.sortMethod$.pipe(rt(1)).subscribe(a=>{this.currentPage$.pipe(rt(1)).subscribe(r=>{let s={};s.page=(r||1)-1,s.size=20,s.viewMode=i||"images",s.sortBy=a||"upload_time_desc",e&&(e.mediaStatus&&e.mediaStatus.length>0&&(s.mediaStatus=e.mediaStatus.join(",")),e.groundTruthLabels&&e.groundTruthLabels.length>0&&(s.groundTruthLabels=e.groundTruthLabels.join(",")),e.predictionLabels&&e.predictionLabels.length>0&&(s.predictionLabels=e.predictionLabels.join(",")),e.split&&e.split.length>0&&(s.split=e.split.join(",")),e.tags&&e.tags.length>0&&(s.tags=e.tags.join(",")),e.mediaName&&(s.mediaName=e.mediaName),e.labeler&&(s.labeler=e.labeler),e.mediaId&&(s.mediaId=e.mediaId),e.noClass!==void 0&&(s.noClass=e.noClass),e.predictionNoClass!==void 0&&(s.predictionNoClass=e.predictionNoClass),e.modelId?(s.modelId=e.modelId,console.log(`[navigateToSnapshotListView] \u2713 Preserving modelId in query params: ${e.modelId}`)):this.selectedModelId?(s.modelId=this.selectedModelId,console.log(`[navigateToSnapshotListView] \u2713 Using selectedModelId in query params: ${this.selectedModelId}`)):console.log("[navigateToSnapshotListView] \u26A0 No modelId to preserve!"),e.annotationType&&(s.annotationType=e.annotationType)),console.log("[navigateToSnapshotListView] Full query params:",s),this.router.navigate(["/landingai/projects",this.projectId,"snapshots"],{queryParams:s})})})})}):this.snackBar.open("No snapshots available for this project. Create a snapshot first.","Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"bottom",panelClass:["warning-snackbar"]})},error:t=>{console.error("Error checking snapshots:",t),this.snackBar.open("Failed to check snapshots. Please try again.","Close",{duration:3e3,horizontalPosition:"center",verticalPosition:"bottom"})}})}startTraining(t){if(t){this.router.navigate(["/landingai/ai-training",this.projectId]);return}this.trainingService.startTraining({projectId:this.projectId,isCustomTraining:!1}).pipe(q(this.destroy$)).subscribe({next:e=>{this.snackBar.open(`Training started successfully (ID: ${e.id}). Status: ${e.status}`,"Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"bottom"})},error:e=>{let i=e.error?.message||"Failed to start training";this.snackBar.open(i,"Close",{duration:5e3,horizontalPosition:"center",verticalPosition:"bottom",panelClass:["error-snackbar"]})}})}static{this.\u0275fac=function(e){return new(e||n)(T(_i),T(Ye),T(St),T(re),T($t),T(bi),T(Td),T(Dn),T(sa),T(Ja),T(ra),T(ke),T(Dd))}}static{this.\u0275cmp=A({type:n,selectors:[["app-image-upload-page"]],standalone:!1,decls:8,vars:11,consts:[[1,"image-upload-page"],["class","error-container",4,"ngIf"],["class","loading-container",4,"ngIf"],["class","content-area",4,"ngIf"],[1,"error-container"],["color","warn"],[1,"loading-container"],[1,"content-area"],[3,"viewModeChange","actionSelect","annotationTypeChange","modelChange","filterChange","filterClear","snapshotAction","sortChange","trainingAction","uploadClick","uploadClassifiedClick","uploadBatchZipClick","zoomChange","modelPageClick","showLabelDetailsChange","selectModeToggle","selectPage","selectAll","deselectAll","batchSetClass","batchSetTags","batchSetMetadata","batchDelete","exportDataset","exportAllDataset","viewMode","activeFilters","sortMethod","zoomLevel","annotationType","selectedModelId","availableModels","availableClasses","availableTags","availableMetadata","showLabelDetails","projectType","projectName","selectMode","selectedCount","currentPageImageCount","totalImageCount","lastSelectAction"],[1,"main-content"],[3,"imageClick","pageChange","classChange","imageSelectionToggle","currentPage","images","totalPages","totalElements","viewMode","zoomLevel","projectType","availableClasses","showLabelDetails","selectMode","selectedImageIds"]],template:function(e,i){e&1&&(l(0,"div",0),y(1,bv,5,1,"div",1),z(2,"async"),y(3,Pv,4,0,"div",2),z(4,"async"),y(5,vv,19,61,"div",3),z(6,"async"),z(7,"async"),c()),e&2&&(g(),f("ngIf",V(2,3,i.error$)),g(2),f("ngIf",V(4,5,i.loading$)),g(2),f("ngIf",!V(6,7,i.loading$)&&!V(7,9,i.error$)))},dependencies:[N,W,nt,tr,Qg,Vt],styles:[".image-upload-page[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;padding:20px;background-color:#e5f5e0}.image-upload-page[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:60px 20px;background-color:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a}.image-upload-page[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   mat-spinner[_ngcontent-%COMP%]{margin-bottom:20px}.image-upload-page[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:16px}.image-upload-page[_ngcontent-%COMP%]   .content-area[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;gap:20px}.image-upload-page[_ngcontent-%COMP%]   .content-area[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{flex:1;display:flex;gap:0;position:relative}.image-upload-page[_ngcontent-%COMP%]   .content-area[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   app-image-grid[_ngcontent-%COMP%]{flex:1}.image-upload-page[_ngcontent-%COMP%]   .content-area[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   app-filter-panel[_ngcontent-%COMP%]{position:fixed;right:0;top:0;bottom:0;z-index:1000;box-shadow:-2px 0 8px #00000026;animation:_ngcontent-%COMP%_slideIn .3s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translate(100%)}to{transform:translate(0)}}.image-upload-page[_ngcontent-%COMP%]   .content-area[_ngcontent-%COMP%]   .toolbar-placeholder[_ngcontent-%COMP%], .image-upload-page[_ngcontent-%COMP%]   .content-area[_ngcontent-%COMP%]   .image-grid-placeholder[_ngcontent-%COMP%], .image-upload-page[_ngcontent-%COMP%]   .content-area[_ngcontent-%COMP%]   .pagination-placeholder[_ngcontent-%COMP%]{padding:20px;background-color:#fff;border-radius:8px;box-shadow:0 2px 4px #0000001a;text-align:center;color:#666}.image-upload-page[_ngcontent-%COMP%]   .content-area[_ngcontent-%COMP%]   .toolbar-placeholder[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .image-upload-page[_ngcontent-%COMP%]   .content-area[_ngcontent-%COMP%]   .image-grid-placeholder[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .image-upload-page[_ngcontent-%COMP%]   .content-area[_ngcontent-%COMP%]   .pagination-placeholder[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0}.image-upload-page[_ngcontent-%COMP%]   .content-area[_ngcontent-%COMP%]   .image-grid-placeholder[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center}@media (max-width: 1024px){.image-upload-page[_ngcontent-%COMP%]{padding:16px}.image-upload-page[_ngcontent-%COMP%]   .content-area[_ngcontent-%COMP%]{gap:16px}}@media (max-width: 768px){.image-upload-page[_ngcontent-%COMP%]{padding:12px}.image-upload-page[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{padding:40px 16px}.image-upload-page[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px}.image-upload-page[_ngcontent-%COMP%]   .content-area[_ngcontent-%COMP%]{gap:12px}.image-upload-page[_ngcontent-%COMP%]   .content-area[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   app-filter-panel[_ngcontent-%COMP%]{width:100%;max-width:320px}}@media (max-width: 480px){.image-upload-page[_ngcontent-%COMP%]{padding:8px}.image-upload-page[_ngcontent-%COMP%]   .loading-container[_ngcontent-%COMP%]{padding:30px 12px;border-radius:4px}.image-upload-page[_ngcontent-%COMP%]   .content-area[_ngcontent-%COMP%]{gap:8px}.image-upload-page[_ngcontent-%COMP%]   .content-area[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]   app-filter-panel[_ngcontent-%COMP%]{width:100%;max-width:100%}.image-upload-page[_ngcontent-%COMP%]   .content-area[_ngcontent-%COMP%]   .toolbar-placeholder[_ngcontent-%COMP%], .image-upload-page[_ngcontent-%COMP%]   .content-area[_ngcontent-%COMP%]   .image-grid-placeholder[_ngcontent-%COMP%], .image-upload-page[_ngcontent-%COMP%]   .content-area[_ngcontent-%COMP%]   .pagination-placeholder[_ngcontent-%COMP%]{padding:12px;border-radius:4px}}"]})}}return n})();function Ov(n,o){if(n&1&&(l(0,"mat-error"),p(1),c()),n&2){let t=C();g(),E(" ",t.getProjectNameError()," ")}}var Jg=(()=>{class n{constructor(t,e,i){this.fb=t,this.dialogRef=e,this.data=i,this.projectForm=this.fb.group({projectName:["",[qt.required,qt.minLength(1),qt.maxLength(100),this.uniqueNameValidator.bind(this)]]})}ngOnInit(){this.data.defaultName&&this.projectForm.patchValue({projectName:this.data.defaultName})}uniqueNameValidator(t){if(!this.data.existingProjectNames||this.data.existingProjectNames.length===0)return null;let e=t.value?.trim().toLowerCase();return this.data.existingProjectNames.some(a=>a.toLowerCase()===e)?{uniqueName:{value:t.value}}:null}onSubmit(){if(this.projectForm.valid){let t={projectName:this.projectForm.value.projectName.trim()};this.dialogRef.close(t)}}onCancel(){this.dialogRef.close()}getProjectNameError(){let t=this.projectForm.get("projectName");return t?.hasError("required")?"Project name is required":t?.hasError("minlength")?"Project name must be at least 1 character":t?.hasError("maxlength")?"Project name must be 100 characters or less":t?.hasError("uniqueName")?"A project with this name already exists":""}static{this.\u0275fac=function(e){return new(e||n)(T(Ge),T(pt),T(mt))}}static{this.\u0275cmp=A({type:n,selectors:[["app-project-name-dialog"]],standalone:!1,decls:24,vars:3,consts:[[1,"project-name-dialog"],[1,"dialog-header"],["mat-icon-button","",1,"close-btn",3,"click"],[1,"dialog-description"],[3,"formGroup"],[1,"form-field"],["appearance","outline",1,"full-width"],["formControlName","projectName","matInput","","maxlength","100","placeholder","e.g., MyProject-20260211_143025","autofocus",""],[4,"ngIf"],["mat-button","",1,"cancel-btn",3,"click"],["color","primary","mat-raised-button","",1,"create-btn",3,"click","disabled"]],template:function(e,i){if(e&1&&(l(0,"div",0)(1,"div",1)(2,"h2"),p(3,"Create New Project from Snapshot"),c(),l(4,"button",2),P("click",function(){return i.onCancel()}),l(5,"mat-icon"),p(6,"close"),c()()(),l(7,"mat-dialog-content")(8,"p",3),p(9," Enter a name for the new project. All data from the selected snapshot will be copied to the new project. "),c(),l(10,"form",4)(11,"div",5)(12,"label"),p(13,"Project Name"),c(),l(14,"mat-form-field",6),k(15,"input",7),y(16,Ov,2,1,"mat-error",8),c()()()(),l(17,"mat-dialog-actions")(18,"button",9),P("click",function(){return i.onCancel()}),p(19,"Cancel"),c(),l(20,"button",10),P("click",function(){return i.onSubmit()}),l(21,"mat-icon"),p(22,"add"),c(),p(23," Create Project "),c()()()),e&2){let a;g(10),f("formGroup",i.projectForm),g(6),f("ngIf",(a=i.projectForm.get("projectName"))==null?null:a.invalid),g(4),f("disabled",!i.projectForm.valid)}},dependencies:[N,$e,Lt,Ft,Ne,We,Ue,He,Z,at,W,Mt,Se,kt,yt,ht],styles:[".project-name-dialog[_ngcontent-%COMP%]{min-width:450px;max-width:550px;display:flex;flex-direction:column;padding:24px}.project-name-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px;padding:0 0 16px;border-bottom:1px solid #e0e0e0}.project-name-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:20px;font-weight:500;color:#333}.project-name-dialog[_ngcontent-%COMP%]   .dialog-header[_ngcontent-%COMP%]   .close-btn[_ngcontent-%COMP%]{color:#666;margin:-8px -8px -8px 0}.project-name-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]{padding:0;margin:0 0 24px;min-height:150px;overflow-y:auto}.project-name-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .dialog-description[_ngcontent-%COMP%]{margin:0 0 24px;color:#666;font-size:14px;line-height:1.6}.project-name-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{margin-bottom:8px}.project-name-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:8px;font-weight:500;color:#333;font-size:14px}.project-name-dialog[_ngcontent-%COMP%]   mat-dialog-content[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%}.project-name-dialog[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:12px;padding:20px 0 0;margin:0;border-top:1px solid #e0e0e0}.project-name-dialog[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]   .cancel-btn[_ngcontent-%COMP%]{color:#666;padding:8px 20px}.project-name-dialog[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]   .create-btn[_ngcontent-%COMP%]{padding:8px 20px}.project-name-dialog[_ngcontent-%COMP%]   mat-dialog-actions[_ngcontent-%COMP%]   .create-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{margin-right:4px}"]})}}return n})();var th=()=>[];function yv(n,o){if(n&1&&(l(0,"div",23)(1,"mat-icon",24),p(2),c(),l(3,"span",25),p(4),c(),l(5,"span",26),p(6,"|"),c(),l(7,"span",27),p(8,"Snapshots"),c()()),n&2){let t=o.ngIf,e=C();g(2),E("",e.getProjectTypeIcon(t.type)," "),g(2),D(t.name)}}function wv(n,o){n&1&&k(0,"span",28)}function Sv(n,o){n&1&&(l(0,"div",29),k(1,"mat-spinner",30),l(2,"span",31),p(3,"Loading images..."),c()())}function kv(n,o){n&1&&(l(0,"div",32)(1,"mat-icon",33),p(2,"photo_library"),c(),l(3,"h3"),p(4,"No Snapshot Selected"),c(),l(5,"p"),p(6,"Select a snapshot from the sidebar to view its images."),c()())}function Iv(n,o){n&1&&(l(0,"div",32)(1,"mat-icon",33),p(2,"image_not_supported"),c(),l(3,"h3"),p(4,"No Images Found"),c(),l(5,"p"),p(6,"This snapshot contains no images matching your filters."),c()())}function Tv(n,o){if(n&1){let t=j();l(0,"app-image-grid",34),z(1,"async"),z(2,"async"),z(3,"async"),z(4,"async"),z(5,"async"),P("imageClick",function(i){M(t);let a=C();return b(a.onImageClick(i))})("pageChange",function(i){M(t);let a=C();return b(a.onPageChanged(i))}),c()}if(n&2){let t,e=C();f("availableClasses",e.availableClasses)("currentPage",V(1,10,e.currentPage$)||1)("images",V(2,12,e.images$)||Le(20,th))("projectType",((t=V(3,14,e.project$))==null?null:t.type)||"Object Detection")("selectMode",!1)("showLabelDetails",!0)("totalElements",V(4,16,e.totalElements$)||0)("totalPages",V(5,18,e.totalPages$)||1)("viewMode","images")("zoomLevel",3)}}function Dv(n,o){if(n&1){let t=j();l(0,"div",35)(1,"mat-icon"),p(2,"error"),c(),l(3,"span"),p(4),c(),l(5,"button",36),P("click",function(){M(t);let i=C();return b(i.onClearError())}),l(6,"mat-icon"),p(7,"close"),c()()()}if(n&2){let t=o.ngIf;g(4),D(t)}}function Ev(n,o){n&1&&(l(0,"div",37),k(1,"mat-spinner",38),l(2,"span",39),p(3,"Processing..."),c()())}var nr=(()=>{class n{constructor(t,e,i,a,r,s,d,m){this.route=t,this.router=e,this.store=i,this.actions$=a,this.dialog=r,this.snackBar=s,this.confirmDialogService=d,this.snapshotService=m,this.availableClasses=[],this.availableTags=[],this.availableMetadata=[],this.showFilterPanel=!1,this.returnQueryParams={},this.destroy$=new Ct,this.snapshots$=this.store.select(Mc),this.selectedSnapshotId$=this.store.select(bc),this.selectedSnapshot$=this.store.select(Pc),this.images$=this.store.select(vc),this.pagination$=this.store.select(Oc),this.filters$=this.store.select(kc),this.sortCriteria$=this.store.select(Ic),this.loading$=this.store.select(Tc),this.sidebarCollapsed$=this.store.select(Ac),this.error$=this.store.select(Fc),this.imagesLoading$=this.store.select(Ec),this.snapshotsLoading$=this.store.select(Dc),this.operationLoading$=this.store.select(jc),this.currentPage$=this.store.select(yc),this.totalPages$=this.store.select(Sc),this.totalElements$=this.store.select(wc)}ngOnInit(){this.store.dispatch(wn({viewAll:!0})),this.route.params.pipe(q(this.destroy$),ce(t=>{this.projectId=+t.id,this.project$=this.store.select(Do(this.projectId)),this.store.dispatch(rc({projectId:this.projectId}))})).subscribe(),this.route.queryParams.pipe(q(this.destroy$),rt(1)).subscribe(t=>{this.returnQueryParams=_t({},t),console.log("Stored query params for return navigation:",this.returnQueryParams)}),this.snapshots$.pipe(q(this.destroy$),ce(t=>{t.length>0&&this.selectedSnapshotId$.pipe(rt(1)).subscribe(e=>{e===null&&this.store.dispatch(Cr({snapshotId:t[0].id}))})})).subscribe(),this.selectedSnapshotId$.pipe(q(this.destroy$),ce(t=>{t&&this.loadFilterOptions()})).subscribe()}ngOnDestroy(){this.store.dispatch(Cc()),this.destroy$.next(),this.destroy$.complete()}onSnapshotSelected(t){this.store.dispatch(Cr({snapshotId:t}))}onFilterApplied(t){console.log("onFilterApplied called with filters:",t);let e={mediaStatus:t.mediaStatus,groundTruthLabels:t.groundTruthLabels,split:t.split,tags:t.tags,mediaName:t.mediaName,labeler:t.labeler,mediaId:t.mediaId,metadata:t.metadata,noClass:t.noClass};console.log("Dispatching applyFilters action with:",e),this.store.dispatch(sc({filters:e}))}onFilterClear(){this.store.dispatch(lc())}onSortApplied(t){this.store.dispatch(cc({sortCriteria:t}))}onPageChanged(t){this.store.dispatch(dc({page:t-1}))}onManageAction(t){this.selectedSnapshotId$.pipe(rt(1)).subscribe(e=>{if(!e){this.snackBar.open("Please select a snapshot first","Close",{duration:3e3});return}switch(t){case"create_project":this.handleCreateProject(e);break;case"revert":this.handleRevert(e);break;case"download":this.handleDownload(e);break;case"delete":this.handleDelete(e);break}})}onToggleSidebar(){this.store.dispatch(_c())}onToggleFilterPanel(){this.filters$.pipe(rt(1)).subscribe(t=>{let i={activeFilters:{mediaStatus:t.mediaStatus,groundTruthLabels:t.groundTruthLabels,split:t.split,tags:t.tags,mediaName:t.mediaName,labeler:t.labeler,mediaId:t.mediaId,metadata:t.metadata,noClass:t.noClass},availableClasses:this.availableClasses,availableTags:this.availableTags,availableMetadata:this.availableMetadata,selectedModelId:void 0,hidePredictionLabels:!0};console.log("Opening filter dialog with data:",{classesCount:this.availableClasses.length,tagsCount:this.availableTags.length,metadataCount:this.availableMetadata.length,classes:this.availableClasses}),this.dialog.open(er,{width:"650px",maxHeight:"85vh",data:i,panelClass:"filter-dialog-panel"}).afterClosed().subscribe(r=>{console.log("Filter dialog closed with result:",r),r?r.cleared?(console.log("Filters cleared"),this.onFilterClear()):r.filters&&(console.log("Applying filters:",r.filters),this.onFilterApplied(r.filters)):console.log("Dialog closed without result (cancelled)")})})}onImageClick(t){console.log("Image clicked:",t)}onBackToProject(){this.router.navigate(["/landingai/projects",this.projectId],{queryParams:this.returnQueryParams})}hasActiveFilters(t){return t?!!(t.mediaStatus&&t.mediaStatus.length>0||t.groundTruthLabels&&t.groundTruthLabels.length>0||t.split&&t.split.length>0||t.tags&&t.tags.length>0||t.mediaName&&t.mediaName.trim().length>0||t.labeler&&t.labeler.trim().length>0||t.mediaId&&t.mediaId.trim().length>0||t.metadata&&Object.keys(t.metadata).length>0||t.noClass===!0):!1}getProjectTypeIcon(t){switch(t){case"Classification":return"category";case"Object Detection":return"crop_free";case"Segmentation":return"polyline";default:return"image"}}onClearError(){this.store.dispatch(xc())}loadFilterOptions(){this.selectedSnapshotId$.pipe(rt(1)).subscribe(t=>{if(!t){console.warn("No snapshot selected, cannot load filter options");return}this.snapshotService.getSnapshotClasses(t).pipe(q(this.destroy$)).subscribe({next:e=>{this.availableClasses=e,console.log("Loaded snapshot classes:",this.availableClasses)},error:e=>{console.error("Failed to load snapshot classes:",e)}}),this.snapshotService.getSnapshotTags(t).pipe(q(this.destroy$)).subscribe({next:e=>{this.availableTags=e,console.log("Loaded snapshot tags:",this.availableTags)},error:e=>{console.error("Failed to load snapshot tags:",e)}}),this.snapshotService.getSnapshotMetadata(t).pipe(q(this.destroy$)).subscribe({next:e=>{this.availableMetadata=e},error:e=>{console.error("Failed to load snapshot metadata:",e)}})})}handleCreateProject(t){this.store.select(ko).pipe(rt(1)).subscribe(e=>{let i=e.map(a=>a.name);this.project$.pipe(rt(1)).subscribe(a=>{let r=new Date,s=r.getFullYear().toString()+(r.getMonth()+1).toString().padStart(2,"0")+r.getDate().toString().padStart(2,"0")+"_"+r.getHours().toString().padStart(2,"0")+r.getMinutes().toString().padStart(2,"0")+r.getSeconds().toString().padStart(2,"0"),m={defaultName:a?`${a.name}-${s}`:`NewProject-${s}`,existingProjectNames:i};this.dialog.open(Jg,{width:"550px",minHeight:"350px",maxHeight:"90vh",data:m,disableClose:!1,autoFocus:!0}).afterClosed().subscribe(u=>{u&&u.projectName&&this.store.dispatch(pc({snapshotId:t,projectName:u.projectName}))})})})}handleRevert(t){this.selectedSnapshot$.pipe(rt(1)).subscribe(e=>{let i=e?.name||"this snapshot";this.confirmDialogService.openDialog("Revert to Snapshot?",`This will replace your current project data with the snapshot '${i}'. Your current data will be backed up automatically. Do you want to continue?`,"Revert","Cancel").afterClosed().subscribe(r=>{r&&this.store.dispatch(mc({snapshotId:t,projectId:this.projectId}))})})}handleDownload(t){this.selectedSnapshot$.pipe(rt(1)).subscribe(e=>{let i=e?.name||`snapshot-${t}`,a=this.dialog.open(_o,{width:"450px",disableClose:!0,data:{title:"Downloading Snapshot",message:`Preparing snapshot "${i}" for download...`}});this.store.dispatch(gc({snapshotId:t})),this.actions$.pipe(Ci(hc,fc),rt(1)).subscribe(()=>{a.close()})})}handleDelete(t){this.selectedSnapshot$.pipe(rt(1)).subscribe(e=>{let i=e?.name||"this snapshot";this.confirmDialogService.openDialog("Delete Snapshot?",`Are you sure you want to delete '${i}'? This action cannot be undone.`,"Delete","Cancel").afterClosed().subscribe(r=>{r&&this.store.dispatch(uc({snapshotId:t}))})})}static{this.\u0275fac=function(e){return new(e||n)(T(_i),T(Ye),T(St),T(wo),T(re),T($t),T(ld),T(bi))}}static{this.\u0275cmp=A({type:n,selectors:[["app-snapshot-list-view"]],standalone:!1,decls:88,vars:82,consts:[["sortMenu","matMenu"],[1,"snapshot-list-view"],[1,"header"],[1,"header-left"],["mat-icon-button","","matTooltip","Back to Project",3,"click"],["class","project-info",4,"ngIf"],[1,"header-right"],["mat-raised-button","",1,"filter-btn",3,"click"],[1,"icon-wrapper"],["class","filter-badge",4,"ngIf"],[1,"btn-text"],["mat-raised-button","",1,"sort-btn",3,"matMenuTriggerFor"],[3,"manageAction","loading","selectedSnapshot"],["mat-menu-item","",3,"click"],[1,"content-area"],[1,"main-content"],[1,"image-grid-container"],["class","loading-overlay",4,"ngIf"],["class","empty-state",4,"ngIf"],[3,"availableClasses","currentPage","images","projectType","selectMode","showLabelDetails","totalElements","totalPages","viewMode","zoomLevel","imageClick","pageChange",4,"ngIf"],[3,"snapshotSelected","toggleCollapse","collapsed","loading","selectedId","snapshots"],["class","error-banner",4,"ngIf"],["class","operation-overlay",4,"ngIf"],[1,"project-info"],[1,"project-type-icon"],[1,"project-name"],[1,"separator"],[1,"view-title"],[1,"filter-badge"],[1,"loading-overlay"],["diameter","48"],[1,"loading-text"],[1,"empty-state"],[1,"empty-icon"],[3,"imageClick","pageChange","availableClasses","currentPage","images","projectType","selectMode","showLabelDetails","totalElements","totalPages","viewMode","zoomLevel"],[1,"error-banner"],["mat-icon-button","",3,"click"],[1,"operation-overlay"],["diameter","64"],[1,"operation-text"]],template:function(e,i){if(e&1){let a=j();l(0,"div",1)(1,"div",2)(2,"div",3)(3,"button",4),P("click",function(){return M(a),b(i.onBackToProject())}),l(4,"mat-icon"),p(5,"arrow_back"),c()(),y(6,yv,9,2,"div",5),z(7,"async"),c(),l(8,"div",6)(9,"button",7),z(10,"async"),P("click",function(){return M(a),b(i.onToggleFilterPanel())}),l(11,"div",8)(12,"mat-icon"),p(13,"filter_list"),c(),y(14,wv,1,0,"span",9),z(15,"async"),c(),l(16,"span",10),p(17,"Filters"),c()(),l(18,"button",11)(19,"mat-icon"),p(20,"sort"),c(),l(21,"span",10),p(22,"Sort"),c()(),l(23,"app-snapshot-toolbar",12),z(24,"async"),z(25,"async"),P("manageAction",function(s){return M(a),b(i.onManageAction(s))}),c()()(),l(26,"mat-menu",null,0)(28,"button",13),z(29,"async"),P("click",function(){return M(a),b(i.onSortApplied("upload_time_desc"))}),l(30,"mat-icon"),p(31,"arrow_downward"),c(),l(32,"span"),p(33,"Upload Time (Newest)"),c()(),l(34,"button",13),z(35,"async"),P("click",function(){return M(a),b(i.onSortApplied("upload_time_asc"))}),l(36,"mat-icon"),p(37,"arrow_upward"),c(),l(38,"span"),p(39,"Upload Time (Oldest)"),c()(),l(40,"button",13),z(41,"async"),P("click",function(){return M(a),b(i.onSortApplied("label_time_desc"))}),l(42,"mat-icon"),p(43,"arrow_downward"),c(),l(44,"span"),p(45,"Label Time (Newest)"),c()(),l(46,"button",13),z(47,"async"),P("click",function(){return M(a),b(i.onSortApplied("label_time_asc"))}),l(48,"mat-icon"),p(49,"arrow_upward"),c(),l(50,"span"),p(51,"Label Time (Oldest)"),c()(),l(52,"button",13),z(53,"async"),P("click",function(){return M(a),b(i.onSortApplied("name_asc"))}),l(54,"mat-icon"),p(55,"sort_by_alpha"),c(),l(56,"span"),p(57,"Name (A-Z)"),c()(),l(58,"button",13),z(59,"async"),P("click",function(){return M(a),b(i.onSortApplied("name_desc"))}),l(60,"mat-icon"),p(61,"sort_by_alpha"),c(),l(62,"span"),p(63,"Name (Z-A)"),c()()(),l(64,"div",14),z(65,"async"),l(66,"div",15)(67,"div",16),y(68,Sv,4,0,"div",17),z(69,"async"),y(70,kv,7,0,"div",18),z(71,"async"),z(72,"async"),y(73,Iv,7,0,"div",18),z(74,"async"),z(75,"async"),z(76,"async"),y(77,Tv,6,21,"app-image-grid",19),z(78,"async"),c()(),l(79,"app-snapshot-sidebar",20),z(80,"async"),z(81,"async"),z(82,"async"),z(83,"async"),P("snapshotSelected",function(s){return M(a),b(i.onSnapshotSelected(s))})("toggleCollapse",function(){return M(a),b(i.onToggleSidebar())}),c()(),y(84,Dv,8,1,"div",21),z(85,"async"),y(86,Ev,4,0,"div",22),z(87,"async"),c()}if(e&2){let a,r,s=gt(27);g(6),f("ngIf",V(7,31,i.project$)),g(3),$("has-active-filters",i.hasActiveFilters(V(10,33,i.filters$))),g(5),f("ngIf",i.hasActiveFilters(V(15,35,i.filters$))),g(4),f("matMenuTriggerFor",s),g(5),f("loading",V(24,37,i.operationLoading$)||!1)("selectedSnapshot",V(25,39,i.selectedSnapshot$)),g(5),$("active",V(29,41,i.sortCriteria$)==="upload_time_desc"),g(6),$("active",V(35,43,i.sortCriteria$)==="upload_time_asc"),g(6),$("active",V(41,45,i.sortCriteria$)==="label_time_desc"),g(6),$("active",V(47,47,i.sortCriteria$)==="label_time_asc"),g(6),$("active",V(53,49,i.sortCriteria$)==="name_asc"),g(6),$("active",V(59,51,i.sortCriteria$)==="name_desc"),g(6),$("sidebar-collapsed",V(65,53,i.sidebarCollapsed$)),g(4),f("ngIf",V(69,55,i.imagesLoading$)),g(2),f("ngIf",!V(71,57,i.selectedSnapshotId$)&&!V(72,59,i.snapshotsLoading$)),g(3),f("ngIf",V(74,61,i.selectedSnapshotId$)&&!V(75,63,i.imagesLoading$)&&((a=V(76,65,i.images$))==null?null:a.length)===0),g(4),f("ngIf",(r=V(78,67,i.images$))==null?null:r.length),g(2),f("collapsed",V(80,69,i.sidebarCollapsed$)||!1)("loading",V(81,71,i.snapshotsLoading$)||!1)("selectedId",V(82,73,i.selectedSnapshotId$))("snapshots",V(83,75,i.snapshots$)||Le(81,th)),g(5),f("ngIf",V(85,77,i.error$)),g(2),f("ngIf",V(87,79,i.operationLoading$))}},styles:[".snapshot-list-view[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;background-color:#e5f5e0;position:relative}.header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:12px 16px;background-color:#f5f5f5;border-bottom:1px solid #e0e0e0;min-height:56px}.header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%], .header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px}.header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]   .project-type-icon[_ngcontent-%COMP%]{color:#666;font-size:20px;width:20px;height:20px}.header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]   .project-name[_ngcontent-%COMP%]{font-weight:500;font-size:16px;color:#333}.header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]   .separator[_ngcontent-%COMP%]{color:#ccc;margin:0 4px}.header[_ngcontent-%COMP%]   .header-left[_ngcontent-%COMP%]   .project-info[_ngcontent-%COMP%]   .view-title[_ngcontent-%COMP%]{font-size:16px;color:#666}.header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]{display:inline-flex!important;flex-direction:row!important;align-items:center!important;justify-content:center!important;gap:6px;padding:0 16px!important;height:36px!important;min-width:110px!important;max-width:none!important;background-color:#ff9800;color:#fff;white-space:nowrap!important;line-height:36px}.header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]:hover{background-color:#f57c00}.header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .filter-btn.active[_ngcontent-%COMP%]{background-color:#fb8c00}.header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .filter-btn.has-active-filters[_ngcontent-%COMP%]{background-color:#f57c00;box-shadow:0 0 0 2px #ff9800}.header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .filter-btn.has-active-filters[_ngcontent-%COMP%]:hover{background-color:#e65100}.header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]{position:relative;display:inline-flex;align-items:center;justify-content:center;flex-shrink:0}.header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px!important;width:18px!important;height:18px!important;line-height:18px!important}.header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]   .icon-wrapper[_ngcontent-%COMP%]   .filter-badge[_ngcontent-%COMP%]{position:absolute;top:-4px;right:-4px;width:8px;height:8px;background-color:#f44336;border-radius:50%;border:2px solid white;box-shadow:0 1px 3px #0000004d}.header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%]{font-size:14px;font-weight:500;flex-shrink:0;display:inline-block}.header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]     .mat-mdc-button-touch-target{height:36px!important}.header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]     .mdc-button__label{display:inline-flex!important;flex-direction:row!important;align-items:center!important;gap:6px!important;white-space:nowrap!important}.header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .filter-btn[_ngcontent-%COMP%]     .mat-mdc-button-persistent-ripple{border-radius:4px}.header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .sort-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;padding:0 12px;height:36px;background-color:#2196f3;color:#fff}.header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .sort-btn[_ngcontent-%COMP%]:hover{background-color:#1976d2}.header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .sort-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]   .sort-btn[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%]{font-size:14px}.content-area[_ngcontent-%COMP%]{display:flex;flex:1;overflow:hidden;position:relative}.content-area.sidebar-collapsed[_ngcontent-%COMP%]   .main-content[_ngcontent-%COMP%]{flex:1}.main-content[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow:hidden;min-width:0}.filter-panel-container[_ngcontent-%COMP%]{background-color:#fff;border-bottom:1px solid #e0e0e0;max-height:400px;overflow-y:auto}.image-grid-container[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:16px;position:relative}.loading-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:#fffc;z-index:10}.loading-overlay[_ngcontent-%COMP%]   .loading-text[_ngcontent-%COMP%]{margin-top:16px;color:#666;font-size:14px}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100%;min-height:300px;color:#666;text-align:center}.empty-state[_ngcontent-%COMP%]   .empty-icon[_ngcontent-%COMP%]{font-size:64px;width:64px;height:64px;color:#ccc;margin-bottom:16px}.empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 8px;font-size:18px;font-weight:500;color:#333}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px;color:#666}.error-banner[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;padding:12px 16px;background-color:#ffebee;color:#c62828;border-top:1px solid #ef9a9a}.error-banner[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#c62828}.error-banner[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{flex:1}.error-banner[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#c62828}.operation-overlay[_ngcontent-%COMP%]{position:absolute;inset:0;display:flex;flex-direction:column;justify-content:center;align-items:center;background-color:#00000080;z-index:100}.operation-overlay[_ngcontent-%COMP%]   .operation-text[_ngcontent-%COMP%]{margin-top:16px;color:#fff;font-size:16px;font-weight:500}@media (max-width: 1200px){.header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]{gap:8px}}@media (max-width: 768px){.header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:12px}.header[_ngcontent-%COMP%]   .header-right[_ngcontent-%COMP%]{width:100%;justify-content:flex-end}}"]})}}return n})();var rn=(()=>{class n{constructor(t,e,i){this.authorizationService=t,this.store=e,this.router=i}canActivate(){return Yn([this.store.select(ml),this.store.select(So),this.store.select(gl)]).pipe(Gs(([t,e,i])=>!!t?.wbi&&!!e&&i.length>0),rt(1),Gn(([,t])=>{let e=t.id;if(this.authorizationService.doesCurrentUserHaveRoleForCurrentLocation(0,vi.ADMINISTRATOR_SYSTEM))return!0;let a=this.authorizationService.getLinkedLocationAcronymsForRole(vi.ADC_ENGINEER);return a.has("*")||a.has(t.acronym)||a.has(t.sapCode)?!0:(this.router.navigate(["/"]),!1)}))}static{this.\u0275fac=function(e){return new(e||n)(Ht(bo),Ht(St),Ht(Ye))}}static{this.\u0275prov=ye({token:n,factory:n.\u0275fac,providedIn:"root"})}}return n})();var jv=[{path:"",redirectTo:"projects",pathMatch:"full"},{path:"projects",component:Rd,canActivate:[rn]},{path:"projects/create",component:Bd,canActivate:[rn]},{path:"projects/:id",component:Kg,canActivate:[rn]},{path:"projects/:id/snapshots",component:nr,canActivate:[rn]},{path:"model-params",canActivate:[rn],loadChildren:()=>import("./chunk-EI734FTJ.js").then(n=>n.ModelParamModule)},{path:"labelling",canActivate:[rn],loadChildren:()=>import("./chunk-2SO3AGLZ.js").then(n=>n.LabellingModule)},{path:"ai-training",canActivate:[rn],loadChildren:()=>import("./chunk-FODWO7FI.js").then(n=>n.AiTrainingModule)},{path:"model/:projectId",component:Ns,canActivate:[rn]},{path:"model/project/:projectId",component:Ns,canActivate:[rn]}],eh=(()=>{class n{static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275mod=fe({type:n})}static{this.\u0275inj=he({imports:[Wi.forChild(jv),Wi]})}}return n})();var nh=(()=>{class n{static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275mod=fe({type:n})}static{this.\u0275inj=he({imports:[Cn,vn,On,xn,Pn,fi,ui,bn,vo,Mn,Qo,pi,wi,di,pl.forFeature("modelDetail",$l),wl.forFeature([td])]})}}return n})();var ih=(()=>{class n{static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275mod=fe({type:n})}static{this.\u0275inj=he({imports:[Cn,vn,On,pi,xn,Pn,Mn,wi,vo,kd,bn,di]})}}return n})();var oh=(()=>{class n{static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275mod=fe({type:n})}static{this.\u0275inj=he({imports:[Cn,vn,On,Wi,Zo,ui,fi,xn,Pn,ea,ta,Ml,bn,Ko,od,rd,Mn,ia,nh,ih]})}}return n})();function Fv(n,o){n&1&&(l(0,"div",8),k(1,"mat-spinner",9),c())}function Av(n,o){n&1&&(l(0,"span",10),p(1," Select a snapshot to enable actions "),c())}var ah=(()=>{class n{constructor(){this.selectedSnapshot=null,this.loading=!1,this.manageAction=new H}onUseSnapshot(t){this.isDisabled()||this.manageAction.emit(t)}onManageSnapshot(t){this.isDisabled()||this.manageAction.emit(t)}isDisabled(){return!this.selectedSnapshot||this.loading}getSelectedSnapshotName(){return this.selectedSnapshot?.name||""}hasSelectedSnapshot(){return this.selectedSnapshot!==null}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=A({type:n,selectors:[["app-snapshot-toolbar"]],inputs:{selectedSnapshot:"selectedSnapshot",loading:"loading"},outputs:{manageAction:"manageAction"},standalone:!1,decls:32,vars:5,consts:[["manageMenu","matMenu"],[1,"snapshot-toolbar"],["mat-raised-button","","matTooltip","Manage this snapshot",1,"manage-btn",3,"matMenuTriggerFor","disabled","matTooltipDisabled"],[1,"btn-text"],["mat-menu-item","",3,"click"],["mat-menu-item","",1,"delete-action",3,"click"],["class","loading-indicator",4,"ngIf"],["class","no-selection-hint",4,"ngIf"],[1,"loading-indicator"],["diameter","24"],[1,"no-selection-hint"]],template:function(e,i){if(e&1){let a=j();l(0,"div",1)(1,"button",2)(2,"mat-icon"),p(3,"settings"),c(),l(4,"span",3),p(5,"Manage"),c()(),l(6,"mat-menu",null,0)(8,"button",4),P("click",function(){return M(a),b(i.onUseSnapshot("create_project"))}),l(9,"mat-icon"),p(10,"add_box"),c(),l(11,"span"),p(12,"Create new project with this snapshot data"),c()(),l(13,"button",4),P("click",function(){return M(a),b(i.onUseSnapshot("revert"))}),l(14,"mat-icon"),p(15,"restore"),c(),l(16,"span"),p(17,"Revert to this snapshot"),c()(),k(18,"mat-divider"),l(19,"button",4),P("click",function(){return M(a),b(i.onManageSnapshot("download"))}),l(20,"mat-icon"),p(21,"download"),c(),l(22,"span"),p(23,"Download snapshot"),c()(),k(24,"mat-divider"),l(25,"button",5),P("click",function(){return M(a),b(i.onManageSnapshot("delete"))}),l(26,"mat-icon"),p(27,"delete"),c(),l(28,"span"),p(29,"Delete snapshot"),c()()(),y(30,Fv,2,0,"div",6)(31,Av,2,0,"span",7),c()}if(e&2){let a=gt(7);g(),f("matMenuTriggerFor",a)("disabled",i.isDisabled())("matTooltipDisabled",!i.isDisabled()),g(29),f("ngIf",i.loading),g(),f("ngIf",!i.hasSelectedSnapshot()&&!i.loading)}},dependencies:[N,Z,W,nt,jt,Xe,qe,Ze,na],styles:[".snapshot-toolbar[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px}.snapshot-toolbar[_ngcontent-%COMP%]   .use-btn[_ngcontent-%COMP%], .snapshot-toolbar[_ngcontent-%COMP%]   .manage-btn[_ngcontent-%COMP%]{display:flex;align-items:center;gap:4px;padding:0 12px;height:36px;font-size:14px;font-weight:500}.snapshot-toolbar[_ngcontent-%COMP%]   .use-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .snapshot-toolbar[_ngcontent-%COMP%]   .manage-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:18px;width:18px;height:18px}.snapshot-toolbar[_ngcontent-%COMP%]   .use-btn[_ngcontent-%COMP%]   .dropdown-icon[_ngcontent-%COMP%], .snapshot-toolbar[_ngcontent-%COMP%]   .manage-btn[_ngcontent-%COMP%]   .dropdown-icon[_ngcontent-%COMP%]{margin-left:2px}.snapshot-toolbar[_ngcontent-%COMP%]   .use-btn[_ngcontent-%COMP%]:disabled, .snapshot-toolbar[_ngcontent-%COMP%]   .manage-btn[_ngcontent-%COMP%]:disabled{opacity:.5;cursor:not-allowed}.snapshot-toolbar[_ngcontent-%COMP%]   .use-btn[_ngcontent-%COMP%]{background-color:#1976d2;color:#fff}.snapshot-toolbar[_ngcontent-%COMP%]   .use-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#1565c0}.snapshot-toolbar[_ngcontent-%COMP%]   .use-btn[_ngcontent-%COMP%]:disabled{background-color:#90caf9}.snapshot-toolbar[_ngcontent-%COMP%]   .manage-btn[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff}.snapshot-toolbar[_ngcontent-%COMP%]   .manage-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#388e3c}.snapshot-toolbar[_ngcontent-%COMP%]   .manage-btn[_ngcontent-%COMP%]:disabled{background-color:#a5d6a7}.snapshot-toolbar[_ngcontent-%COMP%]   .loading-indicator[_ngcontent-%COMP%]{display:flex;align-items:center;margin-left:8px}.snapshot-toolbar[_ngcontent-%COMP%]   .no-selection-hint[_ngcontent-%COMP%]{font-size:12px;color:#757575;font-style:italic;margin-left:8px}  .mat-mdc-menu-panel .mat-mdc-menu-item{display:flex;align-items:center;gap:8px;min-height:40px}  .mat-mdc-menu-panel .mat-mdc-menu-item mat-icon{margin-right:8px;font-size:20px;width:20px;height:20px;color:#616161}  .mat-mdc-menu-panel .mat-mdc-menu-item span{font-size:14px}  .mat-mdc-menu-panel .mat-mdc-menu-item:hover{background-color:#f5f5f5}  .mat-mdc-menu-panel .delete-action{color:#c62828!important}  .mat-mdc-menu-panel .delete-action mat-icon{color:#c62828!important}  .mat-mdc-menu-panel .delete-action:hover{background-color:#ffebee!important}  .mat-mdc-menu-panel mat-divider{margin:4px 0}@media (max-width: 768px){.snapshot-toolbar[_ngcontent-%COMP%]{gap:8px}.snapshot-toolbar[_ngcontent-%COMP%]   .use-btn[_ngcontent-%COMP%], .snapshot-toolbar[_ngcontent-%COMP%]   .manage-btn[_ngcontent-%COMP%]{padding:0 8px}.snapshot-toolbar[_ngcontent-%COMP%]   .use-btn[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%], .snapshot-toolbar[_ngcontent-%COMP%]   .manage-btn[_ngcontent-%COMP%]   .btn-text[_ngcontent-%COMP%], .snapshot-toolbar[_ngcontent-%COMP%]   .no-selection-hint[_ngcontent-%COMP%]{display:none}}@media (max-width: 480px){.snapshot-toolbar[_ngcontent-%COMP%]{gap:4px}.snapshot-toolbar[_ngcontent-%COMP%]   .use-btn[_ngcontent-%COMP%], .snapshot-toolbar[_ngcontent-%COMP%]   .manage-btn[_ngcontent-%COMP%]{padding:0 6px;height:32px}.snapshot-toolbar[_ngcontent-%COMP%]   .use-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%], .snapshot-toolbar[_ngcontent-%COMP%]   .manage-btn[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:16px;width:16px;height:16px}}"]})}}return n})();function zv(n,o){if(n&1&&(l(0,"div",4)(1,"mat-icon",5),p(2,"tag"),c(),l(3,"span"),p(4),c()()),n&2){let t=C();g(4),E("ID: ",t.snapshot.id,"")}}function Vv(n,o){if(n&1&&(l(0,"div",4)(1,"mat-icon",5),p(2,"calendar_today"),c(),l(3,"span"),p(4),c()()),n&2){let t=C();g(4),D(t.formatDate(t.snapshot.createdAt))}}function Lv(n,o){if(n&1&&(l(0,"div",4)(1,"mat-icon",5),p(2,"person"),c(),l(3,"span"),p(4),c()()),n&2){let t=C();g(4),D(t.snapshot.createdBy)}}function Rv(n,o){if(n&1&&(l(0,"div",4)(1,"mat-icon",5),p(2,"category"),c(),l(3,"span"),p(4),c()()),n&2){let t=C();g(4),E("",t.snapshot.classCount," classes")}}var rh=(()=>{class n{constructor(){this.selected=!1,this.clicked=new H}onClick(){this.snapshot?.id&&this.clicked.emit(this.snapshot.id)}onKeydown(t){(t.key==="Enter"||t.key===" ")&&(t.preventDefault(),this.onClick())}formatDate(t){return t?new Date(t).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):""}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=A({type:n,selectors:[["app-snapshot-card"]],inputs:{snapshot:"snapshot",selected:"selected"},outputs:{clicked:"clicked"},standalone:!1,decls:13,vars:11,consts:[["role","option","tabindex","0",1,"snapshot-card",3,"click","keydown"],[1,"snapshot-name",3,"title"],[1,"snapshot-metadata"],["class","metadata-item",4,"ngIf"],[1,"metadata-item"],["aria-hidden","true"]],template:function(e,i){e&1&&(l(0,"div",0),P("click",function(){return i.onClick()})("keydown",function(r){return i.onKeydown(r)}),l(1,"div",1),p(2),c(),l(3,"div",2),y(4,zv,5,1,"div",3)(5,Vv,5,1,"div",3)(6,Lv,5,1,"div",3),l(7,"div",4)(8,"mat-icon",5),p(9,"image"),c(),l(10,"span"),p(11),c()(),y(12,Rv,5,1,"div",3),c()()),e&2&&($("selected",i.selected),et("aria-label","Select snapshot "+i.snapshot.name)("aria-selected",i.selected),g(),f("title",i.snapshot.name),g(),E(" ",i.snapshot.name," "),g(2),f("ngIf",i.snapshot.id),g(),f("ngIf",i.snapshot.createdAt),g(),f("ngIf",i.snapshot.createdBy),g(5),E("",i.snapshot.imageCount||0," images"),g(),f("ngIf",i.snapshot.classCount!==void 0&&i.snapshot.classCount!==null))},dependencies:[N,W],styles:[".snapshot-card[_ngcontent-%COMP%]{padding:12px;border:1px solid #e0e0e0;border-radius:8px;cursor:pointer;background-color:#fff;transition:all .2s ease}.snapshot-card[_ngcontent-%COMP%]:hover{background-color:#f5f5f5;border-color:#bdbdbd;box-shadow:0 2px 4px #00000014}.snapshot-card[_ngcontent-%COMP%]:focus{outline:2px solid #1976d2;outline-offset:2px}.snapshot-card[_ngcontent-%COMP%]:focus:not(:focus-visible){outline:none}.snapshot-card[_ngcontent-%COMP%]:focus-visible{outline:2px solid #1976d2;outline-offset:2px}.snapshot-card.selected[_ngcontent-%COMP%]{background-color:#bbdefb;border-color:#1976d2;box-shadow:0 2px 4px #1976d233}.snapshot-card.selected[_ngcontent-%COMP%]:hover{background-color:#90caf9}.snapshot-card.selected[_ngcontent-%COMP%]   .snapshot-name[_ngcontent-%COMP%]{color:#1565c0}.snapshot-name[_ngcontent-%COMP%]{font-weight:500;font-size:14px;color:#333;margin-bottom:8px;word-break:break-word;line-height:1.4;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical}.snapshot-metadata[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:4px}.metadata-item[_ngcontent-%COMP%]{display:flex;align-items:center;gap:6px;font-size:12px;color:#666;line-height:1.4}.metadata-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:14px;width:14px;height:14px;color:#999;flex-shrink:0}.metadata-item[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}@media (max-width: 768px){.snapshot-card[_ngcontent-%COMP%]{padding:10px}.snapshot-name[_ngcontent-%COMP%]{font-size:13px}.metadata-item[_ngcontent-%COMP%]{font-size:11px}.metadata-item[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:12px;width:12px;height:12px}}"]})}}return n})();function Nv(n,o){n&1&&(l(0,"div",7),k(1,"mat-spinner",8),l(2,"span"),p(3,"Loading snapshots..."),c()())}function $v(n,o){n&1&&(l(0,"div",9)(1,"mat-icon"),p(2,"photo_camera"),c(),l(3,"p"),p(4,"No snapshots yet"),c()())}function Uv(n,o){if(n&1){let t=j();l(0,"app-snapshot-card",12),P("clicked",function(i){M(t);let a=C(2);return b(a.selectSnapshot(i))}),c()}if(n&2){let t=o.$implicit,e=C(2);f("snapshot",t)("selected",e.isSelected(t.id))}}function Hv(n,o){if(n&1&&(l(0,"div",10),y(1,Uv,1,2,"app-snapshot-card",11),c()),n&2){let t=C();g(),f("ngForOf",t.snapshots)}}var sh=(()=>{class n{constructor(){this.snapshots=[],this.selectedId=null,this.collapsed=!1,this.loading=!1,this.snapshotSelected=new H,this.toggleCollapse=new H}selectSnapshot(t){this.snapshotSelected.emit(t)}onToggleCollapse(){this.toggleCollapse.emit()}isSelected(t){return this.selectedId===t}static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275cmp=A({type:n,selectors:[["app-snapshot-sidebar"]],inputs:{snapshots:"snapshots",selectedId:"selectedId",collapsed:"collapsed",loading:"loading"},outputs:{snapshotSelected:"snapshotSelected",toggleCollapse:"toggleCollapse"},standalone:!1,decls:10,vars:6,consts:[[1,"snapshot-sidebar"],[1,"sidebar-content"],[1,"sidebar-header"],[1,"snapshot-count"],["class","loading-state",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","snapshot-list",4,"ngIf"],[1,"loading-state"],["diameter","32"],[1,"empty-state"],[1,"snapshot-list"],[3,"snapshot","selected","clicked",4,"ngFor","ngForOf"],[3,"clicked","snapshot","selected"]],template:function(e,i){e&1&&(l(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),p(4,"Snapshots"),c(),l(5,"span",3),p(6),c()(),y(7,Nv,4,0,"div",4)(8,$v,5,0,"div",5)(9,Hv,2,1,"div",6),c()()),e&2&&($("collapsed",i.collapsed),g(6),D(i.snapshots.length),g(),f("ngIf",i.loading),g(),f("ngIf",!i.loading&&i.snapshots.length===0),g(),f("ngIf",!i.loading&&i.snapshots.length>0))},dependencies:[Q,N,W,nt,rh],styles:[".snapshot-sidebar[_ngcontent-%COMP%]{width:320px;min-width:320px;height:100%;background-color:#e5f5e0;border-left:1px solid #e0e0e0;display:flex;flex-direction:column;position:relative;transition:width .3s ease,min-width .3s ease}.snapshot-sidebar.collapsed[_ngcontent-%COMP%]{width:48px;min-width:48px}.snapshot-sidebar.collapsed[_ngcontent-%COMP%]   .collapse-toggle[_ngcontent-%COMP%]{position:static;margin:8px auto}.collapse-toggle[_ngcontent-%COMP%]{position:absolute;top:8px;left:-20px;z-index:10;background-color:#fff;border:1px solid #e0e0e0;box-shadow:0 2px 4px #0000001a}.collapse-toggle[_ngcontent-%COMP%]:hover{background-color:#f5f5f5}.sidebar-content[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%;overflow:hidden}.sidebar-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px;border-bottom:1px solid #e0e0e0;background-color:#e5f5e0}.sidebar-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:16px;font-weight:500;color:#333}.sidebar-header[_ngcontent-%COMP%]   .snapshot-count[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#1976d2;padding:2px 8px;border-radius:12px;font-size:12px;font-weight:500}.loading-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px;color:#666}.loading-state[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{margin-top:12px;font-size:14px}.empty-state[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:32px;color:#999}.empty-state[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:48px;width:48px;height:48px;margin-bottom:12px}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;font-size:14px}.snapshot-list[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:8px;display:flex;flex-direction:column;gap:8px}@media (max-width: 1024px){.snapshot-sidebar[_ngcontent-%COMP%]{width:280px;min-width:280px}.snapshot-sidebar.collapsed[_ngcontent-%COMP%]{width:48px;min-width:48px}}"]})}}return n})();var _D=(()=>{class n{static{this.\u0275fac=function(e){return new(e||n)}}static{this.\u0275mod=fe({type:n})}static{this.\u0275inj=he({imports:[Cn,vn,On,eh,md,oh,ta,xn,Pn,fi,ui,Qo,Mn,pd,bn,di,pi,Md,Ed,Ko,ea,Zo,Fd,bd,wi,vd,ia,fd,xl]})}}return n})();ol(nr,[N,Z,at,W,nt,jt,Xe,qe,Ze,tr,ah,sh],[Vt]);export{_D as LandingAIModule};
